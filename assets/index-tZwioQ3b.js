(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const ae of document.querySelectorAll('link[rel="modulepreload"]'))b(ae);new MutationObserver(ae=>{for(const ce of ae)if(ce.type==="childList")for(const P of ce.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&b(P)}).observe(document,{childList:!0,subtree:!0});function ee(ae){const ce={};return ae.integrity&&(ce.integrity=ae.integrity),ae.referrerPolicy&&(ce.referrerPolicy=ae.referrerPolicy),ae.crossOrigin==="use-credentials"?ce.credentials="include":ae.crossOrigin==="anonymous"?ce.credentials="omit":ce.credentials="same-origin",ce}function b(ae){if(ae.ep)return;ae.ep=!0;const ce=ee(ae);fetch(ae.href,ce)}})();function S0(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}var Zr={exports:{}},pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function C0(){if(Xp)return pc;Xp=1;var k=Symbol.for("react.transitional.element"),E=Symbol.for("react.fragment");function ee(b,ae,ce){var P=null;if(ce!==void 0&&(P=""+ce),ae.key!==void 0&&(P=""+ae.key),"key"in ae){ce={};for(var je in ae)je!=="key"&&(ce[je]=ae[je])}else ce=ae;return ae=ce.ref,{$$typeof:k,type:b,key:P,ref:ae!==void 0?ae:null,props:ce}}return pc.Fragment=E,pc.jsx=ee,pc.jsxs=ee,pc}var Vp;function w0(){return Vp||(Vp=1,Zr.exports=C0()),Zr.exports}var u=w0(),Ir={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gp;function T0(){if(Gp)return Qe;Gp=1;var k=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),P=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),O=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),Z=Symbol.iterator;function Je(w){return w===null||typeof w!="object"?null:(w=Z&&w[Z]||w["@@iterator"],typeof w=="function"?w:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,ue={};function W(w,K,de){this.props=w,this.context=K,this.refs=ue,this.updater=de||Q}W.prototype.isReactComponent={},W.prototype.setState=function(w,K){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,K,"setState")},W.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function xe(){}xe.prototype=W.prototype;function ie(w,K,de){this.props=w,this.context=K,this.refs=ue,this.updater=de||Q}var ke=ie.prototype=new xe;ke.constructor=ie,ne(ke,W.prototype),ke.isPureReactComponent=!0;var Pe=Array.isArray;function pe(){}var Ee={H:null,A:null,T:null,S:null},jt=Object.prototype.hasOwnProperty;function fe(w,K,de){var ve=de.ref;return{$$typeof:k,type:w,key:K,ref:ve!==void 0?ve:null,props:de}}function Se(w,K){return fe(w.type,K,w.props)}function Oe(w){return typeof w=="object"&&w!==null&&w.$$typeof===k}function Me(w){var K={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(de){return K[de]})}var Ze=/\/+/g;function it(w,K){return typeof w=="object"&&w!==null&&w.key!=null?Me(""+w.key):K.toString(36)}function Gt(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(pe,pe):(w.status="pending",w.then(function(K){w.status==="pending"&&(w.status="fulfilled",w.value=K)},function(K){w.status==="pending"&&(w.status="rejected",w.reason=K)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function B(w,K,de,ve,Ye){var et=typeof w;(et==="undefined"||et==="boolean")&&(w=null);var rt=!1;if(w===null)rt=!0;else switch(et){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(w.$$typeof){case k:case E:rt=!0;break;case Te:return rt=w._init,B(rt(w._payload),K,de,ve,Ye)}}if(rt)return Ye=Ye(w),rt=ve===""?"."+it(w,0):ve,Pe(Ye)?(de="",rt!=null&&(de=rt.replace(Ze,"$&/")+"/"),B(Ye,K,de,"",function(ia){return ia})):Ye!=null&&(Oe(Ye)&&(Ye=Se(Ye,de+(Ye.key==null||w&&w.key===Ye.key?"":(""+Ye.key).replace(Ze,"$&/")+"/")+rt)),K.push(Ye)),1;rt=0;var vn=ve===""?".":ve+":";if(Pe(w))for(var Kt=0;Kt<w.length;Kt++)ve=w[Kt],et=vn+it(ve,Kt),rt+=B(ve,K,de,et,Ye);else if(Kt=Je(w),typeof Kt=="function")for(w=Kt.call(w),Kt=0;!(ve=w.next()).done;)ve=ve.value,et=vn+it(ve,Kt++),rt+=B(ve,K,de,et,Ye);else if(et==="object"){if(typeof w.then=="function")return B(Gt(w),K,de,ve,Ye);throw K=String(w),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return rt}function oe(w,K,de){if(w==null)return w;var ve=[],Ye=0;return B(w,ve,"","",function(et){return K.call(de,et,Ye++)}),ve}function Be(w){if(w._status===-1){var K=w._result;K=K(),K.then(function(de){(w._status===0||w._status===-1)&&(w._status=1,w._result=de)},function(de){(w._status===0||w._status===-1)&&(w._status=2,w._result=de)}),w._status===-1&&(w._status=0,w._result=K)}if(w._status===1)return w._result.default;throw w._result}var mt=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},Et={map:oe,forEach:function(w,K,de){oe(w,function(){K.apply(this,arguments)},de)},count:function(w){var K=0;return oe(w,function(){K++}),K},toArray:function(w){return oe(w,function(K){return K})||[]},only:function(w){if(!Oe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Qe.Activity=x,Qe.Children=Et,Qe.Component=W,Qe.Fragment=ee,Qe.Profiler=ae,Qe.PureComponent=ie,Qe.StrictMode=b,Qe.Suspense=se,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ee,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(w){return Ee.H.useMemoCache(w)}},Qe.cache=function(w){return function(){return w.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(w,K,de){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var ve=ne({},w.props),Ye=w.key;if(K!=null)for(et in K.key!==void 0&&(Ye=""+K.key),K)!jt.call(K,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&K.ref===void 0||(ve[et]=K[et]);var et=arguments.length-2;if(et===1)ve.children=de;else if(1<et){for(var rt=Array(et),vn=0;vn<et;vn++)rt[vn]=arguments[vn+2];ve.children=rt}return fe(w.type,Ye,ve)},Qe.createContext=function(w){return w={$$typeof:P,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:ce,_context:w},w},Qe.createElement=function(w,K,de){var ve,Ye={},et=null;if(K!=null)for(ve in K.key!==void 0&&(et=""+K.key),K)jt.call(K,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Ye[ve]=K[ve]);var rt=arguments.length-2;if(rt===1)Ye.children=de;else if(1<rt){for(var vn=Array(rt),Kt=0;Kt<rt;Kt++)vn[Kt]=arguments[Kt+2];Ye.children=vn}if(w&&w.defaultProps)for(ve in rt=w.defaultProps,rt)Ye[ve]===void 0&&(Ye[ve]=rt[ve]);return fe(w,et,Ye)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(w){return{$$typeof:je,render:w}},Qe.isValidElement=Oe,Qe.lazy=function(w){return{$$typeof:Te,_payload:{_status:-1,_result:w},_init:Be}},Qe.memo=function(w,K){return{$$typeof:O,type:w,compare:K===void 0?null:K}},Qe.startTransition=function(w){var K=Ee.T,de={};Ee.T=de;try{var ve=w(),Ye=Ee.S;Ye!==null&&Ye(de,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(pe,mt)}catch(et){mt(et)}finally{K!==null&&de.types!==null&&(K.types=de.types),Ee.T=K}},Qe.unstable_useCacheRefresh=function(){return Ee.H.useCacheRefresh()},Qe.use=function(w){return Ee.H.use(w)},Qe.useActionState=function(w,K,de){return Ee.H.useActionState(w,K,de)},Qe.useCallback=function(w,K){return Ee.H.useCallback(w,K)},Qe.useContext=function(w){return Ee.H.useContext(w)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(w,K){return Ee.H.useDeferredValue(w,K)},Qe.useEffect=function(w,K){return Ee.H.useEffect(w,K)},Qe.useEffectEvent=function(w){return Ee.H.useEffectEvent(w)},Qe.useId=function(){return Ee.H.useId()},Qe.useImperativeHandle=function(w,K,de){return Ee.H.useImperativeHandle(w,K,de)},Qe.useInsertionEffect=function(w,K){return Ee.H.useInsertionEffect(w,K)},Qe.useLayoutEffect=function(w,K){return Ee.H.useLayoutEffect(w,K)},Qe.useMemo=function(w,K){return Ee.H.useMemo(w,K)},Qe.useOptimistic=function(w,K){return Ee.H.useOptimistic(w,K)},Qe.useReducer=function(w,K,de){return Ee.H.useReducer(w,K,de)},Qe.useRef=function(w){return Ee.H.useRef(w)},Qe.useState=function(w){return Ee.H.useState(w)},Qe.useSyncExternalStore=function(w,K,de){return Ee.H.useSyncExternalStore(w,K,de)},Qe.useTransition=function(){return Ee.H.useTransition()},Qe.version="19.2.0",Qe}var qp;function Jr(){return qp||(qp=1,Ir.exports=T0()),Ir.exports}var C=Jr();const ot=S0(C);var Qr={exports:{}},hc={},Kr={exports:{}},$r={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function z0(){return Zp||(Zp=1,(function(k){function E(B,oe){var Be=B.length;B.push(oe);e:for(;0<Be;){var mt=Be-1>>>1,Et=B[mt];if(0<ae(Et,oe))B[mt]=oe,B[Be]=Et,Be=mt;else break e}}function ee(B){return B.length===0?null:B[0]}function b(B){if(B.length===0)return null;var oe=B[0],Be=B.pop();if(Be!==oe){B[0]=Be;e:for(var mt=0,Et=B.length,w=Et>>>1;mt<w;){var K=2*(mt+1)-1,de=B[K],ve=K+1,Ye=B[ve];if(0>ae(de,Be))ve<Et&&0>ae(Ye,de)?(B[mt]=Ye,B[ve]=Be,mt=ve):(B[mt]=de,B[K]=Be,mt=K);else if(ve<Et&&0>ae(Ye,Be))B[mt]=Ye,B[ve]=Be,mt=ve;else break e}}return oe}function ae(B,oe){var Be=B.sortIndex-oe.sortIndex;return Be!==0?Be:B.id-oe.id}if(k.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ce=performance;k.unstable_now=function(){return ce.now()}}else{var P=Date,je=P.now();k.unstable_now=function(){return P.now()-je}}var se=[],O=[],Te=1,x=null,Z=3,Je=!1,Q=!1,ne=!1,ue=!1,W=typeof setTimeout=="function"?setTimeout:null,xe=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function ke(B){for(var oe=ee(O);oe!==null;){if(oe.callback===null)b(O);else if(oe.startTime<=B)b(O),oe.sortIndex=oe.expirationTime,E(se,oe);else break;oe=ee(O)}}function Pe(B){if(ne=!1,ke(B),!Q)if(ee(se)!==null)Q=!0,pe||(pe=!0,Me());else{var oe=ee(O);oe!==null&&Gt(Pe,oe.startTime-B)}}var pe=!1,Ee=-1,jt=5,fe=-1;function Se(){return ue?!0:!(k.unstable_now()-fe<jt)}function Oe(){if(ue=!1,pe){var B=k.unstable_now();fe=B;var oe=!0;try{e:{Q=!1,ne&&(ne=!1,xe(Ee),Ee=-1),Je=!0;var Be=Z;try{t:{for(ke(B),x=ee(se);x!==null&&!(x.expirationTime>B&&Se());){var mt=x.callback;if(typeof mt=="function"){x.callback=null,Z=x.priorityLevel;var Et=mt(x.expirationTime<=B);if(B=k.unstable_now(),typeof Et=="function"){x.callback=Et,ke(B),oe=!0;break t}x===ee(se)&&b(se),ke(B)}else b(se);x=ee(se)}if(x!==null)oe=!0;else{var w=ee(O);w!==null&&Gt(Pe,w.startTime-B),oe=!1}}break e}finally{x=null,Z=Be,Je=!1}oe=void 0}}finally{oe?Me():pe=!1}}}var Me;if(typeof ie=="function")Me=function(){ie(Oe)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,it=Ze.port2;Ze.port1.onmessage=Oe,Me=function(){it.postMessage(null)}}else Me=function(){W(Oe,0)};function Gt(B,oe){Ee=W(function(){B(k.unstable_now())},oe)}k.unstable_IdlePriority=5,k.unstable_ImmediatePriority=1,k.unstable_LowPriority=4,k.unstable_NormalPriority=3,k.unstable_Profiling=null,k.unstable_UserBlockingPriority=2,k.unstable_cancelCallback=function(B){B.callback=null},k.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jt=0<B?Math.floor(1e3/B):5},k.unstable_getCurrentPriorityLevel=function(){return Z},k.unstable_next=function(B){switch(Z){case 1:case 2:case 3:var oe=3;break;default:oe=Z}var Be=Z;Z=oe;try{return B()}finally{Z=Be}},k.unstable_requestPaint=function(){ue=!0},k.unstable_runWithPriority=function(B,oe){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Be=Z;Z=B;try{return oe()}finally{Z=Be}},k.unstable_scheduleCallback=function(B,oe,Be){var mt=k.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?mt+Be:mt):Be=mt,B){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=Be+Et,B={id:Te++,callback:oe,priorityLevel:B,startTime:Be,expirationTime:Et,sortIndex:-1},Be>mt?(B.sortIndex=Be,E(O,B),ee(se)===null&&B===ee(O)&&(ne?(xe(Ee),Ee=-1):ne=!0,Gt(Pe,Be-mt))):(B.sortIndex=Et,E(se,B),Q||Je||(Q=!0,pe||(pe=!0,Me()))),B},k.unstable_shouldYield=Se,k.unstable_wrapCallback=function(B){var oe=Z;return function(){var Be=Z;Z=oe;try{return B.apply(this,arguments)}finally{Z=Be}}}})($r)),$r}var Ip;function E0(){return Ip||(Ip=1,Kr.exports=z0()),Kr.exports}var Fr={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function M0(){if(Qp)return Vn;Qp=1;var k=Jr();function E(se){var O="https://react.dev/errors/"+se;if(1<arguments.length){O+="?args[]="+encodeURIComponent(arguments[1]);for(var Te=2;Te<arguments.length;Te++)O+="&args[]="+encodeURIComponent(arguments[Te])}return"Minified React error #"+se+"; visit "+O+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ee(){}var b={d:{f:ee,r:function(){throw Error(E(522))},D:ee,C:ee,L:ee,m:ee,X:ee,S:ee,M:ee},p:0,findDOMNode:null},ae=Symbol.for("react.portal");function ce(se,O,Te){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:x==null?null:""+x,children:se,containerInfo:O,implementation:Te}}var P=k.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function je(se,O){if(se==="font")return"";if(typeof O=="string")return O==="use-credentials"?O:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,Vn.createPortal=function(se,O){var Te=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O||O.nodeType!==1&&O.nodeType!==9&&O.nodeType!==11)throw Error(E(299));return ce(se,O,null,Te)},Vn.flushSync=function(se){var O=P.T,Te=b.p;try{if(P.T=null,b.p=2,se)return se()}finally{P.T=O,b.p=Te,b.d.f()}},Vn.preconnect=function(se,O){typeof se=="string"&&(O?(O=O.crossOrigin,O=typeof O=="string"?O==="use-credentials"?O:"":void 0):O=null,b.d.C(se,O))},Vn.prefetchDNS=function(se){typeof se=="string"&&b.d.D(se)},Vn.preinit=function(se,O){if(typeof se=="string"&&O&&typeof O.as=="string"){var Te=O.as,x=je(Te,O.crossOrigin),Z=typeof O.integrity=="string"?O.integrity:void 0,Je=typeof O.fetchPriority=="string"?O.fetchPriority:void 0;Te==="style"?b.d.S(se,typeof O.precedence=="string"?O.precedence:void 0,{crossOrigin:x,integrity:Z,fetchPriority:Je}):Te==="script"&&b.d.X(se,{crossOrigin:x,integrity:Z,fetchPriority:Je,nonce:typeof O.nonce=="string"?O.nonce:void 0})}},Vn.preinitModule=function(se,O){if(typeof se=="string")if(typeof O=="object"&&O!==null){if(O.as==null||O.as==="script"){var Te=je(O.as,O.crossOrigin);b.d.M(se,{crossOrigin:Te,integrity:typeof O.integrity=="string"?O.integrity:void 0,nonce:typeof O.nonce=="string"?O.nonce:void 0})}}else O==null&&b.d.M(se)},Vn.preload=function(se,O){if(typeof se=="string"&&typeof O=="object"&&O!==null&&typeof O.as=="string"){var Te=O.as,x=je(Te,O.crossOrigin);b.d.L(se,Te,{crossOrigin:x,integrity:typeof O.integrity=="string"?O.integrity:void 0,nonce:typeof O.nonce=="string"?O.nonce:void 0,type:typeof O.type=="string"?O.type:void 0,fetchPriority:typeof O.fetchPriority=="string"?O.fetchPriority:void 0,referrerPolicy:typeof O.referrerPolicy=="string"?O.referrerPolicy:void 0,imageSrcSet:typeof O.imageSrcSet=="string"?O.imageSrcSet:void 0,imageSizes:typeof O.imageSizes=="string"?O.imageSizes:void 0,media:typeof O.media=="string"?O.media:void 0})}},Vn.preloadModule=function(se,O){if(typeof se=="string")if(O){var Te=je(O.as,O.crossOrigin);b.d.m(se,{as:typeof O.as=="string"&&O.as!=="script"?O.as:void 0,crossOrigin:Te,integrity:typeof O.integrity=="string"?O.integrity:void 0})}else b.d.m(se)},Vn.requestFormReset=function(se){b.d.r(se)},Vn.unstable_batchedUpdates=function(se,O){return se(O)},Vn.useFormState=function(se,O,Te){return P.H.useFormState(se,O,Te)},Vn.useFormStatus=function(){return P.H.useHostTransitionStatus()},Vn.version="19.2.0",Vn}var Kp;function A0(){if(Kp)return Fr.exports;Kp=1;function k(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k)}catch(E){console.error(E)}}return k(),Fr.exports=M0(),Fr.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function k0(){if($p)return hc;$p=1;var k=E0(),E=Jr(),ee=A0();function b(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ae(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ce(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function P(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function je(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function se(e){if(ce(e)!==e)throw Error(b(188))}function O(e){var t=e.alternate;if(!t){if(t=ce(e),t===null)throw Error(b(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return se(o),e;if(i===l)return se(o),t;i=i.sibling}throw Error(b(188))}if(n.return!==l.return)n=o,l=i;else{for(var c=!1,p=o.child;p;){if(p===n){c=!0,n=o,l=i;break}if(p===l){c=!0,l=o,n=i;break}p=p.sibling}if(!c){for(p=i.child;p;){if(p===n){c=!0,n=i,l=o;break}if(p===l){c=!0,l=i,n=o;break}p=p.sibling}if(!c)throw Error(b(189))}}if(n.alternate!==l)throw Error(b(190))}if(n.tag!==3)throw Error(b(188));return n.stateNode.current===n?e:t}function Te(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Te(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,Z=Symbol.for("react.element"),Je=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),ue=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),xe=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),jt=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),Se=Symbol.for("react.memo_cache_sentinel"),Oe=Symbol.iterator;function Me(e){return e===null||typeof e!="object"?null:(e=Oe&&e[Oe]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Symbol.for("react.client.reference");function it(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ze?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ne:return"Fragment";case W:return"Profiler";case ue:return"StrictMode";case Pe:return"Suspense";case pe:return"SuspenseList";case fe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Q:return"Portal";case ie:return e.displayName||"Context";case xe:return(e._context.displayName||"Context")+".Consumer";case ke:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ee:return t=e.displayName||null,t!==null?t:it(e.type)||"Memo";case jt:t=e._payload,e=e._init;try{return it(e(t))}catch{}}return null}var Gt=Array.isArray,B=E.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=ee.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be={pending:!1,data:null,method:null,action:null},mt=[],Et=-1;function w(e){return{current:e}}function K(e){0>Et||(e.current=mt[Et],mt[Et]=null,Et--)}function de(e,t){Et++,mt[Et]=e.current,e.current=t}var ve=w(null),Ye=w(null),et=w(null),rt=w(null);function vn(e,t){switch(de(et,t),de(Ye,e),de(ve,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=rp(t),e=fp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(ve),de(ve,e)}function Kt(){K(ve),K(Ye),K(et)}function ia(e){e.memoizedState!==null&&de(rt,e);var t=ve.current,n=fp(t,e.type);t!==n&&(de(Ye,e),de(ve,n))}function Rt(e){Ye.current===e&&(K(ve),K(Ye)),rt.current===e&&(K(rt),uc._currentValue=Be)}var En,Ue;function Dt(e){if(En===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);En=t&&t[1]||"",Ue=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+En+e+Ue}var sa=!1;function go(e,t){if(!e||sa)return"";sa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(_){var N=_}Reflect.construct(e,[],$)}else{try{$.call()}catch(_){N=_}e.call($.prototype)}}else{try{throw Error()}catch(_){N=_}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(_){if(_&&N&&typeof _.stack=="string")return[_.stack,N.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=l.DetermineComponentFrameRoot(),c=i[0],p=i[1];if(c&&p){var v=c.split(`
`),j=p.split(`
`);for(o=l=0;l<v.length&&!v[l].includes("DetermineComponentFrameRoot");)l++;for(;o<j.length&&!j[o].includes("DetermineComponentFrameRoot");)o++;if(l===v.length||o===j.length)for(l=v.length-1,o=j.length-1;1<=l&&0<=o&&v[l]!==j[o];)o--;for(;1<=l&&0<=o;l--,o--)if(v[l]!==j[o]){if(l!==1||o!==1)do if(l--,o--,0>o||v[l]!==j[o]){var H=`
`+v[l].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=l&&0<=o);break}}}finally{sa=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Dt(n):""}function tn(e,t){switch(e.tag){case 26:case 27:case 5:return Dt(e.type);case 16:return Dt("Lazy");case 13:return e.child!==t&&t!==null?Dt("Suspense Fallback"):Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 15:return go(e.type,!1);case 11:return go(e.type.render,!1);case 1:return go(e.type,!0);case 31:return Dt("Activity");default:return""}}function Rn(e){try{var t="",n=null;do t+=tn(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ve=Object.prototype.hasOwnProperty,bo=k.unstable_scheduleCallback,Hi=k.unstable_cancelCallback,mc=k.unstable_shouldYield,Yi=k.unstable_requestPaint,Nn=k.unstable_now,dl=k.unstable_getCurrentPriorityLevel,xo=k.unstable_ImmediatePriority,vo=k.unstable_UserBlockingPriority,So=k.unstable_NormalPriority,Gl=k.unstable_LowPriority,Xi=k.unstable_IdlePriority,vs=k.log,Vi=k.unstable_setDisableYieldValue,st=null,Bt=null;function ql(e){if(typeof vs=="function"&&Vi(e),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(st,e)}catch{}}var Gn=Math.clz32?Math.clz32:Xe,yc=Math.log,gc=Math.LN2;function Xe(e){return e>>>=0,e===0?32:31-(yc(e)/gc|0)|0}var Ml=256,Ke=262144,qn=4194304;function be(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Zl(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,i=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var p=l&134217727;return p!==0?(l=p&~i,l!==0?o=be(l):(c&=p,c!==0?o=be(c):n||(n=p&~e,n!==0&&(o=be(n))))):(p=l&~i,p!==0?o=be(p):c!==0?o=be(c):n||(n=l&~e,n!==0&&(o=be(n)))),o===0?0:t!==0&&t!==o&&(t&i)===0&&(i=o&-o,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:o}function Co(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ea(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ca(){var e=qn;return qn<<=1,(qn&62914560)===0&&(qn=4194304),e}function Ma(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wo(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ss(e,t,n,l,o,i){var c=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var p=e.entanglements,v=e.expirationTimes,j=e.hiddenUpdates;for(n=c&~n;0<n;){var H=31-Gn(n),$=1<<H;p[H]=0,v[H]=-1;var N=j[H];if(N!==null)for(j[H]=null,H=0;H<N.length;H++){var _=N[H];_!==null&&(_.lane&=-536870913)}n&=~$}l!==0&&Cs(e,l,0),i!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=i&~(c&~t))}function Cs(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Gn(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function ws(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Gn(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function pl(e,t){var n=t&-t;return n=(n&42)!==0?1:To(n),(n&(e.suspendedLanes|t))!==0?0:n}function To(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Mn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gi(){var e=oe.p;return e!==0?e:(e=window.event,e===void 0?32:Op(e.type))}function Aa(e,t){var n=oe.p;try{return oe.p=e,t()}finally{oe.p=n}}var Il=Math.random().toString(36).slice(2),vt="__reactFiber$"+Il,An="__reactProps$"+Il,Ge="__reactContainer$"+Il,ci="__reactEvents$"+Il,On="__reactListeners$"+Il,qi="__reactHandles$"+Il,$t="__reactResources$"+Il,ka="__reactMarker$"+Il;function ua(e){delete e[vt],delete e[An],delete e[ci],delete e[On],delete e[qi]}function hl(e){var t=e[vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ge]||n[vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bp(e);e!==null;){if(n=e[vt])return n;e=bp(e)}return t}e=n,n=e.parentNode}return null}function Da(e){if(e=e[vt]||e[Ge]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ui(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(b(33))}function ri(e){var t=e[$t];return t||(t=e[$t]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function dn(e){e[ka]=!0}var Ts=new Set,bc={};function ra(e,t){zo(e,t),zo(e+"Capture",t)}function zo(e,t){for(bc[e]=t,e=0;e<t.length;e++)Ts.add(t[e])}var Hn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ja={},tt={};function kn(e){return Ve.call(tt,e)?!0:Ve.call(ja,e)?!1:Hn.test(e)?tt[e]=!0:(ja[e]=!0,!1)}function nt(e,t,n){if(kn(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function sn(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Le(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function St(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cn(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,i=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(c){n=""+c,i.call(this,c)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function at(e){if(!e._valueTracker){var t=ct(e)?"checked":"value";e._valueTracker=cn(e,t,""+e[t])}}function un(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=ct(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Ce(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _n=/[\n"\\]/g;function ft(e){return e.replace(_n,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Al(e,t,n,l,o,i,c,p){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+St(t)):e.value!==""+St(t)&&(e.value=""+St(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?fi(e,c,St(t)):n!=null?fi(e,c,St(n)):l!=null&&e.removeAttribute("value"),o==null&&i!=null&&(e.defaultChecked=!!i),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+St(p):e.removeAttribute("name")}function ml(e,t,n,l,o,i,c,p){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){at(e);return}n=n!=null?""+St(n):"",t=t!=null?""+St(t):n,p||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=p?e.checked:!!l,e.defaultChecked=!!l,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c),at(e)}function fi(e,t,n){t==="number"&&Ce(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ql(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+St(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function zs(e,t,n){if(t!=null&&(t=""+St(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+St(n):""}function di(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(b(92));if(Gt(l)){if(1<l.length)throw Error(b(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=St(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),at(e)}function Ra(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eo(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Zn.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Zi(e,t,n){if(t!=null&&typeof t!="object")throw Error(b(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&Eo(e,o,l)}else for(var i in t)t.hasOwnProperty(i)&&Eo(e,i,t[i])}function pi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hi(e){return vc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function kl(){}var Ii=null;function Na(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Dl=null,Oa=null;function _a(e){var t=Da(e);if(t&&(e=t.stateNode)){var n=e[An]||null;e:switch(e=t.stateNode,t.type){case"input":if(Al(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[An]||null;if(!o)throw Error(b(90));Al(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&un(l)}break e;case"textarea":zs(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ql(e,!!n.multiple,t,!1)}}}var Mo=!1;function mi(e,t,n){if(Mo)return e(t,n);Mo=!0;try{var l=e(t);return l}finally{if(Mo=!1,(Dl!==null||Oa!==null)&&(Jc(),Dl&&(t=Dl,e=Oa,Oa=Dl=null,_a(t),e)))for(t=0;t<e.length;t++)_a(e[t])}}function jl(e,t){var n=e.stateNode;if(n===null)return null;var l=n[An]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(b(231,t,typeof n));return n}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ba=!1;if(yl)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Ba=!1}var Pn=null,Ao=null,gl=null;function Sc(){if(gl)return gl;var e,t=Ao,n=t.length,l,o="value"in Pn?Pn.value:Pn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var c=n-e;for(l=1;l<=c&&t[n-l]===o[i-l];l++);return gl=o.slice(e,1<l?1-l:void 0)}function $l(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function De(){return!0}function fa(){return!1}function en(e){function t(n,l,o,i,c){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=i,this.target=c,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(i):i[p]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?De:fa,this.isPropagationStopped=fa,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=De)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=De)},persist:function(){},isPersistent:De}),t}var Rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=en(Rl),el=x({},Rl,{view:0,detail:0}),Cu=en(el),Ua,yi,La,ko=x({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ya,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==La&&(La&&e.type==="mousemove"?(Ua=e.screenX-La.screenX,yi=e.screenY-La.screenY):yi=Ua=0,La=e),Ua)},movementY:function(e){return"movementY"in e?e.movementY:yi}}),Do=en(ko),Cc=x({},ko,{dataTransfer:0}),qt=en(Cc),gi=x({},el,{relatedTarget:0}),Es=en(gi),Zt=x({},Rl,{animationName:0,elapsedTime:0,pseudoElement:0}),bi=en(Zt),Qi=x({},Rl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tl=en(Qi),Fl=x({},Rl,{data:0}),pa=en(Fl),Ha={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ms={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ma(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ms[e])?!!t[e]:!1}function ya(){return ma}var Yt=x({},el,{key:function(e){if(e.key){var t=Ha[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$l(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ha[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ya,charCode:function(e){return e.type==="keypress"?$l(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$l(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nl=en(Yt),As=x({},ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ya=en(As),nl=x({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ya}),xi=en(nl),vi=x({},Rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),pn=en(vi),Ol=x({},ko,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wu=en(Ol),Si=x({},Rl,{newState:0,oldState:0}),wc=en(Si),Tc=[9,13,27,32],Ci=yl&&"CompositionEvent"in window,jo=null;yl&&"documentMode"in document&&(jo=document.documentMode);var zc=yl&&"TextEvent"in window&&!jo,ks=yl&&(!Ci||jo&&8<jo&&11>=jo),wi=" ",Ro=!1;function Ti(e,t){switch(e){case"keyup":return Tc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function No(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bl=!1;function Ec(e,t){switch(e){case"compositionend":return No(t);case"keypress":return t.which!==32?null:(Ro=!0,wi);case"textInput":return e=t.data,e===wi&&Ro?null:e;default:return null}}function Oo(e,t){if(bl)return e==="compositionend"||!Ci&&Ti(e,t)?(e=Sc(),gl=Ao=Pn=null,bl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ks&&t.locale!=="ko"?null:t.data;default:return null}}var Mc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mc[e.type]:t==="textarea"}function Ds(e,t,n,l){Dl?Oa?Oa.push(l):Oa=[l]:Dl=l,t=ou(t,"onChange"),0<t.length&&(n=new da("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Wl=null,_o=null;function zi(e){ap(e,0)}function Ei(e){var t=ui(e);if(un(t))return e}function Bo(e,t){if(e==="change")return t}var Ki=!1;if(yl){var Va;if(yl){var Mi="oninput"in document;if(!Mi){var Uo=document.createElement("div");Uo.setAttribute("oninput","return;"),Mi=typeof Uo.oninput=="function"}Va=Mi}else Va=!1;Ki=Va&&(!document.documentMode||9<document.documentMode)}function js(){Wl&&(Wl.detachEvent("onpropertychange",Ct),_o=Wl=null)}function Ct(e){if(e.propertyName==="value"&&Ei(_o)){var t=[];Ds(t,_o,e,Na(e)),mi(zi,t)}}function xl(e,t,n){e==="focusin"?(js(),Wl=t,_o=n,Wl.attachEvent("onpropertychange",Ct)):e==="focusout"&&js()}function Xt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ei(_o)}function Ga(e,t){if(e==="click")return Ei(t)}function Tu(e,t){if(e==="input"||e==="change")return Ei(t)}function Rs(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var In=typeof Object.is=="function"?Object.is:Rs;function Jl(e,t){if(In(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!Ve.call(t,o)||!In(e[o],t[o]))return!1}return!0}function Ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ki(e,t){var n=Ai(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ai(n)}}function qa(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qa(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ns(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ce(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ce(e.document)}return t}function Mt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var _l=yl&&"documentMode"in document&&11>=document.documentMode,It=null,Lo=null,Za=null,ga=!1;function Os(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ga||It==null||It!==Ce(l)||(l=It,"selectionStart"in l&&Mt(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Za&&Jl(Za,l)||(Za=l,l=ou(Lo,"onSelect"),0<l.length&&(t=new da("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=It)))}function Sn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ia={animationend:Sn("Animation","AnimationEnd"),animationiteration:Sn("Animation","AnimationIteration"),animationstart:Sn("Animation","AnimationStart"),transitionrun:Sn("Transition","TransitionRun"),transitionstart:Sn("Transition","TransitionStart"),transitioncancel:Sn("Transition","TransitionCancel"),transitionend:Sn("Transition","TransitionEnd")},$i={},Ho={};yl&&(Ho=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Qa(e){if($i[e])return $i[e];if(!Ia[e])return e;var t=Ia[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ho)return $i[e]=t[n];return e}var Di=Qa("animationend"),Pl=Qa("animationiteration"),Fi=Qa("animationstart"),Yo=Qa("transitionrun"),vl=Qa("transitionstart"),_s=Qa("transitioncancel"),Bs=Qa("transitionend"),ji=new Map,Sl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sl.push("scrollEnd");function ll(e,t){ji.set(e,t),ra(t,[e])}var Wi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qn=[],Bl=0,Ji=0;function Ie(){for(var e=Bl,t=Ji=Bl=0;t<e;){var n=Qn[t];Qn[t++]=null;var l=Qn[t];Qn[t++]=null;var o=Qn[t];Qn[t++]=null;var i=Qn[t];if(Qn[t++]=null,l!==null&&o!==null){var c=l.pending;c===null?o.next=o:(o.next=c.next,c.next=o),l.pending=o}i!==0&&Ka(n,o,i)}}function nn(e,t,n,l){Qn[Bl++]=e,Qn[Bl++]=t,Qn[Bl++]=n,Qn[Bl++]=l,Ji|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Xo(e,t,n,l){return nn(e,t,n,l),Ri(e)}function ba(e,t){return nn(e,null,null,t),Ri(e)}function Ka(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,i=e.return;i!==null;)i.childLanes|=n,l=i.alternate,l!==null&&(l.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(o=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,o&&t!==null&&(o=31-Gn(n),e=i.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),i):null}function Ri(e){if(50<nc)throw nc=0,mr=null,Error(b(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Kn={};function Us(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,n,l){return new Us(e,t,n,l)}function Ls(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ea(e,t){var n=e.alternate;return n===null?(n=Yn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ac(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $a(e,t,n,l,o,i){var c=0;if(l=e,typeof e=="function")Ls(e)&&(c=1);else if(typeof e=="string")c=u0(e,n,ve.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case fe:return e=Yn(31,n,t,o),e.elementType=fe,e.lanes=i,e;case ne:return xa(n.children,o,i,t);case ue:c=8,o|=24;break;case W:return e=Yn(12,n,t,o|2),e.elementType=W,e.lanes=i,e;case Pe:return e=Yn(13,n,t,o),e.elementType=Pe,e.lanes=i,e;case pe:return e=Yn(19,n,t,o),e.elementType=pe,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:c=10;break e;case xe:c=9;break e;case ke:c=11;break e;case Ee:c=14;break e;case jt:c=16,l=null;break e}c=29,n=Error(b(130,e===null?"null":typeof e,"")),l=null}return t=Yn(c,n,t,o),t.elementType=e,t.type=l,t.lanes=i,t}function xa(e,t,n,l){return e=Yn(7,e,l,t),e.lanes=n,e}function Hs(e,t,n){return e=Yn(6,e,null,t),e.lanes=n,e}function Ys(e){var t=Yn(18,null,null,0);return t.stateNode=e,t}function Fa(e,t,n){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var kc=new WeakMap;function Cn(e,t){if(typeof e=="object"&&e!==null){var n=kc.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Rn(t)},kc.set(e,t),t)}return{value:e,source:t,stack:Rn(t)}}var Vo=[],va=0,Go=null,qo=0,al=[],$n=0,Sa=null,ol=1,Xn="";function Bn(e,t){Vo[va++]=qo,Vo[va++]=Go,Go=e,qo=t}function Dc(e,t,n){al[$n++]=ol,al[$n++]=Xn,al[$n++]=Sa,Sa=e;var l=ol;e=Xn;var o=32-Gn(l)-1;l&=~(1<<o),n+=1;var i=32-Gn(t)+o;if(30<i){var c=o-o%5;i=(l&(1<<c)-1).toString(32),l>>=c,o-=c,ol=1<<32-Gn(t)+o|n<<o|l,Xn=i+e}else ol=1<<i|n<<o|l,Xn=e}function Pi(e){e.return!==null&&(Bn(e,1),Dc(e,1,0))}function Zo(e){for(;e===Go;)Go=Vo[--va],Vo[va]=null,qo=Vo[--va],Vo[va]=null;for(;e===Sa;)Sa=al[--$n],al[$n]=null,Xn=al[--$n],al[$n]=null,ol=al[--$n],al[$n]=null}function ta(e,t){al[$n++]=ol,al[$n++]=Xn,al[$n++]=Sa,ol=t.id,Xn=t.overflow,Sa=e}var hn=null,wt=null,$e=!1,na=null,Fn=!1,Dn=Error(b(519));function Wn(e){var t=Error(b(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ni(Cn(t,e)),Dn}function es(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[vt]=e,t[An]=l,n){case"dialog":ht("cancel",t),ht("close",t);break;case"iframe":case"object":case"embed":ht("load",t);break;case"video":case"audio":for(n=0;n<ac.length;n++)ht(ac[n],t);break;case"source":ht("error",t);break;case"img":case"image":case"link":ht("error",t),ht("load",t);break;case"details":ht("toggle",t);break;case"input":ht("invalid",t),ml(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ht("invalid",t);break;case"textarea":ht("invalid",t),di(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||cp(t.textContent,n)?(l.popover!=null&&(ht("beforetoggle",t),ht("toggle",t)),l.onScroll!=null&&ht("scroll",t),l.onScrollEnd!=null&&ht("scrollend",t),l.onClick!=null&&(t.onclick=kl),t=!0):t=!1,t||Wn(e,!0)}function ts(e){for(hn=e.return;hn;)switch(hn.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:hn=hn.return}}function Wa(e){if(e!==hn)return!1;if(!$e)return ts(e),$e=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Dr(e.type,e.memoizedProps)),n=!n),n&&wt&&Wn(e),ts(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));wt=gp(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(317));wt=gp(e)}else t===27?(t=wt,ni(e.type)?(e=_r,_r=null,wt=e):wt=t):wt=hn?Xl(e.stateNode.nextSibling):null;return!0}function Ja(){wt=hn=null,$e=!1}function Pa(){var e=na;return e!==null&&(ul===null?ul=e:ul.push.apply(ul,e),na=null),e}function Ni(e){na===null?na=[e]:na.push(e)}var eo=w(null),to=null,Ul=null;function Ll(e,t,n){de(eo,t._currentValue),t._currentValue=n}function la(e){e._currentValue=eo.current,K(eo)}function Xs(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function ns(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var i=o.dependencies;if(i!==null){var c=o.child;i=i.firstContext;e:for(;i!==null;){var p=i;i=o;for(var v=0;v<t.length;v++)if(p.context===t[v]){i.lanes|=n,p=i.alternate,p!==null&&(p.lanes|=n),Xs(i.return,n,e),l||(c=null);break e}i=p.next}}else if(o.tag===18){if(c=o.return,c===null)throw Error(b(341));c.lanes|=n,i=c.alternate,i!==null&&(i.lanes|=n),Xs(c,n,e),c=null}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}}function Ca(e,t,n,l){e=null;for(var o=t,i=!1;o!==null;){if(!i){if((o.flags&524288)!==0)i=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var c=o.alternate;if(c===null)throw Error(b(387));if(c=c.memoizedProps,c!==null){var p=o.type;In(o.pendingProps.value,c.value)||(e!==null?e.push(p):e=[p])}}else if(o===rt.current){if(c=o.alternate,c===null)throw Error(b(387));c.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(uc):e=[uc])}o=o.return}e!==null&&ns(t,e,n,l),t.flags|=262144}function Io(e){for(e=e.firstContext;e!==null;){if(!In(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function no(e){to=e,Ul=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mn(e){return ao(to,e)}function lo(e,t){return to===null&&no(e),ao(e,t)}function ao(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Ul===null){if(e===null)throw Error(b(308));Ul=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ul=Ul.next=t;return n}var ls=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Vs=k.unstable_scheduleCallback,Gs=k.unstable_NormalPriority,ln={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function te(){return{controller:new ls,data:new Map,refCount:0}}function a(e){e.refCount--,e.refCount===0&&Vs(Gs,function(){e.controller.abort()})}var s=null,r=0,d=0,y=null;function m(e,t){if(s===null){var n=s=[];r=0,d=Sr(),y={status:"pending",value:void 0,then:function(l){n.push(l)}}}return r++,t.then(f,f),t}function f(){if(--r===0&&s!==null){y!==null&&(y.status="fulfilled");var e=s;s=null,d=0,y=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function h(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var S=B.S;B.S=function(e,t){Rd=Nn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&m(e,t),S!==null&&S(e,t)};var g=w(null);function U(){var e=g.current;return e!==null?e:Vt.pooledCache}function L(e,t){t===null?de(g,g.current):de(g,t.pool)}function re(){var e=U();return e===null?null:{parent:ln._currentValue,pool:e}}var X=Error(b(460)),V=Error(b(474)),I=Error(b(542)),J={then:function(){}};function he(e){return e=e.status,e==="fulfilled"||e==="rejected"}function me(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(kl,kl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,A(e),e;default:if(typeof t.status=="string")t.then(kl,kl);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(b(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,A(e),e}throw M=t,X}}function R(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(M=n,X):n}}var M=null;function G(){if(M===null)throw Error(b(459));var e=M;return M=null,e}function A(e){if(e===X||e===I)throw Error(b(483))}var Y=null,F=0;function le(e){var t=F;return F+=1,Y===null&&(Y=[]),me(Y,e,t)}function ye(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Re(e,t){throw t.$$typeof===Z?Error(b(525)):(e=Object.prototype.toString.call(t),Error(b(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ge(e){function t(z,T){if(e){var D=z.deletions;D===null?(z.deletions=[T],z.flags|=16):D.push(T)}}function n(z,T){if(!e)return null;for(;T!==null;)t(z,T),T=T.sibling;return null}function l(z){for(var T=new Map;z!==null;)z.key!==null?T.set(z.key,z):T.set(z.index,z),z=z.sibling;return T}function o(z,T){return z=ea(z,T),z.index=0,z.sibling=null,z}function i(z,T,D){return z.index=D,e?(D=z.alternate,D!==null?(D=D.index,D<T?(z.flags|=67108866,T):D):(z.flags|=67108866,T)):(z.flags|=1048576,T)}function c(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function p(z,T,D,q){return T===null||T.tag!==6?(T=Hs(D,z.mode,q),T.return=z,T):(T=o(T,D),T.return=z,T)}function v(z,T,D,q){var Ne=D.type;return Ne===ne?H(z,T,D.props.children,q,D.key):T!==null&&(T.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===jt&&R(Ne)===T.type)?(T=o(T,D.props),ye(T,D),T.return=z,T):(T=$a(D.type,D.key,D.props,null,z.mode,q),ye(T,D),T.return=z,T)}function j(z,T,D,q){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=Fa(D,z.mode,q),T.return=z,T):(T=o(T,D.children||[]),T.return=z,T)}function H(z,T,D,q,Ne){return T===null||T.tag!==7?(T=xa(D,z.mode,q,Ne),T.return=z,T):(T=o(T,D),T.return=z,T)}function $(z,T,D){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Hs(""+T,z.mode,D),T.return=z,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Je:return D=$a(T.type,T.key,T.props,null,z.mode,D),ye(D,T),D.return=z,D;case Q:return T=Fa(T,z.mode,D),T.return=z,T;case jt:return T=R(T),$(z,T,D)}if(Gt(T)||Me(T))return T=xa(T,z.mode,D,null),T.return=z,T;if(typeof T.then=="function")return $(z,le(T),D);if(T.$$typeof===ie)return $(z,lo(z,T),D);Re(z,T)}return null}function N(z,T,D,q){var Ne=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return Ne!==null?null:p(z,T,""+D,q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Je:return D.key===Ne?v(z,T,D,q):null;case Q:return D.key===Ne?j(z,T,D,q):null;case jt:return D=R(D),N(z,T,D,q)}if(Gt(D)||Me(D))return Ne!==null?null:H(z,T,D,q,null);if(typeof D.then=="function")return N(z,T,le(D),q);if(D.$$typeof===ie)return N(z,T,lo(z,D),q);Re(z,D)}return null}function _(z,T,D,q,Ne){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return z=z.get(D)||null,p(T,z,""+q,Ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Je:return z=z.get(q.key===null?D:q.key)||null,v(T,z,q,Ne);case Q:return z=z.get(q.key===null?D:q.key)||null,j(T,z,q,Ne);case jt:return q=R(q),_(z,T,D,q,Ne)}if(Gt(q)||Me(q))return z=z.get(D)||null,H(T,z,q,Ne,null);if(typeof q.then=="function")return _(z,T,D,le(q),Ne);if(q.$$typeof===ie)return _(z,T,D,lo(T,q),Ne);Re(T,q)}return null}function we(z,T,D,q){for(var Ne=null,Tt=null,ze=T,lt=T=0,gt=null;ze!==null&&lt<D.length;lt++){ze.index>lt?(gt=ze,ze=null):gt=ze.sibling;var zt=N(z,ze,D[lt],q);if(zt===null){ze===null&&(ze=gt);break}e&&ze&&zt.alternate===null&&t(z,ze),T=i(zt,T,lt),Tt===null?Ne=zt:Tt.sibling=zt,Tt=zt,ze=gt}if(lt===D.length)return n(z,ze),$e&&Bn(z,lt),Ne;if(ze===null){for(;lt<D.length;lt++)ze=$(z,D[lt],q),ze!==null&&(T=i(ze,T,lt),Tt===null?Ne=ze:Tt.sibling=ze,Tt=ze);return $e&&Bn(z,lt),Ne}for(ze=l(ze);lt<D.length;lt++)gt=_(ze,z,lt,D[lt],q),gt!==null&&(e&&gt.alternate!==null&&ze.delete(gt.key===null?lt:gt.key),T=i(gt,T,lt),Tt===null?Ne=gt:Tt.sibling=gt,Tt=gt);return e&&ze.forEach(function(si){return t(z,si)}),$e&&Bn(z,lt),Ne}function He(z,T,D,q){if(D==null)throw Error(b(151));for(var Ne=null,Tt=null,ze=T,lt=T=0,gt=null,zt=D.next();ze!==null&&!zt.done;lt++,zt=D.next()){ze.index>lt?(gt=ze,ze=null):gt=ze.sibling;var si=N(z,ze,zt.value,q);if(si===null){ze===null&&(ze=gt);break}e&&ze&&si.alternate===null&&t(z,ze),T=i(si,T,lt),Tt===null?Ne=si:Tt.sibling=si,Tt=si,ze=gt}if(zt.done)return n(z,ze),$e&&Bn(z,lt),Ne;if(ze===null){for(;!zt.done;lt++,zt=D.next())zt=$(z,zt.value,q),zt!==null&&(T=i(zt,T,lt),Tt===null?Ne=zt:Tt.sibling=zt,Tt=zt);return $e&&Bn(z,lt),Ne}for(ze=l(ze);!zt.done;lt++,zt=D.next())zt=_(ze,z,lt,zt.value,q),zt!==null&&(e&&zt.alternate!==null&&ze.delete(zt.key===null?lt:zt.key),T=i(zt,T,lt),Tt===null?Ne=zt:Tt.sibling=zt,Tt=zt);return e&&ze.forEach(function(v0){return t(z,v0)}),$e&&Bn(z,lt),Ne}function Ht(z,T,D,q){if(typeof D=="object"&&D!==null&&D.type===ne&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case Je:e:{for(var Ne=D.key;T!==null;){if(T.key===Ne){if(Ne=D.type,Ne===ne){if(T.tag===7){n(z,T.sibling),q=o(T,D.props.children),q.return=z,z=q;break e}}else if(T.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===jt&&R(Ne)===T.type){n(z,T.sibling),q=o(T,D.props),ye(q,D),q.return=z,z=q;break e}n(z,T);break}else t(z,T);T=T.sibling}D.type===ne?(q=xa(D.props.children,z.mode,q,D.key),q.return=z,z=q):(q=$a(D.type,D.key,D.props,null,z.mode,q),ye(q,D),q.return=z,z=q)}return c(z);case Q:e:{for(Ne=D.key;T!==null;){if(T.key===Ne)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){n(z,T.sibling),q=o(T,D.children||[]),q.return=z,z=q;break e}else{n(z,T);break}else t(z,T);T=T.sibling}q=Fa(D,z.mode,q),q.return=z,z=q}return c(z);case jt:return D=R(D),Ht(z,T,D,q)}if(Gt(D))return we(z,T,D,q);if(Me(D)){if(Ne=Me(D),typeof Ne!="function")throw Error(b(150));return D=Ne.call(D),He(z,T,D,q)}if(typeof D.then=="function")return Ht(z,T,le(D),q);if(D.$$typeof===ie)return Ht(z,T,lo(z,D),q);Re(z,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,T!==null&&T.tag===6?(n(z,T.sibling),q=o(T,D),q.return=z,z=q):(n(z,T),q=Hs(D,z.mode,q),q.return=z,z=q),c(z)):n(z,T)}return function(z,T,D,q){try{F=0;var Ne=Ht(z,T,D,q);return Y=null,Ne}catch(ze){if(ze===X||ze===I)throw ze;var Tt=Yn(29,ze,null,z.mode);return Tt.lanes=q,Tt.return=z,Tt}finally{}}}var _e=ge(!0),Nt=ge(!1),At=!1;function xt(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ae(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fe(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ut(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(kt&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=Ri(e),Ka(e,null,n),t}return nn(e,l,t,n),Ri(e)}function dt(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ws(e,n)}}function bt(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var c={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?o=i=c:i=i.next=c,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Jt=!1;function Qt(){if(Jt){var e=y;if(e!==null)throw e}}function qe(e,t,n,l){Jt=!1;var o=e.updateQueue;At=!1;var i=o.firstBaseUpdate,c=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var v=p,j=v.next;v.next=null,c===null?i=j:c.next=j,c=v;var H=e.alternate;H!==null&&(H=H.updateQueue,p=H.lastBaseUpdate,p!==c&&(p===null?H.firstBaseUpdate=j:p.next=j,H.lastBaseUpdate=v))}if(i!==null){var $=o.baseState;c=0,H=j=v=null,p=i;do{var N=p.lane&-536870913,_=N!==p.lane;if(_?(yt&N)===N:(l&N)===N){N!==0&&N===d&&(Jt=!0),H!==null&&(H=H.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var we=e,He=p;N=t;var Ht=n;switch(He.tag){case 1:if(we=He.payload,typeof we=="function"){$=we.call(Ht,$,N);break e}$=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=He.payload,N=typeof we=="function"?we.call(Ht,$,N):we,N==null)break e;$=x({},$,N);break e;case 2:At=!0}}N=p.callback,N!==null&&(e.flags|=64,_&&(e.flags|=8192),_=o.callbacks,_===null?o.callbacks=[N]:_.push(N))}else _={lane:N,tag:p.tag,payload:p.payload,callback:p.callback,next:null},H===null?(j=H=_,v=$):H=H.next=_,c|=N;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;_=p,p=_.next,_.next=null,o.lastBaseUpdate=_,o.shared.pending=null}}while(!0);H===null&&(v=$),o.baseState=v,o.firstBaseUpdate=j,o.lastBaseUpdate=H,i===null&&(o.shared.lanes=0),Wo|=c,e.lanes=c,e.memoizedState=$}}function Ft(e,t){if(typeof e!="function")throw Error(b(191,e));e.call(t)}function Hl(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ft(n[e],t)}var wn=w(null),jc=w(0);function af(e,t){e=ho,de(jc,e),de(wn,t),ho=e|t.baseLanes}function zu(){de(jc,ho),de(wn,wn.current)}function Eu(){ho=jc.current,K(wn),K(jc)}var Cl=w(null),Yl=null;function Qo(e){var t=e.alternate;de(rn,rn.current&1),de(Cl,e),Yl===null&&(t===null||wn.current!==null||t.memoizedState!==null)&&(Yl=e)}function Mu(e){de(rn,rn.current),de(Cl,e),Yl===null&&(Yl=e)}function of(e){e.tag===22?(de(rn,rn.current),de(Cl,e),Yl===null&&(Yl=e)):Ko()}function Ko(){de(rn,rn.current),de(Cl,Cl.current)}function wl(e){K(Cl),Yl===e&&(Yl=null),K(rn)}var rn=w(0);function Rc(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Nr(n)||Or(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oo=0,We=null,Ut=null,yn=null,Nc=!1,as=!1,Oi=!1,Oc=0,qs=0,os=null,rh=0;function an(){throw Error(b(321))}function Au(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!In(e[n],t[n]))return!1;return!0}function ku(e,t,n,l,o,i){return oo=i,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,B.H=e===null||e.memoizedState===null?Gf:qu,Oi=!1,i=n(l,o),Oi=!1,as&&(i=cf(t,n,l,o)),sf(e),i}function sf(e){B.H=Qs;var t=Ut!==null&&Ut.next!==null;if(oo=0,yn=Ut=We=null,Nc=!1,qs=0,os=null,t)throw Error(b(300));e===null||gn||(e=e.dependencies,e!==null&&Io(e)&&(gn=!0))}function cf(e,t,n,l){We=e;var o=0;do{if(as&&(os=null),qs=0,as=!1,25<=o)throw Error(b(301));if(o+=1,yn=Ut=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}B.H=qf,i=t(n,l)}while(as);return i}function fh(){var e=B.H,t=e.useState()[0];return t=typeof t.then=="function"?Zs(t):t,e=e.useState()[0],(Ut!==null?Ut.memoizedState:null)!==e&&(We.flags|=1024),t}function Du(){var e=Oc!==0;return Oc=0,e}function ju(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ru(e){if(Nc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Nc=!1}oo=0,yn=Ut=We=null,as=!1,qs=Oc=0,os=null}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?We.memoizedState=yn=e:yn=yn.next=e,yn}function fn(){if(Ut===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var t=yn===null?We.memoizedState:yn.next;if(t!==null)yn=t,Ut=e;else{if(e===null)throw We.alternate===null?Error(b(467)):Error(b(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},yn===null?We.memoizedState=yn=e:yn=yn.next=e}return yn}function _c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zs(e){var t=qs;return qs+=1,os===null&&(os=[]),e=me(os,e,t),t=We,(yn===null?t.memoizedState:yn.next)===null&&(t=t.alternate,B.H=t===null||t.memoizedState===null?Gf:qu),e}function Bc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zs(e);if(e.$$typeof===ie)return mn(e)}throw Error(b(438,String(e)))}function Nu(e){var t=null,n=We.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=We.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=_c(),We.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=Se;return t.index++,n}function io(e,t){return typeof t=="function"?t(e):t}function Uc(e){var t=fn();return Ou(t,Ut,e)}function Ou(e,t,n){var l=e.queue;if(l===null)throw Error(b(311));l.lastRenderedReducer=n;var o=e.baseQueue,i=l.pending;if(i!==null){if(o!==null){var c=o.next;o.next=i.next,i.next=c}t.baseQueue=o=i,l.pending=null}if(i=e.baseState,o===null)e.memoizedState=i;else{t=o.next;var p=c=null,v=null,j=t,H=!1;do{var $=j.lane&-536870913;if($!==j.lane?(yt&$)===$:(oo&$)===$){var N=j.revertLane;if(N===0)v!==null&&(v=v.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),$===d&&(H=!0);else if((oo&N)===N){j=j.next,N===d&&(H=!0);continue}else $={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},v===null?(p=v=$,c=i):v=v.next=$,We.lanes|=N,Wo|=N;$=j.action,Oi&&n(i,$),i=j.hasEagerState?j.eagerState:n(i,$)}else N={lane:$,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},v===null?(p=v=N,c=i):v=v.next=N,We.lanes|=$,Wo|=$;j=j.next}while(j!==null&&j!==t);if(v===null?c=i:v.next=p,!In(i,e.memoizedState)&&(gn=!0,H&&(n=y,n!==null)))throw n;e.memoizedState=i,e.baseState=c,e.baseQueue=v,l.lastRenderedState=i}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function _u(e){var t=fn(),n=t.queue;if(n===null)throw Error(b(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var c=o=o.next;do i=e(i,c.action),c=c.next;while(c!==o);In(i,t.memoizedState)||(gn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,l]}function uf(e,t,n){var l=We,o=fn(),i=$e;if(i){if(n===void 0)throw Error(b(407));n=n()}else n=t();var c=!In((Ut||o).memoizedState,n);if(c&&(o.memoizedState=n,gn=!0),o=o.queue,Lu(df.bind(null,l,o,e),[e]),o.getSnapshot!==t||c||yn!==null&&yn.memoizedState.tag&1){if(l.flags|=2048,is(9,{destroy:void 0},ff.bind(null,l,o,n,t),null),Vt===null)throw Error(b(349));i||(oo&127)!==0||rf(l,t,n)}return n}function rf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t=_c(),We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ff(e,t,n,l){t.value=n,t.getSnapshot=l,pf(t)&&hf(e)}function df(e,t,n){return n(function(){pf(t)&&hf(e)})}function pf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!In(e,n)}catch{return!0}}function hf(e){var t=ba(e,2);t!==null&&rl(t,e,2)}function Bu(e){var t=Jn();if(typeof e=="function"){var n=e;if(e=n(),Oi){ql(!0);try{n()}finally{ql(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:e},t}function mf(e,t,n,l){return e.baseState=n,Ou(e,Ut,typeof l=="function"?l:io)}function dh(e,t,n,l,o){if(Yc(e))throw Error(b(485));if(e=t.action,e!==null){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){i.listeners.push(c)}};B.T!==null?n(!0):i.isTransition=!1,l(i),n=t.pending,n===null?(i.next=t.pending=i,yf(t,i)):(i.next=n.next,t.pending=n.next=i)}}function yf(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var i=B.T,c={};B.T=c;try{var p=n(o,l),v=B.S;v!==null&&v(c,p),gf(e,t,p)}catch(j){Uu(e,t,j)}finally{i!==null&&c.types!==null&&(i.types=c.types),B.T=i}}else try{i=n(o,l),gf(e,t,i)}catch(j){Uu(e,t,j)}}function gf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){bf(e,t,l)},function(l){return Uu(e,t,l)}):bf(e,t,n)}function bf(e,t,n){t.status="fulfilled",t.value=n,xf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,yf(e,n)))}function Uu(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,xf(t),t=t.next;while(t!==l)}e.action=null}function xf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function vf(e,t){return t}function Sf(e,t){if($e){var n=Vt.formState;if(n!==null){e:{var l=We;if($e){if(wt){t:{for(var o=wt,i=Fn;o.nodeType!==8;){if(!i){o=null;break t}if(o=Xl(o.nextSibling),o===null){o=null;break t}}i=o.data,o=i==="F!"||i==="F"?o:null}if(o){wt=Xl(o.nextSibling),l=o.data==="F!";break e}}Wn(l)}l=!1}l&&(t=n[0])}}return n=Jn(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vf,lastRenderedState:t},n.queue=l,n=Yf.bind(null,We,l),l.dispatch=n,l=Bu(!1),i=Gu.bind(null,We,!1,l.queue),l=Jn(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=dh.bind(null,We,o,i,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function Cf(e){var t=fn();return wf(t,Ut,e)}function wf(e,t,n){if(t=Ou(e,t,vf)[0],e=Uc(io)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Zs(t)}catch(c){throw c===X?I:c}else l=t;t=fn();var o=t.queue,i=o.dispatch;return n!==t.memoizedState&&(We.flags|=2048,is(9,{destroy:void 0},ph.bind(null,o,n),null)),[l,i,e]}function ph(e,t){e.action=t}function Tf(e){var t=fn(),n=Ut;if(n!==null)return wf(t,n,e);fn(),t=t.memoizedState,n=fn();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function is(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=We.updateQueue,t===null&&(t=_c(),We.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function zf(){return fn().memoizedState}function Lc(e,t,n,l){var o=Jn();We.flags|=e,o.memoizedState=is(1|t,{destroy:void 0},n,l===void 0?null:l)}function Hc(e,t,n,l){var o=fn();l=l===void 0?null:l;var i=o.memoizedState.inst;Ut!==null&&l!==null&&Au(l,Ut.memoizedState.deps)?o.memoizedState=is(t,i,n,l):(We.flags|=e,o.memoizedState=is(1|t,i,n,l))}function Ef(e,t){Lc(8390656,8,e,t)}function Lu(e,t){Hc(2048,8,e,t)}function hh(e){We.flags|=4;var t=We.updateQueue;if(t===null)t=_c(),We.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Mf(e){var t=fn().memoizedState;return hh({ref:t,nextImpl:e}),function(){if((kt&2)!==0)throw Error(b(440));return t.impl.apply(void 0,arguments)}}function Af(e,t){return Hc(4,2,e,t)}function kf(e,t){return Hc(4,4,e,t)}function Df(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jf(e,t,n){n=n!=null?n.concat([e]):null,Hc(4,4,Df.bind(null,t,e),n)}function Hu(){}function Rf(e,t){var n=fn();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&Au(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Nf(e,t){var n=fn();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&Au(t,l[1]))return l[0];if(l=e(),Oi){ql(!0);try{e()}finally{ql(!1)}}return n.memoizedState=[l,t],l}function Yu(e,t,n){return n===void 0||(oo&1073741824)!==0&&(yt&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=Od(),We.lanes|=e,Wo|=e,n)}function Of(e,t,n,l){return In(n,t)?n:wn.current!==null?(e=Yu(e,n,l),In(e,t)||(gn=!0),e):(oo&42)===0||(oo&1073741824)!==0&&(yt&261930)===0?(gn=!0,e.memoizedState=n):(e=Od(),We.lanes|=e,Wo|=e,t)}function _f(e,t,n,l,o){var i=oe.p;oe.p=i!==0&&8>i?i:8;var c=B.T,p={};B.T=p,Gu(e,!1,t,n);try{var v=o(),j=B.S;if(j!==null&&j(p,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var H=h(v,l);Is(e,t,H,El(e))}else Is(e,t,l,El(e))}catch($){Is(e,t,{then:function(){},status:"rejected",reason:$},El())}finally{oe.p=i,c!==null&&p.types!==null&&(c.types=p.types),B.T=c}}function mh(){}function Xu(e,t,n,l){if(e.tag!==5)throw Error(b(476));var o=Bf(e).queue;_f(e,o,t,Be,n===null?mh:function(){return Uf(e),n(l)})}function Bf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Be,baseState:Be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:Be},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Uf(e){var t=Bf(e);t.next===null&&(t=e.alternate.memoizedState),Is(e,t.next.queue,{},El())}function Vu(){return mn(uc)}function Lf(){return fn().memoizedState}function Hf(){return fn().memoizedState}function yh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=El();e=Fe(n);var l=ut(t,e,n);l!==null&&(rl(l,t,n),dt(l,t,n)),t={cache:te()},e.payload=t;return}t=t.return}}function gh(e,t,n){var l=El();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Yc(e)?Xf(t,n):(n=Xo(e,t,n,l),n!==null&&(rl(n,e,l),Vf(n,t,l)))}function Yf(e,t,n){var l=El();Is(e,t,n,l)}function Is(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yc(e))Xf(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var c=t.lastRenderedState,p=i(c,n);if(o.hasEagerState=!0,o.eagerState=p,In(p,c))return nn(e,t,o,0),Vt===null&&Ie(),!1}catch{}finally{}if(n=Xo(e,t,o,l),n!==null)return rl(n,e,l),Vf(n,t,l),!0}return!1}function Gu(e,t,n,l){if(l={lane:2,revertLane:Sr(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yc(e)){if(t)throw Error(b(479))}else t=Xo(e,n,l,2),t!==null&&rl(t,e,2)}function Yc(e){var t=e.alternate;return e===We||t!==null&&t===We}function Xf(e,t){as=Nc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vf(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ws(e,n)}}var Qs={readContext:mn,use:Bc,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};Qs.useEffectEvent=an;var Gf={readContext:mn,use:Bc,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:mn,useEffect:Ef,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Lc(4194308,4,Df.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lc(4194308,4,e,t)},useInsertionEffect:function(e,t){Lc(4,2,e,t)},useMemo:function(e,t){var n=Jn();t=t===void 0?null:t;var l=e();if(Oi){ql(!0);try{e()}finally{ql(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Jn();if(n!==void 0){var o=n(t);if(Oi){ql(!0);try{n(t)}finally{ql(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=gh.bind(null,We,e),[l.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:function(e){e=Bu(e);var t=e.queue,n=Yf.bind(null,We,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Hu,useDeferredValue:function(e,t){var n=Jn();return Yu(n,e,t)},useTransition:function(){var e=Bu(!1);return e=_f.bind(null,We,e.queue,!0,!1),Jn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=We,o=Jn();if($e){if(n===void 0)throw Error(b(407));n=n()}else{if(n=t(),Vt===null)throw Error(b(349));(yt&127)!==0||rf(l,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Ef(df.bind(null,l,i,e),[e]),l.flags|=2048,is(9,{destroy:void 0},ff.bind(null,l,i,n,t),null),n},useId:function(){var e=Jn(),t=Vt.identifierPrefix;if($e){var n=Xn,l=ol;n=(l&~(1<<32-Gn(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Oc++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=rh++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Vu,useFormState:Sf,useActionState:Sf,useOptimistic:function(e){var t=Jn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Gu.bind(null,We,!0,n),n.dispatch=t,[e,t]},useMemoCache:Nu,useCacheRefresh:function(){return Jn().memoizedState=yh.bind(null,We)},useEffectEvent:function(e){var t=Jn(),n={impl:e};return t.memoizedState=n,function(){if((kt&2)!==0)throw Error(b(440));return n.impl.apply(void 0,arguments)}}},qu={readContext:mn,use:Bc,useCallback:Rf,useContext:mn,useEffect:Lu,useImperativeHandle:jf,useInsertionEffect:Af,useLayoutEffect:kf,useMemo:Nf,useReducer:Uc,useRef:zf,useState:function(){return Uc(io)},useDebugValue:Hu,useDeferredValue:function(e,t){var n=fn();return Of(n,Ut.memoizedState,e,t)},useTransition:function(){var e=Uc(io)[0],t=fn().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:uf,useId:Lf,useHostTransitionStatus:Vu,useFormState:Cf,useActionState:Cf,useOptimistic:function(e,t){var n=fn();return mf(n,Ut,e,t)},useMemoCache:Nu,useCacheRefresh:Hf};qu.useEffectEvent=Mf;var qf={readContext:mn,use:Bc,useCallback:Rf,useContext:mn,useEffect:Lu,useImperativeHandle:jf,useInsertionEffect:Af,useLayoutEffect:kf,useMemo:Nf,useReducer:_u,useRef:zf,useState:function(){return _u(io)},useDebugValue:Hu,useDeferredValue:function(e,t){var n=fn();return Ut===null?Yu(n,e,t):Of(n,Ut.memoizedState,e,t)},useTransition:function(){var e=_u(io)[0],t=fn().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:uf,useId:Lf,useHostTransitionStatus:Vu,useFormState:Tf,useActionState:Tf,useOptimistic:function(e,t){var n=fn();return Ut!==null?mf(n,Ut,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Nu,useCacheRefresh:Hf};qf.useEffectEvent=Mf;function Zu(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Iu={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=El(),o=Fe(l);o.payload=t,n!=null&&(o.callback=n),t=ut(e,o,l),t!==null&&(rl(t,e,l),dt(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=El(),o=Fe(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ut(e,o,l),t!==null&&(rl(t,e,l),dt(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=El(),l=Fe(n);l.tag=2,t!=null&&(l.callback=t),t=ut(e,l,n),t!==null&&(rl(t,e,n),dt(t,e,n))}};function Zf(e,t,n,l,o,i,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,i,c):t.prototype&&t.prototype.isPureReactComponent?!Jl(n,l)||!Jl(o,i):!0}function If(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Iu.enqueueReplaceState(t,t.state,null)}function _i(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function Qf(e){Wi(e)}function Kf(e){console.error(e)}function $f(e){Wi(e)}function Xc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Ff(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Qu(e,t,n){return n=Fe(n),n.tag=3,n.payload={element:null},n.callback=function(){Xc(e,t)},n}function Wf(e){return e=Fe(e),e.tag=3,e}function Jf(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var i=l.value;e.payload=function(){return o(i)},e.callback=function(){Ff(t,n,l)}}var c=n.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){Ff(t,n,l),typeof o!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var p=l.stack;this.componentDidCatch(l.value,{componentStack:p!==null?p:""})})}function bh(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Ca(t,n,o,!0),n=Cl.current,n!==null){switch(n.tag){case 31:case 13:return Yl===null?Pc():n.alternate===null&&on===0&&(on=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===J?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),br(e,l,o)),!1;case 22:return n.flags|=65536,l===J?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),br(e,l,o)),!1}throw Error(b(435,n.tag))}return br(e,l,o),Pc(),!1}if($e)return t=Cl.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==Dn&&(e=Error(b(422),{cause:l}),Ni(Cn(e,n)))):(l!==Dn&&(t=Error(b(423),{cause:l}),Ni(Cn(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=Cn(l,n),o=Qu(e.stateNode,l,o),bt(e,o),on!==4&&(on=2)),!1;var i=Error(b(520),{cause:l});if(i=Cn(i,n),tc===null?tc=[i]:tc.push(i),on!==4&&(on=2),t===null)return!0;l=Cn(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Qu(n.stateNode,l,e),bt(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Jo===null||!Jo.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Wf(o),Jf(o,e,n,l),bt(n,o),!1}n=n.return}while(n!==null);return!1}var Ku=Error(b(461)),gn=!1;function Un(e,t,n,l){t.child=e===null?Nt(t,null,n,l):_e(t,e.child,n,l)}function Pf(e,t,n,l,o){n=n.render;var i=t.ref;if("ref"in l){var c={};for(var p in l)p!=="ref"&&(c[p]=l[p])}else c=l;return no(t),l=ku(e,t,n,c,i,o),p=Du(),e!==null&&!gn?(ju(e,t,o),so(e,t,o)):($e&&p&&Pi(t),t.flags|=1,Un(e,t,l,o),t.child)}function ed(e,t,n,l,o){if(e===null){var i=n.type;return typeof i=="function"&&!Ls(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,td(e,t,i,l,o)):(e=$a(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!nr(e,o)){var c=i.memoizedProps;if(n=n.compare,n=n!==null?n:Jl,n(c,l)&&e.ref===t.ref)return so(e,t,o)}return t.flags|=1,e=ea(i,l),e.ref=t.ref,e.return=t,t.child=e}function td(e,t,n,l,o){if(e!==null){var i=e.memoizedProps;if(Jl(i,l)&&e.ref===t.ref)if(gn=!1,t.pendingProps=l=i,nr(e,o))(e.flags&131072)!==0&&(gn=!0);else return t.lanes=e.lanes,so(e,t,o)}return $u(e,t,n,l,o)}function nd(e,t,n,l){var o=l.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~i}else l=0,t.child=null;return ld(e,t,i,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&L(t,i!==null?i.cachePool:null),i!==null?af(t,i):zu(),of(t);else return l=t.lanes=536870912,ld(e,t,i!==null?i.baseLanes|n:n,n,l)}else i!==null?(L(t,i.cachePool),af(t,i),Ko(),t.memoizedState=null):(e!==null&&L(t,null),zu(),Ko());return Un(e,t,o,n),t.child}function Ks(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ld(e,t,n,l,o){var i=U();return i=i===null?null:{parent:ln._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&L(t,null),zu(),of(t),e!==null&&Ca(e,t,l,!0),t.childLanes=o,null}function Vc(e,t){return t=qc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ad(e,t,n){return _e(t,e.child,null,n),e=Vc(t,t.pendingProps),e.flags|=2,wl(t),t.memoizedState=null,e}function xh(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if($e){if(l.mode==="hidden")return e=Vc(t,l),t.lanes=536870912,Ks(null,e);if(Mu(t),(e=wt)?(e=yp(e,Fn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Sa!==null?{id:ol,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},n=Ys(e),n.return=t,t.child=n,hn=t,wt=null)):e=null,e===null)throw Wn(t);return t.lanes=536870912,null}return Vc(t,l)}var i=e.memoizedState;if(i!==null){var c=i.dehydrated;if(Mu(t),o)if(t.flags&256)t.flags&=-257,t=ad(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(b(558));else if(gn||Ca(e,t,n,!1),o=(n&e.childLanes)!==0,gn||o){if(l=Vt,l!==null&&(c=pl(l,n),c!==0&&c!==i.retryLane))throw i.retryLane=c,ba(e,c),rl(l,e,c),Ku;Pc(),t=ad(e,t,n)}else e=i.treeContext,wt=Xl(c.nextSibling),hn=t,$e=!0,na=null,Fn=!1,e!==null&&ta(t,e),t=Vc(t,l),t.flags|=4096;return t}return e=ea(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Gc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(b(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function $u(e,t,n,l,o){return no(t),n=ku(e,t,n,l,void 0,o),l=Du(),e!==null&&!gn?(ju(e,t,o),so(e,t,o)):($e&&l&&Pi(t),t.flags|=1,Un(e,t,n,o),t.child)}function od(e,t,n,l,o,i){return no(t),t.updateQueue=null,n=cf(t,l,n,o),sf(e),l=Du(),e!==null&&!gn?(ju(e,t,i),so(e,t,i)):($e&&l&&Pi(t),t.flags|=1,Un(e,t,n,i),t.child)}function id(e,t,n,l,o){if(no(t),t.stateNode===null){var i=Kn,c=n.contextType;typeof c=="object"&&c!==null&&(i=mn(c)),i=new n(l,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Iu,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=l,i.state=t.memoizedState,i.refs={},xt(t),c=n.contextType,i.context=typeof c=="object"&&c!==null?mn(c):Kn,i.state=t.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&(Zu(t,n,c,l),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(c=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),c!==i.state&&Iu.enqueueReplaceState(i,i.state,null),qe(t,l,i,o),Qt(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){i=t.stateNode;var p=t.memoizedProps,v=_i(n,p);i.props=v;var j=i.context,H=n.contextType;c=Kn,typeof H=="object"&&H!==null&&(c=mn(H));var $=n.getDerivedStateFromProps;H=typeof $=="function"||typeof i.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,H||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(p||j!==c)&&If(t,i,l,c),At=!1;var N=t.memoizedState;i.state=N,qe(t,l,i,o),Qt(),j=t.memoizedState,p||N!==j||At?(typeof $=="function"&&(Zu(t,n,$,l),j=t.memoizedState),(v=At||Zf(t,n,v,l,N,j,c))?(H||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=j),i.props=l,i.state=j,i.context=c,l=v):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{i=t.stateNode,Ae(e,t),c=t.memoizedProps,H=_i(n,c),i.props=H,$=t.pendingProps,N=i.context,j=n.contextType,v=Kn,typeof j=="object"&&j!==null&&(v=mn(j)),p=n.getDerivedStateFromProps,(j=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==$||N!==v)&&If(t,i,l,v),At=!1,N=t.memoizedState,i.state=N,qe(t,l,i,o),Qt();var _=t.memoizedState;c!==$||N!==_||At||e!==null&&e.dependencies!==null&&Io(e.dependencies)?(typeof p=="function"&&(Zu(t,n,p,l),_=t.memoizedState),(H=At||Zf(t,n,H,l,N,_,v)||e!==null&&e.dependencies!==null&&Io(e.dependencies))?(j||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,_,v),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,_,v)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=_),i.props=l,i.state=_,i.context=v,l=H):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),l=!1)}return i=l,Gc(e,t),l=(t.flags&128)!==0,i||l?(i=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&l?(t.child=_e(t,e.child,null,o),t.child=_e(t,null,n,o)):Un(e,t,n,o),t.memoizedState=i.state,e=t.child):e=so(e,t,o),e}function sd(e,t,n,l){return Ja(),t.flags|=256,Un(e,t,n,l),t.child}var Fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wu(e){return{baseLanes:e,cachePool:re()}}function Ju(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=zl),e}function cd(e,t,n){var l=t.pendingProps,o=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(rn.current&2)!==0),c&&(o=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if($e){if(o?Qo(t):Ko(),(e=wt)?(e=yp(e,Fn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Sa!==null?{id:ol,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},n=Ys(e),n.return=t,t.child=n,hn=t,wt=null)):e=null,e===null)throw Wn(t);return Or(e)?t.lanes=32:t.lanes=536870912,null}var p=l.children;return l=l.fallback,o?(Ko(),o=t.mode,p=qc({mode:"hidden",children:p},o),l=xa(l,o,n,null),p.return=t,l.return=t,p.sibling=l,t.child=p,l=t.child,l.memoizedState=Wu(n),l.childLanes=Ju(e,c,n),t.memoizedState=Fu,Ks(null,l)):(Qo(t),Pu(t,p))}var v=e.memoizedState;if(v!==null&&(p=v.dehydrated,p!==null)){if(i)t.flags&256?(Qo(t),t.flags&=-257,t=er(e,t,n)):t.memoizedState!==null?(Ko(),t.child=e.child,t.flags|=128,t=null):(Ko(),p=l.fallback,o=t.mode,l=qc({mode:"visible",children:l.children},o),p=xa(p,o,n,null),p.flags|=2,l.return=t,p.return=t,l.sibling=p,t.child=l,_e(t,e.child,null,n),l=t.child,l.memoizedState=Wu(n),l.childLanes=Ju(e,c,n),t.memoizedState=Fu,t=Ks(null,l));else if(Qo(t),Or(p)){if(c=p.nextSibling&&p.nextSibling.dataset,c)var j=c.dgst;c=j,l=Error(b(419)),l.stack="",l.digest=c,Ni({value:l,source:null,stack:null}),t=er(e,t,n)}else if(gn||Ca(e,t,n,!1),c=(n&e.childLanes)!==0,gn||c){if(c=Vt,c!==null&&(l=pl(c,n),l!==0&&l!==v.retryLane))throw v.retryLane=l,ba(e,l),rl(c,e,l),Ku;Nr(p)||Pc(),t=er(e,t,n)}else Nr(p)?(t.flags|=192,t.child=e.child,t=null):(e=v.treeContext,wt=Xl(p.nextSibling),hn=t,$e=!0,na=null,Fn=!1,e!==null&&ta(t,e),t=Pu(t,l.children),t.flags|=4096);return t}return o?(Ko(),p=l.fallback,o=t.mode,v=e.child,j=v.sibling,l=ea(v,{mode:"hidden",children:l.children}),l.subtreeFlags=v.subtreeFlags&65011712,j!==null?p=ea(j,p):(p=xa(p,o,n,null),p.flags|=2),p.return=t,l.return=t,l.sibling=p,t.child=l,Ks(null,l),l=t.child,p=e.child.memoizedState,p===null?p=Wu(n):(o=p.cachePool,o!==null?(v=ln._currentValue,o=o.parent!==v?{parent:v,pool:v}:o):o=re(),p={baseLanes:p.baseLanes|n,cachePool:o}),l.memoizedState=p,l.childLanes=Ju(e,c,n),t.memoizedState=Fu,Ks(e.child,l)):(Qo(t),n=e.child,e=n.sibling,n=ea(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=n,t.memoizedState=null,n)}function Pu(e,t){return t=qc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qc(e,t){return e=Yn(22,e,null,t),e.lanes=0,e}function er(e,t,n){return _e(t,e.child,null,n),e=Pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ud(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Xs(e.return,t,n)}function tr(e,t,n,l,o,i){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:i}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=l,c.tail=n,c.tailMode=o,c.treeForkCount=i)}function rd(e,t,n){var l=t.pendingProps,o=l.revealOrder,i=l.tail;l=l.children;var c=rn.current,p=(c&2)!==0;if(p?(c=c&1|2,t.flags|=128):c&=1,de(rn,c),Un(e,t,l,n),l=$e?qo:0,!p&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ud(e,n,t);else if(e.tag===19)ud(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Rc(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),tr(t,!1,o,n,i,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Rc(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}tr(t,!0,n,null,i,l);break;case"together":tr(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function so(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wo|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ca(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(b(153));if(t.child!==null){for(e=t.child,n=ea(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ea(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Io(e)))}function vh(e,t,n){switch(t.tag){case 3:vn(t,t.stateNode.containerInfo),Ll(t,ln,e.memoizedState.cache),Ja();break;case 27:case 5:ia(t);break;case 4:vn(t,t.stateNode.containerInfo);break;case 10:Ll(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Mu(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Qo(t),t.flags|=128,null):(n&t.child.childLanes)!==0?cd(e,t,n):(Qo(t),e=so(e,t,n),e!==null?e.sibling:null);Qo(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Ca(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return rd(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),de(rn,rn.current),l)break;return null;case 22:return t.lanes=0,nd(e,t,n,t.pendingProps);case 24:Ll(t,ln,e.memoizedState.cache)}return so(e,t,n)}function fd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)gn=!0;else{if(!nr(e,n)&&(t.flags&128)===0)return gn=!1,vh(e,t,n);gn=(e.flags&131072)!==0}else gn=!1,$e&&(t.flags&1048576)!==0&&Dc(t,qo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=R(t.elementType),t.type=e,typeof e=="function")Ls(e)?(l=_i(e,l),t.tag=1,t=id(null,t,e,l,n)):(t.tag=0,t=$u(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===ke){t.tag=11,t=Pf(null,t,e,l,n);break e}else if(o===Ee){t.tag=14,t=ed(null,t,e,l,n);break e}}throw t=it(e)||e,Error(b(306,t,""))}}return t;case 0:return $u(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=_i(l,t.pendingProps),id(e,t,l,o,n);case 3:e:{if(vn(t,t.stateNode.containerInfo),e===null)throw Error(b(387));l=t.pendingProps;var i=t.memoizedState;o=i.element,Ae(e,t),qe(t,l,null,n);var c=t.memoizedState;if(l=c.cache,Ll(t,ln,l),l!==i.cache&&ns(t,[ln],n,!0),Qt(),l=c.element,i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=sd(e,t,l,n);break e}else if(l!==o){o=Cn(Error(b(424)),t),Ni(o),t=sd(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(wt=Xl(e.firstChild),hn=t,$e=!0,na=null,Fn=!0,n=Nt(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ja(),l===o){t=so(e,t,n);break e}Un(e,t,l,n)}t=t.child}return t;case 26:return Gc(e,t),e===null?(n=Cp(t.type,null,t.pendingProps,null))?t.memoizedState=n:$e||(n=t.type,e=t.pendingProps,l=iu(et.current).createElement(n),l[vt]=t,l[An]=e,Ln(l,n,e),dn(l),t.stateNode=l):t.memoizedState=Cp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ia(t),e===null&&$e&&(l=t.stateNode=xp(t.type,t.pendingProps,et.current),hn=t,Fn=!0,o=wt,ni(t.type)?(_r=o,wt=Xl(l.firstChild)):wt=o),Un(e,t,t.pendingProps.children,n),Gc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&$e&&((o=l=wt)&&(l=Fh(l,t.type,t.pendingProps,Fn),l!==null?(t.stateNode=l,hn=t,wt=Xl(l.firstChild),Fn=!1,o=!0):o=!1),o||Wn(t)),ia(t),o=t.type,i=t.pendingProps,c=e!==null?e.memoizedProps:null,l=i.children,Dr(o,i)?l=null:c!==null&&Dr(o,c)&&(t.flags|=32),t.memoizedState!==null&&(o=ku(e,t,fh,null,null,n),uc._currentValue=o),Gc(e,t),Un(e,t,l,n),t.child;case 6:return e===null&&$e&&((e=n=wt)&&(n=Wh(n,t.pendingProps,Fn),n!==null?(t.stateNode=n,hn=t,wt=null,e=!0):e=!1),e||Wn(t)),null;case 13:return cd(e,t,n);case 4:return vn(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=_e(t,null,l,n):Un(e,t,l,n),t.child;case 11:return Pf(e,t,t.type,t.pendingProps,n);case 7:return Un(e,t,t.pendingProps,n),t.child;case 8:return Un(e,t,t.pendingProps.children,n),t.child;case 12:return Un(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Ll(t,t.type,l.value),Un(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,no(t),o=mn(o),l=l(o),t.flags|=1,Un(e,t,l,n),t.child;case 14:return ed(e,t,t.type,t.pendingProps,n);case 15:return td(e,t,t.type,t.pendingProps,n);case 19:return rd(e,t,n);case 31:return xh(e,t,n);case 22:return nd(e,t,n,t.pendingProps);case 24:return no(t),l=mn(ln),e===null?(o=U(),o===null&&(o=Vt,i=te(),o.pooledCache=i,i.refCount++,i!==null&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:l,cache:o},xt(t),Ll(t,ln,o)):((e.lanes&n)!==0&&(Ae(e,t),qe(t,null,null,n),Qt()),o=e.memoizedState,i=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ll(t,ln,l)):(l=i.cache,Ll(t,ln,l),l!==o.cache&&ns(t,[ln],n,!0))),Un(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(b(156,t.tag))}function co(e){e.flags|=4}function lr(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(Ld())e.flags|=8192;else throw M=J,V}else e.flags&=-16777217}function dd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mp(t))if(Ld())e.flags|=8192;else throw M=J,V}function Zc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ca():536870912,e.lanes|=t,rs|=t)}function $s(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Sh(e,t,n){var l=t.pendingProps;switch(Zo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(t),null;case 1:return Wt(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),la(ln),Kt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wa(t)?co(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Pa())),Wt(t),null;case 26:var o=t.type,i=t.memoizedState;return e===null?(co(t),i!==null?(Wt(t),dd(t,i)):(Wt(t),lr(t,o,null,l,n))):i?i!==e.memoizedState?(co(t),Wt(t),dd(t,i)):(Wt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&co(t),Wt(t),lr(t,o,e,l,n)),null;case 27:if(Rt(t),n=et.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&co(t);else{if(!l){if(t.stateNode===null)throw Error(b(166));return Wt(t),null}e=ve.current,Wa(t)?es(t):(e=xp(o,l,n),t.stateNode=e,co(t))}return Wt(t),null;case 5:if(Rt(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&co(t);else{if(!l){if(t.stateNode===null)throw Error(b(166));return Wt(t),null}if(i=ve.current,Wa(t))es(t);else{var c=iu(et.current);switch(i){case 1:i=c.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=c.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=c.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=c.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=c.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?c.createElement(o,{is:l.is}):c.createElement(o)}}i[vt]=t,i[An]=l;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=i;e:switch(Ln(i,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&co(t)}}return Wt(t),lr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&co(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(b(166));if(e=et.current,Wa(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=hn,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[vt]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||cp(e.nodeValue,n)),e||Wn(t,!0)}else e=iu(e).createTextNode(l),e[vt]=t,t.stateNode=e}return Wt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Wa(t),n!==null){if(e===null){if(!l)throw Error(b(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(b(557));e[vt]=t}else Ja(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Wt(t),e=!1}else n=Pa(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(wl(t),t):(wl(t),null);if((t.flags&128)!==0)throw Error(b(558))}return Wt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=Wa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(b(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(b(317));o[vt]=t}else Ja(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Wt(t),o=!1}else o=Pa(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(wl(t),t):(wl(t),null)}return wl(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Zc(t,t.updateQueue),Wt(t),null);case 4:return Kt(),e===null&&zr(t.stateNode.containerInfo),Wt(t),null;case 10:return la(t.type),Wt(t),null;case 19:if(K(rn),l=t.memoizedState,l===null)return Wt(t),null;if(o=(t.flags&128)!==0,i=l.rendering,i===null)if(o)$s(l,!1);else{if(on!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Rc(e),i!==null){for(t.flags|=128,$s(l,!1),e=i.updateQueue,t.updateQueue=e,Zc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ac(n,e),n=n.sibling;return de(rn,rn.current&1|2),$e&&Bn(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Nn()>Fc&&(t.flags|=128,o=!0,$s(l,!1),t.lanes=4194304)}else{if(!o)if(e=Rc(i),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Zc(t,e),$s(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!$e)return Wt(t),null}else 2*Nn()-l.renderingStartTime>Fc&&n!==536870912&&(t.flags|=128,o=!0,$s(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(e=l.last,e!==null?e.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Nn(),e.sibling=null,n=rn.current,de(rn,o?n&1|2:n&1),$e&&Bn(t,l.treeForkCount),e):(Wt(t),null);case 22:case 23:return wl(t),Eu(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Wt(t),t.subtreeFlags&6&&(t.flags|=8192)):Wt(t),n=t.updateQueue,n!==null&&Zc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&K(g),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),la(ln),Wt(t),null;case 25:return null;case 30:return null}throw Error(b(156,t.tag))}function Ch(e,t){switch(Zo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return la(ln),Kt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Rt(t),null;case 31:if(t.memoizedState!==null){if(wl(t),t.alternate===null)throw Error(b(340));Ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wl(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(b(340));Ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return K(rn),null;case 4:return Kt(),null;case 10:return la(t.type),null;case 22:case 23:return wl(t),Eu(),e!==null&&K(g),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return la(ln),null;case 25:return null;default:return null}}function pd(e,t){switch(Zo(t),t.tag){case 3:la(ln),Kt();break;case 26:case 27:case 5:Rt(t);break;case 4:Kt();break;case 31:t.memoizedState!==null&&wl(t);break;case 13:wl(t);break;case 19:K(rn);break;case 10:la(t.type);break;case 22:case 23:wl(t),Eu(),e!==null&&K(g);break;case 24:la(ln)}}function Fs(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var i=n.create,c=n.inst;l=i(),c.destroy=l}n=n.next}while(n!==o)}}catch(p){_t(t,t.return,p)}}function $o(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var i=o.next;l=i;do{if((l.tag&e)===e){var c=l.inst,p=c.destroy;if(p!==void 0){c.destroy=void 0,o=t;var v=n,j=p;try{j()}catch(H){_t(o,v,H)}}}l=l.next}while(l!==i)}}catch(H){_t(t,t.return,H)}}function hd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Hl(t,n)}catch(l){_t(e,e.return,l)}}}function md(e,t,n){n.props=_i(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){_t(e,t,l)}}function Ws(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){_t(e,t,o)}}function wa(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){_t(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){_t(e,t,o)}else n.current=null}function yd(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){_t(e,e.return,o)}}function ar(e,t,n){try{var l=e.stateNode;qh(l,e.type,n,t),l[An]=t}catch(o){_t(e,e.return,o)}}function gd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ni(e.type)||e.tag===4}function or(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ni(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ir(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kl));else if(l!==4&&(l===27&&ni(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ir(e,t,n),e=e.sibling;e!==null;)ir(e,t,n),e=e.sibling}function Ic(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&ni(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ic(e,t,n),e=e.sibling;e!==null;)Ic(e,t,n),e=e.sibling}function bd(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Ln(t,l,n),t[vt]=e,t[An]=n}catch(i){_t(e,e.return,i)}}var uo=!1,bn=!1,sr=!1,xd=typeof WeakSet=="function"?WeakSet:Set,jn=null;function wh(e,t){if(e=e.containerInfo,Ar=pu,e=Ns(e),Mt(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,i=l.focusNode;l=l.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var c=0,p=-1,v=-1,j=0,H=0,$=e,N=null;t:for(;;){for(var _;$!==n||o!==0&&$.nodeType!==3||(p=c+o),$!==i||l!==0&&$.nodeType!==3||(v=c+l),$.nodeType===3&&(c+=$.nodeValue.length),(_=$.firstChild)!==null;)N=$,$=_;for(;;){if($===e)break t;if(N===n&&++j===o&&(p=c),N===i&&++H===l&&(v=c),(_=$.nextSibling)!==null)break;$=N,N=$.parentNode}$=_}n=p===-1||v===-1?null:{start:p,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(kr={focusedElem:e,selectionRange:n},pu=!1,jn=t;jn!==null;)if(t=jn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jn=e;else for(;jn!==null;){switch(t=jn,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,l=n.stateNode;try{var we=_i(n.type,o);e=l.getSnapshotBeforeUpdate(we,i),l.__reactInternalSnapshotBeforeUpdate=e}catch(He){_t(n,n.return,He)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Rr(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rr(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(b(163))}if(e=t.sibling,e!==null){e.return=t.return,jn=e;break}jn=t.return}}function vd(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:fo(e,n),l&4&&Fs(5,n);break;case 1:if(fo(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(c){_t(n,n.return,c)}else{var o=_i(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){_t(n,n.return,c)}}l&64&&hd(n),l&512&&Ws(n,n.return);break;case 3:if(fo(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Hl(e,t)}catch(c){_t(n,n.return,c)}}break;case 27:t===null&&l&4&&bd(n);case 26:case 5:fo(e,n),t===null&&l&4&&yd(n),l&512&&Ws(n,n.return);break;case 12:fo(e,n);break;case 31:fo(e,n),l&4&&wd(e,n);break;case 13:fo(e,n),l&4&&Td(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Rh.bind(null,n),Jh(e,n))));break;case 22:if(l=n.memoizedState!==null||uo,!l){t=t!==null&&t.memoizedState!==null||bn,o=uo;var i=bn;uo=l,(bn=t)&&!i?po(e,n,(n.subtreeFlags&8772)!==0):fo(e,n),uo=o,bn=i}break;case 30:break;default:fo(e,n)}}function Sd(e){var t=e.alternate;t!==null&&(e.alternate=null,Sd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ua(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pt=null,il=!1;function ro(e,t,n){for(n=n.child;n!==null;)Cd(e,t,n),n=n.sibling}function Cd(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(st,n)}catch{}switch(n.tag){case 26:bn||wa(n,t),ro(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:bn||wa(n,t);var l=Pt,o=il;ni(n.type)&&(Pt=n.stateNode,il=!1),ro(e,t,n),ic(n.stateNode),Pt=l,il=o;break;case 5:bn||wa(n,t);case 6:if(l=Pt,o=il,Pt=null,ro(e,t,n),Pt=l,il=o,Pt!==null)if(il)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(n.stateNode)}catch(i){_t(n,t,i)}else try{Pt.removeChild(n.stateNode)}catch(i){_t(n,t,i)}break;case 18:Pt!==null&&(il?(e=Pt,hp(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),bs(e)):hp(Pt,n.stateNode));break;case 4:l=Pt,o=il,Pt=n.stateNode.containerInfo,il=!0,ro(e,t,n),Pt=l,il=o;break;case 0:case 11:case 14:case 15:$o(2,n,t),bn||$o(4,n,t),ro(e,t,n);break;case 1:bn||(wa(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&md(n,t,l)),ro(e,t,n);break;case 21:ro(e,t,n);break;case 22:bn=(l=bn)||n.memoizedState!==null,ro(e,t,n),bn=l;break;default:ro(e,t,n)}}function wd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{bs(e)}catch(n){_t(t,t.return,n)}}}function Td(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{bs(e)}catch(n){_t(t,t.return,n)}}function Th(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xd),t;default:throw Error(b(435,e.tag))}}function Qc(e,t){var n=Th(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=Nh.bind(null,e,l);l.then(o,o)}})}function sl(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],i=e,c=t,p=c;e:for(;p!==null;){switch(p.tag){case 27:if(ni(p.type)){Pt=p.stateNode,il=!1;break e}break;case 5:Pt=p.stateNode,il=!1;break e;case 3:case 4:Pt=p.stateNode.containerInfo,il=!0;break e}p=p.return}if(Pt===null)throw Error(b(160));Cd(i,c,o),Pt=null,il=!1,i=o.alternate,i!==null&&(i.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)zd(t,e),t=t.sibling}var aa=null;function zd(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:sl(t,e),cl(e),l&4&&($o(3,e,e.return),Fs(3,e),$o(5,e,e.return));break;case 1:sl(t,e),cl(e),l&512&&(bn||n===null||wa(n,n.return)),l&64&&uo&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=aa;if(sl(t,e),cl(e),l&512&&(bn||n===null||wa(n,n.return)),l&4){var i=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":i=o.getElementsByTagName("title")[0],(!i||i[ka]||i[vt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=o.createElement(l),o.head.insertBefore(i,o.querySelector("head > title"))),Ln(i,l,n),i[vt]=e,dn(i),l=i;break e;case"link":var c=zp("link","href",o).get(l+(n.href||""));if(c){for(var p=0;p<c.length;p++)if(i=c[p],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){c.splice(p,1);break t}}i=o.createElement(l),Ln(i,l,n),o.head.appendChild(i);break;case"meta":if(c=zp("meta","content",o).get(l+(n.content||""))){for(p=0;p<c.length;p++)if(i=c[p],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){c.splice(p,1);break t}}i=o.createElement(l),Ln(i,l,n),o.head.appendChild(i);break;default:throw Error(b(468,l))}i[vt]=e,dn(i),l=i}e.stateNode=l}else Ep(o,e.type,e.stateNode);else e.stateNode=Tp(o,l,e.memoizedProps);else i!==l?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,l===null?Ep(o,e.type,e.stateNode):Tp(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ar(e,e.memoizedProps,n.memoizedProps)}break;case 27:sl(t,e),cl(e),l&512&&(bn||n===null||wa(n,n.return)),n!==null&&l&4&&ar(e,e.memoizedProps,n.memoizedProps);break;case 5:if(sl(t,e),cl(e),l&512&&(bn||n===null||wa(n,n.return)),e.flags&32){o=e.stateNode;try{Ra(o,"")}catch(we){_t(e,e.return,we)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,ar(e,o,n!==null?n.memoizedProps:o)),l&1024&&(sr=!0);break;case 6:if(sl(t,e),cl(e),l&4){if(e.stateNode===null)throw Error(b(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(we){_t(e,e.return,we)}}break;case 3:if(uu=null,o=aa,aa=su(t.containerInfo),sl(t,e),aa=o,cl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{bs(t.containerInfo)}catch(we){_t(e,e.return,we)}sr&&(sr=!1,Ed(e));break;case 4:l=aa,aa=su(e.stateNode.containerInfo),sl(t,e),cl(e),aa=l;break;case 12:sl(t,e),cl(e);break;case 31:sl(t,e),cl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qc(e,l)));break;case 13:sl(t,e),cl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&($c=Nn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qc(e,l)));break;case 22:o=e.memoizedState!==null;var v=n!==null&&n.memoizedState!==null,j=uo,H=bn;if(uo=j||o,bn=H||v,sl(t,e),bn=H,uo=j,cl(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||v||uo||bn||Bi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){v=n=t;try{if(i=v.stateNode,o)c=i.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{p=v.stateNode;var $=v.memoizedProps.style,N=$!=null&&$.hasOwnProperty("display")?$.display:null;p.style.display=N==null||typeof N=="boolean"?"":(""+N).trim()}}catch(we){_t(v,v.return,we)}}}else if(t.tag===6){if(n===null){v=t;try{v.stateNode.nodeValue=o?"":v.memoizedProps}catch(we){_t(v,v.return,we)}}}else if(t.tag===18){if(n===null){v=t;try{var _=v.stateNode;o?mp(_,!0):mp(v.stateNode,!1)}catch(we){_t(v,v.return,we)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Qc(e,n))));break;case 19:sl(t,e),cl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Qc(e,l)));break;case 30:break;case 21:break;default:sl(t,e),cl(e)}}function cl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(gd(l)){n=l;break}l=l.return}if(n==null)throw Error(b(160));switch(n.tag){case 27:var o=n.stateNode,i=or(e);Ic(e,i,o);break;case 5:var c=n.stateNode;n.flags&32&&(Ra(c,""),n.flags&=-33);var p=or(e);Ic(e,p,c);break;case 3:case 4:var v=n.stateNode.containerInfo,j=or(e);ir(e,j,v);break;default:throw Error(b(161))}}catch(H){_t(e,e.return,H)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ed(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ed(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vd(e,t.alternate,t),t=t.sibling}function Bi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$o(4,t,t.return),Bi(t);break;case 1:wa(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&md(t,t.return,n),Bi(t);break;case 27:ic(t.stateNode);case 26:case 5:wa(t,t.return),Bi(t);break;case 22:t.memoizedState===null&&Bi(t);break;case 30:Bi(t);break;default:Bi(t)}e=e.sibling}}function po(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,i=t,c=i.flags;switch(i.tag){case 0:case 11:case 15:po(o,i,n),Fs(4,i);break;case 1:if(po(o,i,n),l=i,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(j){_t(l,l.return,j)}if(l=i,o=l.updateQueue,o!==null){var p=l.stateNode;try{var v=o.shared.hiddenCallbacks;if(v!==null)for(o.shared.hiddenCallbacks=null,o=0;o<v.length;o++)Ft(v[o],p)}catch(j){_t(l,l.return,j)}}n&&c&64&&hd(i),Ws(i,i.return);break;case 27:bd(i);case 26:case 5:po(o,i,n),n&&l===null&&c&4&&yd(i),Ws(i,i.return);break;case 12:po(o,i,n);break;case 31:po(o,i,n),n&&c&4&&wd(o,i);break;case 13:po(o,i,n),n&&c&4&&Td(o,i);break;case 22:i.memoizedState===null&&po(o,i,n),Ws(i,i.return);break;case 30:break;default:po(o,i,n)}t=t.sibling}}function cr(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&a(n))}function ur(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&a(e))}function oa(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Md(e,t,n,l),t=t.sibling}function Md(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:oa(e,t,n,l),o&2048&&Fs(9,t);break;case 1:oa(e,t,n,l);break;case 3:oa(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&a(e)));break;case 12:if(o&2048){oa(e,t,n,l),e=t.stateNode;try{var i=t.memoizedProps,c=i.id,p=i.onPostCommit;typeof p=="function"&&p(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(v){_t(t,t.return,v)}}else oa(e,t,n,l);break;case 31:oa(e,t,n,l);break;case 13:oa(e,t,n,l);break;case 23:break;case 22:i=t.stateNode,c=t.alternate,t.memoizedState!==null?i._visibility&2?oa(e,t,n,l):Js(e,t):i._visibility&2?oa(e,t,n,l):(i._visibility|=2,ss(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&cr(c,t);break;case 24:oa(e,t,n,l),o&2048&&ur(t.alternate,t);break;default:oa(e,t,n,l)}}function ss(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,c=t,p=n,v=l,j=c.flags;switch(c.tag){case 0:case 11:case 15:ss(i,c,p,v,o),Fs(8,c);break;case 23:break;case 22:var H=c.stateNode;c.memoizedState!==null?H._visibility&2?ss(i,c,p,v,o):Js(i,c):(H._visibility|=2,ss(i,c,p,v,o)),o&&j&2048&&cr(c.alternate,c);break;case 24:ss(i,c,p,v,o),o&&j&2048&&ur(c.alternate,c);break;default:ss(i,c,p,v,o)}t=t.sibling}}function Js(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:Js(n,l),o&2048&&cr(l.alternate,l);break;case 24:Js(n,l),o&2048&&ur(l.alternate,l);break;default:Js(n,l)}t=t.sibling}}var Ps=8192;function cs(e,t,n){if(e.subtreeFlags&Ps)for(e=e.child;e!==null;)Ad(e,t,n),e=e.sibling}function Ad(e,t,n){switch(e.tag){case 26:cs(e,t,n),e.flags&Ps&&e.memoizedState!==null&&r0(n,aa,e.memoizedState,e.memoizedProps);break;case 5:cs(e,t,n);break;case 3:case 4:var l=aa;aa=su(e.stateNode.containerInfo),cs(e,t,n),aa=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Ps,Ps=16777216,cs(e,t,n),Ps=l):cs(e,t,n));break;default:cs(e,t,n)}}function kd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ec(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];jn=l,jd(l,e)}kd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dd(e),e=e.sibling}function Dd(e){switch(e.tag){case 0:case 11:case 15:ec(e),e.flags&2048&&$o(9,e,e.return);break;case 3:ec(e);break;case 12:ec(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Kc(e)):ec(e);break;default:ec(e)}}function Kc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];jn=l,jd(l,e)}kd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:$o(8,t,t.return),Kc(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Kc(t));break;default:Kc(t)}e=e.sibling}}function jd(e,t){for(;jn!==null;){var n=jn;switch(n.tag){case 0:case 11:case 15:$o(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:a(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,jn=l;else e:for(n=e;jn!==null;){l=jn;var o=l.sibling,i=l.return;if(Sd(l),l===n){jn=null;break e}if(o!==null){o.return=i,jn=o;break e}jn=i}}}var zh={getCacheForType:function(e){var t=mn(ln),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mn(ln).controller.signal}},Eh=typeof WeakMap=="function"?WeakMap:Map,kt=0,Vt=null,pt=null,yt=0,Ot=0,Tl=null,Fo=!1,us=!1,rr=!1,ho=0,on=0,Wo=0,Ui=0,fr=0,zl=0,rs=0,tc=null,ul=null,dr=!1,$c=0,Rd=0,Fc=1/0,Wc=null,Jo=null,Tn=0,Po=null,fs=null,mo=0,pr=0,hr=null,Nd=null,nc=0,mr=null;function El(){return(kt&2)!==0&&yt!==0?yt&-yt:B.T!==null?Sr():Gi()}function Od(){if(zl===0)if((yt&536870912)===0||$e){var e=Ke;Ke<<=1,(Ke&3932160)===0&&(Ke=262144),zl=e}else zl=536870912;return e=Cl.current,e!==null&&(e.flags|=32),zl}function rl(e,t,n){(e===Vt&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(ds(e,0),ei(e,yt,zl,!1)),wo(e,n),((kt&2)===0||e!==Vt)&&(e===Vt&&((kt&2)===0&&(Ui|=n),on===4&&ei(e,yt,zl,!1)),Ta(e))}function _d(e,t,n){if((kt&6)!==0)throw Error(b(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Co(e,t),o=l?kh(e,t):gr(e,t,!0),i=l;do{if(o===0){us&&!l&&ei(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!Mh(n)){o=gr(e,t,!1),i=!1;continue}if(o===2){if(i=t,e.errorRecoveryDisabledLanes&i)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var p=e;o=tc;var v=p.current.memoizedState.isDehydrated;if(v&&(ds(p,c).flags|=256),c=gr(p,c,!1),c!==2){if(rr&&!v){p.errorRecoveryDisabledLanes|=i,Ui|=i,o=4;break e}i=ul,ul=o,i!==null&&(ul===null?ul=i:ul.push.apply(ul,i))}o=c}if(i=!1,o!==2)continue}}if(o===1){ds(e,0),ei(e,t,0,!0);break}e:{switch(l=e,i=o,i){case 0:case 1:throw Error(b(345));case 4:if((t&4194048)!==t)break;case 6:ei(l,t,zl,!Fo);break e;case 2:ul=null;break;case 3:case 5:break;default:throw Error(b(329))}if((t&62914560)===t&&(o=$c+300-Nn(),10<o)){if(ei(l,t,zl,!Fo),Zl(l,0,!0)!==0)break e;mo=t,l.timeoutHandle=dp(Bd.bind(null,l,n,ul,Wc,dr,t,zl,Ui,rs,Fo,i,"Throttled",-0,0),o);break e}Bd(l,n,ul,Wc,dr,t,zl,Ui,rs,Fo,i,null,-0,0)}}break}while(!0);Ta(e)}function Bd(e,t,n,l,o,i,c,p,v,j,H,$,N,_){if(e.timeoutHandle=-1,$=t.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:kl},Ad(t,i,$);var we=(i&62914560)===i?$c-Nn():(i&4194048)===i?Rd-Nn():0;if(we=f0($,we),we!==null){mo=i,e.cancelPendingCommit=we(qd.bind(null,e,t,i,n,l,o,c,p,v,H,$,null,N,_)),ei(e,i,c,!j);return}}qd(e,t,i,n,l,o,c,p,v)}function Mh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],i=o.getSnapshot;o=o.value;try{if(!In(i(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ei(e,t,n,l){t&=~fr,t&=~Ui,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var i=31-Gn(o),c=1<<i;l[i]=-1,o&=~c}n!==0&&Cs(e,n,t)}function Jc(){return(kt&6)===0?(lc(0),!1):!0}function yr(){if(pt!==null){if(Ot===0)var e=pt.return;else e=pt,Ul=to=null,Ru(e),Y=null,F=0,e=pt;for(;e!==null;)pd(e.alternate,e),e=e.return;pt=null}}function ds(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Qh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),mo=0,yr(),Vt=e,pt=n=ea(e.current,null),yt=t,Ot=0,Tl=null,Fo=!1,us=Co(e,t),rr=!1,rs=zl=fr=Ui=Wo=on=0,ul=tc=null,dr=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-Gn(l),i=1<<o;t|=e[o],l&=~i}return ho=t,Ie(),n}function Ud(e,t){We=null,B.H=Qs,t===X||t===I?(t=G(),Ot=3):t===V?(t=G(),Ot=4):Ot=t===Ku?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tl=t,pt===null&&(on=1,Xc(e,Cn(t,e.current)))}function Ld(){var e=Cl.current;return e===null?!0:(yt&4194048)===yt?Yl===null:(yt&62914560)===yt||(yt&536870912)!==0?e===Yl:!1}function Hd(){var e=B.H;return B.H=Qs,e===null?Qs:e}function Yd(){var e=B.A;return B.A=zh,e}function Pc(){on=4,Fo||(yt&4194048)!==yt&&Cl.current!==null||(us=!0),(Wo&134217727)===0&&(Ui&134217727)===0||Vt===null||ei(Vt,yt,zl,!1)}function gr(e,t,n){var l=kt;kt|=2;var o=Hd(),i=Yd();(Vt!==e||yt!==t)&&(Wc=null,ds(e,t)),t=!1;var c=on;e:do try{if(Ot!==0&&pt!==null){var p=pt,v=Tl;switch(Ot){case 8:yr(),c=6;break e;case 3:case 2:case 9:case 6:Cl.current===null&&(t=!0);var j=Ot;if(Ot=0,Tl=null,ps(e,p,v,j),n&&us){c=0;break e}break;default:j=Ot,Ot=0,Tl=null,ps(e,p,v,j)}}Ah(),c=on;break}catch(H){Ud(e,H)}while(!0);return t&&e.shellSuspendCounter++,Ul=to=null,kt=l,B.H=o,B.A=i,pt===null&&(Vt=null,yt=0,Ie()),c}function Ah(){for(;pt!==null;)Xd(pt)}function kh(e,t){var n=kt;kt|=2;var l=Hd(),o=Yd();Vt!==e||yt!==t?(Wc=null,Fc=Nn()+500,ds(e,t)):us=Co(e,t);e:do try{if(Ot!==0&&pt!==null){t=pt;var i=Tl;t:switch(Ot){case 1:Ot=0,Tl=null,ps(e,t,i,1);break;case 2:case 9:if(he(i)){Ot=0,Tl=null,Vd(t);break}t=function(){Ot!==2&&Ot!==9||Vt!==e||(Ot=7),Ta(e)},i.then(t,t);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:he(i)?(Ot=0,Tl=null,Vd(t)):(Ot=0,Tl=null,ps(e,t,i,7));break;case 5:var c=null;switch(pt.tag){case 26:c=pt.memoizedState;case 5:case 27:var p=pt;if(c?Mp(c):p.stateNode.complete){Ot=0,Tl=null;var v=p.sibling;if(v!==null)pt=v;else{var j=p.return;j!==null?(pt=j,eu(j)):pt=null}break t}}Ot=0,Tl=null,ps(e,t,i,5);break;case 6:Ot=0,Tl=null,ps(e,t,i,6);break;case 8:yr(),on=6;break e;default:throw Error(b(462))}}Dh();break}catch(H){Ud(e,H)}while(!0);return Ul=to=null,B.H=l,B.A=o,kt=n,pt!==null?0:(Vt=null,yt=0,Ie(),on)}function Dh(){for(;pt!==null&&!mc();)Xd(pt)}function Xd(e){var t=fd(e.alternate,e,ho);e.memoizedProps=e.pendingProps,t===null?eu(e):pt=t}function Vd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=od(n,t,t.pendingProps,t.type,void 0,yt);break;case 11:t=od(n,t,t.pendingProps,t.type.render,t.ref,yt);break;case 5:Ru(t);default:pd(n,t),t=pt=Ac(t,ho),t=fd(n,t,ho)}e.memoizedProps=e.pendingProps,t===null?eu(e):pt=t}function ps(e,t,n,l){Ul=to=null,Ru(t),Y=null,F=0;var o=t.return;try{if(bh(e,o,t,n,yt)){on=1,Xc(e,Cn(n,e.current)),pt=null;return}}catch(i){if(o!==null)throw pt=o,i;on=1,Xc(e,Cn(n,e.current)),pt=null;return}t.flags&32768?($e||l===1?e=!0:us||(yt&536870912)!==0?e=!1:(Fo=e=!0,(l===2||l===9||l===3||l===6)&&(l=Cl.current,l!==null&&l.tag===13&&(l.flags|=16384))),Gd(t,e)):eu(t)}function eu(e){var t=e;do{if((t.flags&32768)!==0){Gd(t,Fo);return}e=t.return;var n=Sh(t.alternate,t,ho);if(n!==null){pt=n;return}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);on===0&&(on=5)}function Gd(e,t){do{var n=Ch(e.alternate,e);if(n!==null){n.flags&=32767,pt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){pt=e;return}pt=e=n}while(e!==null);on=6,pt=null}function qd(e,t,n,l,o,i,c,p,v){e.cancelPendingCommit=null;do tu();while(Tn!==0);if((kt&6)!==0)throw Error(b(327));if(t!==null){if(t===e.current)throw Error(b(177));if(i=t.lanes|t.childLanes,i|=Ji,Ss(e,n,i,c,p,v),e===Vt&&(pt=Vt=null,yt=0),fs=t,Po=e,mo=n,pr=i,hr=o,Nd=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Oh(So,function(){return $d(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,o=oe.p,oe.p=2,c=kt,kt|=4;try{wh(e,t,n)}finally{kt=c,oe.p=o,B.T=l}}Tn=1,Zd(),Id(),Qd()}}function Zd(){if(Tn===1){Tn=0;var e=Po,t=fs,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=B.T,B.T=null;var l=oe.p;oe.p=2;var o=kt;kt|=4;try{zd(t,e);var i=kr,c=Ns(e.containerInfo),p=i.focusedElem,v=i.selectionRange;if(c!==p&&p&&p.ownerDocument&&qa(p.ownerDocument.documentElement,p)){if(v!==null&&Mt(p)){var j=v.start,H=v.end;if(H===void 0&&(H=j),"selectionStart"in p)p.selectionStart=j,p.selectionEnd=Math.min(H,p.value.length);else{var $=p.ownerDocument||document,N=$&&$.defaultView||window;if(N.getSelection){var _=N.getSelection(),we=p.textContent.length,He=Math.min(v.start,we),Ht=v.end===void 0?He:Math.min(v.end,we);!_.extend&&He>Ht&&(c=Ht,Ht=He,He=c);var z=ki(p,He),T=ki(p,Ht);if(z&&T&&(_.rangeCount!==1||_.anchorNode!==z.node||_.anchorOffset!==z.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var D=$.createRange();D.setStart(z.node,z.offset),_.removeAllRanges(),He>Ht?(_.addRange(D),_.extend(T.node,T.offset)):(D.setEnd(T.node,T.offset),_.addRange(D))}}}}for($=[],_=p;_=_.parentNode;)_.nodeType===1&&$.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<$.length;p++){var q=$[p];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}pu=!!Ar,kr=Ar=null}finally{kt=o,oe.p=l,B.T=n}}e.current=t,Tn=2}}function Id(){if(Tn===2){Tn=0;var e=Po,t=fs,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=B.T,B.T=null;var l=oe.p;oe.p=2;var o=kt;kt|=4;try{vd(e,t.alternate,t)}finally{kt=o,oe.p=l,B.T=n}}Tn=3}}function Qd(){if(Tn===4||Tn===3){Tn=0,Yi();var e=Po,t=fs,n=mo,l=Nd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Tn=5:(Tn=0,fs=Po=null,Kd(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Jo=null),Mn(n),t=t.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(st,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=B.T,o=oe.p,oe.p=2,B.T=null;try{for(var i=e.onRecoverableError,c=0;c<l.length;c++){var p=l[c];i(p.value,{componentStack:p.stack})}}finally{B.T=t,oe.p=o}}(mo&3)!==0&&tu(),Ta(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===mr?nc++:(nc=0,mr=e):nc=0,lc(0)}}function Kd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,a(t)))}function tu(){return Zd(),Id(),Qd(),$d()}function $d(){if(Tn!==5)return!1;var e=Po,t=pr;pr=0;var n=Mn(mo),l=B.T,o=oe.p;try{oe.p=32>n?32:n,B.T=null,n=hr,hr=null;var i=Po,c=mo;if(Tn=0,fs=Po=null,mo=0,(kt&6)!==0)throw Error(b(331));var p=kt;if(kt|=4,Dd(i.current),Md(i,i.current,c,n),kt=p,lc(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(st,i)}catch{}return!0}finally{oe.p=o,B.T=l,Kd(e,t)}}function Fd(e,t,n){t=Cn(n,t),t=Qu(e.stateNode,t,2),e=ut(e,t,2),e!==null&&(wo(e,2),Ta(e))}function _t(e,t,n){if(e.tag===3)Fd(e,e,n);else for(;t!==null;){if(t.tag===3){Fd(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Jo===null||!Jo.has(l))){e=Cn(n,e),n=Wf(2),l=ut(t,n,2),l!==null&&(Jf(n,l,t,e),wo(l,2),Ta(l));break}}t=t.return}}function br(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new Eh;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(rr=!0,o.add(n),e=jh.bind(null,e,t,n),t.then(e,e))}function jh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Vt===e&&(yt&n)===n&&(on===4||on===3&&(yt&62914560)===yt&&300>Nn()-$c?(kt&2)===0&&ds(e,0):fr|=n,rs===yt&&(rs=0)),Ta(e)}function Wd(e,t){t===0&&(t=ca()),e=ba(e,t),e!==null&&(wo(e,t),Ta(e))}function Rh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wd(e,n)}function Nh(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(b(314))}l!==null&&l.delete(t),Wd(e,n)}function Oh(e,t){return bo(e,t)}var nu=null,hs=null,xr=!1,lu=!1,vr=!1,ti=0;function Ta(e){e!==hs&&e.next===null&&(hs===null?nu=hs=e:hs=hs.next=e),lu=!0,xr||(xr=!0,Bh())}function lc(e,t){if(!vr&&lu){vr=!0;do for(var n=!1,l=nu;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var i=0;else{var c=l.suspendedLanes,p=l.pingedLanes;i=(1<<31-Gn(42|e)+1)-1,i&=o&~(c&~p),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,tp(l,i))}else i=yt,i=Zl(l,l===Vt?i:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(i&3)===0||Co(l,i)||(n=!0,tp(l,i));l=l.next}while(n);vr=!1}}function _h(){Jd()}function Jd(){lu=xr=!1;var e=0;ti!==0&&Ih()&&(e=ti);for(var t=Nn(),n=null,l=nu;l!==null;){var o=l.next,i=Pd(l,t);i===0?(l.next=null,n===null?nu=o:n.next=o,o===null&&(hs=n)):(n=l,(e!==0||(i&3)!==0)&&(lu=!0)),l=o}Tn!==0&&Tn!==5||lc(e),ti!==0&&(ti=0)}function Pd(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var c=31-Gn(i),p=1<<c,v=o[c];v===-1?((p&n)===0||(p&l)!==0)&&(o[c]=Ea(p,t)):v<=t&&(e.expiredLanes|=p),i&=~p}if(t=Vt,n=yt,n=Zl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Hi(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Co(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Hi(l),Mn(n)){case 2:case 8:n=vo;break;case 32:n=So;break;case 268435456:n=Xi;break;default:n=So}return l=ep.bind(null,e),n=bo(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Hi(l),e.callbackPriority=2,e.callbackNode=null,2}function ep(e,t){if(Tn!==0&&Tn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var l=yt;return l=Zl(e,e===Vt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(_d(e,l,t),Pd(e,Nn()),e.callbackNode!=null&&e.callbackNode===n?ep.bind(null,e):null)}function tp(e,t){if(tu())return null;_d(e,t,!0)}function Bh(){Kh(function(){(kt&6)!==0?bo(xo,_h):Jd()})}function Sr(){if(ti===0){var e=d;e===0&&(e=Ml,Ml<<=1,(Ml&261888)===0&&(Ml=256)),ti=e}return ti}function np(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:hi(""+e)}function lp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Uh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var i=np((o[An]||null).action),c=l.submitter;c&&(t=(t=c[An]||null)?np(t.formAction):c.getAttribute("formAction"),t!==null&&(i=t,c=null));var p=new da("action","action",null,l,o);e.push({event:p,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ti!==0){var v=c?lp(o,c):new FormData(o);Xu(n,{pending:!0,data:v,method:o.method,action:i},null,v)}}else typeof i=="function"&&(p.preventDefault(),v=c?lp(o,c):new FormData(o),Xu(n,{pending:!0,data:v,method:o.method,action:i},i,v))},currentTarget:o}]})}}for(var Cr=0;Cr<Sl.length;Cr++){var wr=Sl[Cr],Lh=wr.toLowerCase(),Hh=wr[0].toUpperCase()+wr.slice(1);ll(Lh,"on"+Hh)}ll(Di,"onAnimationEnd"),ll(Pl,"onAnimationIteration"),ll(Fi,"onAnimationStart"),ll("dblclick","onDoubleClick"),ll("focusin","onFocus"),ll("focusout","onBlur"),ll(Yo,"onTransitionRun"),ll(vl,"onTransitionStart"),ll(_s,"onTransitionCancel"),ll(Bs,"onTransitionEnd"),zo("onMouseEnter",["mouseout","mouseover"]),zo("onMouseLeave",["mouseout","mouseover"]),zo("onPointerEnter",["pointerout","pointerover"]),zo("onPointerLeave",["pointerout","pointerover"]),ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ra("onBeforeInput",["compositionend","keypress","textInput","paste"]),ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ac));function ap(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var i=void 0;if(t)for(var c=l.length-1;0<=c;c--){var p=l[c],v=p.instance,j=p.currentTarget;if(p=p.listener,v!==i&&o.isPropagationStopped())break e;i=p,o.currentTarget=j;try{i(o)}catch(H){Wi(H)}o.currentTarget=null,i=v}else for(c=0;c<l.length;c++){if(p=l[c],v=p.instance,j=p.currentTarget,p=p.listener,v!==i&&o.isPropagationStopped())break e;i=p,o.currentTarget=j;try{i(o)}catch(H){Wi(H)}o.currentTarget=null,i=v}}}}function ht(e,t){var n=t[ci];n===void 0&&(n=t[ci]=new Set);var l=e+"__bubble";n.has(l)||(op(t,e,2,!1),n.add(l))}function Tr(e,t,n){var l=0;t&&(l|=4),op(n,e,l,t)}var au="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[au]){e[au]=!0,Ts.forEach(function(n){n!=="selectionchange"&&(Yh.has(n)||Tr(n,!1,e),Tr(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[au]||(t[au]=!0,Tr("selectionchange",!1,t))}}function op(e,t,n,l){switch(Op(t)){case 2:var o=h0;break;case 8:o=m0;break;default:o=Yr}n=o.bind(null,t,n,e),o=void 0,!Ba||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Er(e,t,n,l,o){var i=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var c=l.tag;if(c===3||c===4){var p=l.stateNode.containerInfo;if(p===o)break;if(c===4)for(c=l.return;c!==null;){var v=c.tag;if((v===3||v===4)&&c.stateNode.containerInfo===o)return;c=c.return}for(;p!==null;){if(c=hl(p),c===null)return;if(v=c.tag,v===5||v===6||v===26||v===27){l=i=c;continue e}p=p.parentNode}}l=l.return}mi(function(){var j=i,H=Na(n),$=[];e:{var N=ji.get(e);if(N!==void 0){var _=da,we=e;switch(e){case"keypress":if($l(n)===0)break e;case"keydown":case"keyup":_=Nl;break;case"focusin":we="focus",_=Es;break;case"focusout":we="blur",_=Es;break;case"beforeblur":case"afterblur":_=Es;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Do;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=qt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=xi;break;case Di:case Pl:case Fi:_=bi;break;case Bs:_=pn;break;case"scroll":case"scrollend":_=Cu;break;case"wheel":_=wu;break;case"copy":case"cut":case"paste":_=tl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Ya;break;case"toggle":case"beforetoggle":_=wc}var He=(t&4)!==0,Ht=!He&&(e==="scroll"||e==="scrollend"),z=He?N!==null?N+"Capture":null:N;He=[];for(var T=j,D;T!==null;){var q=T;if(D=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||D===null||z===null||(q=jl(T,z),q!=null&&He.push(oc(T,q,D))),Ht)break;T=T.return}0<He.length&&(N=new _(N,we,null,n,H),$.push({event:N,listeners:He}))}}if((t&7)===0){e:{if(N=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",N&&n!==Ii&&(we=n.relatedTarget||n.fromElement)&&(hl(we)||we[Ge]))break e;if((_||N)&&(N=H.window===H?H:(N=H.ownerDocument)?N.defaultView||N.parentWindow:window,_?(we=n.relatedTarget||n.toElement,_=j,we=we?hl(we):null,we!==null&&(Ht=ce(we),He=we.tag,we!==Ht||He!==5&&He!==27&&He!==6)&&(we=null)):(_=null,we=j),_!==we)){if(He=Do,q="onMouseLeave",z="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(He=Ya,q="onPointerLeave",z="onPointerEnter",T="pointer"),Ht=_==null?N:ui(_),D=we==null?N:ui(we),N=new He(q,T+"leave",_,n,H),N.target=Ht,N.relatedTarget=D,q=null,hl(H)===j&&(He=new He(z,T+"enter",we,n,H),He.target=D,He.relatedTarget=Ht,q=He),Ht=q,_&&we)t:{for(He=Xh,z=_,T=we,D=0,q=z;q;q=He(q))D++;q=0;for(var Ne=T;Ne;Ne=He(Ne))q++;for(;0<D-q;)z=He(z),D--;for(;0<q-D;)T=He(T),q--;for(;D--;){if(z===T||T!==null&&z===T.alternate){He=z;break t}z=He(z),T=He(T)}He=null}else He=null;_!==null&&ip($,N,_,He,!1),we!==null&&Ht!==null&&ip($,Ht,we,He,!0)}}e:{if(N=j?ui(j):window,_=N.nodeName&&N.nodeName.toLowerCase(),_==="select"||_==="input"&&N.type==="file")var Tt=Bo;else if(Xa(N))if(Ki)Tt=Tu;else{Tt=Xt;var ze=xl}else _=N.nodeName,!_||_.toLowerCase()!=="input"||N.type!=="checkbox"&&N.type!=="radio"?j&&pi(j.elementType)&&(Tt=Bo):Tt=Ga;if(Tt&&(Tt=Tt(e,j))){Ds($,Tt,n,H);break e}ze&&ze(e,N,j),e==="focusout"&&j&&N.type==="number"&&j.memoizedProps.value!=null&&fi(N,"number",N.value)}switch(ze=j?ui(j):window,e){case"focusin":(Xa(ze)||ze.contentEditable==="true")&&(It=ze,Lo=j,Za=null);break;case"focusout":Za=Lo=It=null;break;case"mousedown":ga=!0;break;case"contextmenu":case"mouseup":case"dragend":ga=!1,Os($,n,H);break;case"selectionchange":if(_l)break;case"keydown":case"keyup":Os($,n,H)}var lt;if(Ci)e:{switch(e){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else bl?Ti(e,n)&&(gt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(gt="onCompositionStart");gt&&(ks&&n.locale!=="ko"&&(bl||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&bl&&(lt=Sc()):(Pn=H,Ao="value"in Pn?Pn.value:Pn.textContent,bl=!0)),ze=ou(j,gt),0<ze.length&&(gt=new pa(gt,e,null,n,H),$.push({event:gt,listeners:ze}),lt?gt.data=lt:(lt=No(n),lt!==null&&(gt.data=lt)))),(lt=zc?Ec(e,n):Oo(e,n))&&(gt=ou(j,"onBeforeInput"),0<gt.length&&(ze=new pa("onBeforeInput","beforeinput",null,n,H),$.push({event:ze,listeners:gt}),ze.data=lt)),Uh($,e,j,n,H)}ap($,t)})}function oc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ou(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,i=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||i===null||(o=jl(e,n),o!=null&&l.unshift(oc(e,o,i)),o=jl(e,t),o!=null&&l.push(oc(e,o,i))),e.tag===3)return l;e=e.return}return[]}function Xh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ip(e,t,n,l,o){for(var i=t._reactName,c=[];n!==null&&n!==l;){var p=n,v=p.alternate,j=p.stateNode;if(p=p.tag,v!==null&&v===l)break;p!==5&&p!==26&&p!==27||j===null||(v=j,o?(j=jl(n,i),j!=null&&c.unshift(oc(n,j,v))):o||(j=jl(n,i),j!=null&&c.push(oc(n,j,v)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var Vh=/\r\n?/g,Gh=/\u0000|\uFFFD/g;function sp(e){return(typeof e=="string"?e:""+e).replace(Vh,`
`).replace(Gh,"")}function cp(e,t){return t=sp(t),sp(e)===t}function Lt(e,t,n,l,o,i){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Ra(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Ra(e,""+l);break;case"className":sn(e,"class",l);break;case"tabIndex":sn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(e,n,l);break;case"style":Zi(e,l,i);break;case"data":if(t!=="object"){sn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=hi(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Lt(e,t,"name",o.name,o,null),Lt(e,t,"formEncType",o.formEncType,o,null),Lt(e,t,"formMethod",o.formMethod,o,null),Lt(e,t,"formTarget",o.formTarget,o,null)):(Lt(e,t,"encType",o.encType,o,null),Lt(e,t,"method",o.method,o,null),Lt(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=hi(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=kl);break;case"onScroll":l!=null&&ht("scroll",e);break;case"onScrollEnd":l!=null&&ht("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(b(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=hi(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":ht("beforetoggle",e),ht("toggle",e),nt(e,"popover",l);break;case"xlinkActuate":Le(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Le(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Le(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Le(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Le(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Le(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Le(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Le(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Le(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":nt(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=xc.get(n)||n,nt(e,n,l))}}function Mr(e,t,n,l,o,i){switch(n){case"style":Zi(e,l,i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(b(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(b(60));e.innerHTML=n}}break;case"children":typeof l=="string"?Ra(e,l):(typeof l=="number"||typeof l=="bigint")&&Ra(e,""+l);break;case"onScroll":l!=null&&ht("scroll",e);break;case"onScrollEnd":l!=null&&ht("scrollend",e);break;case"onClick":l!=null&&(e.onclick=kl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bc.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),i=e[An]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,o),typeof l=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):nt(e,n,l)}}}function Ln(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",e),ht("load",e);var l=!1,o=!1,i;for(i in n)if(n.hasOwnProperty(i)){var c=n[i];if(c!=null)switch(i){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:Lt(e,t,i,c,n,null)}}o&&Lt(e,t,"srcSet",n.srcSet,n,null),l&&Lt(e,t,"src",n.src,n,null);return;case"input":ht("invalid",e);var p=i=c=o=null,v=null,j=null;for(l in n)if(n.hasOwnProperty(l)){var H=n[l];if(H!=null)switch(l){case"name":o=H;break;case"type":c=H;break;case"checked":v=H;break;case"defaultChecked":j=H;break;case"value":i=H;break;case"defaultValue":p=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(b(137,t));break;default:Lt(e,t,l,H,n,null)}}ml(e,i,p,v,j,c,o,!1);return;case"select":ht("invalid",e),l=c=i=null;for(o in n)if(n.hasOwnProperty(o)&&(p=n[o],p!=null))switch(o){case"value":i=p;break;case"defaultValue":c=p;break;case"multiple":l=p;default:Lt(e,t,o,p,n,null)}t=i,n=c,e.multiple=!!l,t!=null?Ql(e,!!l,t,!1):n!=null&&Ql(e,!!l,n,!0);return;case"textarea":ht("invalid",e),i=o=l=null;for(c in n)if(n.hasOwnProperty(c)&&(p=n[c],p!=null))switch(c){case"value":l=p;break;case"defaultValue":o=p;break;case"children":i=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(b(91));break;default:Lt(e,t,c,p,n,null)}di(e,l,o,i);return;case"option":for(v in n)if(n.hasOwnProperty(v)&&(l=n[v],l!=null))switch(v){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Lt(e,t,v,l,n,null)}return;case"dialog":ht("beforetoggle",e),ht("toggle",e),ht("cancel",e),ht("close",e);break;case"iframe":case"object":ht("load",e);break;case"video":case"audio":for(l=0;l<ac.length;l++)ht(ac[l],e);break;case"image":ht("error",e),ht("load",e);break;case"details":ht("toggle",e);break;case"embed":case"source":case"link":ht("error",e),ht("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in n)if(n.hasOwnProperty(j)&&(l=n[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(b(137,t));default:Lt(e,t,j,l,n,null)}return;default:if(pi(t)){for(H in n)n.hasOwnProperty(H)&&(l=n[H],l!==void 0&&Mr(e,t,H,l,n,void 0));return}}for(p in n)n.hasOwnProperty(p)&&(l=n[p],l!=null&&Lt(e,t,p,l,n,null))}function qh(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,c=null,p=null,v=null,j=null,H=null;for(_ in n){var $=n[_];if(n.hasOwnProperty(_)&&$!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":v=$;default:l.hasOwnProperty(_)||Lt(e,t,_,null,l,$)}}for(var N in l){var _=l[N];if($=n[N],l.hasOwnProperty(N)&&(_!=null||$!=null))switch(N){case"type":i=_;break;case"name":o=_;break;case"checked":j=_;break;case"defaultChecked":H=_;break;case"value":c=_;break;case"defaultValue":p=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(b(137,t));break;default:_!==$&&Lt(e,t,N,_,l,$)}}Al(e,c,p,v,j,H,i,o);return;case"select":_=c=p=N=null;for(i in n)if(v=n[i],n.hasOwnProperty(i)&&v!=null)switch(i){case"value":break;case"multiple":_=v;default:l.hasOwnProperty(i)||Lt(e,t,i,null,l,v)}for(o in l)if(i=l[o],v=n[o],l.hasOwnProperty(o)&&(i!=null||v!=null))switch(o){case"value":N=i;break;case"defaultValue":p=i;break;case"multiple":c=i;default:i!==v&&Lt(e,t,o,i,l,v)}t=p,n=c,l=_,N!=null?Ql(e,!!n,N,!1):!!l!=!!n&&(t!=null?Ql(e,!!n,t,!0):Ql(e,!!n,n?[]:"",!1));return;case"textarea":_=N=null;for(p in n)if(o=n[p],n.hasOwnProperty(p)&&o!=null&&!l.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Lt(e,t,p,null,l,o)}for(c in l)if(o=l[c],i=n[c],l.hasOwnProperty(c)&&(o!=null||i!=null))switch(c){case"value":N=o;break;case"defaultValue":_=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(b(91));break;default:o!==i&&Lt(e,t,c,o,l,i)}zs(e,N,_);return;case"option":for(var we in n)if(N=n[we],n.hasOwnProperty(we)&&N!=null&&!l.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:Lt(e,t,we,null,l,N)}for(v in l)if(N=l[v],_=n[v],l.hasOwnProperty(v)&&N!==_&&(N!=null||_!=null))switch(v){case"selected":e.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:Lt(e,t,v,N,l,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in n)N=n[He],n.hasOwnProperty(He)&&N!=null&&!l.hasOwnProperty(He)&&Lt(e,t,He,null,l,N);for(j in l)if(N=l[j],_=n[j],l.hasOwnProperty(j)&&N!==_&&(N!=null||_!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(b(137,t));break;default:Lt(e,t,j,N,l,_)}return;default:if(pi(t)){for(var Ht in n)N=n[Ht],n.hasOwnProperty(Ht)&&N!==void 0&&!l.hasOwnProperty(Ht)&&Mr(e,t,Ht,void 0,l,N);for(H in l)N=l[H],_=n[H],!l.hasOwnProperty(H)||N===_||N===void 0&&_===void 0||Mr(e,t,H,N,l,_);return}}for(var z in n)N=n[z],n.hasOwnProperty(z)&&N!=null&&!l.hasOwnProperty(z)&&Lt(e,t,z,null,l,N);for($ in l)N=l[$],_=n[$],!l.hasOwnProperty($)||N===_||N==null&&_==null||Lt(e,t,$,N,l,_)}function up(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],i=o.transferSize,c=o.initiatorType,p=o.duration;if(i&&p&&up(c)){for(c=0,p=o.responseEnd,l+=1;l<n.length;l++){var v=n[l],j=v.startTime;if(j>p)break;var H=v.transferSize,$=v.initiatorType;H&&up($)&&(v=v.responseEnd,c+=H*(v<p?1:(p-j)/(v-j)))}if(--l,t+=8*(i+c)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ar=null,kr=null;function iu(e){return e.nodeType===9?e:e.ownerDocument}function rp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Dr(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jr=null;function Ih(){var e=window.event;return e&&e.type==="popstate"?e===jr?!1:(jr=e,!0):(jr=null,!1)}var dp=typeof setTimeout=="function"?setTimeout:void 0,Qh=typeof clearTimeout=="function"?clearTimeout:void 0,pp=typeof Promise=="function"?Promise:void 0,Kh=typeof queueMicrotask=="function"?queueMicrotask:typeof pp<"u"?function(e){return pp.resolve(null).then(e).catch($h)}:dp;function $h(e){setTimeout(function(){throw e})}function ni(e){return e==="head"}function hp(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),bs(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")ic(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ic(n);for(var i=n.firstChild;i;){var c=i.nextSibling,p=i.nodeName;i[ka]||p==="SCRIPT"||p==="STYLE"||p==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=c}}else n==="body"&&ic(e.ownerDocument.body);n=o}while(n);bs(t)}function mp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function Rr(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Rr(n),ua(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Fh(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ka])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Xl(e.nextSibling),e===null)break}return null}function Wh(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Xl(e.nextSibling),e===null))return null;return e}function yp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Xl(e.nextSibling),e===null))return null;return e}function Nr(e){return e.data==="$?"||e.data==="$~"}function Or(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jh(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Xl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _r=null;function gp(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Xl(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function bp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function xp(e,t,n){switch(t=iu(n),e){case"html":if(e=t.documentElement,!e)throw Error(b(452));return e;case"head":if(e=t.head,!e)throw Error(b(453));return e;case"body":if(e=t.body,!e)throw Error(b(454));return e;default:throw Error(b(451))}}function ic(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ua(e)}var Vl=new Map,vp=new Set;function su(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yo=oe.d;oe.d={f:Ph,r:e0,D:t0,C:n0,L:l0,m:a0,X:i0,S:o0,M:s0};function Ph(){var e=yo.f(),t=Jc();return e||t}function e0(e){var t=Da(e);t!==null&&t.tag===5&&t.type==="form"?Uf(t):yo.r(e)}var ms=typeof document>"u"?null:document;function Sp(e,t,n){var l=ms;if(l&&typeof t=="string"&&t){var o=ft(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),vp.has(o)||(vp.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),Ln(t,"link",e),dn(t),l.head.appendChild(t)))}}function t0(e){yo.D(e),Sp("dns-prefetch",e,null)}function n0(e,t){yo.C(e,t),Sp("preconnect",e,t)}function l0(e,t,n){yo.L(e,t,n);var l=ms;if(l&&e&&t){var o='link[rel="preload"][as="'+ft(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+ft(n.imageSizes)+'"]')):o+='[href="'+ft(e)+'"]';var i=o;switch(t){case"style":i=ys(e);break;case"script":i=gs(e)}Vl.has(i)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Vl.set(i,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(sc(i))||t==="script"&&l.querySelector(cc(i))||(t=l.createElement("link"),Ln(t,"link",e),dn(t),l.head.appendChild(t)))}}function a0(e,t){yo.m(e,t);var n=ms;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+ft(l)+'"][href="'+ft(e)+'"]',i=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=gs(e)}if(!Vl.has(i)&&(e=x({rel:"modulepreload",href:e},t),Vl.set(i,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(cc(i)))return}l=n.createElement("link"),Ln(l,"link",e),dn(l),n.head.appendChild(l)}}}function o0(e,t,n){yo.S(e,t,n);var l=ms;if(l&&e){var o=ri(l).hoistableStyles,i=ys(e);t=t||"default";var c=o.get(i);if(!c){var p={loading:0,preload:null};if(c=l.querySelector(sc(i)))p.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Vl.get(i))&&Br(e,n);var v=c=l.createElement("link");dn(v),Ln(v,"link",e),v._p=new Promise(function(j,H){v.onload=j,v.onerror=H}),v.addEventListener("load",function(){p.loading|=1}),v.addEventListener("error",function(){p.loading|=2}),p.loading|=4,cu(c,t,l)}c={type:"stylesheet",instance:c,count:1,state:p},o.set(i,c)}}}function i0(e,t){yo.X(e,t);var n=ms;if(n&&e){var l=ri(n).hoistableScripts,o=gs(e),i=l.get(o);i||(i=n.querySelector(cc(o)),i||(e=x({src:e,async:!0},t),(t=Vl.get(o))&&Ur(e,t),i=n.createElement("script"),dn(i),Ln(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(o,i))}}function s0(e,t){yo.M(e,t);var n=ms;if(n&&e){var l=ri(n).hoistableScripts,o=gs(e),i=l.get(o);i||(i=n.querySelector(cc(o)),i||(e=x({src:e,async:!0,type:"module"},t),(t=Vl.get(o))&&Ur(e,t),i=n.createElement("script"),dn(i),Ln(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},l.set(o,i))}}function Cp(e,t,n,l){var o=(o=et.current)?su(o):null;if(!o)throw Error(b(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ys(n.href),n=ri(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ys(n.href);var i=ri(o).hoistableStyles,c=i.get(e);if(c||(o=o.ownerDocument||o,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,c),(i=o.querySelector(sc(e)))&&!i._p&&(c.instance=i,c.state.loading=5),Vl.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Vl.set(e,n),i||c0(o,e,n,c.state))),t&&l===null)throw Error(b(528,""));return c}if(t&&l!==null)throw Error(b(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=gs(n),n=ri(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(b(444,e))}}function ys(e){return'href="'+ft(e)+'"'}function sc(e){return'link[rel="stylesheet"]['+e+"]"}function wp(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function c0(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ln(t,"link",n),dn(t),e.head.appendChild(t))}function gs(e){return'[src="'+ft(e)+'"]'}function cc(e){return"script[async]"+e}function Tp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(l)return t.instance=l,dn(l),l;var o=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),dn(l),Ln(l,"style",o),cu(l,n.precedence,e),t.instance=l;case"stylesheet":o=ys(n.href);var i=e.querySelector(sc(o));if(i)return t.state.loading|=4,t.instance=i,dn(i),i;l=wp(n),(o=Vl.get(o))&&Br(l,o),i=(e.ownerDocument||e).createElement("link"),dn(i);var c=i;return c._p=new Promise(function(p,v){c.onload=p,c.onerror=v}),Ln(i,"link",l),t.state.loading|=4,cu(i,n.precedence,e),t.instance=i;case"script":return i=gs(n.src),(o=e.querySelector(cc(i)))?(t.instance=o,dn(o),o):(l=n,(o=Vl.get(i))&&(l=x({},n),Ur(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),dn(o),Ln(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(b(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,cu(l,n.precedence,e));return t.instance}function cu(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,i=o,c=0;c<l.length;c++){var p=l[c];if(p.dataset.precedence===t)i=p;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Br(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ur(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var uu=null;function zp(e,t,n){if(uu===null){var l=new Map,o=uu=new Map;o.set(n,l)}else o=uu,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[ka]||i[vt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var c=i.getAttribute(t)||"";c=e+c;var p=l.get(c);p?p.push(i):l.set(c,[i])}}return l}function Ep(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function u0(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Mp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function r0(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=ys(l.href),i=t.querySelector(sc(o));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ru.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,dn(i);return}i=t.ownerDocument||t,l=wp(l),(o=Vl.get(o))&&Br(l,o),i=i.createElement("link"),dn(i);var c=i;c._p=new Promise(function(p,v){c.onload=p,c.onerror=v}),Ln(i,"link",l),n.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=ru.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Lr=0;function f0(e,t){return e.stylesheets&&e.count===0&&du(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&du(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&Lr===0&&(Lr=62500*Zh());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&du(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>Lr?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function ru(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)du(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var fu=null;function du(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,fu=new Map,t.forEach(d0,e),fu=null,ru.call(e))}function d0(e,t){if(!(t.state.loading&4)){var n=fu.get(e);if(n)var l=n.get(null);else{n=new Map,fu.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var c=o[i];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(n.set(c.dataset.precedence,c),l=c)}l&&n.set(null,l)}o=t.instance,c=o.getAttribute("data-precedence"),i=n.get(c)||l,i===l&&n.set(null,o),n.set(c,o),this.count++,l=ru.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),i?i.parentNode.insertBefore(o,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var uc={$$typeof:ie,Provider:null,Consumer:null,_currentValue:Be,_currentValue2:Be,_threadCount:0};function p0(e,t,n,l,o,i,c,p,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ma(0),this.hiddenUpdates=Ma(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Ap(e,t,n,l,o,i,c,p,v,j,H,$){return e=new p0(e,t,n,c,v,j,H,$,p),t=1,i===!0&&(t|=24),i=Yn(3,null,null,t),e.current=i,i.stateNode=e,t=te(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:l,isDehydrated:n,cache:t},xt(i),e}function kp(e){return e?(e=Kn,e):Kn}function Dp(e,t,n,l,o,i){o=kp(o),l.context===null?l.context=o:l.pendingContext=o,l=Fe(t),l.payload={element:n},i=i===void 0?null:i,i!==null&&(l.callback=i),n=ut(e,l,t),n!==null&&(rl(n,e,t),dt(n,e,t))}function jp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hr(e,t){jp(e,t),(e=e.alternate)&&jp(e,t)}function Rp(e){if(e.tag===13||e.tag===31){var t=ba(e,67108864);t!==null&&rl(t,e,67108864),Hr(e,67108864)}}function Np(e){if(e.tag===13||e.tag===31){var t=El();t=To(t);var n=ba(e,t);n!==null&&rl(n,e,t),Hr(e,t)}}var pu=!0;function h0(e,t,n,l){var o=B.T;B.T=null;var i=oe.p;try{oe.p=2,Yr(e,t,n,l)}finally{oe.p=i,B.T=o}}function m0(e,t,n,l){var o=B.T;B.T=null;var i=oe.p;try{oe.p=8,Yr(e,t,n,l)}finally{oe.p=i,B.T=o}}function Yr(e,t,n,l){if(pu){var o=Xr(l);if(o===null)Er(e,t,l,hu,n),_p(e,l);else if(g0(o,e,t,n,l))l.stopPropagation();else if(_p(e,l),t&4&&-1<y0.indexOf(e)){for(;o!==null;){var i=Da(o);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var c=be(i.pendingLanes);if(c!==0){var p=i;for(p.pendingLanes|=2,p.entangledLanes|=2;c;){var v=1<<31-Gn(c);p.entanglements[1]|=v,c&=~v}Ta(i),(kt&6)===0&&(Fc=Nn()+500,lc(0))}}break;case 31:case 13:p=ba(i,2),p!==null&&rl(p,i,2),Jc(),Hr(i,2)}if(i=Xr(l),i===null&&Er(e,t,l,hu,n),i===o)break;o=i}o!==null&&l.stopPropagation()}else Er(e,t,l,null,n)}}function Xr(e){return e=Na(e),Vr(e)}var hu=null;function Vr(e){if(hu=null,e=hl(e),e!==null){var t=ce(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=P(t),e!==null)return e;e=null}else if(n===31){if(e=je(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return hu=e,null}function Op(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dl()){case xo:return 2;case vo:return 8;case So:case Gl:return 32;case Xi:return 268435456;default:return 32}default:return 32}}var Gr=!1,li=null,ai=null,oi=null,rc=new Map,fc=new Map,ii=[],y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _p(e,t){switch(e){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":rc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(t.pointerId)}}function dc(e,t,n,l,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Da(t),t!==null&&Rp(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function g0(e,t,n,l,o){switch(t){case"focusin":return li=dc(li,e,t,n,l,o),!0;case"dragenter":return ai=dc(ai,e,t,n,l,o),!0;case"mouseover":return oi=dc(oi,e,t,n,l,o),!0;case"pointerover":var i=o.pointerId;return rc.set(i,dc(rc.get(i)||null,e,t,n,l,o)),!0;case"gotpointercapture":return i=o.pointerId,fc.set(i,dc(fc.get(i)||null,e,t,n,l,o)),!0}return!1}function Bp(e){var t=hl(e.target);if(t!==null){var n=ce(t);if(n!==null){if(t=n.tag,t===13){if(t=P(n),t!==null){e.blockedOn=t,Aa(e.priority,function(){Np(n)});return}}else if(t===31){if(t=je(n),t!==null){e.blockedOn=t,Aa(e.priority,function(){Np(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xr(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Ii=l,n.target.dispatchEvent(l),Ii=null}else return t=Da(n),t!==null&&Rp(t),e.blockedOn=n,!1;t.shift()}return!0}function Up(e,t,n){mu(e)&&n.delete(t)}function b0(){Gr=!1,li!==null&&mu(li)&&(li=null),ai!==null&&mu(ai)&&(ai=null),oi!==null&&mu(oi)&&(oi=null),rc.forEach(Up),fc.forEach(Up)}function yu(e,t){e.blockedOn===t&&(e.blockedOn=null,Gr||(Gr=!0,k.unstable_scheduleCallback(k.unstable_NormalPriority,b0)))}var gu=null;function Lp(e){gu!==e&&(gu=e,k.unstable_scheduleCallback(k.unstable_NormalPriority,function(){gu===e&&(gu=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(Vr(l||n)===null)continue;break}var i=Da(n);i!==null&&(e.splice(t,3),t-=3,Xu(i,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function bs(e){function t(v){return yu(v,e)}li!==null&&yu(li,e),ai!==null&&yu(ai,e),oi!==null&&yu(oi,e),rc.forEach(t),fc.forEach(t);for(var n=0;n<ii.length;n++){var l=ii[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<ii.length&&(n=ii[0],n.blockedOn===null);)Bp(n),n.blockedOn===null&&ii.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],i=n[l+1],c=o[An]||null;if(typeof i=="function")c||Lp(n);else if(c){var p=null;if(i&&i.hasAttribute("formAction")){if(o=i,c=i[An]||null)p=c.formAction;else if(Vr(o)!==null)continue}else p=c.action;typeof p=="function"?n[l+1]=p:(n.splice(l,3),l-=3),Lp(n)}}}function Hp(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(c){return o=c})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function qr(e){this._internalRoot=e}bu.prototype.render=qr.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(b(409));var n=t.current,l=El();Dp(n,l,e,t,null,null)},bu.prototype.unmount=qr.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dp(e.current,2,null,e,null,null),Jc(),t[Ge]=null}};function bu(e){this._internalRoot=e}bu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gi();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ii.length&&t!==0&&t<ii[n].priority;n++);ii.splice(n,0,e),n===0&&Bp(e)}};var Yp=E.version;if(Yp!=="19.2.0")throw Error(b(527,Yp,"19.2.0"));oe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(b(188)):(e=Object.keys(e).join(","),Error(b(268,e)));return e=O(t),e=e!==null?Te(e):null,e=e===null?null:e.stateNode,e};var x0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{st=xu.inject(x0),Bt=xu}catch{}}return hc.createRoot=function(e,t){if(!ae(e))throw Error(b(299));var n=!1,l="",o=Qf,i=Kf,c=$f;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Ap(e,1,!1,null,null,n,l,null,o,i,c,Hp),e[Ge]=t.current,zr(e),new qr(t)},hc.hydrateRoot=function(e,t,n){if(!ae(e))throw Error(b(299));var l=!1,o="",i=Qf,c=Kf,p=$f,v=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError),n.formState!==void 0&&(v=n.formState)),t=Ap(e,1,!0,t,n??null,l,o,v,i,c,p,Hp),t.context=kp(null),n=t.current,l=El(),l=To(l),o=Fe(l),o.callback=null,ut(n,o,l),n=l,t.current.lanes=n,wo(t,n),Ta(t),e[Ge]=t.current,zr(e),new bu(t)},hc.version="19.2.0",hc}var Fp;function D0(){if(Fp)return Qr.exports;Fp=1;function k(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k)}catch(E){console.error(E)}}return k(),Qr.exports=k0(),Qr.exports}var j0=D0();function R0(k,E){return k?E?{minX:Math.min(k.minX,E.minX),minY:Math.min(k.minY,E.minY),maxX:Math.max(k.maxX,E.maxX),maxY:Math.max(k.maxY,E.maxY)}:k:E}function N0(k,E,ee,b,ae,ce,P,je,se){const O=k/2,Te=E/2,x=[{x:-O,y:-Te},{x:O,y:-Te},{x:O,y:Te},{x:-O,y:Te}],Z=se*Math.PI/180,Je=Math.sin(Z),Q=Math.cos(Z);let ne=1/0,ue=1/0,W=-1/0,xe=-1/0;for(const ie of x){const ke=ie.x*P,Pe=ie.y*je,pe=ke*Q-Pe*Je,Ee=ke*Je+Pe*Q,jt=ee+ae+pe,fe=b+ce+Ee;jt<ne&&(ne=jt),fe<ue&&(ue=fe),jt>W&&(W=jt),fe>xe&&(xe=fe)}return{minX:ne,minY:ue,maxX:W,maxY:xe}}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=k=>k.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_0=k=>k.replace(/^([A-Z])|[\s-_]+(\w)/g,(E,ee,b)=>b?b.toUpperCase():ee.toLowerCase()),Wp=k=>{const E=_0(k);return E.charAt(0).toUpperCase()+E.slice(1)},nh=(...k)=>k.filter((E,ee,b)=>!!E&&E.trim()!==""&&b.indexOf(E)===ee).join(" ").trim(),B0=k=>{for(const E in k)if(E.startsWith("aria-")||E==="role"||E==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=C.forwardRef(({color:k="currentColor",size:E=24,strokeWidth:ee=2,absoluteStrokeWidth:b,className:ae="",children:ce,iconNode:P,...je},se)=>C.createElement("svg",{ref:se,...U0,width:E,height:E,stroke:k,strokeWidth:b?Number(ee)*24/Number(E):ee,className:nh("lucide",ae),...!ce&&!B0(je)&&{"aria-hidden":"true"},...je},[...P.map(([O,Te])=>C.createElement(O,Te)),...Array.isArray(ce)?ce:[ce]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=(k,E)=>{const ee=C.forwardRef(({className:b,...ae},ce)=>C.createElement(L0,{ref:ce,iconNode:E,className:nh(`lucide-${O0(Wp(k))}`,`lucide-${k}`,b),...ae}));return ee.displayName=Wp(k),ee};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Y0=lh("mouse-pointer",H0);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],V0=lh("pen-line",X0),vu="#2CA02C",ah="#F0E442",oh="#00BFC4",Wr="#000000",G0="#00008b",Su="#FF0000",ih={DEFAULT_SIZE:24},Pr={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},Li={DEFAULT_SIZE:26};let ef=1;function fl(){return ef++}function Jp(k){ef=k}function Pp(){return ef}function q0(k="id"){return`${k}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function eh(k){return Math.round(k*1e3)/1e3}function zn(k){return{x:eh(k.x),y:eh(k.y)}}function Z0(k){return Pr[k]?.defaultPins||2}function I0(k,E,ee,b,ae,ce=ih.DEFAULT_SIZE){const P={id:q0("comp"),componentType:k,designator:"",layer:E,x:ee,y:b,color:ae,size:ce,pinCount:Z0(k),pinConnections:[]};switch(P.pinConnections=new Array(P.pinCount).fill(""),k){case"Battery":return{...P,componentType:"Battery"};case"Capacitor":return{...P,componentType:"Capacitor"};case"Diode":return{...P,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...P,componentType:"Fuse"};case"FerriteBead":return{...P,componentType:"FerriteBead"};case"Connector":return{...P,componentType:"Connector",gender:"N/A"};case"Jumper":return{...P,componentType:"Jumper"};case"Relay":return{...P,componentType:"Relay"};case"Inductor":return{...P,componentType:"Inductor"};case"Speaker":return{...P,componentType:"Speaker"};case"Motor":return{...P,componentType:"Motor"};case"PowerSupply":return{...P,componentType:"PowerSupply"};case"Transistor":return{...P,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...P,componentType:"Resistor"};case"ResistorNetwork":return{...P,componentType:"ResistorNetwork"};case"Thermistor":return{...P,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...P,componentType:"Switch"};case"Transformer":return{...P,componentType:"Transformer"};case"TestPoint":return{...P,componentType:"TestPoint"};case"IntegratedCircuit":return{...P,componentType:"IntegratedCircuit"};case"VacuumTube":return{...P,componentType:"VacuumTube"};case"VariableResistor":return{...P,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...P,componentType:"Crystal"};case"ZenerDiode":return{...P,componentType:"ZenerDiode"};default:return{...P,componentType:"Resistor"}}}class Q0{parent=new Map;rank=new Map;find(E){return this.parent.has(E)?(this.parent.get(E)!==E&&this.parent.set(E,this.find(this.parent.get(E))),this.parent.get(E)):(this.parent.set(E,E),this.rank.set(E,0),E)}union(E,ee){const b=this.find(E),ae=this.find(ee);if(b===ae)return;const ce=this.rank.get(b)||0,P=this.rank.get(ae)||0;ce<P?this.parent.set(b,ae):ce>P?this.parent.set(ae,b):(this.parent.set(ae,b),this.rank.set(b,ce+1))}getGroups(){const E=new Map;for(const ee of this.parent.keys()){const b=this.find(ee);E.has(b)||E.set(b,[]),E.get(b).push(ee)}return E}}function tf(k,E,ee,b,ae){const ce=new Map,P=new Map;let je=1;const se=6,O=(ue,W)=>{const xe=Math.round(ue*Math.pow(10,se))/Math.pow(10,se),ie=Math.round(W*Math.pow(10,se))/Math.pow(10,se);return`${xe},${ie}`},Te=(ue,W,xe,ie)=>{const ke=O(ue,W);if(ce.has(ke)){const pe=ce.get(ke);return ie&&(Object.assign(pe,ie),(ie.type==="component_pin"||pe.type==="component_pin")&&(pe.type="component_pin")),pe}const Pe={id:je++,type:xe,x:ue,y:W,...ie};return ce.set(ke,Pe),Pe};let x=0;for(const ue of k)if(ue.type==="via"&&ue.points.length>0){const W=ue.points[0];Te(W.x,W.y,"via");const xe=O(W.x,W.y);P.set(W.id,xe),x++}console.log(`[Connectivity] Added ${x} vias to coordinate graph`);let Z=0;for(const ue of k)if(ue.type==="trace")for(const W of ue.points){Te(W.x,W.y,"trace_point");const xe=O(W.x,W.y);P.set(W.id,xe),Z++}console.log(`[Connectivity] Added ${Z} trace points to coordinate graph`);for(const ue of ee){const W=ae.find(xe=>xe.id===ue.powerBusId);if(Te(ue.x,ue.y,"power",{voltage:W?.voltage||ue.type||"UNKNOWN",powerBusId:ue.powerBusId}),ue.pointId!==void 0){const xe=O(ue.x,ue.y);P.set(ue.pointId,xe)}}for(const ue of b){Te(ue.x,ue.y,"ground");const W=ue;if(W.pointId!==void 0){const xe=O(ue.x,ue.y);P.set(W.pointId,xe)}}const Je=new Set;for(const[ue]of ce)Je.add(ue);const Q=[];let ne=0;for(const ue of E){const W=ue.abbreviation?.trim()||ue.designator?.trim()||"UNKNOWN";for(let xe=0;xe<ue.pinCount;xe++){const ie=ue.pinConnections?.[xe];if(ie&&ie.trim()!==""){const ke=parseInt(ie.trim(),10);if(!isNaN(ke)&&ke>0){const Pe=P.get(ke);if(Pe){const[pe,Ee]=Pe.split(",").map(Number);Te(pe,Ee,"component_pin",{componentId:ue.id,pinIndex:xe}),ne++,console.log(`[Connectivity] Component ${W} pin ${xe+1}: Connected to point ID ${ke} at coord(${pe},${Ee})`)}else Q.push({compId:ue.id,designator:W,pinIndex:xe,pointId:ie.trim()}),console.warn(`[Connectivity] Component ${W} pin ${xe+1}: Point ID ${ke} not found in drawingStrokes - pin is NOT connected`)}else Q.push({compId:ue.id,designator:W,pinIndex:xe,pointId:ie.trim()}),console.warn(`[Connectivity] Component ${W} pin ${xe+1}: Invalid point ID "${ie}" - pin is NOT connected`)}}}if(console.log(`[Connectivity] Added ${ne} connected component pins to coordinate graph`),Q.length>0){console.warn(`[Connectivity] Found ${Q.length} component pins with invalid or missing connections (not added to graph):`);for(const ue of Q.slice(0,10))console.warn(`  - ${ue.designator} pin ${ue.pinIndex+1}: point ID "${ue.pointId}" not found`)}return ce}function sh(k,E){const ee=[],ae=(ce,P)=>{const je=Math.round(ce*Math.pow(10,6))/Math.pow(10,6),se=Math.round(P*Math.pow(10,6))/Math.pow(10,6);return`${je},${se}`};for(const ce of k)if(ce.type==="trace"&&ce.points.length>=2)for(let P=0;P<ce.points.length-1;P++){const je=ce.points[P],se=ce.points[P+1];if(je&&se){const O=ae(je.x,je.y),Te=ae(se.x,se.y);O!==Te&&ee.push([O,Te])}}return ee}function nf(k,E){const ee=new Q0,b=new Map;let ae=1;const ce=x=>(b.has(x)||b.set(x,ae++),b.get(x));for(const[x,Z]of E){const Je=ce(x),Q=ce(Z);ee.union(Je,Q)}const P=[];for(const[x,Z]of k)Z.type==="ground"&&(P.push(x),ce(x));if(P.length>1){const x=ce(P[0]);for(let Z=1;Z<P.length;Z++){const Je=ce(P[Z]);ee.union(x,Je)}console.log(`[Connectivity] Unified ${P.length} ground nodes into a single net`)}const je=new Map;for(const[x,Z]of k)if(Z.type==="power"&&Z.voltage){const Je=Z.voltage.trim();je.has(Je)||je.set(Je,[]),je.get(Je).push(x),ce(x)}for(const[x,Z]of je)if(Z.length>1){const Je=ce(Z[0]);for(let Q=1;Q<Z.length;Q++){const ne=ce(Z[Q]);ee.union(Je,ne)}console.log(`[Connectivity] Unified ${Z.length} power nodes with voltage "${x}" into a single net`)}for(const x of k.keys())ce(x);const se=ee.getGroups(),O=new Map,Te=new Map;for(const[x,Z]of b)Te.set(Z,x);for(const[x,Z]of se){const Je=Te.get(x);if(!Je)continue;const Q=Z.map(ne=>Te.get(ne)).filter(ne=>ne!==void 0).map(ne=>k.get(ne)).filter(ne=>ne!==void 0);O.set(Je,Q)}return O}function lf(k,E){const ee=new Map;let b=1;for(const[ae,ce]of k){if(ce.some(se=>se.type==="ground")){ee.set(ae,"GND");continue}const je=ce.filter(se=>se.type==="power");if(je.length>0){let O=(je[0].voltage||"UNKNOWN").trim();O&&!O.startsWith("+")&&!O.startsWith("-")&&!O.startsWith("AC")&&(O="+"+O),ee.set(ae,O);continue}ee.set(ae,`N$${b++}`)}return ee}function ch(k){const E=k.partName?.trim();if(E)return E;const ee=k.partNumber?.trim();if(ee)return ee;const b=k.abbreviation?.trim()||k.designator?.trim();return b||k.componentType}function uh(k){return k.packageType?k.packageType:{Resistor:"R_0805",Capacitor:"C_0805",Inductor:"L_0805",Diode:"D_SOD-123",Transistor:"TO-92",IntegratedCircuit:"DIP-8"}[k.componentType]||"Unknown"}function K0(k,E,ee,b,ae){const ce=tf(E,k,ee,b,ae),P=sh(E),je=nf(ce,P),se=lf(je),O=new Map;for(const Q of k){const ne=Q.abbreviation?.trim()||Q.designator?.trim();ne&&O.set(ne,Q)}const Te=[];let x=1;for(const[Q,ne]of je){const ue=se.get(Q)||`N$${x}`,W=[];for(const xe of ne)if(xe.type==="component_pin"&&xe.componentId&&xe.pinIndex!==void 0){const ie=k.find(ke=>ke.id===xe.componentId);if(ie){const ke=ie.abbreviation?.trim()||ie.designator?.trim();ke&&W.push({designator:ke,pin:(xe.pinIndex||0)+1})}}W.length>0&&Te.push({name:ue,code:x++,componentPins:W})}Te.sort((Q,ne)=>Q.name==="GND"?-1:ne.name==="GND"?1:Q.name.startsWith("+")||Q.name.startsWith("-")?-1:ne.name.startsWith("+")||ne.name.startsWith("-")?1:Q.code-ne.code);let Z=`(
`;Z+=`  (components
`;const Je=Array.from(O.keys()).sort();for(const Q of Je){const ne=O.get(Q),ue=ch(ne),W=uh(ne);Z+=`    (comp (ref ${Q})
`,Z+=`      (value ${ue})
`,Z+=`      (footprint ${W})
`,Z+=`    )
`}Z+=`  )
`,Z+=`  (nets
`;for(const Q of Te){Z+=`    (net (code ${Q.code}) (name ${Q.name})
`;for(const ne of Q.componentPins)Z+=`      (node (ref ${ne.designator}) (pin ${ne.pin}))
`;Z+=`    )
`}return Z+=`  )
`,Z+=`)
`,Z}function $0(k,E,ee,b,ae){const ce=tf(E,k,ee,b,ae),P=sh(E),je=nf(ce,P),se=lf(je),O=new Map;for(const Q of k){const ne=Q.abbreviation?.trim()||Q.designator?.trim();ne&&O.set(ne,Q)}const Te=new Set;for(const[,Q]of je)for(const ne of Q)if(ne.type==="component_pin"&&ne.componentId&&ne.pinIndex!==void 0){const ue=k.find(W=>W.id===ne.componentId);if(ue){const W=ue.abbreviation?.trim()||ue.designator?.trim();W&&Te.add(W)}}let x="";x+="[";const Z=Array.from(Te).sort();for(const Q of Z){const ne=O.get(Q);if(!ne)continue;const ue=ne.packageType||uh(ne),W=ch(ne);x+=`[${Q}
`,x+=`${ue}
`,x+=`${W}
`,x+=`



`,x+="]"}x+=`]
`,x+=`(
`;let Je=1;for(const[Q,ne]of je){const ue=se.get(Q)||`N$${Je}`,W=[];for(const xe of ne)if(xe.type==="component_pin"&&xe.componentId&&xe.pinIndex!==void 0){const ie=k.find(ke=>ke.id===xe.componentId);if(ie){const ke=ie.abbreviation?.trim()||ie.designator?.trim();ke&&W.push({designator:ke,pin:(xe.pinIndex||0)+1})}}if(W.length>0){x+=`(${ue}
`;for(const xe of W)x+=`  (${xe.designator}-${xe.pin})
`;x+=`)
`}Je++}return x+=`)
`,x}function F0(k,E,ee,b,ae){const ce=tf(E,k,ee,b,ae),P=Array.from(ce.values()).filter(fe=>fe.type==="component_pin");console.log(`[Schematic] Component pin nodes in graph: ${P.length}`),P.length>0&&console.log("[Schematic] Sample component pin nodes:",P.slice(0,5).map(fe=>`coord(${fe.x},${fe.y}) (compId: ${fe.componentId}, pinIndex: ${fe.pinIndex})`));const je=[];for(const fe of E)if(fe.type==="trace"&&fe.points.length>=2)for(let Se=0;Se<fe.points.length-1;Se++){const Oe=fe.points[Se],Me=fe.points[Se+1];if(Oe&&Me){const Ze=`${Math.round(Oe.x)},${Math.round(Oe.y)}`,it=`${Math.round(Me.x)},${Math.round(Me.y)}`;Ze!==it&&je.push([Ze,it])}}console.log(`[Schematic] Trace connections: ${je.length}`);const se=nf(ce,je),O=lf(se);if(console.log(`[Schematic] Net groups created: ${se.size}`),P.length>0){const fe=[];for(const Se of P){const Oe=`${Se.x},${Se.y}`;let Me=!1;for(const[,Ze]of se)if(Ze.some(it=>it.x===Se.x&&it.y===Se.y)){Me=!0;break}if(!Me){const Ze=k.find(Gt=>Gt.id===Se.componentId),it=Ze&&(Ze.abbreviation?.trim()||Ze.designator?.trim())||"UNKNOWN";fe.push({compId:Se.componentId||"unknown",designator:it,pinIndex:Se.pinIndex||0,x:Se.x,y:Se.y,coordKey:Oe})}}if(fe.length>0){console.warn(`[Schematic] Found ${fe.length} isolated component pins (not in any net):`);for(const Se of fe.slice(0,10))console.warn(`  - ${Se.designator} pin ${Se.pinIndex+1} at coord(${Se.x},${Se.y})`)}else console.log("[Schematic] All component pins are in nets")}const Te=new Map;for(const fe of k){const Se=fe.abbreviation?.trim()||fe.designator?.trim();Se&&Te.set(fe.id,Se)}const x=[];let Z=0,Je=0;const Q=new Map;for(const[fe,Se]of se){Z++;const Oe=[];for(const Me of Se)Me.type==="component_pin"&&Me.componentId&&Me.pinIndex!==void 0&&(Oe.push(Me),Je++);Oe.length>0&&Q.set(fe,Oe)}for(const[fe,Se]of Q){const Oe=O.get(fe)||`N$${fe}`,Me=[];for(const Ze of Se){const it=Te.get(Ze.componentId);it?Me.push({designator:it,pin:(Ze.pinIndex||0)+1}):console.warn(`[Schematic] Component pin found but no designator for componentId: ${Ze.componentId}`)}Me.length>=2?x.push({name:Oe,componentPins:Me}):Me.length===1&&console.log(`[Schematic] Net ${Oe} has only 1 component pin: ${Me[0].designator} pin ${Me[0].pin}`)}if(console.log(`[Schematic] Total net groups: ${Z}, Component pins found: ${Je}`),console.log(`[Schematic] Nets with component pins: ${Q.size}`),console.log(`[Schematic] Generated ${x.length} nets with 2+ component connections`),Q.size>0){console.log("[Schematic] Sample nets with component pins:");let fe=0;for(const[Se,Oe]of Q){if(fe++>=5)break;const Me=O.get(Se)||`N$${Se}`,Ze=Oe.map(it=>`${Te.get(it.componentId)||"unknown"}:pin${(it.pinIndex||0)+1}@coord(${it.x},${it.y})`);console.log(`  Net ${Me} (root ${Se}): ${Oe.length} pins - ${Ze.join(", ")}`)}}x.length>0?console.log(`[Schematic] First net: ${x[0].name} with ${x[0].componentPins.length} pins:`,x[0].componentPins):(console.warn("[Schematic] No nets with 2+ component pins found! Each component pin is in its own net."),console.warn("[Schematic] This suggests component pins are not connected through traces/vias."));const ne=new Map,ue=k.filter(fe=>!!(fe.abbreviation?.trim()||fe.designator?.trim())),W=50.8,xe=Math.ceil(Math.sqrt(ue.length));let ie=25.4,ke=25.4,Pe=0;for(const fe of ue){const Se=fe.abbreviation?.trim()||fe.designator?.trim();Se&&(ne.set(Se,{comp:fe,designator:Se,x:ie,y:ke}),Pe++,Pe>=xe?(Pe=0,ie=25.4,ke+=W):ie+=W)}let pe=`(kicad_sch (version 20201015) (generator simple_schematic)
`;pe+=`  (paper "A4")
`,pe+=`  (title_block
`,pe+=`    (title "")
`,pe+=`    (date "")
`,pe+=`    (rev "")
`,pe+=`    (company "")
`,pe+=`  )
`,pe+=`
`,pe+=`  (lib_symbols
`,pe+=`    (symbol "simple:Generic" (pin_names (offset 1.016)) (in_bom yes) (on_board yes)
`,pe+=`      (property "Reference" "REF" (id 0) (at 0 2.54 0)
`,pe+=`        (effects (font (size 1.27 1.27)))
`,pe+=`      )
`,pe+=`      (property "Value" "VAL" (id 1) (at 0 -2.54 0)
`,pe+=`        (effects (font (size 1.27 1.27)))
`,pe+=`      )
`,pe+=`      (symbol "Generic_0_1"
`,pe+=`        (rectangle (start -5.08 -3.81) (end 5.08 3.81)
`,pe+=`          (stroke (width 0.254)) (fill (type background))
`,pe+=`        )
`,pe+=`      )
`,pe+=`      (symbol "Generic_1_1"
`;for(let fe=0;fe<10;fe++){const Se=fe+1,Oe=-11.43+fe*2.54;pe+=`        (pin passive line (at ${-5.08} ${Oe} 0) (length 2.54)
`,pe+=`          (name "${Se}" (effects (font (size 1.27 1.27))))
`,pe+=`          (number "${Se}" (effects (font (size 1.27 1.27))))
`,pe+=`        )
`}for(let fe=0;fe<10;fe++){const Se=fe+11,Oe=-11.43+fe*2.54;pe+=`        (pin passive line (at ${5.08} ${Oe} 180) (length 2.54)
`,pe+=`          (name "${Se}" (effects (font (size 1.27 1.27))))
`,pe+=`          (number "${Se}" (effects (font (size 1.27 1.27))))
`,pe+=`        )
`}pe+=`      )
`,pe+=`    )
`,pe+=`  )
`,pe+=`
`;let Ee=1;const jt=()=>`00000000-0000-0000-0000-${String(Ee++).padStart(12,"0")}`;for(const[fe,Se]of ne){const Oe=jt(),Me=Se.comp;pe+=`  (symbol (lib_id "simple:Generic") (at ${Se.x} ${Se.y} 0) (unit 1)
`,pe+=`    (in_bom yes) (on_board yes) (dnp no)
`,pe+=`    (uuid ${Oe})
`,pe+=`    (property "Reference" "${fe}" (id 0) (at ${Se.x} ${Se.y+3.81} 0)
`,pe+=`      (effects (font (size 1.27 1.27)))
`,pe+=`    )
`,pe+=`    (property "Value" "${Me.componentType}" (id 1) (at ${Se.x} ${Se.y-3.81} 0)
`,pe+=`      (effects (font (size 1.27 1.27)))
`,pe+=`    )
`,pe+=`  )
`}pe+=`
`,console.log(`[Schematic] Processing ${x.length} nets for wire generation`);for(const fe of x){if(fe.componentPins.length<2){console.warn(`[Schematic] Skipping net ${fe.name} with only ${fe.componentPins.length} pins`);continue}const Se=[...fe.componentPins].sort((Me,Ze)=>{const it=Me.designator.localeCompare(Ze.designator);return it!==0?it:Me.pin-Ze.pin}),Oe=[];for(const Me of Se){const Ze=ne.get(Me.designator);if(!Ze)continue;const it=2.54,Gt=Me.pin<=10;let B,oe;Gt?(B=Ze.x-5.08-2.54,oe=Ze.y-9*it/2+(Me.pin-1)*it):(B=Ze.x+5.08+2.54,oe=Ze.y-9*it/2+(Me.pin-11)*it),Oe.push({x:B,y:oe,designator:Me.designator,pin:Me.pin})}if(Oe.length>=2){const Me=Oe.reduce((B,oe)=>B+oe.x,0)/Oe.length,Ze=Oe.reduce((B,oe)=>B+oe.y,0)/Oe.length,it=jt();pe+=`  (junction (at ${Me} ${Ze}) (diameter 0) (color 0 0 0 0) (uuid ${it}))
`;for(const B of Oe){const oe=jt();pe+=`  (wire (pts (xy ${B.x} ${B.y}) (xy ${Me} ${Ze})) (stroke (width 0) (type default)) (uuid ${oe}))
`}const Gt=jt();pe+=`  (text "${fe.name}" (at ${Me} ${Ze+5.08} 0)
`,pe+=`    (effects (font (size 1.27 1.27)))
`,pe+=`    (uuid ${Gt})
`,pe+=`  )
`}}return pe+=`)
`,pe}const xs=k=>{const E=Pr[k];return!E||!E.prefix||E.prefix.length<1?"?":E.prefix[0].substring(0,1).toUpperCase()},za=(k,E,ee)=>{const b=`tool_${k}_color`,ae=`tool_${k}_size`,ce=localStorage.getItem(b),P=localStorage.getItem(ae);return{color:ce||E,size:P?parseInt(P,10):ee}},th=(k,E,ee)=>{localStorage.setItem(`tool_${k}_color`,E),localStorage.setItem(`tool_${k}_size`,String(ee))},xn=(k,E,ee,b)=>{const ae=`tool_${k}_${E}_color`,ce=`tool_${k}_${E}_size`,P=localStorage.getItem(ae),je=localStorage.getItem(ce);return{color:P||ee,size:je?parseInt(je,10):b}},W0=()=>{const k=new Map,E={top:"#0072B2",bottom:"#56B4E9"},ee={top:Li.DEFAULT_SIZE,bottom:Li.DEFAULT_SIZE},b={top:"#AA4499",bottom:"#F781BF"},ae={top:6,bottom:6},ce={top:"#6A3D9A",bottom:"#9467BD"},P={top:18,bottom:18};return k.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:za("select","#ff0000",10),layerSettings:new Map([["top",xn("select","top","#ff0000",10)],["bottom",xn("select","bottom","#ff0000",10)]])}),k.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:za("via",vu,Li.DEFAULT_SIZE),layerSettings:new Map([["top",xn("via","top",vu,Li.DEFAULT_SIZE)],["bottom",xn("via","bottom",vu,Li.DEFAULT_SIZE)]]),defaultLayer:"top"}),k.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:za("pad",G0,Li.DEFAULT_SIZE),layerSettings:new Map([["top",xn("pad","top",E.top,ee.top)],["bottom",xn("pad","bottom",E.bottom,ee.bottom)]]),defaultLayer:"top"}),k.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:za("trace",ah,2),layerSettings:new Map([["top",xn("trace","top",b.top,ae.top)],["bottom",xn("trace","bottom",b.bottom,ae.bottom)]]),defaultLayer:"top"}),k.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:za("component",oh,ih.DEFAULT_SIZE),layerSettings:new Map([["top",xn("component","top",ce.top,P.top)],["bottom",xn("component","bottom",ce.bottom,P.bottom)]]),defaultLayer:"top"}),k.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"W",tooltip:"Place power node",colorReflective:!0,settings:za("power",Su,26),layerSettings:new Map([["top",xn("power","top",Su,26)],["bottom",xn("power","bottom",Su,26)]]),defaultLayer:"top"}),k.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:za("ground",Wr,26),layerSettings:new Map([["top",xn("ground","top",Wr,26)],["bottom",xn("ground","bottom",Wr,26)]]),defaultLayer:"top"}),k.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:za("erase","#ffffff",10),layerSettings:new Map([["top",xn("erase","top","#ffffff",10)],["bottom",xn("erase","bottom","#ffffff",10)]])}),k.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:za("pan","#ff0000",10),layerSettings:new Map([["top",xn("pan","top","#ff0000",10)],["bottom",xn("pan","bottom","#ff0000",10)]])}),k.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:za("magnify","#ff0000",10),layerSettings:new Map([["top",xn("magnify","top","#ff0000",10)],["bottom",xn("magnify","bottom","#ff0000",10)]])}),k};function J0(){const[E,ee]=C.useState(null),[b,ae]=C.useState(null),[ce,P]=C.useState("overlay"),[je,se]=C.useState(50),[O,Te]=C.useState(!1),[x,Z]=C.useState("none"),Je=C.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"26",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"26",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"26",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[]),Q=C.useCallback((a,s,r)=>{a==="trace"&&r?r==="top"?localStorage.setItem("defaultTopTraceSize",String(s)):localStorage.setItem("defaultBottomTraceSize",String(s)):a==="pad"&&r?r==="top"?localStorage.setItem("defaultTopPadSize",String(s)):localStorage.setItem("defaultBottomPadSize",String(s)):a==="component"&&r?r==="top"?localStorage.setItem("defaultTopComponentSize",String(s)):localStorage.setItem("defaultBottomComponentSize",String(s)):a==="via"?localStorage.setItem("defaultViaSize",String(s)):a==="power"?localStorage.setItem("defaultPowerSize",String(s)):a==="ground"?localStorage.setItem("defaultGroundSize",String(s)):a==="brush"&&localStorage.setItem("defaultBrushSize",String(s))},[]),ne=C.useCallback((a,s,r)=>{a==="trace"&&r?r==="top"?localStorage.setItem("defaultTopTraceColor",s):localStorage.setItem("defaultBottomTraceColor",s):a==="pad"&&r?r==="top"?localStorage.setItem("defaultTopPadColor",s):localStorage.setItem("defaultBottomPadColor",s):a==="component"&&r?r==="top"?localStorage.setItem("defaultTopComponentColor",s):localStorage.setItem("defaultBottomComponentColor",s):a==="via"?localStorage.setItem("defaultViaColor",s):a==="brush"&&localStorage.setItem("defaultBrushColor",s)},[]),ue=Je(),[W,xe]=C.useState(ue.brushColor),[ie,ke]=C.useState(ue.brushSize),[Pe,pe]=C.useState(ue.topTraceColor),[Ee,jt]=C.useState(ue.bottomTraceColor),[fe,Se]=C.useState(ue.topTraceSize),[Oe,Me]=C.useState(ue.bottomTraceSize),[Ze,it]=C.useState(ue.topPadColor),[Gt,B]=C.useState(ue.bottomPadColor),[oe,Be]=C.useState(ue.topPadSize),[mt,Et]=C.useState(ue.bottomPadSize),[w,K]=C.useState(ue.topComponentColor),[de,ve]=C.useState(ue.bottomComponentColor),[Ye,et]=C.useState(ue.topComponentSize),[rt,vn]=C.useState(ue.bottomComponentSize),[Kt,ia]=C.useState(!1),[Rt,En]=C.useState(()=>W0()),[Ue,Dt]=C.useState([]),[sa,go]=C.useState(!1),[tn,Rn]=C.useState([]),[Ve,bo]=C.useState(null),[Hi,mc]=C.useState(!1),[Yi,Nn]=C.useState(null),[dl,xo]=C.useState("nudge"),[vo,So]=C.useState(!1),[Gl,Xi]=C.useState(!1),[vs,Vi]=C.useState(!1),[st,Bt]=C.useState("top"),[ql,Gn]=C.useState(!1),[yc,gc]=C.useState(!1),[Xe,Ml]=C.useState(1),[Ke,qn]=C.useState({x:0,y:0}),[be,Zl]=C.useState("trace"),Co=ot.useRef(null),Ea=ot.useRef(W),ca=ot.useRef(ie),Ma=C.useCallback(a=>x==="draw"&&be==="trace"?a.get("trace"):x==="draw"&&be==="via"?a.get("via"):x==="draw"&&be==="pad"?a.get("pad"):x==="component"?a.get("component"):x==="power"?a.get("power"):x==="ground"?a.get("ground"):null,[x,be]);ot.useEffect(()=>{En(a=>{const s=Ma(a),r=s?.id||null,d=Co.current,y=new Map(a);if(d&&d!==r){const m=a.get(d);m&&(th(d,Ea.current,ca.current),y.set(d,{...m,settings:{color:Ea.current,size:ca.current}}))}if(s&&r!==d)if(x==="draw"&&be==="trace"){const m=It||"top",f=m==="top"?Pe:Ee,h=m==="top"?fe:Oe;xe(f),ke(h),Ea.current=f,ca.current=h,y.set("trace",{...s,settings:{color:f,size:h}})}else if(x==="draw"&&be==="pad"){const m=Sn||"top",f=m==="top"?Ze:Gt,h=m==="top"?oe:mt;xe(f),ke(h),Ea.current=f,ca.current=h,y.set("pad",{...s,settings:{color:f,size:h}})}else if(x==="component"){const m=Sl||"top",f=m==="top"?w:de,h=m==="top"?Ye:rt;xe(f),ke(h),Ea.current=f,ca.current=h,y.set("component",{...s,settings:{color:f,size:h}})}else{const m=s.settings;xe(m.color),ke(m.size),Ea.current=m.color,ca.current=m.size}return Co.current=r,y})},[x,be,Ma,Pe,Ee,fe,Oe,Ze,Gt,oe,mt,w,de,Ye,rt]),ot.useEffect(()=>{En(a=>{const s=Ma(a);if(s){th(s.id,W,ie),x==="draw"&&be==="trace"?(It||"top")==="top"?(pe(W),Se(ie),ne("trace",W,"top"),Q("trace",ie,"top")):(jt(W),Me(ie),ne("trace",W,"bottom"),Q("trace",ie,"bottom")):x==="draw"&&be==="pad"?(Sn||"top")==="top"?(it(W),Be(ie),ne("pad",W,"top"),Q("pad",ie,"top")):(B(W),Et(ie),ne("pad",W,"bottom"),Q("pad",ie,"bottom")):x==="component"&&((Sl||"top")==="top"?(K(W),et(ie),ne("component",W,"top"),Q("component",ie,"top")):(ve(W),vn(ie),ne("component",W,"bottom"),Q("component",ie,"bottom")));const r=new Map(a);return r.set(s.id,{...s,settings:{color:W,size:ie}}),Ea.current=W,ca.current=ie,r}return a})},[W,ie,x,be,Ma,ne,Q]),ot.useEffect(()=>{x==="power"?(Jl(!0),ki(null)):(Jl(!1),ki(null))},[x]);const[wo,Ss]=C.useState(void 0),[,Cs]=C.useState([]),[,ws]=C.useState([]),[pl,To]=C.useState(!1),[Mn,Gi]=C.useState(!1),[Aa,Il]=C.useState(!1),[vt,An]=C.useState(!1),[Ge,ci]=C.useState(!1),[On,qi]=C.useState(!1),[$t,ka]=C.useState(!1),[,ua]=C.useState([]),[,hl]=C.useState([]),[Da,ui]=C.useState([]),[ri,dn]=C.useState([]),[Ts,bc]=C.useState([]),[ra,zo]=C.useState([]),Hn=C.useRef(null),ja=C.useRef([]),[tt,kn]=C.useState([]),[nt,sn]=C.useState([]),[Le,St]=C.useState(new Set),[ct,cn]=C.useState(new Set),[at,un]=C.useState(new Set),[Ce,_n]=C.useState(null),[ft,Al]=C.useState(null),[ml,fi]=C.useState(null),[Ql,zs]=C.useState(!1),[di,Ra]=C.useState(null),[Zn,Eo]=C.useState(null),Zi=C.useRef(null),pi=C.useRef(null),xc=C.useRef(null),vc=C.useRef(null),hi=C.useRef(null),kl=C.useRef(null),Ii=C.useRef(null),Na=C.useRef(null),Dl=C.useRef(null),Oa=C.useRef(null),_a=C.useRef(!1),Mo=C.useRef(0),mi=C.useRef(0),[jl,yl]=C.useState(!1),Ba=C.useRef(null),Kl=C.useRef(null),[Pn,Ao]=C.useState(!1),[gl,Sc]=C.useState({width:960,height:600}),[$l,De]=C.useState(null),[fa,en]=C.useState({visible:!1,size:6}),Rl=C.useRef(null),[da,el]=C.useState({visible:!1,interval:5}),[Cu,Ua]=C.useState({visible:!1,source:null}),[yi,La]=C.useState({visible:!1,text:""}),[ko,Do]=C.useState({visible:!1}),Cc=C.useRef(null),[qt,gi]=C.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Es=C.useRef(null),[Zt,bi]=C.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),Qi=C.useRef(null),[tl,Fl]=C.useState(!1),[pa,Ha]=C.useState(.5),[ha,Ms]=C.useState(null),[ma,ya]=C.useState(""),Yt=C.useRef(null),Nl=C.useRef(!1),As=C.useRef(!1),[Ya,nl]=C.useState(""),[xi,vi]=C.useState(null),[pn,Ol]=C.useState("pcb_project"),[wu,Si]=C.useState([]),[wc,Tc]=C.useState(-1),Ci=C.useRef(null),jo=C.useRef(null),zc=C.useRef(null),ks=C.useRef(null),[wi,Ro]=C.useState(!0),[Ti,No]=C.useState(!0),[bl,Ec]=C.useState(!0),[Oo,Mc]=C.useState(!0),[Xa,Ds]=C.useState(!0),[Wl,_o]=C.useState(!0),[zi,Ei]=C.useState(!0),[Bo,Ki]=C.useState(!0),[Va,Mi]=C.useState(!0),[Uo,js]=C.useState(!0),[Ct,xl]=C.useState([]),[Xt,Ga]=C.useState([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}]),[Tu,Rs]=C.useState(!1),[In,Jl]=C.useState(!1),[Ai,ki]=C.useState(null),[qa,Ns]=C.useState(!0),[Mt,_l]=C.useState([]),[It,Lo]=C.useState("top"),[Za,ga]=C.useState(!1),Os=C.useRef(null),[Sn,Ia]=C.useState("top"),[$i,Ho]=C.useState(!1),Qa=C.useRef(null),[Di,Pl]=C.useState(!1),[Fi,Yo]=C.useState(!1),[vl,_s]=C.useState(null),Bs=C.useRef(null),ji=C.useRef(null),[Sl,ll]=C.useState("top"),[Wi,Qn]=C.useState(null),[Bl,Ji]=C.useState(!1),[Ie,nn]=C.useState(new Set),[Xo,ba]=C.useState(!1),[Ka,Ri]=C.useState(null),[Kn,Us]=C.useState(null),Yn=C.useCallback(async(a,s)=>{try{const r=await createImageBitmap(a),d=URL.createObjectURL(a),y=await new Promise((f,h)=>{const S=new FileReader;S.onload=()=>f(S.result),S.onerror=h,S.readAsDataURL(a)}),m={url:d,name:a.name,width:r.width,height:r.height,dataUrl:y,x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:r};s==="top"?ee(m):ae(m)}catch(r){console.error("Failed to load image",r)}},[]),Ls=C.useCallback(a=>{a.stopPropagation(),a.preventDefault();const s=Hn.current;if(!s)return;const r=s.getBoundingClientRect(),d=s.width/r.width,y=s.height/r.height,m=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof m=="number"?m:a.clientX-r.left,S=typeof f=="number"?f:a.clientY-r.top,g=h*d,U=S*y,L=g-40,re=U-40,X=(L-Ke.x)/Xe,V=(re-Ke.y)/Xe;if(x==="select"){if(ft){let A=1/0,Y=null,F=null;const le=Math.max(6/Xe,4),Re=[...tt,...nt].find(ge=>ge.id===ft.componentId)?.layer||"top";for(const ge of Ue)if((ge.type==="via"||ge.type==="pad")&&ge.points.length>0){if(ge.type==="pad"&&(ge.layer||"top")!==Re)continue;const _e=ge.points[0],Nt=Math.max(1,ge.size/2),At=Math.hypot(_e.x-X,_e.y-V),xt=Math.max(Nt,le);At<=xt&&At<A&&(A=At,Y=_e.id,F=ge)}if(F?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${F.id}`),console.log(`  Point ID: ${Y}`),console.log(`  Point coordinates: x=${F.points[0].x.toFixed(2)}, y=${F.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${X.toFixed(2)}, y=${V.toFixed(2)}`),console.log(`  Distance: ${A.toFixed(2)}`),console.log(`  Via size: ${F.size}, radius: ${Math.max(1,F.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${X.toFixed(2)}, y=${V.toFixed(2)}`),console.log(`  Hit tolerance: ${le.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Ue.filter(ge=>ge.type==="via").length}`)),Y!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${Y} (type: ${typeof Y})`);const ge=String(Y),_e=ft.pinIndex,Nt=ft.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${_e} (Pin ${_e+1}) of component ${Nt} to point ID ${ge}`);const At=tt.find(Ae=>Ae.id===Nt),xt=nt.find(Ae=>Ae.id===Nt);At?(console.log("Component found in TOP layer"),kn(Ae=>{const Fe=Ae.find(qe=>qe.id===Nt);if(!Fe)return console.error(`Component ${Nt} not found in TOP layer during update!`),Ae;console.log("BEFORE update: pinConnections =",Fe.pinConnections);const ut=Fe.pinConnections||[],dt=ut.length>0?[...ut]:new Array(Fe.pinCount).fill("");let bt;if(dt.length!==Fe.pinCount){bt=new Array(Fe.pinCount).fill("");for(let qe=0;qe<Math.min(dt.length,Fe.pinCount);qe++)bt[qe]=dt[qe]||""}else bt=[...dt];bt[_e]=ge,console.log(`Updating pin ${_e} with value: ${ge}`),console.log("New pinConnections array:",bt);const Jt=Ae.map(qe=>qe.id===Nt?{...qe,pinConnections:bt}:qe),Qt=Jt.find(qe=>qe.id===Nt);return console.log("AFTER update: pinConnections =",Qt?.pinConnections),console.log(`Pin ${_e} value: ${Qt?.pinConnections[_e]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),Jt})):xt?(console.log("Component found in BOTTOM layer"),sn(Ae=>{const Fe=Ae.find(qe=>qe.id===Nt);if(!Fe)return console.error(`Component ${Nt} not found in BOTTOM layer during update!`),Ae;console.log("BEFORE update: pinConnections =",Fe.pinConnections);const ut=Fe.pinConnections||[],dt=ut.length>0?[...ut]:new Array(Fe.pinCount).fill("");let bt;if(dt.length!==Fe.pinCount){bt=new Array(Fe.pinCount).fill("");for(let qe=0;qe<Math.min(dt.length,Fe.pinCount);qe++)bt[qe]=dt[qe]||""}else bt=[...dt];bt[_e]=ge,console.log(`Updating pin ${_e} with value: ${ge}`),console.log("New pinConnections array:",bt);const Jt=Ae.map(qe=>qe.id===Nt?{...qe,pinConnections:bt}:qe),Qt=Jt.find(qe=>qe.id===Nt);return console.log("AFTER update: pinConnections =",Qt?.pinConnections),console.log(`Pin ${_e} value: ${Qt?.pinConnections[_e]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),Jt})):(console.error(`Component ${Nt} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",tt.map(Ae=>Ae.id)),console.log("Available BOTTOM components:",nt.map(Ae=>Ae.id))),setTimeout(()=>{Al(null)},0);return}else Al(null)}const I=10,J=(()=>{for(const A of tt)if(X>=A.x-I&&X<=A.x+I&&V>=A.y-I&&V<=A.y+I)return{layer:"top",comp:A};for(const A of nt)if(X>=A.x-I&&X<=A.x+I&&V>=A.y-I&&V<=A.y+I)return{layer:"bottom",comp:A};return null})();if(J){const{comp:A}=J;a.shiftKey?St(Y=>{const F=new Set(Y);return F.has(A.id)?F.delete(A.id):F.add(A.id),F}):(St(new Set([A.id])),nn(new Set),cn(new Set),un(new Set));return}const he=Math.max(6/Xe,4);let me=null;for(const A of Ct){const Y=Math.max(6,A.size/2),F=Y*.8,le=Y+F,ye=Math.hypot(A.x-X,A.y-V),Re=Math.abs(X-A.x)<=he&&Math.abs(V-A.y)<=le,ge=Math.abs(V-A.y)<=he&&Math.abs(X-A.x)<=le;if(ye<=Math.max(Y,he)||Re||ge){me=A;break}}if(me){a.shiftKey?cn(A=>{const Y=new Set(A);return Y.has(me.id)?Y.delete(me.id):Y.add(me.id),Y}):cn(new Set([me.id])),nn(new Set),St(new Set),un(new Set);return}let R=null;for(const A of Mt){const Y=Math.max(6,(A.size||18)/2),F=Y*.8,le=Y+F,ye=Math.hypot(A.x-X,A.y-V),Re=Math.abs(X-A.x)<=he&&Math.abs(V-A.y)<=le,ge=Math.abs(V-A.y)<=he&&Math.abs(X-A.x)<=le;if(ye<=Math.max(Y,he)||Re||ge){R=A;break}}if(R){a.shiftKey?un(A=>{const Y=new Set(A);return Y.has(R.id)?Y.delete(R.id):Y.add(R.id),Y}):(un(new Set([R.id])),nn(new Set),St(new Set),cn(new Set));return}const M=Math.max(6/Xe,4);let G=null;for(const A of Ue)if((A.type==="via"||A.type==="pad")&&A.points.length>0){const Y=A.points[0],F=Math.max(1,A.size/2);if(Math.hypot(Y.x-X,Y.y-V)<=Math.max(F,M)){G=A;break}}G||a.shiftKey||(nn(new Set),St(new Set),cn(new Set),un(new Set)),ba(!0),Ri({x:X,y:V,shiftKey:a.shiftKey}),Us({x:X,y:V,width:0,height:0});return}else if(x==="magnify"){const I=a.shiftKey?.5:2,J=Math.max(.25,Math.min(8,Xe*I)),he=L-J*X,me=re-J*V;Ml(J),qn({x:he,y:me});return}else if(x==="pan"){Ba.current={startCX:L,startCY:re,panX:Ke.x,panY:Ke.y},Kl.current={startClientX:a.clientX,startClientY:a.clientY,panX:Ke.x,panY:Ke.y},yl(!0);return}else if(x==="draw"){const I=(R,M,G)=>{let A=1/0,Y=null;const F=15;for(const ye of Ue)if(ye.type==="via"){const Re=ye.points[0],ge=Math.hypot(Re.x-R,Re.y-M);ge<=F&&ge<A&&(A=ge,Y=Re)}else if(ye.type==="pad"&&(ye.layer||"top")===G){const ge=ye.points[0],_e=Math.hypot(ge.x-R,ge.y-M);_e<=F&&_e<A&&(A=_e,Y=ge)}return zn(Y??{x:R,y:M})};if(be==="via"){const R=Rt.get("via"),M=localStorage.getItem("tool_via_color"),G=localStorage.getItem("tool_via_size"),A=M||R?.settings.color||vu,Y=G?parseInt(G,10):R?.settings.size||Li.DEFAULT_SIZE,F=zn({x:X,y:V}),le={id:fl(),x:F.x,y:F.y},ye={id:`${Date.now()}-via`,points:[le],color:A,size:Y,layer:st,type:"via"};Dt(Re=>[...Re,ye]),st==="top"?Cs(Re=>[...Re,ye.id]):ws(Re=>[...Re,ye.id]);return}if(be==="pad"){if(!Sn)return;const R=Sn==="top"?Ze:Gt,M=Sn==="top"?oe:mt,G=zn({x:X,y:V}),A={id:fl(),x:G.x,y:G.y},Y={id:`${Date.now()}-pad`,points:[A],color:R,size:M,layer:Sn,type:"pad"};Dt(F=>[...F,Y]);return}const he=be==="trace"&&!Bl?I(X,V,be==="trace"?It||"top":st):zn({x:X,y:V}),me={id:fl(),x:he.x,y:he.y};Rn(R=>R.length===0?[me]:[...R,me]),go(!1),gc(!1)}else if(x==="erase")go(!0),Rn([{id:fl(),x:X,y:V}]),console.log("Starting erase at:",X,V,"selectedDrawingLayer:",st,"total strokes:",Ue.length);else if(x==="transform"&&Ve){if(pl)return;mc(!0),Nn({x:X,y:V})}else if(x==="component"){if(!vl)return;const I=zn({x:X,y:V}),J=Sl==="top"?w:de,he=Sl==="top"?Ye:rt,me=I0(vl,Sl,I.x,I.y,J,he);me.abbreviation=xs(vl),Sl==="top"?(Ki(!0),kn(R=>[...R,me])):(Mi(!0),sn(R=>[...R,me]));return}else if(x==="power"){if(!Ai)return;const J=Bl?zn({x:X,y:V}):((me,R)=>{let M=1/0,G=null;const A=15;return Ue.forEach(F=>{if(F.type==="via"){const le=F.points[0];if(le){const ye=Math.sqrt((le.x-me)**2+(le.y-R)**2);ye<A&&ye<M&&(M=ye,G={x:le.x,y:le.y})}}}),zn(G||{x:me,y:R})})(X,V),he=Xt.find(me=>me.id===Ai);if(he){const me={id:`power-${Date.now()}-${Math.random()}`,x:J.x,y:J.y,color:"#ff0000",size:ie,powerBusId:he.id,layer:st,type:`${he.voltage} Power Node`,pointId:fl()};xl(R=>[...R,me])}return}else if(x==="ground"){const I=(R,M)=>{let G=1/0,A=null;const Y=15;for(const le of Ue){if(le.type!=="via"||!le.points||le.points.length===0)continue;const ye=le.points[0];if(!ye)continue;const Re=Math.hypot(ye.x-R,ye.y-M);Re<=Y&&Re<G&&(G=Re,A={x:ye.x,y:ye.y})}return zn(A??{x:R,y:M})},{x:J,y:he}=Bl?zn({x:X,y:V}):I(X,V),me={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:J,y:he,color:"#000000",size:Rt.get("ground")?.settings.size||18,type:"Ground Node",pointId:fl()};_l(R=>[...R,me]);return}},[x,Ve,ie,W,be,st,Ue,Xe,Ke.x,Ke.y,Bl,Ai,Xt,vl,Rt,Sn,It]),ea=C.useCallback(a=>{if(x!=="magnify")return;a.preventDefault();const s=Hn.current;if(!s)return;const r=s.getBoundingClientRect(),d=s.width/r.width,y=s.height/r.height,m=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,h=typeof m=="number"?m:a.clientX-r.left,S=typeof f=="number"?f:a.clientY-r.top,g=h*d,U=S*y,L=(g-40-Ke.x)/Xe,re=(U-40-Ke.y)/Xe,X=1.2,V=1/X,I=a.deltaY<0?X:V,J=Math.max(.25,Math.min(8,Xe*I)),he=g-40-J*L,me=U-40-J*re;Ml(J),qn({x:he,y:me})},[x,Xe,Ke.x,Ke.y]),Ac=C.useCallback(a=>{const s=ja.current;if(x==="draw"&&be==="trace"&&s.length>=2){const r={id:`${Date.now()}-trace`,points:s,color:W,size:ie,layer:st,type:"trace"};Dt(d=>[...d,r]),st==="top"?ua(d=>[...d,r.id]):hl(d=>[...d,r.id]),Rn([]);return}if(x==="select"||x==="component"){const r=Hn.current;if(!r)return;const d=r.getBoundingClientRect(),y=r.width/d.width,m=r.height/d.height,f=a.nativeEvent.offsetX,h=a.nativeEvent.offsetY,S=typeof f=="number"?f:a.clientX-d.left,g=typeof h=="number"?h:a.clientY-d.top,U=S*y,L=g*m,re=U-40,X=L-40,V=(re-Ke.x)/Xe,I=(X-Ke.y)/Xe,J=10,he=(()=>{for(const M of tt)if(V>=M.x-J&&V<=M.x+J&&I>=M.y-J&&I<=M.y+J)return{layer:"top",comp:M};for(const M of nt)if(V>=M.x-J&&V<=M.x+J&&I>=M.y-J&&I<=M.y+J)return{layer:"bottom",comp:M};return null})(),me=Math.max(6/Xe,4);let R=null;for(const M of Ct){const G=Math.max(6,M.size/2),A=G*.8,Y=G+A,F=Math.hypot(M.x-V,M.y-I),le=Math.abs(V-M.x)<=me&&Math.abs(I-M.y)<=Y,ye=Math.abs(I-M.y)<=me&&Math.abs(V-M.x)<=Y;if(F<=Math.max(G,me)||le||ye){R=M;break}}if(R){cn(new Set([R.id])),Eo({visible:!0,id:R.id,layer:R.layer,x:R.x,y:R.y,size:R.size,color:R.color,powerBusId:R.powerBusId});return}if(he){const{layer:M,comp:G}=he;St(new Set([G.id]));let A="abbreviation"in G&&G.abbreviation?String(G.abbreviation):"";(!A||A.trim()===""||A==="****"||A==="*")&&(A=xs(G.componentType)),_n({visible:!0,layer:M,id:G.id,designator:G.designator||"",abbreviation:A,manufacturer:"manufacturer"in G&&G.manufacturer||"",partNumber:"partNumber"in G&&G.partNumber||"",pinCount:G.pinCount,x:G.x,y:G.y})}}},[x,be,W,ie,st,tt,nt,Ct,Xe,Ke.x,Ke.y,vl,Di,Bl,Ue,Ve,jl,Wi,ft,Rt]),$a=C.useCallback(()=>{const a=ja.current;if(x==="draw"&&be==="trace"&&a.length>=2){const s=It||"top",r=s==="top"?Pe:Ee,d=s==="top"?fe:Oe,y={id:`${Date.now()}-trace`,points:a,color:r,size:d,layer:s,type:"trace"};Dt(m=>[...m,y]),s==="top"?ua(m=>[...m,y.id]):hl(m=>[...m,y.id]),Rn([])}else if(x==="draw"&&be==="trace"&&a.length===1){const s=It||"top",r=s==="top"?Pe:Ee,d=s==="top"?fe:Oe,y={id:`${Date.now()}-trace-dot`,points:a,color:r,size:d,layer:s,type:"trace"};Dt(m=>[...m,y]),s==="top"?ua(m=>[...m,y.id]):hl(m=>[...m,y.id]),Rn([])}},[x,be,It,Pe,Ee,fe,Oe,Dt]),xa=C.useCallback((a,s,r)=>{const d=s-a.x,y=r-a.y;if(d===0&&y===0)return{x:s,y:r};const f=(Math.atan2(y,d)*180/Math.PI%180+180)%180,h=[0,45,90];let S=0,g=1e9;for(const U of h){const L=Math.abs(f-U);L<g&&(g=L,S=U)}if(S===0)return{x:s,y:a.y};if(S===90)return{x:a.x,y:r};{const U=Math.min(Math.abs(d),Math.abs(y)),L=d>=0?1:-1,re=y>=0?1:-1;return{x:a.x+L*U,y:a.y+re*U}}},[]),Hs=C.useCallback(a=>{const s=Hn.current?.getBoundingClientRect();if(!s)return;const r=a.clientX-s.left,d=a.clientY-s.top,y=Hn.current,m=y.width/s.width,f=y.height/s.height,h=r*m,S=d*f,g=h-40,U=S-40,L=(g-Ke.x)/Xe,re=(U-Ke.y)/Xe;if(x==="select"&&Xo&&Ka){const X=Ka.x,V=Ka.y;Us({x:Math.min(X,L),y:Math.min(V,re),width:Math.abs(L-X),height:Math.abs(re-V)})}else if(x==="pan"&&jl&&Ba.current){const{startCX:X,startCY:V,panX:I,panY:J}=Ba.current,he=g-X,me=U-V;qn({x:I+he,y:J+me})}else if(sa&&tn.length>0)if(x==="draw")if(yc){const X=tn[0],V=xa(X,L,re),I=zn(V),J={id:fl(),x:I.x,y:I.y};Rn([X,J])}else{const X=zn({x:L,y:re});Rn(V=>[...V,{id:fl(),x:X.x,y:X.y}])}else x==="erase"&&(Rn(X=>[...X,{id:fl(),x:L,y:re}]),Dt(X=>{const V=X.filter(J=>{if(J.type==="via"&&Mn||J.type==="pad"&&Aa||J.type==="trace"&&vt||J.layer!==st)return!0;const he=ie/2,me=L-he,R=L+he,M=re-he,G=re+he,A=(le,ye)=>le>=me&&le<=R&&ye>=M&&ye<=G,Y=(le,ye,Re,ge)=>{const Fe=(Ft,Hl)=>{let wn=0;return Ft<me?wn|=1:Ft>R&&(wn|=2),Hl<M?wn|=4:Hl>G&&(wn|=8),wn};let ut=le,dt=ye,bt=Re,Jt=ge,Qt=Fe(ut,dt),qe=Fe(bt,Jt);for(;;){if((Qt|qe)===0)return!0;if((Qt&qe)!==0)return!1;const Ft=Qt!==0?Qt:qe;let Hl=0,wn=0;Ft&8?(Hl=ut+(bt-ut)*(G-dt)/(Jt-dt),wn=G):Ft&4?(Hl=ut+(bt-ut)*(M-dt)/(Jt-dt),wn=M):Ft&2?(wn=dt+(Jt-dt)*(R-ut)/(bt-ut),Hl=R):(wn=dt+(Jt-dt)*(me-ut)/(bt-ut),Hl=me),Ft===Qt?(ut=Hl,dt=wn,Qt=Fe(ut,dt)):(bt=Hl,Jt=wn,qe=Fe(bt,Jt))}};let F=!1;if(J.points.length===1){const le=J.points[0];F=A(le.x,le.y)}else for(let le=0;le<J.points.length-1;le++){const ye=J.points[le],Re=J.points[le+1];if(Y(ye.x,ye.y,Re.x,Re.y)){F=!0;break}}return F&&console.log("Erasing stroke at position:",L,re,"brushSize:",ie,"selectedLayer:",st),!F});console.log("Strokes before:",X.length,"after:",V.length);const I=new Set(V.map(J=>J.id));return Cs(J=>J.filter(he=>I.has(he))),ws(J=>J.filter(he=>I.has(he))),ua(J=>J.filter(he=>I.has(he))),hl(J=>J.filter(he=>I.has(he))),V}),$t||xl(X=>{const V=ie/2,I=L-V,J=L+V,he=re-V,me=re+V,R=M=>{const G=M.size/2,A=M.x-G,Y=M.x+G,F=M.y-G,le=M.y+G;return!(J<A||I>Y||me<F||he>le)};return X.filter(M=>!R(M))}),On||_l(X=>{const V=ie/2,I=L-V,J=L+V,he=re-V,me=re+V,R=G=>{const A=Math.max(6,(G.size||18)/2),Y=A*.8,F=A+Y,le=G.x-F,ye=G.x+F,Re=G.y-F,ge=G.y+F;return!(J<le||I>ye||me<Re||he>ge)};return X.filter(G=>!R(G))}));else if(Hi&&Yi&&Ve){if(pl)return;const X=L-Yi.x,V=re-Yi.y;Ve==="top"&&E?ee(I=>I?{...I,x:I.x+X,y:I.y+V}:null):Ve==="bottom"&&b?ae(I=>I?{...I,x:I.x+X,y:I.y+V}:null):Ve==="both"&&(E&&ee(I=>I?{...I,x:I.x+X,y:I.y+V}:null),b&&ae(I=>I?{...I,x:I.x+X,y:I.y+V}:null)),Nn({x:L,y:re})}},[sa,tn,x,ie,Hi,Yi,Ve,E,b,yc,xa,st,Dt,Xe,Ke.x,Ke.y,Xo,Ka,pl,Mn,Aa,vt,$t,On]),Ys=C.useCallback(()=>{if(x==="select"&&Xo){const a=Kn,s=Ka;if(ba(!1),Ri(null),Us(null),a&&s){const r=a.width<3&&a.height<3,d=(R,M)=>{const G=a.x,A=a.y,Y=a.x+a.width,F=a.y+a.height;return R>=G&&R<=Y&&M>=A&&M<=F},y=(R,M,G,A,Y,F,le,ye)=>{const xt=(Qt,qe)=>{let Ft=0;return Qt<Y?Ft|=1:Qt>le&&(Ft|=2),qe<F?Ft|=4:qe>ye&&(Ft|=8),Ft};let Ae=R,Fe=M,ut=G,dt=A,bt=xt(Ae,Fe),Jt=xt(ut,dt);for(;;){if((bt|Jt)===0)return!0;if((bt&Jt)!==0)return!1;const Qt=bt!==0?bt:Jt;let qe=0,Ft=0;Qt&8?(qe=Ae+(ut-Ae)*(ye-Fe)/(dt-Fe),Ft=ye):Qt&4?(qe=Ae+(ut-Ae)*(F-Fe)/(dt-Fe),Ft=F):Qt&2?(Ft=Fe+(dt-Fe)*(le-Ae)/(ut-Ae),qe=le):(Ft=Fe+(dt-Fe)*(Y-Ae)/(ut-Ae),qe=Y),Qt===bt?(Ae=qe,Fe=Ft,bt=xt(Ae,Fe)):(ut=qe,dt=Ft,Jt=xt(ut,dt))}},m=a.x,f=a.y,h=a.x+a.width,S=a.y+a.height,g=Math.max(6/Xe,4),U=(R,M,G,A,Y,F)=>{const le=Y-G,ye=F-A;if(le===0&&ye===0)return Math.hypot(R-G,M-A);const Re=Math.max(0,Math.min(1,((R-G)*le+(M-A)*ye)/(le*le+ye*ye))),ge=G+Re*le,_e=A+Re*ye;return Math.hypot(R-ge,M-_e)},L=s?.shiftKey===!0,re=new Set(L?Array.from(Ie):[]),X=new Set(L?Array.from(Le):[]),V=new Set(L?Array.from(ct):[]),I=new Set(L?Array.from(at):[]);if(r){let R=null;for(const M of Ue){let G=1/0;if(M.type==="via"||M.type==="pad"){const A=M.points[0],Y=Math.max(1,M.size/2);G=Math.hypot(A.x-s.x,A.y-s.y),G<=Math.max(Y,g)&&(!R||G<R.dist)&&(R={id:M.id,dist:G})}else for(let A=0;A<M.points.length-1;A++){const Y=M.points[A],F=M.points[A+1],le=U(s.x,s.y,Y.x,Y.y,F.x,F.y);if(le<=Math.max(g,M.size/2)){(!R||le<R.dist)&&(R={id:M.id,dist:le});break}}}R&&re.add(R.id)}else for(const R of Ue){let M=!1;if(R.type==="via"||R.type==="pad"){const G=R.points[0];M=d(G.x,G.y)}else for(let G=0;G<R.points.length-1;G++){const A=R.points[G],Y=R.points[G+1];if(y(A.x,A.y,Y.x,Y.y,m,f,h,S)||d(A.x,A.y)&&d(Y.x,Y.y)){M=!0;break}}M&&re.add(R.id)}const J=R=>{const G=Math.max(10,R.size||18)/2;return R.x-G<=h&&R.x+G>=m&&R.y-G<=S&&R.y+G>=f};if(r){const R=M=>{const A=Math.max(10,M.size||18)/2;return s.x>=M.x-A&&s.x<=M.x+A&&s.y>=M.y-A&&s.y<=M.y+A};tt.forEach(M=>{R(M)&&X.add(M.id)}),nt.forEach(M=>{R(M)&&X.add(M.id)})}else tt.forEach(R=>{J(R)&&X.add(R.id)}),nt.forEach(R=>{J(R)&&X.add(R.id)});const he=R=>{const M=Math.max(6,R.size/2),G=M*.8,A=M+G;return R.x-A<=h&&R.x+A>=m&&R.y-A<=S&&R.y+A>=f};if(r){let R=null;for(const M of Ct){const G=Math.max(6,M.size/2),A=G*.8,Y=G+A,F=Math.hypot(M.x-s.x,M.y-s.y),le=Math.abs(s.x-M.x)<=g&&Math.abs(s.y-M.y)<=Y,ye=Math.abs(s.y-M.y)<=g&&Math.abs(s.x-M.x)<=Y;if(F<=Math.max(G,g)||le||ye){const ge=Math.min(F,Math.abs(s.x-M.x)+Math.abs(s.y-M.y));(!R||ge<R.dist)&&(R={id:M.id,dist:ge})}}R&&V.add(R.id)}else Ct.forEach(R=>{he(R)&&V.add(R.id)});const me=R=>{const M=Math.max(6,(R.size||18)/2),G=M*.8,A=M+G;return R.x-A<=h&&R.x+A>=m&&R.y-A<=S&&R.y+A>=f};if(r){let R=null;for(const M of Mt){const G=Math.max(6,(M.size||18)/2),A=G*.8,Y=G+A,F=Math.hypot(M.x-s.x,M.y-s.y),le=Math.abs(s.x-M.x)<=g&&Math.abs(s.y-M.y)<=Y,ye=Math.abs(s.y-M.y)<=g&&Math.abs(s.x-M.x)<=Y;if(F<=Math.max(G,g)||le||ye){const ge=Math.min(F,Math.abs(s.x-M.x)+Math.abs(s.y-M.y));(!R||ge<R.dist)&&(R={id:M.id,dist:ge})}}R&&I.add(R.id)}else Mt.forEach(R=>{me(R)&&I.add(R.id)});nn(re),St(X),cn(V),un(I)}}if(sa&&tn.length>0){if(x==="draw"&&be!=="trace"){const a={id:Date.now().toString(),points:tn,color:W,size:ie,layer:st,type:"trace"};Dt(s=>[...s,a]),st==="top"?ua(s=>[...s,a.id]):hl(s=>[...s,a.id])}Rn([])}jl&&(yl(!1),Ba.current=null,Kl.current=null),go(!1),mc(!1),Nn(null),gc(!1)},[sa,tn,x,W,ie,st,Kn,Ka,Xo,Ue,Xe,Pn,Ie,Ct,Mt,tt,nt,Le,ct,at]);ot.useEffect(()=>{if(!(x==="pan"&&jl&&Kl.current))return;const a=r=>{const d=Hn.current;if(!d)return;const y=d.getBoundingClientRect(),m=d.width/y.width,f=d.height/y.height,{startClientX:h,startClientY:S,panX:g,panY:U}=Kl.current,L=(r.clientX-h)*m,re=(r.clientY-S)*f;qn({x:g+L,y:U+re})},s=()=>{yl(!1),Ba.current=null,Kl.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",s,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",s,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",s,!0)}},[x,jl]);const Fa=C.useCallback(()=>{const a=Hn.current;if(!a)return;const s=a.getContext("2d");if(!s)return;s.clearRect(0,0,a.width,a.height),s.save(),s.beginPath(),s.rect(40,40,a.width-80,a.height-80),s.clip(),s.translate(40,40),s.translate(Ke.x,Ke.y),s.scale(Xe,Xe);const r=(f,h)=>{const S=f.width,g=f.height,U=document.createElement("canvas");U.width=S,U.height=g;const L=U.getContext("2d");if(!L)return U;L.drawImage(f,0,0,S,g);const X=L.getImageData(0,0,S,g).data,V=new Uint8ClampedArray(S*g);for(let A=0;A<S*g;A++){const Y=X[A*4+0],F=X[A*4+1],le=X[A*4+2];V[A]=Math.round(.299*Y+.587*F+.114*le)}const I=[-1,0,1,-2,0,2,-1,0,1],J=[-1,-2,-1,0,0,0,1,2,1],he=new Float32Array(S*g);for(let A=1;A<g-1;A++)for(let Y=1;Y<S-1;Y++){let F=0,le=0,ye=0;for(let ge=-1;ge<=1;ge++)for(let _e=-1;_e<=1;_e++){const Nt=Y+_e,At=A+ge,xt=V[At*S+Nt];F+=xt*I[ye],le+=xt*J[ye],ye++}const Re=Math.sqrt(F*F+le*le);he[A*S+Y]=Re}let me=0;for(let A=0;A<he.length;A++)he[A]>me&&(me=he[A]);const R=L.createImageData(S,g),M=R.data,G=.2;for(let A=0;A<S*g;A++){const F=(me>0?he[A]/me:0)>=G?255:0,le=h?255-F:F;M[A*4+0]=le,M[A*4+1]=le,M[A*4+2]=le,M[A*4+3]=255}return L.putImageData(R,0,0),U},d=(f,h,S,g,U,L,re,X)=>{const V=document.createElement("canvas");V.width=S,V.height=g;const I=V.getContext("2d",{willReadFrequently:!0});I.clearRect(0,0,S,g),I.drawImage(h,0,0,S,g);let J=V;if(Math.abs(U)>1e-6){const he=Math.tan(U),me=Math.max(.2,1-he),R=Math.max(.2,1+he),M=Math.max(me,R),G=Math.max(1,Math.ceil(S*M)),A=document.createElement("canvas");A.width=G,A.height=g;const Y=A.getContext("2d",{willReadFrequently:!0});Y.clearRect(0,0,G,g);for(let F=0;F<g;F++){const le=g<=1?0:F/(g-1),ye=me*(1-le)+R*le,Re=Math.max(1,S*ye),ge=(G-Re)/2;Y.drawImage(J,0,F,S,1,ge,F,Re,1)}J=A}if(Math.abs(L)>1e-6){const he=Math.tan(L),me=Math.max(.2,1-he),R=Math.max(.2,1+he),M=Math.max(me,R),G=Math.max(1,Math.ceil(g*M)),A=document.createElement("canvas");A.width=J.width,A.height=G;const Y=A.getContext("2d",{willReadFrequently:!0});Y.clearRect(0,0,A.width,G);for(let F=0;F<J.width;F++){const le=J.width<=1?0:F/(J.width-1),ye=me*(1-le)+R*le,Re=Math.max(1,g*ye),ge=(G-Re)/2;Y.drawImage(J,F,0,1,J.height,F,ge,1,Re)}J=A}f.drawImage(J,-re/2,-X/2,re,X)},y=wi&&Ti;if(E&&E.bitmap&&wi){const f=E.bitmap;s.save(),s.globalAlpha=1,vo&&!Gl?s.filter="grayscale(100%)":s.filter="none";const h=a.width-80,S=a.height-80,g=h/2,U=S/2;if(s.translate(g+E.x,U+E.y),s.rotate(E.rotation*Math.PI/180),E.skewX||E.skewY){const V=Math.tan(E.skewX||0),I=Math.tan(E.skewY||0);s.transform(1,I,V,1,0,0)}s.scale(E.scale*(E.flipX?-1:1),E.scale*(E.flipY?-1:1));const L=f.width*1,re=f.height*1,X=Gl?r(f,vs):f;E.keystoneV&&Math.abs(E.keystoneV)>1e-6||E.keystoneH&&Math.abs(E.keystoneH)>1e-6?d(s,X,f.width,f.height,E.keystoneV||0,E.keystoneH||0,L,re):s.drawImage(X,-L/2,-re/2,L,re),s.restore()}if(b&&b.bitmap&&Ti){const f=b.bitmap;s.save(),s.globalAlpha=y?je/100:1,vo&&!Gl?s.filter="grayscale(100%)":s.filter="none";const h=a.width-80,S=a.height-80,g=h/2,U=S/2;if(s.translate(g+b.x,U+b.y),s.rotate(b.rotation*Math.PI/180),b.skewX||b.skewY){const V=Math.tan(b.skewX||0),I=Math.tan(b.skewY||0);s.transform(1,I,V,1,0,0)}s.scale(b.scale*(b.flipX?-1:1),b.scale*(b.flipY?-1:1));const L=f.width*1,re=f.height*1,X=Gl?r(f,vs):f;b.keystoneV&&Math.abs(b.keystoneV)>1e-6||b.keystoneH&&Math.abs(b.keystoneH)>1e-6?d(s,X,f.width,f.height,b.keystoneV||0,b.keystoneH||0,L,re):s.drawImage(X,-L/2,-re/2,L,re),s.restore()}if(kc(s),Uo&&Ct.length>0){const f=h=>{s.save();const S=Xt.find(X=>X.id===h.powerBusId),g=ct.has(h.id),U="#ff0000";s.strokeStyle=U,s.lineWidth=Math.max(1,(g?3:2)/Math.max(Xe,.001)),s.lineCap="round";const L=Math.max(6,h.size/2),re=L*.8;g&&(s.strokeStyle="#0066ff",s.lineWidth=Math.max(1,4/Math.max(Xe,.001)),s.beginPath(),s.arc(h.x,h.y,L+re+3,0,Math.PI*2),s.stroke()),s.strokeStyle=U,s.lineWidth=Math.max(1,(g?3:2)/Math.max(Xe,.001)),s.beginPath(),s.arc(h.x,h.y,L,0,Math.PI*2),s.stroke(),s.beginPath(),s.moveTo(h.x,h.y-L-re),s.lineTo(h.x,h.y+L+re),s.stroke(),s.beginPath(),s.moveTo(h.x-L-re,h.y),s.lineTo(h.x+L+re,h.y),s.stroke(),S&&(s.fillStyle=U,s.font=`${Math.max(10,L*.8)}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(S.voltage,h.x,h.y+L+re+12)),s.restore()};Ct.forEach(f)}if(qa&&Mt.length>0){const f=h=>{s.save();const S=at.has(h.id),g="#000000";s.strokeStyle=g,s.lineWidth=Math.max(1,(S?3:2)/Math.max(Xe,.001)),s.lineCap="round";const U=Math.max(6,(h.size||18)/2),L=U*.8;S&&(s.strokeStyle="#0066ff",s.lineWidth=Math.max(1,4/Math.max(Xe,.001)),s.beginPath(),s.arc(h.x,h.y,U+L+3,0,Math.PI*2),s.stroke()),s.strokeStyle=g,s.lineWidth=Math.max(1,(S?3:2)/Math.max(Xe,.001)),s.beginPath(),s.arc(h.x,h.y,U,0,Math.PI*2),s.stroke(),s.beginPath(),s.moveTo(h.x,h.y-U-L),s.lineTo(h.x,h.y+U+L),s.stroke(),s.beginPath(),s.moveTo(h.x-U-L,h.y),s.lineTo(h.x+U+L,h.y),s.stroke(),s.restore()};Mt.forEach(f)}const m=f=>{const h=Math.max(10,f.size||18),S=h/2;s.save(),s.strokeStyle=f.color||"#111",s.lineWidth=Math.max(1,2/Math.max(Xe,.001)),s.fillStyle="rgba(255,255,255,0.85)",s.beginPath(),s.rect(f.x-S,f.y-S,h,h),s.fill(),s.stroke();let g="abbreviation"in f&&f.abbreviation?String(f.abbreviation).trim():"";(!g||g===""||g==="****"||g==="*"||g==="?")&&(g=xs(f.componentType)),s.fillStyle=f.color||"#111",s.font=`bold ${Math.max(8,h*.35)}px sans-serif`,s.textAlign="center",s.textBaseline="middle",s.fillText(g,f.x,f.y);const U=f.pinConnections||[];if(U.length>0&&U.length===f.pinCount&&U.every(X=>X&&X.trim()!=="")){const V=s.measureText(g).width,I=f.y+h*.35/2+2;s.strokeStyle=f.color||"#111",s.lineWidth=Math.max(1,2/Math.max(Xe,.001)),s.beginPath(),s.moveTo(f.x-V/2,I),s.lineTo(f.x+V/2,I),s.stroke()}Le.has(f.id)&&(s.setLineDash([4,3]),s.strokeStyle="#00bfff",s.lineWidth=1.5,s.strokeRect(f.x-S-3,f.y-S-3,h+6,h+6),s.setLineDash([])),s.restore()};if(Bo&&tt.forEach(m),Va&&nt.forEach(m),x==="select"&&Kn){s.save();const f=Math.max(2,6/Math.max(1e-4,Xe));s.strokeStyle="#00bfff",s.fillStyle="rgba(0, 191, 255, 0.15)",s.lineWidth=Math.max(1,1.5/Math.max(1e-4,Xe)),s.setLineDash([f,f]),s.beginPath(),s.rect(Kn.x,Kn.y,Kn.width,Kn.height),s.fill(),s.stroke(),s.setLineDash([]),s.restore()}s.restore()},[E,b,je,Ue,tn,sa,x,W,ie,vo,Gl,vs,Ve,st,Xe,Ke.x,Ke.y,wi,Ti,bl,Oo,Xa,Wl,zi,Bo,Va,tt,nt,Uo,Ct,qa,Mt,Kn,Ie,Le,ct,at,It,Pe,Ee,fe,Oe,be]);ot.useEffect(()=>{const a=Hn.current,s=Na.current,r=xc.current,d=vc.current;if(!a||!s||!r||!d)return;let y=null;const m=a.width-80,f=a.height-80,h=m/2,S=f/2,g=M=>{if(!M||!M.bitmap)return;const G=M.bitmap.width,A=M.bitmap.height,Y=M.keystoneV?Math.tan(M.keystoneV):0,F=M.keystoneH?Math.tan(M.keystoneH):0,le=Math.max(.2,1-Y),ye=Math.max(.2,1+Y),Re=Math.max(.2,1-F),ge=Math.max(.2,1+F),_e=Math.max(le,ye),Nt=Math.max(Re,ge),At=G*_e,xt=A*Nt,Ae=M.skewX?Math.tan(M.skewX):0,Fe=M.skewY?Math.tan(M.skewY):0,ut=Math.abs(M.scale),dt=Math.abs(ut)*At+Math.abs(Ae)*Math.abs(ut)*xt,bt=Math.abs(Fe)*Math.abs(ut)*At+Math.abs(ut)*xt,Jt=N0(dt,bt,h,S,M.x,M.y,1,1,M.rotation);y=R0(y,Jt)};if(g(E),g(b),!y){r.style.width=`${s.clientWidth}px`,d.style.height=`${s.clientHeight}px`;return}const U=y,L=U.maxX-U.minX,re=U.maxY-U.minY,X=L*Xe,V=re*Xe,I=8,J=Math.max(s.clientWidth,Math.ceil(X)+I*2),he=Math.max(s.clientHeight,Math.ceil(V)+I*2);r.style.width=`${J}px`,d.style.height=`${he}px`,Mo.current=U.minX*Xe-I,mi.current=U.minY*Xe-I;const me=Zi.current,R=pi.current;if(_a.current=!0,me){const M=Math.max(0,me.scrollWidth-me.clientWidth),G=Math.max(0,Math.min(M,-(Ke.x+Mo.current)));me.scrollLeft=G}if(R){const M=Math.max(0,R.scrollHeight-R.clientHeight),G=Math.max(0,Math.min(M,-(Ke.y+mi.current)));R.scrollTop=G}requestAnimationFrame(()=>{_a.current=!1})},[E,b,Xe,Ke.x,Ke.y,gl.width,gl.height]),ot.useEffect(()=>{const a=()=>{const s=Na.current;if(!s)return;const r=1.6,d=24,y=s.clientWidth-d,m=s.clientHeight-d,f=Math.floor(m*r),h=Math.floor(y/r);let S,g;f<=y?(S=f,g=m):(S=y,g=h),S=Math.max(600,S),g=Math.max(375,g),Sc(U=>U.width===S&&U.height===g?U:{width:S,height:g})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const kc=a=>{if(Ue.forEach(s=>{if(s.type==="via"||s.type==="pad")return;let r=!1;if(s.layer==="top"?r=Oo:s.layer==="bottom"&&(r=Xa),!!r)if(s.points.length===1){const d=s.points[0],y=Math.max(.5,s.size/2);Ie.has(s.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(d.x,d.y,y+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=s.color,a.beginPath(),a.arc(d.x,d.y,y,0,Math.PI*2),a.fill()}else{Ie.has(s.id)&&(a.strokeStyle="#00bfff",a.lineWidth=s.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),s.points.forEach((d,y)=>{y===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=s.color,a.lineWidth=s.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),s.points.forEach((d,y)=>{y===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke();for(const d of s.points)a.beginPath(),a.arc(d.x,d.y,s.size/2,0,Math.PI*2),a.fill()}}),Ue.forEach(s=>{if(s.type==="via"){if(!bl)return}else if(s.type==="pad"){if(s.layer==="top"&&!Wl||s.layer==="bottom"&&!zi)return}else return;const r=s.points[0];if(Ie.has(s.id)){if(s.type==="via"){const d=Math.max(.5,s.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(r.x,r.y,d,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(s.type==="pad"){const d=Math.max(.5,s.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(r.x-d,r.y-d,s.size+6,s.size+6),a.setLineDash([])}}if(s.type==="via"){const d=Math.max(.5,s.size/2),y=d*.5,m=d*.7;a.fillStyle=s.color,a.beginPath(),a.arc(r.x,r.y,d,0,Math.PI*2),a.arc(r.x,r.y,y,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(r.x-m,r.y),a.lineTo(r.x+m,r.y),a.stroke(),a.beginPath(),a.moveTo(r.x,r.y-m),a.lineTo(r.x,r.y+m),a.stroke()}else if(s.type==="pad"){const d=Math.max(.5,s.size/2),y=s.size,m=y*.5,f=d*.7;a.fillStyle=s.color,a.beginPath(),a.rect(r.x-d,r.y-d,y,y),a.rect(r.x-m/2,r.y-m/2,m,m),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(r.x-f,r.y),a.lineTo(r.x+f,r.y),a.stroke(),a.beginPath(),a.moveTo(r.x,r.y-f),a.lineTo(r.x,r.y+f),a.stroke()}}),tn.length>0){const s=st;let r=!0;if(x==="draw"&&(be==="via"?r=bl:r=s==="top"?Oo:Xa),r)if(x==="draw")if(be==="via"){const d=tn[tn.length-1],y=Math.max(.5,ie/2),m=y*.5,f=y*.7;a.fillStyle=W,a.beginPath(),a.arc(d.x,d.y,y,0,Math.PI*2),a.arc(d.x,d.y,m,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(d.x-f,d.y),a.lineTo(d.x+f,d.y),a.stroke(),a.beginPath(),a.moveTo(d.x,d.y-f),a.lineTo(d.x,d.y+f),a.stroke()}else if(be==="pad"){const d=tn[tn.length-1],y=Math.max(.5,ie/2),m=ie,f=m*.5,h=y*.7;a.fillStyle=W,a.beginPath(),a.rect(d.x-y,d.y-y,m,m),a.rect(d.x-f/2,d.y-f/2,f,f),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(d.x-h,d.y),a.lineTo(d.x+h,d.y),a.stroke(),a.beginPath(),a.moveTo(d.x,d.y-h),a.lineTo(d.x,d.y+h),a.stroke()}else{const d=It||"top",y=d==="top"?Pe:Ee,m=d==="top"?fe:Oe;if(tn.length===1){const f=tn[0],h=Math.max(.5,m/2);a.fillStyle=y,a.beginPath(),a.arc(f.x,f.y,h,0,Math.PI*2),a.fill()}else a.strokeStyle=y,a.lineWidth=m,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),tn.forEach((f,h)=>{h===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)}),a.stroke()}else x==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=ie,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),tn.forEach((d,y)=>{y===0?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y)}),a.stroke())}},Cn=C.useCallback((a,s)=>{pl||(a==="top"&&E?ee(r=>r?{...r,...s}:null):a==="bottom"&&b?ae(r=>r?{...r,...s}:null):a==="both"&&(E&&ee(r=>r?{...r,...s}:null),b&&ae(r=>r?{...r,...s}:null)))},[E,b,pl]),Vo=C.useCallback(()=>{Ve&&(Cn(Ve,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0}),So(!1),Xi(!1),Vi(!1))},[Cn,Ve]),va=C.useCallback(()=>{if(Ie.size>0||Le.size>0||ct.size>0||at.size>0){if(Ie.size>0){const a=Ue.filter(d=>Ie.has(d.id)),s=Mn&&a.some(d=>d.type==="via"),r=vt&&a.some(d=>d.type==="trace");if(s||r)return}if(Le.size>0&&Ge||ct.size>0&&$t||at.size>0&&On)return;if(Dt(a=>a.map(s=>{if(Ie.has(s.id)){const r=s.size+1;return s.type==="via"?Q("via",r):s.type==="pad"?Q("pad",r):s.type==="trace"&&Q("trace",r,s.layer),{...s,size:r}}return s})),Le.size>0){const a=(Le.size>0&&tt.find(s=>Le.has(s.id))?.size||18)+1;Q("component",a),kn(s=>s.map(r=>Le.has(r.id)?{...r,size:(r.size||18)+1}:r)),sn(s=>s.map(r=>Le.has(r.id)?{...r,size:(r.size||18)+1}:r))}if(ct.size>0){const a=(Ct.find(s=>ct.has(s.id))?.size||18)+1;Q("power",a),xl(s=>s.map(r=>ct.has(r.id)?{...r,size:r.size+1}:r))}if(at.size>0){const a=(Mt.find(s=>at.has(s.id))?.size||18)+1;Q("ground",a),_l(s=>s.map(r=>at.has(r.id)?{...r,size:(r.size||18)+1}:r))}}else ke(a=>Math.min(40,a+1))},[Ie,Le,ct,at,Ue,Mn,vt,Ge,$t,On,x,be,st,Q]),Go=C.useCallback(()=>{if(Ie.size>0||Le.size>0||ct.size>0||at.size>0){if(Ie.size>0){const a=Ue.filter(d=>Ie.has(d.id)),s=Mn&&a.some(d=>d.type==="via"),r=vt&&a.some(d=>d.type==="trace");if(s||r)return}if(Le.size>0&&Ge||ct.size>0&&$t||at.size>0&&On)return;if(Dt(a=>a.map(s=>{if(Ie.has(s.id)){const r=Math.max(1,s.size-1);return s.type==="via"?Q("via",r):s.type==="pad"?Q("pad",r):s.type==="trace"&&Q("trace",r,s.layer),{...s,size:r}}return s})),Le.size>0){const a=Math.max(1,(tt.find(s=>Le.has(s.id))?.size||18)-1);Q("component",a),kn(s=>s.map(r=>Le.has(r.id)?{...r,size:Math.max(1,(r.size||18)-1)}:r)),sn(s=>s.map(r=>Le.has(r.id)?{...r,size:Math.max(1,(r.size||18)-1)}:r))}if(ct.size>0){const a=Math.max(1,(Ct.find(s=>ct.has(s.id))?.size||18)-1);Q("power",a),xl(s=>s.map(r=>ct.has(r.id)?{...r,size:Math.max(1,r.size-1)}:r))}if(at.size>0){const a=Math.max(1,(Mt.find(s=>at.has(s.id))?.size||18)-1);Q("ground",a),_l(s=>s.map(r=>at.has(r.id)?{...r,size:Math.max(1,(r.size||18)-1)}:r))}}else ke(a=>Math.max(1,a-1))},[Ie,Le,ct,at,Ue,Mn,vt,Ge,$t,On,x,be,st,Q]),qo=C.useCallback(()=>{const a=fa.size;if(Ie.size>0||Le.size>0||ct.size>0||at.size>0){if(Ie.size>0){const s=Ue.filter(m=>Ie.has(m.id)),r=Mn&&s.some(m=>m.type==="via"),d=Aa&&s.some(m=>m.type==="pad"),y=vt&&s.some(m=>m.type==="trace");if(r||d||y){alert("Cannot change size: selected items are locked.");return}}if(Le.size>0&&Ge){alert("Cannot change size: selected components are locked.");return}if(ct.size>0&&$t){alert("Cannot change size: selected power nodes are locked.");return}if(at.size>0&&On){alert("Cannot change size: selected ground nodes are locked.");return}Dt(s=>s.map(r=>Ie.has(r.id)?(r.type==="via"?(Q("via",a),En(d=>{const y=new Map(d),m=y.get("via");return m&&y.set("via",{...m,settings:{...m.settings,size:a}}),y})):r.type==="pad"?(Q("pad",a),En(d=>{const y=new Map(d),m=y.get("pad");return m&&y.set("pad",{...m,settings:{...m.settings,size:a}}),y})):r.type==="trace"&&Q("trace",a,r.layer),{...r,size:a}):r)),Le.size>0&&(Q("component",a),kn(s=>s.map(r=>Le.has(r.id)?{...r,size:a}:r)),sn(s=>s.map(r=>Le.has(r.id)?{...r,size:a}:r))),ct.size>0&&(Q("power",a),xl(s=>s.map(r=>ct.has(r.id)?{...r,size:a}:r))),at.size>0&&(Q("ground",a),_l(s=>s.map(r=>at.has(r.id)?{...r,size:a}:r)))}else ke(a),x==="draw"&&be==="trace"?st==="top"?(Se(a),Q("trace",a,"top")):(Me(a),Q("trace",a,"bottom")):Q(x==="draw"&&be==="via"?"via":x==="draw"&&be==="pad"?"pad":x==="component"?"component":x==="power"?"power":x==="ground"?"ground":"brush",a);en({visible:!1,size:6})},[fa.size,Ie,Le,ct,at,Ue,Mn,vt,Ge,$t,On,x,be,st,Q,Rt,En]),al=C.useCallback(()=>{Ua({visible:!1,source:null}),el({visible:!0,interval:5})},[]),$n=C.useCallback(()=>{Ua({visible:!1,source:null})},[]),Sa=C.useCallback(async()=>{const a=da.interval;if(a===null){Fl(!1),Ha(null),Yt.current&&(clearInterval(Yt.current),Yt.current=null),el({visible:!1,interval:5}),console.log("Auto save: Disabled");return}if(!pn){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let s=xi;if(!s){const d=window;if(typeof d.showDirectoryPicker=="function")try{s=await d.showDirectoryPicker(),vi(s)}catch(y){y?.name!=="AbortError"&&(console.error("Failed to get directory:",y),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser.");return}}Ms(s);const r=pn.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");ya(r),wt.current=s,$e.current=r,Ha(a),Fl(!0),Nl.current=!0,el({visible:!1,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),es()},200)},[da.interval,pn,xi]),ol=C.useCallback(a=>{const s=document.activeElement;if(!(s&&(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)||Wn.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),va();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),Go();return}if((a.key==="I"||a.key==="i")&&(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey){a.preventDefault(),a.stopPropagation();const d=[];Ie.size>0,Ie.size===0&&Le.size===0&&ct.size===0&&at.size===0&&d.push(`
No objects selected.`);const y=d.join(`
`);console.log(y),La({visible:!0,text:y});return}if(a.key==="O"||a.key==="o"){const d=document.activeElement;if(!!d&&(d.tagName==="INPUT"&&d.type!=="range"&&d.type!=="checkbox"&&d.type!=="radio"||d.tagName==="TEXTAREA"||d.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Ml(1);const m=Hn.current,f=Na.current;let h=0,S=0;if(m&&f){const g=m.getBoundingClientRect(),U=f.getBoundingClientRect(),L=m.width-80,re=m.height-80,I=56+168+6,J=g.left-U.left,he=I-J,me=g.width-Math.max(0,he),R=he+me/2,M=g.height/2,G=L/2,A=re/2,Y=g.width/m.width,F=g.height/m.height,le=R/Y,ye=M/F,Re=le-40,ge=ye-40;h=Re-G,S=ge-A}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),qn({x:h,y:S}),P("overlay"),nn(new Set),St(new Set),cn(new Set),un(new Set),Z("select");return}if((a.key==="Alt"||a.altKey)&&Ji(!0),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),Z("select"),ga(!1),Ho(!1),Yo(!1),Pl(!1),Jl(!1),ia(!1),Qn(null);return}if(a.key==="Enter"&&x==="draw"&&be==="trace"){$a();return}if((a.key==="Delete"||a.key==="Backspace")&&(Ie.size>0||Le.size>0||ct.size>0||at.size>0)){if(a.preventDefault(),a.stopPropagation(),Ie.size>0){const d=Ue.filter(f=>Ie.has(f.id)),y=Mn&&d.some(f=>f.type==="via"),m=vt&&d.some(f=>f.type==="trace");!y&&!m&&(Dt(f=>f.filter(h=>!Ie.has(h.id))),nn(new Set))}Le.size>0&&(Ge||(kn(d=>d.filter(y=>!Le.has(y.id))),sn(d=>d.filter(y=>!Le.has(y.id))),St(new Set))),ct.size>0&&($t||(xl(d=>d.filter(y=>!ct.has(y.id))),cn(new Set))),at.size>0&&(On||(_l(d=>d.filter(y=>!at.has(y.id))),un(new Set)));return}if((x==="draw"||x==="erase"||x==="power"||x==="ground")&&(a.key==="z"||a.key==="Z")&&(a.metaKey||a.ctrlKey)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),x==="power"){xl(d=>d.length===0?d:d.slice(0,-1));return}if(x==="ground"){_l(d=>d.length===0?d:d.slice(0,-1));return}if(x==="draw"&&be==="trace"){const d=tn,y=ja.current,m=d.length>0?d:y;if(m.length>0){m.length>1?Rn(f=>f.slice(0,-1)):Rn([]);return}Dt(f=>{for(let h=f.length-1;h>=0;h--){const S=f[h];if(S.type==="trace"&&S.layer===st&&S.points.length>=2)if(S.points.length>2){const g=S.points.slice(0,-1);return Rn(g),[...f.slice(0,h),...f.slice(h+1)]}else return[...f.slice(0,h),...f.slice(h+1)]}return f});return}if(sa&&tn.length>0){Rn([]);return}x==="draw"&&(be==="via"||be==="pad")&&Dt(d=>{for(let y=d.length-1;y>=0;y--){const m=d[y];if(m.layer===st&&m.type===be)return[...d.slice(0,y),...d.slice(y+1)]}return d});return}if(!a.metaKey&&!a.ctrlKey&&!a.altKey){const d=document.activeElement;if(!(!!d&&(d.tagName==="INPUT"&&d.type!=="range"&&d.type!=="checkbox"&&d.type!=="radio"||d.tagName==="TEXTAREA"||d.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),Z("select");return;case"w":case"W":a.preventDefault(),Z("power");return;case"g":case"G":a.preventDefault(),Z("ground");return;case"v":case"V":a.preventDefault(),Zl("via"),Z("draw");return;case"p":case"P":a.preventDefault(),Zl("pad"),Z("draw"),Bt(Sn||"top"),Ho(!0);return;case"t":case"T":a.preventDefault(),Zl("trace"),Z("draw"),Bt(It||"top"),ga(!0);return;case"c":case"C":a.preventDefault(),Z("component"),Yo(!0),Pl(!1),_s(null);return;case"e":case"E":a.preventDefault(),Z("erase");return;case"h":case"H":a.preventDefault(),Z("pan");return;case"z":case"Z":if(!(a.metaKey||a.ctrlKey)){a.preventDefault(),Ao(!1),Z("magnify");return}break}}if(x==="transform"&&Ve){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const y=document.activeElement;if(y&&y.tagName==="INPUT"){const m=y;m.type==="radio"&&m.blur()}if(dl==="nudge"){let m=0,f=0;switch(a.key){case"ArrowLeft":m=-1;break;case"ArrowRight":m=1;break;case"ArrowUp":f=-1;break;case"ArrowDown":f=1;break;default:return}Ve==="top"&&E?ee(h=>h?{...h,x:h.x+m,y:h.y+f}:null):Ve==="bottom"&&b?ae(h=>h?{...h,x:h.x+m,y:h.y+f}:null):Ve==="both"&&(E&&ee(h=>h?{...h,x:h.x+m,y:h.y+f}:null),b&&ae(h=>h?{...h,x:h.x+m,y:h.y+f}:null))}else if(dl==="scale"){let m=0;switch(a.key){case"ArrowUp":m=.01;break;case"ArrowDown":m=-.01;break;case"ArrowRight":m=.001;break;case"ArrowLeft":m=-.001;break;default:return}Ve==="top"&&E?ee(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+m))}:null):Ve==="bottom"&&b?ae(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+m))}:null):Ve==="both"&&(E&&ee(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+m))}:null),b&&ae(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+m))}:null))}else if(dl==="rotate"){let m=0;switch(a.key){case"ArrowUp":m=1;break;case"ArrowDown":m=-1;break;case"ArrowRight":m=.1;break;case"ArrowLeft":m=-.1;break;default:return}Ve==="top"&&E?ee(f=>f?{...f,rotation:f.rotation+m}:null):Ve==="bottom"&&b?ae(f=>f?{...f,rotation:f.rotation+m}:null):Ve==="both"&&(E&&ee(f=>f?{...f,rotation:f.rotation+m}:null),b&&ae(f=>f?{...f,rotation:f.rotation+m}:null))}else if(dl==="slant"){let m=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":m=-.5;break;case"ArrowRight":m=.5;break}if(m!==0||f!==0){const h=g=>g*Math.PI/180,S=g=>Math.max(-.7,Math.min(.7,g));Ve==="top"&&E?ee(g=>g?{...g,skewX:S((g.skewX||0)+h(m)),skewY:S((g.skewY||0)+h(f))}:null):Ve==="bottom"&&b?ae(g=>g?{...g,skewX:S((g.skewX||0)+h(m)),skewY:S((g.skewY||0)+h(f))}:null):Ve==="both"&&(E&&ee(g=>g?{...g,skewX:S((g.skewX||0)+h(m)),skewY:S((g.skewY||0)+h(f))}:null),b&&ae(g=>g?{...g,skewX:S((g.skewX||0)+h(m)),skewY:S((g.skewY||0)+h(f))}:null))}}else if(dl==="keystone"){let m=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":m=-.5;break;case"ArrowRight":m=.5;break}if(m!==0||f!==0){const h=g=>g*Math.PI/180,S=g=>Math.max(-.35,Math.min(.35,g));Ve==="top"&&E?ee(g=>g?{...g,keystoneH:S((g.keystoneH||0)+h(m)),keystoneV:S((g.keystoneV||0)+h(f))}:null):Ve==="bottom"&&b?ae(g=>g?{...g,keystoneH:S((g.keystoneH||0)+h(m)),keystoneV:S((g.keystoneV||0)+h(f))}:null):Ve==="both"&&(E&&ee(g=>g?{...g,keystoneH:S((g.keystoneH||0)+h(m)),keystoneV:S((g.keystoneV||0)+h(f))}:null),b&&ae(g=>g?{...g,keystoneH:S((g.keystoneH||0)+h(m)),keystoneV:S((g.keystoneV||0)+h(f))}:null))}}}else{const d=a.target;if(d.tagName==="INPUT"&&d.type==="range"){const y=d,m=Number(y.value),f=Number(y.min),h=Number(y.max),S=Number(y.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const g=Math.max(f,m-S);y.value=g.toString(),y.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const U=Math.min(h,m+S);y.value=U.toString(),y.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[x,Ve,dl,E,b,Ie,Le,ct,at,Ue,tt,nt,Ct,Mt,Xt,be,$a,It,Pe,Ee,fe,Oe]);ot.useEffect(()=>{x!=="transform"&&bo(null)},[x]),ot.useEffect(()=>{window.addEventListener("keydown",ol,!0);const a=s=>{s.key==="Alt"&&Ji(!1)};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",ol,!0),window.removeEventListener("keyup",a,!0)}},[ol,ct,at,$t,On,Ct,Mt,va,Go]);const Xn=C.useCallback(()=>{pe("#AA4499"),jt("#F781BF"),Se(6),Me(6),ne("trace","#AA4499","top"),ne("trace","#F781BF","bottom"),Q("trace",6,"top"),Q("trace",6,"bottom"),it("#0072B2"),B("#56B4E9"),Be(26),Et(26),ne("pad","#0072B2","top"),ne("pad","#56B4E9","bottom"),Q("pad",26,"top"),Q("pad",26,"bottom"),K("#6A3D9A"),ve("#9467BD"),et(18),vn(18),ne("component","#6A3D9A","top"),ne("component","#9467BD","bottom"),Q("component",18,"top"),Q("component",18,"bottom"),Lo("top"),xe("#AA4499"),ke(6),Ga([{id:"powerbus-1",name:"+3.3VDC",voltage:"+3.3VDC",color:"#ff0000"},{id:"powerbus-2",name:"+5VDC",voltage:"+5VDC",color:"#ff0000"}]),To(!1),Gi(!1),An(!1),ci(!1),qi(!1),ka(!1),Bt("top"),Z("select"),se(50),Te(!1),P("overlay"),Jp(1)},[ne,Q]),Bn=C.useCallback(()=>{Xn(),setTimeout(()=>{Ml(1);const a=Hn.current,s=Na.current;let r=0,d=0;if(a&&s){const y=a.getBoundingClientRect(),m=s.getBoundingClientRect(),f=a.width-80,h=a.height-80,U=56+168+6,L=y.left-m.left,re=U-L,X=y.width-Math.max(0,re),V=re+X/2,I=y.height/2,J=f/2,he=h/2,me=y.width/a.width,R=y.height/a.height,M=V/me,G=I/R,A=M-40,Y=G-40;r=A-J,d=Y-he}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),qn({x:r,y:d}),nn(new Set),St(new Set),cn(new Set),un(new Set)},100)},[Xn]);ot.useEffect(()=>{Bn()},[]),ot.useEffect(()=>{if(!yi.visible)return;const a=[];Ie.size>0,Ie.size===0&&Le.size===0&&ct.size===0&&at.size===0&&a.push(`
No objects selected.`);const s=a.join(`
`);La(r=>({...r,text:s}))},[yi.visible,Ie,Le,ct,at,Ue,tt,nt,Ct,Mt,Xt]),ot.useEffect(()=>{const a=s=>{const r=Hn.current;if(r&&!(ji.current&&ji.current.contains(s.target))&&!(s.target instanceof Node&&r.contains(s.target))){if($a(),Za){const d=Os.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&ga(!1)}if(Fi){const d=ji.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&(Yo(!1),Z("select"))}if(Di){const d=Bs.current;(!d||!(s.target instanceof Node)||!d.contains(s.target))&&(Pl(!1),Qn(null))}if(Kt){const d=ks.current;!s.target?.closest('button[title="Color Picker"]')&&(!d||!(s.target instanceof Node)||!d.contains(s.target))&&ia(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[$a,Za,$i,Fi,Di,Kt]),ot.useEffect(()=>{const a=s=>{if(!ft)return;const r=document.querySelector("[data-component-editor-dialog]");if(r&&s.target instanceof Node&&r.contains(s.target)){const Y=s.target;if(Y.tagName==="BUTTON"||Y.tagName==="INPUT"||Y.closest("button")||Y.closest("input"))return}const d=Hn.current;if(!d)return;const y=d.getBoundingClientRect(),m=s.clientX,f=s.clientY;if(m<y.left||m>y.right||f<y.top||f>y.bottom)return;const h=d.width/y.width,S=d.height/y.height,g=m-y.left,U=f-y.top,L=g*h,re=U*S,X=L-40,V=re-40,I=(X-Ke.x)/Xe,J=(V-Ke.y)/Xe;let he=1/0,me=null,R=null;const M=Math.max(6/Xe,4),A=[...tt,...nt].find(Y=>Y.id===ft.componentId)?.layer||"top";for(const Y of Ue)if((Y.type==="via"||Y.type==="pad")&&Y.points.length>0){if(Y.type==="pad"&&(Y.layer||"top")!==A)continue;const F=Y.points[0],le=Math.max(1,Y.size/2),ye=Math.hypot(F.x-I,F.y-J),Re=Math.max(le,M);ye<=Re&&ye<he&&(he=ye,me=F.id,R=Y)}if(me!=null&&R){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${me}`),console.log(`  Connecting pin ${ft.pinIndex+1} of component ${ft.componentId}`);const Y=String(me),F=ft.pinIndex,le=ft.componentId,ye=tt.find(ge=>ge.id===le),Re=nt.find(ge=>ge.id===le);ye?kn(ge=>{const _e=ge.find(Ae=>Ae.id===le);if(!_e)return ge;const Nt=_e.pinConnections||[],At=Nt.length>0?[...Nt]:new Array(_e.pinCount).fill("");let xt;if(At.length!==_e.pinCount){xt=new Array(_e.pinCount).fill("");for(let Ae=0;Ae<Math.min(At.length,_e.pinCount);Ae++)xt[Ae]=At[Ae]||""}else xt=[...At];return xt[F]=Y,console.log(`Updated pin ${F} with value: ${Y}`),console.log("New pinConnections:",xt),ge.map(Ae=>Ae.id===le?{...Ae,pinConnections:xt}:Ae)}):Re&&sn(ge=>{const _e=ge.find(Ae=>Ae.id===le);if(!_e)return ge;const Nt=_e.pinConnections||[],At=Nt.length>0?[...Nt]:new Array(_e.pinCount).fill("");let xt;if(At.length!==_e.pinCount){xt=new Array(_e.pinCount).fill("");for(let Ae=0;Ae<Math.min(At.length,_e.pinCount);Ae++)xt[Ae]=At[Ae]||""}else xt=[...At];return xt[F]=Y,console.log(`Updated pin ${F} with value: ${Y}`),console.log("New pinConnections:",xt),ge.map(Ae=>Ae.id===le?{...Ae,pinConnections:xt}:Ae)}),setTimeout(()=>{Al(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if(ft)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[ft,tt,nt,Ue,Xe,Ke.x,Ke.y]),ot.useEffect(()=>{if(!Ql)return;const a=r=>{di&&fi({x:r.clientX-di.x,y:r.clientY-di.y})},s=()=>{zs(!1),Ra(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)}},[Ql,di]),ot.useEffect(()=>{Ce&&Ce.visible&&ml===null?fi({x:window.innerWidth/2,y:window.innerHeight/2}):(!Ce||!Ce.visible)&&fi(null)},[Ce,ml]);const Dc=C.useCallback(a=>{switch(a){case"transparency":se(50);break;case"brushSize":ke(3);break}},[]);ot.useEffect(()=>{if(O){Oa.current=performance.now(),se(0);const a=s=>{const r=Oa.current||s,d=1e3,y=(s-r)%d/d,m=1-Math.abs(1-2*y);se(Math.round(m*100)),Dl.current=requestAnimationFrame(a)};Dl.current=requestAnimationFrame(a)}return()=>{Dl.current&&(cancelAnimationFrame(Dl.current),Dl.current=null)}},[O]),ot.useEffect(()=>{const a=x==="erase"?"erase":x==="magnify"?"magnify":x==="ground"?"ground":x==="power"?"power":x==="component"?"component":x==="draw"?be==="via"?"via":be==="pad"?"pad":"trace":"default";if(a==="default"){Ss(void 0);return}const s=Math.max(1,Xe),r=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(ie*s)),y=r+4*2+(a==="magnify"?8:0),m=document.createElement("canvas");m.width=y,m.height=y;const f=m.getContext("2d");if(!f){Ss(void 0);return}const h=y/2,S=y/2,g=r/2;if(f.clearRect(0,0,y,y),a==="via"){const L=g,re=g*.5,X=g*.7,I=Rt.get("via")?.settings.color||ue.viaColor||W;f.fillStyle=I,f.beginPath(),f.arc(h,S,L,0,Math.PI*2),f.arc(h,S,re,0,Math.PI*2),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(h-X,S),f.lineTo(h+X,S),f.stroke(),f.beginPath(),f.moveTo(h,S-X),f.lineTo(h,S+X),f.stroke()}else if(a==="pad"){const re=Rt.get("pad")?.settings.color||Ze||W,X=g*2,V=X*.5,I=g*.7;f.fillStyle=re,f.beginPath(),f.rect(h-g,S-g,X,X),f.rect(h-V/2,S-V/2,V,V),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(h-I,S),f.lineTo(h+I,S),f.stroke(),f.beginPath(),f.moveTo(h,S-I),f.lineTo(h,S+I),f.stroke()}else if(a==="trace"){const re=Rt.get("trace")?.settings.color||(It==="top"?Pe:Ee)||W;f.fillStyle=re,f.beginPath(),f.arc(h,S,g,0,Math.PI*2),f.fill()}else if(a==="erase"){const L=ie,re=L/2;f.fillStyle="#ffffff",f.strokeStyle="#111",f.lineWidth=2,f.beginPath(),f.rect(h-re,S-re,L,L),f.fill(),f.stroke()}else if(a==="magnify"){const L=g;f.strokeStyle="#111",f.lineWidth=2,f.beginPath(),f.arc(h-2,S-2,L,0,Math.PI*2),f.stroke();const re=h+L*.6,X=S+L*.6,V=re+6,I=X+6;f.beginPath(),f.moveTo(re,X),f.lineTo(V,I),f.stroke(),f.beginPath(),f.moveTo(h-6,S-2),f.lineTo(h+2,S-2),f.stroke(),Pn||(f.beginPath(),f.moveTo(h-2,S-6),f.lineTo(h-2,S+2),f.stroke())}else if(a==="ground"){f.strokeStyle="#000000",f.lineWidth=2,f.lineCap="round";const L=g*.8;f.beginPath(),f.arc(h,S,g,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(h,S-g-L),f.lineTo(h,S+g+L),f.stroke(),f.beginPath(),f.moveTo(h-g-L,S),f.lineTo(h+g+L,S),f.stroke()}else if(a==="power"){f.strokeStyle="#ff0000",f.lineWidth=2,f.lineCap="round";const L=g*.8;f.beginPath(),f.arc(h,S,g,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(h,S-g-L),f.lineTo(h,S+g+L),f.stroke(),f.beginPath(),f.moveTo(h-g-L,S),f.lineTo(h+g+L,S),f.stroke()}else if(a==="component"){const L=Sl||"top",re=Rt.get("component"),X=(L==="top"?w:de)||re?.settings.color||W,V=r,I=V/2;f.strokeStyle=X,f.lineWidth=2,f.fillStyle="rgba(255,255,255,0.9)",f.beginPath(),f.rect(h-I,S-I,V,V),f.fill(),f.stroke();const J=vl?xs(vl):"?";f.fillStyle=X,f.font=`bold ${Math.max(8,V*.35)}px sans-serif`,f.textAlign="center",f.textBaseline="middle",f.fillText(J,h,S)}const U=`url(${m.toDataURL()}) ${Math.round(h)} ${Math.round(S)}, crosshair`;Ss(U)},[x,be,W,ie,Xe,Pn,vl,Ai,Xt,Rt,ue,It,Pe,Ee,Sl,w,de]),ot.useEffect(()=>{Fa()},[Fa]),ot.useEffect(()=>{Fa()},[gl.width,gl.height]),ot.useEffect(()=>{if(Ie.size===0){x==="draw"&&be==="trace"&&ie>=1&&(st==="top"?Se(ie):Me(ie));return}Dt(a=>a.map(s=>Ie.has(s.id)?{...s,size:ie}:s))},[ie,x,be,st]);const Pi=C.useCallback(()=>{const a=Hn.current;if(!a)return;const s=a.toDataURL("image/png"),r=window.open("","_blank");if(!r){alert("Please allow popups to print the canvas.");return}r.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${s}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),r.document.close()},[]);ot.useEffect(()=>{const a=r=>{r.key==="Shift"&&Ao(!0)},s=r=>{r.key==="Shift"&&Ao(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",s),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",s)}},[]),ot.useEffect(()=>{const a=s=>{Ci.current&&(Ci.current.contains(s.target)||De(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),ot.useEffect(()=>{const a=(s,r)=>{const d=s.current;if(!d)return;const y=d.getContext("2d");if(!y)return;const m=d.width,f=d.height;if(y.clearRect(0,0,m,f),y.fillStyle="#fff",y.fillRect(0,0,m,f),r?.bitmap){const h=r.bitmap,S=Math.min(m/h.width,f/h.height),g=Math.max(1,Math.floor(h.width*S)),U=Math.max(1,Math.floor(h.height*S)),L=Math.floor((m-g)/2),re=Math.floor((f-U)/2);y.drawImage(h,L,re,g,U)}y.strokeStyle="#ddd",y.lineWidth=1,y.strokeRect(.5,.5,m-1,f-1)};a(jo,E),a(zc,b)},[E,b]),ot.useEffect(()=>{const a=[],s=[],r=[],d=[];for(const y of Ue)if(y.type==="via"&&y.points.length>=1){const m=y.points[0],f={id:y.id,pointId:m.id,x:m.x,y:m.y,size:y.size,color:y.color};a.push(f)}else if(y.type==="pad"&&y.points.length>=1){const m=y.points[0],f={id:y.id,pointId:m.id,x:m.x,y:m.y,size:y.size,color:y.color,layer:y.layer||"top"};s.push(f)}else if(y.type==="trace"&&y.points.length>=2)for(let m=0;m<y.points.length-1;m++){const f=y.points[m],h=y.points[m+1],S={id:y.id,startPointId:f.id,endPointId:h.id,x1:f.x,y1:f.y,x2:h.x,y2:h.y,size:y.size,color:y.color};y.layer==="top"?r.push(S):d.push(S)}ui(a),dn(s),bc(r),zo(d)},[Ue]);const Zo=C.useRef(Ue);Zo.current=Ue;const ta=C.useCallback(()=>{const a=new Date,s=a.toISOString(),r=m=>String(m).padStart(2,"0"),d=`${a.getFullYear()}_${r(a.getMonth()+1)}_${r(a.getDate())}_${r(a.getHours())}_${r(a.getMinutes())}_${r(a.getSeconds())}`;return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:s,view:{currentView:ce,viewScale:Xe,viewPan:Ke,showBothLayers:ql,selectedDrawingLayer:st},images:{top:E?{name:E.name,width:E.width,height:E.height,dataUrl:E.dataUrl??E.url,x:E.x,y:E.y,scale:E.scale,rotation:E.rotation,flipX:E.flipX,flipY:E.flipY,skewX:E.skewX,skewY:E.skewY,keystoneV:E.keystoneV,keystoneH:E.keystoneH}:null,bottom:b?{name:b.name,width:b.width,height:b.height,dataUrl:b.dataUrl??b.url,x:b.x,y:b.y,scale:b.scale,rotation:b.rotation,flipX:b.flipX,flipY:b.flipY,skewX:b.skewX,skewY:b.skewY,keystoneV:b.keystoneV,keystoneH:b.keystoneH}:null},drawing:{drawingStrokes:Zo.current.filter(m=>!(m.type==="trace"&&m.points.length<2)),vias:Da,tracesTop:Ts,tracesBottom:ra,componentsTop:tt,componentsBottom:nt,grounds:Mt,powers:Ct},powerBuses:Xt,pointIdCounter:Pp(),traceColors:{top:Pe,bottom:Ee},traceSizes:{top:fe,bottom:Oe},padColors:{top:Ze,bottom:Gt},padSizes:{top:oe,bottom:mt},componentColors:{top:w,bottom:de},componentSizes:{top:Ye,bottom:rt},traceToolLayer:It,toolSettings:{trace:Rt.get("trace")?.settings||{color:"#ff0000",size:10},via:Rt.get("via")?.settings||{color:"#ff0000",size:26},pad:Rt.get("pad")?.settings||{color:"#ff0000",size:26},component:Rt.get("component")?.settings||{color:"#ff0000",size:18},ground:Rt.get("ground")?.settings||{color:"#000000",size:18},power:Rt.get("power")?.settings||{color:"#ff0000",size:18}},locks:{areImagesLocked:pl,areViasLocked:Mn,arePadsLocked:Aa,areTracesLocked:vt,areComponentsLocked:Ge,areGroundNodesLocked:On,arePowerNodesLocked:$t},visibility:{showViasLayer:bl,showTopPadsLayer:Wl,showBottomPadsLayer:zi,showTopTracesLayer:Oo,showBottomTracesLayer:Xa,showTopComponents:Bo,showBottomComponents:Va,showPowerLayer:Uo,showGroundLayer:qa},autoSave:{enabled:tl,interval:pa,baseName:ma},projectInfo:{name:pn}},timestamp:d}},[ce,Xe,Ke,ql,st,E,b,Ue,Da,Ts,ra,tt,nt,Mt,Rt,pl,Mn,Aa,vt,Ge,On,$t,Xt,Pp,Pe,Ee,fe,Oe,Ze,Gt,oe,mt,w,de,Ye,rt,It,tl,pa,ma,pn,bl,Wl,zi,Oo,Xa,Bo,Va,Uo,qa]),hn=C.useRef(ta);hn.current=ta;const wt=C.useRef(ha);wt.current=ha;const $e=C.useRef(ma);$e.current=ma;const na=C.useRef(nl);na.current=nl;const Fn=C.useRef(Ya);Fn.current=Ya;const Dn=C.useRef([]);Dn.current=wu;const Wn=C.useRef(-1);Wn.current=wc;const es=C.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=wt.current,s=$e.current;console.log(`Auto save: dirHandle=${a?"set":"missing"}, baseName=${s||"missing"}`);const r=Fn.current;if(console.log(`Auto save: currentFilePath=${r||"none"}`),!a||!s){console.warn(`Auto save: Missing directory handle (${!a}) or base name (${!s}). Please use File -> Auto Save -> Enable to set up auto save.`),Fl(!1),Yt.current&&(clearInterval(Yt.current),Yt.current=null);return}if(!Nl.current){console.log("Auto save: Skipping - no changes since last save");return}const d=Zo.current,y=d.filter(U=>U.type==="trace"&&U.points.length<2);if(y.length>0){console.log(`Auto save: Cleaning up ${y.length} single-point trace(s) before save`),y.forEach(L=>console.log(`  - Removing single-point trace ${L.id}`));const U=d.filter(L=>!(L.type==="trace"&&L.points.length<2));Dt(U),Zo.current=U}console.log("Auto save: Starting save...");const{project:m,timestamp:f}=hn.current(),h=`${s}_${f}.json`,S=JSON.stringify(m,null,2),g=new Blob([S],{type:"application/json"});try{let U;try{U=await a.getDirectoryHandle("history",{create:!0})}catch(I){console.error("Failed to get/create history directory:",I);return}try{const I=[];for await(const J of a.keys())try{if(J==="history"||J===h)continue;const me=await(await a.getFileHandle(J)).getFile();if(!J.endsWith(".json"))continue;const R=await me.text();try{const M=JSON.parse(R);M.version&&(M.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!M.fileType)&&(I.push(J),console.log(`Auto save: Found PCB project file in root: ${J} (${M.fileType?"auto-saved":"manually saved"})`))}catch{continue}}catch{continue}for(const J of I)try{const R=await(await(await a.getFileHandle(J)).getFile()).text(),G=await(await U.getFileHandle(J,{create:!0})).createWritable();await G.write(new Blob([R],{type:"application/json"})),await G.close(),await a.removeEntry(J),console.log(`Auto save: Moved ${J} from root to history/`)}catch(he){console.warn(`Auto save: Failed to move ${J} to history:`,he)}}catch(I){console.warn("Auto save: Error checking for old files in root:",I)}const re=await(await a.getFileHandle(h,{create:!0})).createWritable();await re.write(g),await re.close(),console.log(`Auto save: Successfully saved ${h} to root directory`),na.current(h);const X=Dn.current,V=[h,...X.filter(I=>I!==h)].sort((I,J)=>J.localeCompare(I));Si(V),Dn.current=V,Tc(0),Wn.current=0,Nl.current=!1}catch(U){console.error("Auto save failed:",U)}},[]),ts=C.useCallback(async()=>{const{project:a}=ta(),s=JSON.stringify(a,null,2),r=new Blob([s],{type:"application/json"});if(xi&&pn)try{const g="project.json",L=await(await xi.getFileHandle(g,{create:!0})).createWritable();await L.write(r),await L.close(),nl(g),console.log(`Project saved: ${pn}/${g}`);return}catch(g){console.error("Failed to save to project directory:",g),vi(null)}if(pn&&!xi){const g=window;if(typeof g.showDirectoryPicker=="function")try{const U=await g.showDirectoryPicker();vi(U);const L=`${pn}.json`,X=await(await U.getFileHandle(L,{create:!0})).createWritable();await X.write(r),await X.close(),nl(L),console.log(`Project saved: ${L} in selected directory`);return}catch(U){U?.name!=="AbortError"&&console.error("Failed to get directory:",U)}}const d=g=>String(g).padStart(2,"0"),y=new Date,f=`pcb_project_${`${y.getFullYear()}_${d(y.getMonth()+1)}_${d(y.getDate())}_${d(y.getHours())}_${d(y.getMinutes())}_${d(y.getSeconds())}`}.json`,h=window;if(typeof h.showSaveFilePicker=="function")try{const g=await h.showSaveFilePicker({suggestedName:f,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),U=await g.createWritable();await U.write(r),await U.close();const L=g.name;try{const V=await g.getFile();nl(V.name)}catch{nl(L)}const X=L.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");X&&(Ol(X),localStorage.setItem("pcb_project_name",X));try{const V=g.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");ya(V),ha||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(V){console.warn("Could not set up auto save for new file:",V)}return}catch(g){if(g?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",g)}const S=document.createElement("a");S.href=URL.createObjectURL(r),S.download=f,document.body.appendChild(S),S.click(),setTimeout(()=>{URL.revokeObjectURL(S.href),document.body.removeChild(S)},0)},[ta]),Wa=C.useCallback(async(a="kicad")=>{const s=[...tt,...nt],r=a==="protel"?$0(s,Ue,Ct,Mt,Xt):K0(s,Ue,Ct,Mt,Xt),d=new Blob([r],{type:"text/plain"}),y=pn||"pcb_project",m=a==="protel"?`${y}.Net`:`${y}.net`,f=window;if(typeof f.showSaveFilePicker=="function")try{const S=await f.showSaveFilePicker({suggestedName:m,types:[{description:a==="protel"?"Protel Netlist":"KiCad Netlist",accept:{"text/plain":[a==="protel"?".Net":".net"]}}]}),g=await S.createWritable();await g.write(d),await g.close(),console.log(`Netlist exported (${a}): ${S.name}`);return}catch(S){if(S?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",S)}const h=document.createElement("a");h.href=URL.createObjectURL(d),h.download=m,document.body.appendChild(h),h.click(),setTimeout(()=>{URL.revokeObjectURL(h.href),document.body.removeChild(h)},0)},[tt,nt,Ue,Ct,Mt,Xt,pn]),Ja=C.useCallback(async()=>{const a=[...tt,...nt],s=F0(a,Ue,Ct,Mt,Xt),r=new Blob([s],{type:"text/plain"}),y=`${pn||"pcb_project"}.kicad_sch`,m=window;if(typeof m.showSaveFilePicker=="function")try{const h=await m.showSaveFilePicker({suggestedName:y,types:[{description:"KiCad Schematic",accept:{"text/plain":["kicad_sch"]}}]}),S=await h.createWritable();await S.write(r),await S.close(),console.log(`Simple schematic exported: ${h.name}`);return}catch(h){if(h?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",h)}const f=document.createElement("a");f.href=URL.createObjectURL(r),f.download=y,document.body.appendChild(f),f.click(),setTimeout(()=>{URL.revokeObjectURL(f.href),document.body.removeChild(f)},0)},[tt,nt,Ue,Ct,Mt,Xt,pn]);ot.useEffect(()=>{Yt.current&&(clearInterval(Yt.current),Yt.current=null);const a=As.current;if(As.current=tl,tl&&pa){const s=pa*60*1e3;ha&&ma?(console.log(`Auto save: Setting up interval for ${pa} minute(s) (${s}ms)`),a||(Nl.current=!0,setTimeout(()=>{es()},100)),Yt.current&&(clearInterval(Yt.current),Yt.current=null),Yt.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Nl.current}`),console.log(`  - dirHandle: ${wt.current?"set":"missing"}`),console.log(`  - baseName: ${$e.current||"missing"}`),es()},s),console.log(`Auto save: Interval set up for ${s}ms (${pa} minutes)`),console.log(`  - Directory handle: ${ha?"set":"missing"}`),console.log(`  - Base name: ${ma||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!ha}) or base name (${!ma}). Disabling auto save.`),Fl(!1),Yt.current&&(clearInterval(Yt.current),Yt.current=null))}else tl||(As.current=!1);return()=>{Yt.current&&(clearInterval(Yt.current),Yt.current=null)}},[tl,pa,ha,ma]);const Pa=C.useRef(!1);ot.useEffect(()=>{if(!tl){Pa.current=!1;return}if(Pa.current){Pa.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Nl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!E,bottomImage:!!b,drawingStrokesCount:Ue.length,componentsTopCount:tt.length,componentsBottomCount:nt.length,powersCount:Ct.length,groundsCount:Mt.length,powerBusesCount:Xt.length,areImagesLocked:pl,areViasLocked:Mn,areTracesLocked:vt,areComponentsLocked:Ge,areGroundNodesLocked:On,arePowerNodesLocked:$t})},[E,b,Ue,tt,nt,Ct,Mt,Xt,Pe,Ee,fe,Oe,pl,Mn,vt,Ge,On,$t,tl]),ot.useEffect(()=>{tl?(Pa.current=!0,console.log("Auto save: Enabled, marking first run")):Pa.current=!1},[tl]),ot.useEffect(()=>{tl||(Nl.current=!1)},[tl]);const Ni=C.useCallback(()=>!!(E||b||Ue.length>0||tt.length>0||nt.length>0||Ct.length>0||Mt.length>0),[E,b,Ue,tt,nt,Ct,Mt]);ot.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&Ol(a)},[]);const eo=C.useCallback(()=>{gi({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),to=C.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const s=await a.showDirectoryPicker();gi(r=>({...r,locationHandle:s,locationPath:s.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",s.name||"")}catch(s){s?.name!=="AbortError"&&(console.error("Failed to get directory:",s),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),Ul=C.useCallback(async()=>{const a=qt.projectName.trim();if(!a){alert("Please enter a project name.");return}const s=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!qt.locationHandle){alert("Please select a location for the project.");return}const r=qt.locationHandle;let d;try{d=await r.getDirectoryHandle(s,{create:!0})}catch(y){console.error("Failed to create project folder:",y),alert(`Failed to create project folder "${s}". See console for details.`);return}gi({visible:!1,projectName:"",locationPath:"",locationHandle:null}),Ol(s),vi(d),localStorage.setItem("pcb_project_name",s),localStorage.setItem("pcb_project_location_path",r.name||""),ee(null),ae(null),Dt([]),kn([]),sn([]),xl([]),_l([]),nn(new Set),St(new Set),cn(new Set),un(new Set),P("overlay"),Ml(1),qn({x:0,y:0}),Nl.current=!1,nl(""),Fl(!1),Ha(null),Ms(null),ya(""),Yt.current&&(clearInterval(Yt.current),Yt.current=null),Xn();try{const{project:y}=ta(),m="project.json",f=JSON.stringify(y,null,2),h=new Blob([f],{type:"application/json"}),g=await(await d.getFileHandle(m,{create:!0})).createWritable();await g.write(h),await g.close(),nl(m),console.log(`New project created: ${s}/project.json`),Ua({visible:!0,source:"new"})}catch(y){console.error("Failed to save new project:",y),alert("Failed to save new project file. See console for details.")}},[Xn,ta,qt]),Ll=C.useCallback(()=>{gi({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),la=C.useCallback(()=>{const a=pn?`${pn}.json`:"";bi({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(Qi.current?.focus(),Qi.current&&a){const s=a.replace(/\.json$/i,"");Qi.current.setSelectionRange(0,s.length)}},100)},[pn]),Xs=C.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const s=await a.showDirectoryPicker();bi(r=>({...r,locationHandle:s,locationPath:s.name||"Selected folder"}))}catch(s){s?.name!=="AbortError"&&(console.error("Failed to get directory:",s),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),ns=C.useCallback(async()=>{const a=Zt.filename.trim();if(!a){alert("Please enter a file name.");return}const r=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!Zt.locationHandle){alert("Please select a location for the file.");return}const d=Zt.locationHandle;try{const{project:y}=ta(),m=JSON.stringify(y,null,2),f=new Blob([m],{type:"application/json"}),S=await(await d.getFileHandle(r,{create:!0})).createWritable();await S.write(f),await S.close(),nl(r);const g=r.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");g&&(Ol(g),localStorage.setItem("pcb_project_name",g)),vi(d),bi({visible:!1,filename:"",locationPath:"",locationHandle:null}),De(null),console.log(`Project saved as: ${r} in selected directory`)}catch(y){console.error("Failed to save project:",y),alert(`Failed to save project file "${r}". See console for details.`)}},[Zt,ta]),Ca=C.useCallback(()=>{bi({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),Io=C.useCallback(async()=>{Do({visible:!1}),await ts(),eo(),Bn()},[ts,eo,Bn]),no=C.useCallback(()=>{Do({visible:!1}),eo(),Bn()},[eo,Bn]),mn=C.useCallback(()=>{Do({visible:!1})},[]);ot.useEffect(()=>{if(ko.visible){setTimeout(()=>{Cc.current?.focus()},0);const a=s=>{s.key==="Enter"?(s.preventDefault(),Io()):s.key==="Escape"&&(s.preventDefault(),Do({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[ko.visible,Io]);const lo=C.useCallback(async a=>{try{if(a.projectInfo)a.projectInfo.name&&(Ol(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const m=localStorage.getItem("pcb_project_name");m&&Ol(m)}if(a.view&&(a.view.currentView&&P(a.view.currentView),a.view.viewScale!=null&&Ml(a.view.viewScale),a.view.viewPan&&qn(a.view.viewPan),a.view.showBothLayers!=null&&Gn(a.view.showBothLayers),a.view.selectedDrawingLayer&&Bt(a.view.selectedDrawingLayer)),a.traceColors&&(a.traceColors.top&&(pe(a.traceColors.top),ne("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(jt(a.traceColors.bottom),ne("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const m=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let f=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;f<6&&(f=6),Se(m),Me(f),Q("trace",m,"top"),Q("trace",f,"bottom")}else Se(6),Me(6);if(a.padColors&&(a.padColors.top&&(it(a.padColors.top),ne("pad",a.padColors.top,"top")),a.padColors.bottom&&(B(a.padColors.bottom),ne("pad",a.padColors.bottom,"bottom"))),a.padSizes){const m=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:26,f=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:26;Be(m),Et(f),Q("pad",m,"top"),Q("pad",f,"bottom")}if(a.componentColors&&(a.componentColors.top&&(K(a.componentColors.top),ne("component",a.componentColors.top,"top")),a.componentColors.bottom&&(ve(a.componentColors.bottom),ne("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const m=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,f=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;et(m),vn(f),Q("component",m,"top"),Q("component",f,"bottom")}if(a.traceToolLayer&&(Lo(a.traceToolLayer),x==="draw"&&be==="trace")){const m=a.traceToolLayer;xe(m==="top"?a.traceColors?.top||Pe:a.traceColors?.bottom||Ee);const f=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let h=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;h<6&&(h=6),ke(m==="top"?f:h)}a.toolSettings&&En(m=>{const f=new Map(m);if(a.toolSettings.trace){const S=f.get("trace");S&&f.set("trace",{...S,settings:a.toolSettings.trace})}if(a.toolSettings.via){const S=f.get("via");S&&f.set("via",{...S,settings:a.toolSettings.via})}if(a.toolSettings.pad){const S=f.get("pad");S&&f.set("pad",{...S,settings:a.toolSettings.pad})}if(a.toolSettings.component){const S=f.get("component");S&&f.set("component",{...S,settings:a.toolSettings.component})}if(a.toolSettings.ground){const S=f.get("ground");S&&f.set("ground",{...S,settings:a.toolSettings.ground})}if(a.toolSettings.power){const S=f.get("power");S&&f.set("power",{...S,settings:a.toolSettings.power})}const h=x==="draw"&&be==="trace"?f.get("trace"):x==="draw"&&be==="via"?f.get("via"):x==="draw"&&be==="pad"?f.get("pad"):x==="component"?f.get("component"):x==="power"?f.get("power"):x==="ground"?f.get("ground"):null;return h&&(xe(h.settings.color),ke(h.settings.size)),f});const s=async m=>{if(!m)return null;let f=null;if(m.dataUrl){const h=await(await fetch(m.dataUrl)).blob();f=await createImageBitmap(h)}return{url:m.dataUrl??"",name:m.name??"image",width:m.width??(f?f.width:0),height:m.height??(f?f.height:0),dataUrl:m.dataUrl,x:m.x??0,y:m.y??0,scale:m.scale??1,rotation:m.rotation??0,flipX:!!m.flipX,flipY:!!m.flipY,skewX:m.skewX??0,skewY:m.skewY??0,keystoneV:m.keystoneV??0,keystoneH:m.keystoneH??0,bitmap:f}},r=await s(a.images?.top),d=await s(a.images?.bottom);if(ee(r),ae(d),a.pointIdCounter&&typeof a.pointIdCounter=="number"&&Jp(a.pointIdCounter),a.locks&&(typeof a.locks.areImagesLocked=="boolean"?To(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&To(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&Gi(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&Il(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&An(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&ci(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?qi(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&qi(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&ka(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&Ec(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&_o(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&Ei(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&Mc(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&Ds(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&Ki(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&Mi(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&js(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Ns(a.visibility.showGroundLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&Fl(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&Ha(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(ya(a.autoSave.baseName),$e.current=a.autoSave.baseName,a.autoSave.enabled&&!ha&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),Fl(!1),Ha(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),Fl(!1),Ha(null),ya(""),$e.current="")):(Fl(!1),Ha(null),Ms(null),ya(""),wt.current=null,$e.current="",Yt.current&&(clearInterval(Yt.current),Yt.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const m=a.drawing.drawingStrokes.map(f=>({...f,points:f.points.map(h=>({...h,...zn(h)}))})).filter(f=>!(f.type==="trace"&&f.points.length<2));Dt(m)}else{const m=[],f=(g,U)=>{const L=zn({x:g.x,y:g.y});m.push({id:g.id||`${Date.now()}-via-${Math.random()}`,points:[{id:g.pointId||fl(),x:L.x,y:L.y}],color:g.color,size:g.size,layer:U,type:"via"})},h=(g,U)=>{const L=zn({x:g.x1,y:g.y1}),re=zn({x:g.x2,y:g.y2});m.push({id:g.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:g.startPointId||fl(),x:L.x,y:L.y},{id:g.endPointId||fl(),x:re.x,y:re.y}],color:g.color,size:g.size,layer:U,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(g=>f(g,"top")):((a.drawing?.viasTop??[]).forEach(g=>f(g,"top")),(a.drawing?.viasBottom??[]).forEach(g=>f(g,"bottom"))),(a.drawing?.tracesTop??[]).forEach(g=>h(g,"top")),(a.drawing?.tracesBottom??[]).forEach(g=>h(g,"bottom"));const S=m.filter(g=>!(g.type==="trace"&&g.points.length<2));Dt(S)}if(a.drawing?.componentsTop){const m=a.drawing.componentsTop.map(f=>{const h=zn({x:f.x,y:f.y});return{...f,x:h.x,y:h.y,layer:f.layer||"top",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});kn(m)}if(a.drawing?.componentsBottom){const m=a.drawing.componentsBottom.map(f=>{const h=zn({x:f.x,y:f.y});return{...f,x:h.x,y:h.y,layer:f.layer||"bottom",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});sn(m)}if(a.drawing?.grounds){const f=a.drawing.grounds.map(h=>{const S=h.pointId||fl(),g=zn({x:h.x,y:h.y});return{...h,pointId:S,x:g.x,y:g.y}}).filter(h=>{const S=h.y>=0&&h.x>=0&&typeof h.x=="number"&&typeof h.y=="number"&&!isNaN(h.x)&&!isNaN(h.y)&&isFinite(h.x)&&isFinite(h.y);return S||console.warn(`Filtered out invalid ground symbol at (${h.x}, ${h.y}) - likely in border area or invalid coordinates`),S});_l(f)}let y=Xt;if(a.powerBuses&&Array.isArray(a.powerBuses)&&(y=a.powerBuses,Ga(y)),a.drawing?.powers){const f=a.drawing.powers.map(h=>{const S=h.pointId||fl(),g=zn({x:h.x,y:h.y});return h.powerBusId?{...h,pointId:S,x:g.x,y:g.y,layer:h.layer||"top"}:{...h,pointId:S,x:g.x,y:g.y,powerBusId:y.length>0?y[0].id:"default-5v",layer:h.layer||"top"}}).filter(h=>{const S=h.y>=0&&h.x>=0&&typeof h.x=="number"&&typeof h.y=="number"&&!isNaN(h.x)&&!isNaN(h.y)&&isFinite(h.x)&&isFinite(h.y);return S||console.warn(`Filtered out invalid power node at (${h.x}, ${h.y}) - likely in border area or invalid coordinates`),S});xl(f)}Nl.current=!1}catch(s){console.error("Failed to open project",s),alert("Failed to open project file. See console for details.")}},[x,be]),ao=C.useCallback(async()=>{},[Ya]),ls=C.useCallback(async a=>{const s=wt.current;if(!s){console.warn("Cannot load file: no directory handle");return}try{const d=await(await s.getFileHandle(a)).getFile();if(d.size===0){console.warn(`File ${a} is empty, skipping`);const g=Dn.current.filter(U=>U!==a);Si(g),Dn.current=g;return}const y=await d.text();if(!y||y.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const g=Dn.current.filter(U=>U!==a);Si(g),Dn.current=g;return}let m;try{m=JSON.parse(y)}catch(S){console.error(`Failed to parse JSON from file ${a}:`,S);const U=Dn.current.filter(L=>L!==a);Si(U),Dn.current=U,await ao();return}Xn(),Ml(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),nn(new Set),St(new Set),cn(new Set),un(new Set),Bn(),await lo(m),nl(a);const h=Dn.current.indexOf(a);h>=0?(Tc(h),Wn.current=h):await ao(),Nl.current=!1}catch(r){console.error("Failed to load file from history:",r);const d=Dn.current;if(d.includes(a)){const y=d.filter(m=>m!==a);Si(y),Dn.current=y,await ao()}}},[lo,ao,Bn]);C.useCallback(async()=>{const a=Wn.current,s=Dn.current;if(a>=0&&a<s.length-1){const r=a+1,d=s[r];d&&await ls(d)}},[ls]),C.useCallback(async()=>{const a=Wn.current,s=Dn.current;if(a<=0||a>=s.length||s.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",s.length);return}if(a>0&&a<s.length&&s.length>0){const r=a-1;if(r>=0&&r<s.length){const d=s[r];d?await ls(d):(console.warn("No newer file found at index",r),await ao())}else console.warn("Cannot navigate to newer file: prevIndex",r,"is out of bounds")}},[ls,ao]),ot.useEffect(()=>{ja.current=tn},[tn]);const Vs=ot.useRef(be),Gs=ot.useRef(st);ot.useEffect(()=>{const a=be!==Vs.current;if(x==="draw"&&Vs.current==="trace"&&a){if(ja.current.length>=2){const s={id:`${Date.now()}-trace-autofinalize`,points:ja.current,color:W,size:ie,layer:Gs.current,type:"trace"};Dt(r=>[...r,s]),Gs.current==="top"?ua(r=>[...r,s.id]):hl(r=>[...r,s.id])}Rn([]),go(!1)}Vs.current=be,Gs.current=st},[be,st,x,W,ie]);const ln=ot.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);ot.useEffect(()=>{Fa()},[Ue]),ot.useEffect(()=>{Fa()},[tt,nt,Mt,qa]),ot.useEffect(()=>{const a=Zi.current,s=pi.current;if(_a.current=!0,a){const r=Math.max(0,a.scrollWidth-a.clientWidth),d=Mo.current,y=Math.max(0,Math.min(r,-(Ke.x+d)));Math.abs(a.scrollLeft-y)>.5&&(a.scrollLeft=y)}if(s){const r=Math.max(0,s.scrollHeight-s.clientHeight),d=mi.current,y=Math.max(0,Math.min(r,-(Ke.y+d)));Math.abs(s.scrollTop-y)>.5&&(s.scrollTop=y)}requestAnimationFrame(()=>{_a.current=!1})},[Ke.x,Ke.y]);const te=wc>0;return u.jsxs("div",{className:"app",children:[u.jsx("header",{className:"app-header",children:u.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.0)"})}),u.jsxs("div",{ref:Ci,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{onClick:a=>{a.stopPropagation(),De(s=>s==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:$l==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),$l==="file"&&u.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[u.jsx("button",{onClick:()=>{te||(De(null),Ni()?Do({visible:!0}):eo())},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"New Project"}),u.jsx("button",{onClick:async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[s]=await a.showOpenFilePicker({multiple:!1}),r=await s.getFile();if(!r.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file."),De(null);return}nl(r.name);const d=await r.text(),y=JSON.parse(d);await lo(y);let m;y.projectInfo?.name?m=y.projectInfo.name:(m=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Ol(m),localStorage.setItem("pcb_project_name",m)),pn||(Ol(m),localStorage.setItem("pcb_project_name",m)),setTimeout(()=>{y.autoSave?.enabled===!0||Ua({visible:!0,source:"open"})},100),De(null);return}catch(s){if(s?.name==="AbortError"){De(null);return}console.warn("showOpenFilePicker failed, falling back to input",s)}Ii.current?.click(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{te||(hi.current?.click(),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Load Top PCB"}),u.jsx("button",{onClick:()=>{te||(kl.current?.click(),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Load Bottom PCB"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{te||(ts(),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Save Project"}),u.jsx("button",{onClick:()=>{te||(la(),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Save As"}),u.jsx("button",{onClick:()=>{te||(el({visible:!0,interval:5}),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Auto Save"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{te||(Wa("kicad"),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Export Netlist (KiCad)"}),u.jsx("button",{onClick:()=>{te||(Wa("protel"),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Export Netlist (Protel/nl2sch)"}),u.jsx("button",{onClick:()=>{te||(Ja(),De(null))},disabled:te,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:te?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:te?"not-allowed":"pointer"},children:"Export Simple Schematic"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{Pi(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),u.jsx("button",{onClick:()=>{Pi(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{onClick:a=>{te||(a.stopPropagation(),De(s=>s==="transform"?null:"transform"))},disabled:te,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:$l==="transform"?"#eef3ff":"#fff",fontWeight:600,color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:"Transform "}),$l==="transform"&&u.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[u.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),u.jsxs("button",{disabled:!E,onClick:()=>{bo("top"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:E?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ve==="top"?" ":"","Top Image"]}),u.jsxs("button",{disabled:!b,onClick:()=>{bo("bottom"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:b?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ve==="bottom"?" ":"","Bottom Image"]}),u.jsxs("button",{disabled:!E||!b,onClick:()=>{bo("both"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:E&&b?"#f2f2f2":"#777",background:"transparent",border:"none"},children:[Ve==="both"?" ":"","Both Images"]}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{if(Ve)if(Ve==="both"){const a=!E?.flipX;Cn("both",{flipX:a})}else{const a=Ve==="top"?E?.flipX||!1:b?.flipX||!1;Cn(Ve,{flipX:!a})}De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Horizontal Flip"}),u.jsx("button",{onClick:()=>{if(Ve)if(Ve==="both"){const a=!E?.flipY;Cn("both",{flipY:a})}else{const a=Ve==="top"?E?.flipY||!1:b?.flipY||!1;Cn(Ve,{flipY:!a})}De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Toggle Vertical Flip"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsxs("button",{onClick:()=>{xo("nudge"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[dl==="nudge"?" ":"","Mode: Nudge"]}),u.jsxs("button",{onClick:()=>{xo("scale"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[dl==="scale"?" ":"","Mode: Scale"]}),u.jsxs("button",{onClick:()=>{xo("rotate"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[dl==="rotate"?" ":"","Mode: Rotate"]}),u.jsxs("button",{onClick:()=>{xo("slant"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[dl==="slant"?" ":"","Mode: Slant"]}),u.jsxs("button",{onClick:()=>{xo("keystone"),Z("transform"),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:[dl==="keystone"?" ":"","Mode: Keystone"]}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{Z("transform"),vo||Gl?(So(!1),Xi(!1),Vi(!1)):So(!0),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:vo||Gl?"Color Mode":"Grayscale Mode"}),u.jsx("button",{onClick:()=>{Z("transform"),Gl?Vi(a=>!a):(Xi(!0),Vi(!1)),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:Gl?"Invert Edges":"Black & White Edges"}),u.jsx("button",{onClick:()=>{Z("transform"),Vo(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Reset Transform"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsxs("button",{onClick:()=>{To(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Images ",pl?"":""]})]})]}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{onClick:a=>{te||(a.stopPropagation(),De(s=>s==="tools"?null:"tools"))},disabled:te,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:$l==="tools"?"#eef3ff":"#fff",fontWeight:600,color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:"Tools "}),$l==="tools"&&u.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[u.jsx("button",{onClick:()=>{va(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),u.jsx("button",{onClick:()=>{Go(),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{let a=ie;if(Ie.size>0){const s=Ue.filter(r=>Ie.has(r.id));s.length>0&&(a=s[0].size)}else if(Le.size>0){const s=[...tt,...nt].find(r=>Le.has(r.id));s&&(a=s.size||18)}else if(ct.size>0){const s=Ct.find(r=>ct.has(r.id));s&&(a=s.size)}else if(at.size>0){const s=Mt.find(r=>at.has(r.id));s&&(a=s.size||18)}en({visible:!0,size:a}),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Set Size"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsxs("button",{onClick:()=>{Gi(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Vias ",Mn?"":""]}),u.jsxs("button",{onClick:()=>{Il(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Pads ",Aa?"":""]}),u.jsxs("button",{onClick:()=>{An(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Traces ",vt?"":""]}),u.jsxs("button",{onClick:()=>{ci(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Components ",Ge?"":""]}),u.jsxs("button",{onClick:()=>{qi(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Ground Node ",On?"":""]}),u.jsxs("button",{onClick:()=>{ka(a=>!a),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:["Lock Power Nodes ",$t?"":""]}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{Rs(!0),De(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),u.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),u.jsx("button",{onClick:()=>{const a=Ue.filter(s=>s.type==="via").map(s=>s.id);nn(new Set(a)),St(new Set),cn(new Set),un(new Set),Z("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all vias"}),u.jsx("button",{onClick:()=>{const a=Ue.filter(s=>s.type==="pad"&&s.layer==="top").map(s=>s.id);nn(new Set(a)),St(new Set),cn(new Set),un(new Set),Z("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Pads (Top)"}),u.jsx("button",{onClick:()=>{const a=Ue.filter(s=>s.type==="pad"&&s.layer==="bottom").map(s=>s.id);nn(new Set(a)),St(new Set),cn(new Set),un(new Set),Z("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Pads (Bottom)"}),u.jsx("button",{onClick:()=>{const a=Ue.filter(s=>s.type==="trace"&&s.layer==="top").map(s=>s.id);nn(new Set(a)),St(new Set),cn(new Set),un(new Set),Z("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Traces (top)"}),u.jsx("button",{onClick:()=>{const a=Ue.filter(s=>s.type==="trace"&&s.layer==="bottom").map(s=>s.id);nn(new Set(a)),St(new Set),cn(new Set),un(new Set),Z("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Traces (bottom)"}),u.jsx("button",{onClick:()=>{const a=tt.map(s=>s.id);St(new Set(a)),nn(new Set),cn(new Set),un(new Set),Z("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Components (top)"}),u.jsx("button",{onClick:()=>{const a=nt.map(s=>s.id);St(new Set(a)),nn(new Set),cn(new Set),un(new Set),Z("select"),setTimeout(()=>De(null),0)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Select all Components (bottom)"})]})]}),Ya&&u.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:u.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:Ya,children:Ya})})]}),u.jsxs("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:[u.jsxs("div",{ref:Na,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[u.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:44,display:"flex",flexDirection:"column",gap:8,padding:"6px 6px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[u.jsx("button",{onClick:()=>{te||Z("select")},onMouseDown:a=>a.currentTarget.blur(),disabled:te,title:"Select (S)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="select"?"2px solid #000":"1px solid #ddd",background:x==="select"?"#e6f0ff":"#fff",color:te?"#999":"#222",outline:"none",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx(Y0,{size:16})}),u.jsx("button",{onClick:()=>{te||(Zl("via"),Z("draw"))},disabled:te,title:"Draw Vias (V)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="draw"&&be==="via"?"2px solid #000":"1px solid #ddd",background:x==="draw"&&be==="via"?"#e6f0ff":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const s=Rt.get("via")?.settings.color||ue.viaColor||W;return u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:s,strokeWidth:"3"}),u.jsx("circle",{cx:"12",cy:"12",r:"4",fill:s})]})})()})}),u.jsx("button",{onClick:()=>{te||(Zl("pad"),Z("draw"),Bt(Sn||"top"),Ho(!0))},disabled:te,title:"Draw Pads (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="draw"&&be==="pad"?"2px solid #000":"1px solid #ddd",background:x==="draw"&&be==="pad"?"#e6f0ff":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:(()=>{const a=Rt.get("pad"),s=a?.settings.size||oe||26,r=a?.settings.color||Ze||W,d=Math.min(14,Math.max(4,s/26*14)),y=(24-d)/2,m=(24-d)/2;return u.jsx("rect",{x:y,y:m,width:d,height:d,fill:r})})()})}),u.jsx("button",{onClick:()=>{te||(Zl("trace"),Z("draw"),Bt(It||"top"),ga(!0))},disabled:te,title:"Draw Traces (T)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="draw"&&be==="trace"?"2px solid #000":"1px solid #ddd",background:x==="draw"&&be==="trace"?"#e6f0ff":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx(V0,{size:16,color:Rt.get("trace")?.settings.color||(It==="top"?Pe:Ee)||ah})}),u.jsx("button",{onClick:()=>{te||(Z("component"),Yo(!0),Pl(!1),_s(null))},disabled:te,title:"Draw Component (C)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="component"?"2px solid #000":"1px solid #ddd",background:x==="component"?"#e6f0ff":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:(()=>{const a=Sl||"top",s=Rt.get("component"),r=(a==="top"?w:de)||s?.settings.color||oh;return vl?u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[u.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:r,strokeWidth:"1.5"}),u.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:r,fontWeight:"bold",fontFamily:"monospace",children:xs(vl)})]}):u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[u.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:r,stroke:r,strokeWidth:"0.5"}),u.jsxs("g",{stroke:r,fill:"none",strokeWidth:"1.5",children:[u.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),u.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:r})]})]})})()}),u.jsx("button",{onClick:()=>{te||Z("power")},disabled:te,title:"Draw Power (P)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="power"?"2px solid #000":"1px solid #ddd",background:x==="power"?"#e6f0ff":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx("span",{style:{color:Rt.get("power")?.settings.color||Su,fontSize:"18px",fontWeight:"bold",lineHeight:1},children:"V"})}),u.jsx("button",{onClick:()=>{te||Z("ground")},disabled:te,title:"Draw Ground (G)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="ground"?"2px solid #000":"1px solid #ddd",background:x==="ground"?"#e6f0ff":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible"},children:u.jsxs("g",{stroke:Rt.get("ground")?.settings.color||"#000000",strokeWidth:"2",strokeLinecap:"round",children:[u.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),u.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),u.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),u.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})})}),u.jsx("button",{onClick:()=>{te||Z("erase")},disabled:te,title:"Erase (E)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="erase"?"2px solid #000":"1px solid #ddd",background:x==="erase"?"#ffecec":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsxs("g",{transform:"rotate(-35 12 12)",children:[u.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),u.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})})}),u.jsx("button",{onClick:()=>{te||Z(a=>a==="pan"?"draw":"pan")},disabled:te,title:"Move (H)",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="pan"?"2px solid #000":"1px solid #ddd",background:x==="pan"?"#e6f0ff":"#fff",color:te?"#999":"#222",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:u.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),u.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),u.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})})}),u.jsx("button",{onClick:()=>{Ao(!1),Z(a=>a==="magnify"?"draw":"magnify")},title:`${Pn?"Zoom Out":"Zoom In"} (Z)`,style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:x==="magnify"?"2px solid #000":"1px solid #ddd",background:x==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",children:[u.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),u.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),Pn?u.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),u.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]})}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{onClick:()=>{te||ia(a=>!a)},disabled:te,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:te?"not-allowed":"pointer",opacity:te?.5:1},children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true",children:[u.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),u.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Kt&&u.jsx("div",{ref:ks,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:ln.map(a=>u.jsx("div",{onClick:()=>{xe(a),ia(!1),Ma(Rt),ne("brush",a),x==="draw"&&be==="trace"?st==="top"?(pe(a),ne("trace",a,"top")):(jt(a),ne("trace",a,"bottom")):x==="draw"&&be==="via"?ne("via",a):x==="draw"&&be==="pad"?ne("pad",a):x==="component"&&ne("component",a),Ie.size>0&&Dt(s=>s.map(r=>Ie.has(r.id)?(r.type==="via"?(ne("via",a),En(d=>{const y=new Map(d),m=y.get("via");return m&&y.set("via",{...m,settings:{...m.settings,color:a}}),y})):r.type==="pad"?(ne("pad",a),En(d=>{const y=new Map(d),m=y.get("pad");return m&&y.set("pad",{...m,settings:{...m.settings,color:a}}),y})):r.type==="trace"&&ne("trace",a,r.layer),{...r,color:a}):r)),Le.size>0&&(ne("component",a),kn(s=>s.map(r=>Le.has(r.id)?{...r,color:a}:r)),sn(s=>s.map(r=>Le.has(r.id)?{...r,color:a}:r))),ct.size>0&&xl(s=>s.map(r=>ct.has(r.id)?{...r,color:a}:r)),at.size>0&&_l(s=>s.map(r=>at.has(r.id)?{...r,color:a}:r))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===W?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),x==="draw"&&be==="trace"&&Za&&u.jsxs("div",{ref:Os,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[u.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[u.jsx("input",{type:"radio",name:"traceToolLayer",checked:It==="top",onChange:()=>{Lo("top"),Bt("top"),xe(Pe),ke(fe),En(a=>{const s=new Map(a),r=s.get("trace");return r&&s.set("trace",{...r,settings:{color:Pe,size:fe}}),s}),ga(!1),Ro(!0)}}),u.jsx("span",{children:"Top"})]}),u.jsxs("label",{className:"radio-label",children:[u.jsx("input",{type:"radio",name:"traceToolLayer",checked:It==="bottom",onChange:()=>{Lo("bottom"),Bt("bottom"),xe(Ee),ke(Oe),En(a=>{const s=new Map(a),r=s.get("trace");return r&&s.set("trace",{...r,settings:{color:Ee,size:Oe}}),s}),ga(!1),No(!0)}}),u.jsx("span",{children:"Bottom"})]})]}),x==="draw"&&be==="pad"&&$i&&u.jsxs("div",{ref:Qa,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[u.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[u.jsx("input",{type:"radio",name:"padToolLayer",checked:Sn==="top",onChange:()=>{Ia("top"),Bt("top"),xe(Ze),ke(oe),En(a=>{const s=new Map(a),r=s.get("pad");return r&&s.set("pad",{...r,settings:{color:Ze,size:oe}}),s}),Ho(!1),Ro(!0)}}),u.jsx("span",{children:"Top"})]}),u.jsxs("label",{className:"radio-label",children:[u.jsx("input",{type:"radio",name:"padToolLayer",checked:Sn==="bottom",onChange:()=>{Ia("bottom"),Bt("bottom"),xe(Gt),ke(mt),En(a=>{const s=new Map(a),r=s.get("pad");return r&&s.set("pad",{...r,settings:{color:Gt,size:mt}}),s}),Ho(!1),No(!0)}}),u.jsx("span",{children:"Bottom"})]})]}),In&&x==="power"&&u.jsxs("div",{style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,minWidth:"200px"},children:[u.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),Xt.length===0?u.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...Xt].sort((a,s)=>{const r=m=>{const f=m.match(/([+-]?)(\d+\.?\d*)/);if(f){const h=f[1]||"+",S=parseFloat(f[2]);return{absValue:Math.abs(S),isNegative:h==="-",original:m}}return{absValue:1/0,isNegative:!1,original:m}},d=r(a.voltage),y=r(s.voltage);return d.absValue!==y.absValue?d.absValue-y.absValue:d.isNegative!==y.isNegative?d.isNegative?-1:1:0}).map(a=>u.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),ki(a.id),Jl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",marginBottom:"4px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),u.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),u.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Jl(!1),ki(null),Z("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),x==="component"&&Fi&&u.jsxs("div",{ref:ji,style:{position:"absolute",top:92,left:56,padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[u.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[u.jsx("input",{type:"radio",name:"componentToolLayer",checked:st==="top",onClick:()=>{ll("top"),Bt("top"),xe(w),ke(Ye),En(a=>{const s=new Map(a),r=s.get("component");return r&&s.set("component",{...r,settings:{color:w,size:Ye}}),s}),Yo(!1),Ro(!0),Pl(!0)}}),u.jsx("span",{children:"Top"})]}),u.jsxs("label",{className:"radio-label",children:[u.jsx("input",{type:"radio",name:"componentToolLayer",checked:st==="bottom",onClick:()=>{ll("bottom"),Bt("bottom"),xe(de),ke(rt),En(a=>{const s=new Map(a),r=s.get("component");return r&&s.set("component",{...r,settings:{color:de,size:rt}}),s}),Yo(!1),No(!0),Pl(!0)}}),u.jsx("span",{children:"Bottom"})]})]}),x==="component"&&Di&&u.jsxs("div",{ref:Bs,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"400px",overflowY:"auto",minWidth:"200px"},children:[u.jsx("div",{style:{marginBottom:"6px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Component Type:"}),Object.entries(Pr).map(([a,s])=>u.jsxs("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),_s(a),Pl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px",marginBottom:"2px",background:vl===a?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",color:"#333"},children:[s.prefix.join(", ")," - ",a," (",s.defaultPins," pins)"]},a)),u.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Pl(!1),Z("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),u.jsxs("div",{style:{position:"absolute",top:6,left:56,bottom:6,width:168,padding:8,display:"flex",flexDirection:"column",gap:4,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[u.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),u.jsxs("div",{onClick:()=>Bt("top"),title:"Top layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:Ve==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[u.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Top Image"}),u.jsx("label",{className:"radio-label",style:{margin:0},children:u.jsx("input",{type:"checkbox",checked:wi,onChange:a=>Ro(a.target.checked)})})]}),u.jsx("canvas",{ref:jo,width:100,height:64})]}),u.jsxs("div",{onClick:()=>Bt("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:4,borderRadius:6,border:Ve==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4},children:[u.jsx("div",{style:{fontSize:12,color:"#444",fontWeight:600},children:"Bottom Image"}),u.jsx("label",{className:"radio-label",style:{margin:0},children:u.jsx("input",{type:"checkbox",checked:Ti,onChange:a=>No(a.target.checked)})})]}),u.jsx("canvas",{ref:zc,width:100,height:64})]}),u.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"4px 0"}}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:bl,onChange:a=>Ec(a.target.checked)}),u.jsx("span",{children:"Vias"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:Wl,onChange:a=>_o(a.target.checked)}),u.jsx("span",{children:"Pads (Top)"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:zi,onChange:a=>Ei(a.target.checked)}),u.jsx("span",{children:"Pads (Bottom)"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:Oo,onChange:a=>Mc(a.target.checked)}),u.jsx("span",{children:"Traces (Top)"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:Xa,onChange:a=>Ds(a.target.checked)}),u.jsx("span",{children:"Traces (Bottom)"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:Bo,onChange:a=>Ki(a.target.checked)}),u.jsx("span",{children:"Components (Top)"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:Va,onChange:a=>Mi(a.target.checked)}),u.jsx("span",{children:"Components (Bottom)"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:Uo,onChange:a=>js(a.target.checked)}),u.jsx("span",{children:"Power"})]}),u.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[u.jsx("input",{type:"checkbox",checked:qa,onChange:a=>Ns(a.target.checked)}),u.jsx("span",{children:"Ground"})]}),u.jsxs("div",{style:{marginTop:16},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsxs("label",{style:{fontSize:12,color:"#333"},children:["Transparency: ",je,"%"]}),u.jsxs("label",{className:"radio-label",style:{margin:0},children:[u.jsx("input",{type:"checkbox",checked:O,onChange:a=>{const s=a.target.checked;s?(Ro(!0),No(!0)):(se(50),Z("select")),Te(s)}}),u.jsx("span",{style:{marginLeft:6,fontSize:12},children:"Cycle"})]})]}),u.jsx("input",{type:"range",min:"0",max:"100",value:je,onChange:a=>se(Number(a.target.value)),onDoubleClick:()=>Dc("transparency"),className:"slider",style:{width:"100%",marginTop:6}})]})]}),u.jsx("canvas",{ref:Hn,width:gl.width,height:gl.height,onMouseDown:Ls,onMouseMove:Hs,onMouseUp:Ys,onMouseLeave:Ys,onWheel:ea,onDoubleClick:Ac,className:`pcb-canvas ${x==="transform"?"transform-cursor":x==="draw"?"draw-cursor":x==="erase"?"erase-cursor":"default-cursor"}`,style:{...wo?{cursor:wo}:x==="pan"?{cursor:jl?"grabbing":"grab"}:{},width:`${gl.width}px`,height:`${gl.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),Ce&&Ce.visible&&(()=>{let a=tt.find(r=>r.id===Ce.id),s="top";return a||(a=nt.find(r=>r.id===Ce.id),s="bottom"),a?(Ce.layer!==s&&_n({...Ce,layer:s}),u.jsxs("div",{"data-component-editor-dialog":!0,onClick:r=>{if(ft&&ft.componentId===a.id){const d=r.target;(d.tagName==="BUTTON"||d.tagName==="INPUT"||d.closest("button")||d.closest("input"))&&r.stopPropagation()}},style:{position:"fixed",top:ml?`${ml.y}px`:"50%",left:ml?`${ml.x}px`:"50%",transform:"translate(-50%, -50%)",background:ft&&ft.componentId===a.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:Ql?"grabbing":"default"},children:[u.jsxs("div",{onMouseDown:r=>{const d=r.target;d.tagName==="BUTTON"||d.tagName==="INPUT"||d.closest("button")||d.closest("input")||ml&&(Ra({x:r.clientX-ml.x,y:r.clientY-ml.y}),zs(!0),r.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:Ql?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[u.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),u.jsx("button",{onClick:()=>{_n(null),Al(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px",overflowY:"auto",flex:1,minHeight:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),u.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:a.componentType})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-layer-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),u.jsxs("select",{id:`component-layer-${a.id}`,name:`component-layer-${a.id}`,value:Ce.layer,onChange:r=>_n({...Ce,layer:r.target.value}),disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Ge?.6:1},children:[u.jsx("option",{value:"top",children:"Top"}),u.jsx("option",{value:"bottom",children:"Bottom"})]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-designator-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Name:"}),u.jsx("input",{id:`component-designator-${a.id}`,name:`component-designator-${a.id}`,type:"text",value:Ce.designator,onChange:r=>_n({...Ce,designator:r.target.value}),disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Ge?.6:1},placeholder:"e.g., Op Amp OP07"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-abbreviation-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),u.jsx("input",{id:`component-abbreviation-${a.id}`,name:`component-abbreviation-${a.id}`,type:"text",maxLength:4,value:Ce.abbreviation.replace(/\*/g,""),onChange:r=>{const d=r.target.value.substring(0,4).toUpperCase();_n({...Ce,abbreviation:d})},onBlur:r=>{const d=r.target.value.substring(0,4).toUpperCase();_n({...Ce,abbreviation:d})},disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:Ge?.6:1},placeholder:"e.g., U2, R7, C1"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-x-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),u.jsx("input",{id:`component-x-${a.id}`,name:`component-x-${a.id}`,type:"number",value:Ce.x.toFixed(2),onChange:r=>{const d=parseFloat(r.target.value)||0;_n({...Ce,x:d})},disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Ge?.6:1}})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-y-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),u.jsx("input",{id:`component-y-${a.id}`,name:`component-y-${a.id}`,type:"number",value:Ce.y.toFixed(2),onChange:r=>{const d=parseFloat(r.target.value)||0;_n({...Ce,y:d})},disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Ge?.6:1}})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-manufacturer-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),u.jsx("input",{id:`component-manufacturer-${a.id}`,name:`component-manufacturer-${a.id}`,type:"text",value:Ce.manufacturer,onChange:r=>_n({...Ce,manufacturer:r.target.value}),disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Ge?.6:1}})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-partnumber-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),u.jsx("input",{id:`component-partnumber-${a.id}`,name:`component-partnumber-${a.id}`,type:"text",value:Ce.partNumber,onChange:r=>_n({...Ce,partNumber:r.target.value}),disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Ge?.6:1}})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("label",{htmlFor:`component-pincount-${a.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),u.jsx("input",{id:`component-pincount-${a.id}`,name:`component-pincount-${a.id}`,type:"number",min:"1",value:Ce.pinCount,onChange:r=>{const d=Math.max(1,parseInt(r.target.value)||1);_n({...Ce,pinCount:d})},onBlur:r=>{if(Ge)return;const d=Math.max(1,parseInt(r.target.value)||1),m=(Ce.layer==="top"?tt:nt).find(f=>f.id===Ce.id);if(m&&d!==m.pinCount){const f=m.pinConnections||[],h=new Array(d).fill("").map((g,U)=>U<f.length?f[U]:""),S={...m,pinCount:d,pinConnections:h};Ce.layer==="top"?kn(g=>g.map(U=>U.id===Ce.id?S:U)):sn(g=>g.map(U=>U.id===Ce.id?S:U)),_n({...Ce,pinCount:d})}},disabled:Ge,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:Ge?.6:1}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),ft&&ft.componentId===a.id&&u.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"9px",color:"#856404"},children:["Pin ",ft.pinIndex+1," selected. Click on a via or pad to connect."]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2px",maxHeight:"75px",overflowY:"auto",padding:"1px"},children:Array.from({length:Ce.pinCount},(r,d)=>{const m=(Ce.layer==="top"?tt:nt).find(S=>S.id===Ce.id),f=m?.pinConnections&&m.pinConnections.length>d?m.pinConnections[d]:"",h=ft&&ft.componentId===a.id&&ft.pinIndex===d;return ft&&ft.componentId===a.id&&console.log(`Component Editor Pin ${d+1}: pinConnection="${f}", comp.pinConnections=`,m?.pinConnections),u.jsxs("label",{htmlFor:`pin-radio-${a.id}-${d}`,style:{display:"flex",alignItems:"center",gap:"4px",padding:"2px 4px",cursor:"pointer",fontSize:"9px",border:h?"1px solid #0b5fff":f?"1px solid #28a745":"1px solid #ddd",borderRadius:2,background:h?"#e6f0ff":f?"#d4edda":"#fff"},title:f?`Connected to: ${f}`:"Select this pin, then click on a via or pad to connect",children:[u.jsx("input",{id:`pin-radio-${a.id}-${d}`,name:`pin-radio-${a.id}`,type:"radio",checked:!!h,onChange:()=>{Ge||Al(h?null:{componentId:a.id,pinIndex:d})},disabled:Ge,style:{margin:0,cursor:Ge?"not-allowed":"pointer",opacity:Ge?.6:1}}),u.jsxs("span",{style:{color:"#333",fontWeight:h?600:400},children:["Pin ",d+1]}),f&&u.jsx("span",{style:{fontSize:"8px",color:"#28a745",fontWeight:600,marginLeft:"auto"},children:f})]},d)})})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[u.jsx("button",{onClick:()=>{_n(null),Al(null)},style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),u.jsx("button",{onClick:()=>{if(Ge)return;const r=f=>{const h={...f};if(h.designator=Ce.designator,h.x=Ce.x,h.y=Ce.y,h.layer=Ce.layer,h.abbreviation=Ce.abbreviation.trim()||xs(f.componentType),"manufacturer"in h&&(h.manufacturer=Ce.manufacturer),"partNumber"in h&&(h.partNumber=Ce.partNumber),Ce.pinCount!==f.pinCount){h.pinCount=Ce.pinCount;const S=f.pinConnections||[];h.pinConnections=new Array(Ce.pinCount).fill("").map((g,U)=>U<S.length?S[U]:"")}else h.pinConnections=f.pinConnections||[];return h},d=tt.find(f=>f.id===Ce.id),y=nt.find(f=>f.id===Ce.id),m=d||y;if(m){const f=r(m),h=m.layer,S=Ce.layer;h!==S?h==="top"?(kn(g=>g.filter(U=>U.id!==Ce.id)),sn(g=>[...g,f])):(sn(g=>g.filter(U=>U.id!==Ce.id)),kn(g=>[...g,f])):S==="top"?kn(g=>g.map(U=>U.id===Ce.id?f:U)):sn(g=>g.map(U=>U.id===Ce.id?f:U))}else if(console.warn(`Component ${Ce.id} not found in either layer array`),Ce.layer==="top"){const f=nt.find(h=>h.id===Ce.id);if(f){const h=r(f);sn(S=>S.filter(g=>g.id!==Ce.id)),kn(S=>[...S,h])}}else{const f=tt.find(h=>h.id===Ce.id);if(f){const h=r(f);kn(S=>S.filter(g=>g.id!==Ce.id)),sn(S=>[...S,h])}}_n(null),Al(null)},disabled:Ge,style:{padding:"2px 5px",background:Ge?"#f5f5f5":"#0b5fff",color:Ge?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:Ge?"not-allowed":"pointer",fontSize:"10px",opacity:Ge?.6:1},children:"Save"})]})]})):null})(),Zn&&Zn.visible&&(()=>{if(!Ct.find(r=>r.id===Zn.id))return null;const s=Xt.find(r=>r.id===Zn.powerBusId);return u.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[u.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),u.jsx("button",{onClick:()=>Eo(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),u.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:s?`${s.name} (${s.voltage})`:"Unknown"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:`power-layer-${Zn.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),u.jsxs("select",{id:`power-layer-${Zn.id}`,name:`power-layer-${Zn.id}`,value:Zn.layer,onChange:r=>Eo({...Zn,layer:r.target.value}),disabled:$t,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:$t?.6:1},children:[u.jsx("option",{value:"top",children:"Top"}),u.jsx("option",{value:"bottom",children:"Bottom"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),u.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Zn.x.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),u.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:Zn.y.toFixed(2)})]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[u.jsx("button",{onClick:()=>Eo(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),u.jsx("button",{onClick:()=>{$t||(xl(r=>r.map(d=>d.id===Zn.id?{...d,layer:Zn.layer}:d)),Eo(null))},disabled:$t,style:{padding:"2px 5px",background:$t?"#f5f5f5":"#0b5fff",color:$t?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:$t?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!E&&!b&&u.jsx("div",{className:"placeholder",children:u.jsx("p",{children:"Use the File menu to load your PCB images or to open an existing project file."})}),u.jsx("div",{ref:Zi,className:"scrollbar-horizontal",onScroll:a=>{if(_a.current)return;const s=a.currentTarget,r=Mo.current;qn(d=>({x:-s.scrollLeft-r,y:d.y}))},"aria-label":"Horizontal pan",children:u.jsx("div",{className:"scrollbar-horizontal-content",ref:xc})}),u.jsx("div",{ref:pi,className:"scrollbar-vertical",onScroll:a=>{if(_a.current)return;const s=a.currentTarget,r=mi.current;qn(d=>({x:d.x,y:-s.scrollTop-r}))},"aria-label":"Vertical pan",children:u.jsx("div",{className:"scrollbar-vertical-content",ref:vc})})]}),Tu&&u.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"2px solid #333",borderRadius:8,padding:"20px",zIndex:1e3,minWidth:"500px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[u.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),u.jsx("button",{onClick:()=>Rs(!1),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",color:"#666"},children:""})]}),u.jsx("div",{style:{marginBottom:"16px"},children:[...Xt].sort((a,s)=>{const r=m=>{const f=m.match(/([+-]?)(\d+\.?\d*)/);if(f){const h=f[1]||"+",S=parseFloat(f[2]);return{absValue:Math.abs(S),isNegative:h==="-",original:m}}return{absValue:1/0,isNegative:!1,original:m}},d=r(a.voltage),y=r(s.voltage);return d.absValue!==y.absValue?d.absValue-y.absValue:d.isNegative!==y.isNegative?d.isNegative?-1:1:0}).map(a=>{const s=Xt.findIndex(r=>r.id===a.id);return u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",marginBottom:"8px",background:"#f5f5f5",borderRadius:6,border:"1px solid #ddd"},children:[u.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:a.color,border:"2px solid #333"}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("input",{type:"text",value:a.name,onChange:r=>{const d=[...Xt];d[s]={...a,name:r.target.value},Ga(d)},placeholder:"Name",style:{width:"100%",padding:"4px 8px",marginBottom:"4px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}}),u.jsx("input",{type:"text",value:a.voltage,onChange:r=>{const d=[...Xt];d[s]={...a,voltage:r.target.value},Ga(d)},placeholder:"Voltage (e.g., +5VDC, +3.3VDC, -5VDC)",style:{width:"100%",padding:"4px 8px",border:"1px solid #ccc",borderRadius:4,fontSize:"13px"}})]}),u.jsx("input",{type:"color",value:a.color,onChange:r=>{const d=[...Xt];d[s]={...a,color:r.target.value},Ga(d)},style:{width:"40px",height:"40px",border:"1px solid #ccc",borderRadius:4,cursor:"pointer"}}),u.jsx("button",{onClick:()=>{const r=Ct.filter(d=>d.powerBusId===a.id);if(r.length>0){alert(`Cannot delete: ${r.length} power node(s) are using this bus. Remove or reassign them first.`);return}Ga(d=>d.filter(y=>y.id!==a.id))},style:{padding:"6px 12px",background:"#ff4444",color:"#fff",border:"none",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Delete"})]},a.id)})}),u.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0VDC",color:"#ff0000"};Ga(s=>[...s,a])},style:{width:"100%",padding:"10px",background:"#4CAF50",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600,marginBottom:"12px"},children:"+ Add Power Bus"}),u.jsx("button",{onClick:()=>Rs(!1),style:{width:"100%",padding:"10px",background:"#666",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Close"})]}),u.jsx("input",{ref:hi,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const s=a.target.files?.[0];s&&Yn(s,"top"),a.target.value=""}}),u.jsx("input",{ref:kl,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const s=a.target.files?.[0];s&&Yn(s,"bottom"),a.target.value=""}}),u.jsx("input",{ref:Ii,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const s=a.target.files?.[0];if(s)try{nl(s.name);const r=await s.text(),d=JSON.parse(r);await lo(d);let y;d.projectInfo?.name?y=d.projectInfo.name:(y=s.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",Ol(y),localStorage.setItem("pcb_project_name",y)),pn||(Ol(y),localStorage.setItem("pcb_project_name",y)),setTimeout(()=>{d.autoSave?.enabled===!0||Ua({visible:!0,source:"open"})},100)}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}a.target.value=""}}),yi.visible&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"20px",zIndex:1e4,pointerEvents:"none"},children:u.jsxs("div",{style:{backgroundColor:"#fff",borderRadius:8,padding:"20px",minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",position:"relative",pointerEvents:"auto",border:"1px solid #ddd"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[u.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:600,color:"#222"},children:"Detailed Information"}),u.jsx("button",{onClick:()=>La({visible:!1,text:""}),style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"#666",padding:0,width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),u.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const a=Ue.filter(m=>Ie.has(m.id)).length,s=[...tt,...nt].filter(m=>Le.has(m.id)).length,r=Ct.filter(m=>ct.has(m.id)).length,d=Mt.filter(m=>at.has(m.id)).length,y=a+s+r+d;return y>0?u.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"#e8e8e8",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:"#333",marginBottom:"8px"},children:[y," Object",y!==1?"s":""," Selected"]}):null})(),Ie.size>0&&Ue.filter(a=>Ie.has(a.id)).map(a=>{if(a.type==="via"&&a.points.length>0){const s=a.points[0];return u.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[u.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),u.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"unknown"})]}),u.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]}),u.jsxs("div",{children:["Node ID: ",s.id]}),u.jsxs("div",{children:["Layer: ",a.layer]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{children:"Color:"}),u.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),u.jsx("span",{children:a.color})]}),u.jsxs("div",{children:["Size: ",a.size]})]})]},a.id)}else if(a.type==="pad"&&a.points.length>0){const s=a.points[0];return u.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[u.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),u.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"unknown"})]}),u.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.jsxs("div",{children:["Position: x=",s.x.toFixed(2),", y=",s.y.toFixed(2)]}),u.jsxs("div",{children:["Node ID: ",s.id]}),u.jsxs("div",{children:["Layer: ",a.layer]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{children:"Color:"}),u.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),u.jsx("span",{children:a.color})]}),u.jsxs("div",{children:["Size: ",a.size]})]})]},a.id)}else if(a.type==="trace")return u.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[u.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),u.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"unknown"})]}),u.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.jsxs("div",{children:["Points: ",a.points.length]}),a.points.length>0&&u.jsx("div",{style:{marginTop:"4px"},children:a.points.map((s,r)=>u.jsxs("div",{style:{marginLeft:"12px"},children:["Point ",r,": x=",s.x.toFixed(2),", y=",s.y.toFixed(2)," ",r===0&&`(Node ID: ${s.id})`]},r))}),u.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",a.layer]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{children:"Color:"}),u.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),u.jsx("span",{children:a.color})]}),u.jsxs("div",{children:["Size: ",a.size]})]})]},a.id);return null}),Le.size>0&&[...tt,...nt].filter(a=>Le.has(a.id)).map(a=>u.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[u.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),u.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.componentType})]}),u.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.jsxs("div",{children:["Position: x=",a.x.toFixed(2),", y=",a.y.toFixed(2)]}),u.jsxs("div",{children:["Layer: ",a.layer]}),u.jsxs("div",{children:["Designator: ",a.designator||"(empty)"]}),u.jsxs("div",{children:["Abbreviation: ",a.abbreviation||"(empty)"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{children:"Color:"}),u.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),u.jsx("span",{children:a.color})]}),u.jsxs("div",{children:["Size: ",a.size]}),u.jsxs("div",{children:["Pin Count: ",a.pinCount]}),a.pinConnections&&a.pinConnections.length>0&&u.jsxs("div",{style:{marginTop:"4px"},children:[u.jsx("div",{children:"Pin Connections:"}),a.pinConnections.map((s,r)=>u.jsxs("div",{style:{marginLeft:"12px"},children:["Pin ",r+1,": ",s?`Node ${s}`:"(not connected)"]},r))]}),"manufacturer"in a&&a.manufacturer&&u.jsxs("div",{children:["Manufacturer: ",a.manufacturer]}),"partNumber"in a&&a.partNumber&&u.jsxs("div",{children:["Part Number: ",a.partNumber]})]})]},a.id)),ct.size>0&&Ct.filter(a=>ct.has(a.id)).map(a=>{const s=Xt.find(r=>r.id===a.powerBusId);return u.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[u.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),u.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||(s?`${s.name} Power Node`:"Power Node")})]}),u.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.jsxs("div",{children:["Position: x=",a.x.toFixed(2),", y=",a.y.toFixed(2)]}),u.jsxs("div",{children:["Node ID: ",a.pointId||"(not assigned)"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{children:"Color:"}),u.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),u.jsx("span",{children:a.color})]}),u.jsxs("div",{children:["Size: ",a.size]}),u.jsxs("div",{children:["Layer: ",a.layer]}),u.jsxs("div",{children:["Power Bus: ",s?.name||a.powerBusId||"(unknown)"]})]})]},a.id)}),at.size>0&&Mt.filter(a=>at.has(a.id)).map(a=>u.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[u.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),u.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:a.type||"Ground Node"})]}),u.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[u.jsxs("div",{children:["Position: x=",a.x.toFixed(2),", y=",a.y.toFixed(2)]}),u.jsxs("div",{children:["Node ID: ",a.pointId||"(not assigned)"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{children:"Color:"}),u.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:a.color,border:"1px solid #ccc",borderRadius:2}}),u.jsx("span",{children:a.color})]}),u.jsxs("div",{children:["Size: ",a.size]})]})]},a.id))]})]})}),ko.visible&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&mn()},children:u.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[u.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),u.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:mn,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),u.jsx("button",{onClick:no,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),u.jsx("button",{ref:Cc,onClick:Io,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),qt.visible&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Ll()},children:u.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[u.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),u.jsx("input",{ref:Es,type:"text",value:qt.projectName,onChange:a=>{gi(s=>({...s,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),Ul()):a.key==="Escape"&&(a.preventDefault(),Ll())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),qt.projectName&&(()=>{const a=qt.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const s=[...new Set(a)];return u.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",s.map(r=>`"${r}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[u.jsx("input",{type:"text",value:qt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:qt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),u.jsx("button",{onClick:to,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),qt.projectName&&qt.locationPath&&u.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[u.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),u.jsxs("div",{style:{color:"#4CAF50"},children:[qt.locationPath,"/",qt.projectName,"/project.json"]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:Ll,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),u.jsx("button",{onClick:Ul,disabled:!qt.projectName.trim()||!qt.locationHandle,style:{padding:"8px 16px",background:!qt.projectName.trim()||!qt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!qt.projectName.trim()||!qt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!qt.projectName.trim()||!qt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!qt.projectName.trim()||!qt.locationHandle?.6:1},children:"Create"})]})]})}),Zt.visible&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&Ca()},children:u.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[u.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),u.jsx("input",{ref:Qi,type:"text",value:Zt.filename,onChange:a=>{bi(s=>({...s,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),ns()):a.key==="Escape"&&(a.preventDefault(),Ca())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[u.jsx("input",{type:"text",value:Zt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Zt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),u.jsx("button",{onClick:Xs,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Zt.filename&&Zt.locationPath&&u.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[u.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),u.jsxs("div",{style:{color:"#4CAF50"},children:[Zt.locationPath,"/",Zt.filename.endsWith(".json")?Zt.filename:`${Zt.filename}.json`]})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:Ca,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),u.jsx("button",{onClick:ns,disabled:!Zt.filename.trim()||!Zt.locationHandle,style:{padding:"8px 16px",background:!Zt.filename.trim()||!Zt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Zt.filename.trim()||!Zt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Zt.filename.trim()||!Zt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Zt.filename.trim()||!Zt.locationHandle?.6:1},children:"Save"})]})]})}),fa.visible&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&en({visible:!1,size:6})},children:u.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[u.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),u.jsx("input",{ref:Rl,type:"number",min:"1",max:"99",value:fa.size,onChange:a=>{const s=parseInt(a.target.value)||1,r=Math.max(1,Math.min(99,s));en(d=>({...d,size:r}))},onKeyDown:a=>{if(a.key==="Enter"?qo():a.key==="Escape"&&en({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const s=fa.size.toString();s.length>=2&&Rl.current?.selectionStart===Rl.current?.selectionEnd&&Rl.current?.selectionStart===s.length&&a.preventDefault()}},onInput:a=>{const s=a.target,r=s.value;if(r.length>2){s.value=r.slice(0,2);const d=parseInt(s.value)||1;en(y=>({...y,size:Math.max(1,Math.min(99,d))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),u.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(fa.size)?fa.size:"",onChange:a=>{const s=parseInt(a.target.value);!isNaN(s)&&s>0&&en(r=>({...r,size:s}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[u.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>u.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:()=>en({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),u.jsx("button",{onClick:qo,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),da.visible&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&el({visible:!1,interval:5})},children:u.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[u.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),u.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),u.jsxs("select",{value:da.interval===null?"disable":(da.interval||5).toString(),onChange:a=>{const s=a.target.value;if(s==="disable")el({visible:!0,interval:null});else{const r=parseFloat(s);!isNaN(r)&&r>0&&el({visible:!0,interval:r})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[u.jsx("option",{value:"0.5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 seconds"}),u.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),u.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),u.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),u.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),u.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:()=>el({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),u.jsx("button",{onClick:Sa,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Cu.visible&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&$n()},children:u.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[u.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),u.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:$n,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),u.jsx("button",{onClick:al,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Enable Auto Save"})]})]})})]})]})}j0.createRoot(document.getElementById("root")).render(u.jsx(C.StrictMode,{children:u.jsx(J0,{})}));
