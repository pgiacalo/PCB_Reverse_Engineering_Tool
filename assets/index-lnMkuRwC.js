(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const U of document.querySelectorAll('link[rel="modulepreload"]'))u(U);new MutationObserver(U=>{for(const X of U)if(X.type==="childList")for(const Ce of X.addedNodes)Ce.tagName==="LINK"&&Ce.rel==="modulepreload"&&u(Ce)}).observe(document,{childList:!0,subtree:!0});function y(U){const X={};return U.integrity&&(X.integrity=U.integrity),U.referrerPolicy&&(X.referrerPolicy=U.referrerPolicy),U.crossOrigin==="use-credentials"?X.credentials="include":U.crossOrigin==="anonymous"?X.credentials="omit":X.credentials="same-origin",X}function u(U){if(U.ep)return;U.ep=!0;const X=y(U);fetch(U.href,X)}})();function Ng(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var mf={exports:{}},jd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function Bg(){if(dh)return jd;dh=1;var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function y(u,U,X){var Ce=null;if(X!==void 0&&(Ce=""+X),U.key!==void 0&&(Ce=""+U.key),"key"in U){X={};for(var be in U)be!=="key"&&(X[be]=U[be])}else X=U;return U=X.ref,{$$typeof:c,type:u,key:Ce,ref:U!==void 0?U:null,props:X}}return jd.Fragment=d,jd.jsx=y,jd.jsxs=y,jd}var uh;function Mg(){return uh||(uh=1,mf.exports=Bg()),mf.exports}var i=Mg(),Sf={exports:{}},Tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function Ug(){if(fh)return Tt;fh=1;var c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Ce=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),je=Symbol.for("react.activity"),ye=Symbol.iterator;function Me(C){return C===null||typeof C!="object"?null:(C=ye&&C[ye]||C["@@iterator"],typeof C=="function"?C:null)}var J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ae=Object.assign,He={};function ge(C,H,le){this.props=C,this.context=H,this.refs=He,this.updater=le||J}ge.prototype.isReactComponent={},ge.prototype.setState=function(C,H){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,H,"setState")},ge.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function A(){}A.prototype=ge.prototype;function K(C,H,le){this.props=C,this.context=H,this.refs=He,this.updater=le||J}var lt=K.prototype=new A;lt.constructor=K,Ae(lt,ge.prototype),lt.isPureReactComponent=!0;var $=Array.isArray;function D(){}var k={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function m(C,H,le){var me=le.ref;return{$$typeof:c,type:C,key:H,ref:me!==void 0?me:null,props:le}}function ue(C,H){return m(C.type,H,C.props)}function q(C){return typeof C=="object"&&C!==null&&C.$$typeof===c}function Be(C){var H={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(le){return H[le]})}var Ee=/\/+/g;function Xe(C,H){return typeof C=="object"&&C!==null&&C.key!=null?Be(""+C.key):H.toString(36)}function re(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(D,D):(C.status="pending",C.then(function(H){C.status==="pending"&&(C.status="fulfilled",C.value=H)},function(H){C.status==="pending"&&(C.status="rejected",C.reason=H)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function _(C,H,le,me,Ie){var at=typeof C;(at==="undefined"||at==="boolean")&&(C=null);var ut=!1;if(C===null)ut=!0;else switch(at){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(C.$$typeof){case c:case d:ut=!0;break;case de:return ut=C._init,_(ut(C._payload),H,le,me,Ie)}}if(ut)return Ie=Ie(C),ut=me===""?"."+Xe(C,0):me,$(Ie)?(le="",ut!=null&&(le=ut.replace(Ee,"$&/")+"/"),_(Ie,H,le,"",function(Jt){return Jt})):Ie!=null&&(q(Ie)&&(Ie=ue(Ie,le+(Ie.key==null||C&&C.key===Ie.key?"":(""+Ie.key).replace(Ee,"$&/")+"/")+ut)),H.push(Ie)),1;ut=0;var Bt=me===""?".":me+":";if($(C))for(var Ke=0;Ke<C.length;Ke++)me=C[Ke],at=Bt+Xe(me,Ke),ut+=_(me,H,le,at,Ie);else if(Ke=Me(C),typeof Ke=="function")for(C=Ke.call(C),Ke=0;!(me=C.next()).done;)me=me.value,at=Bt+Xe(me,Ke++),ut+=_(me,H,le,at,Ie);else if(at==="object"){if(typeof C.then=="function")return _(re(C),H,le,me,Ie);throw H=String(C),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ut}function P(C,H,le){if(C==null)return C;var me=[],Ie=0;return _(C,me,"","",function(at){return H.call(le,at,Ie++)}),me}function F(C){if(C._status===-1){var H=C._result;H=H(),H.then(function(le){(C._status===0||C._status===-1)&&(C._status=1,C._result=le)},function(le){(C._status===0||C._status===-1)&&(C._status=2,C._result=le)}),C._status===-1&&(C._status=0,C._result=H)}if(C._status===1)return C._result.default;throw C._result}var he=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},W={map:P,forEach:function(C,H,le){P(C,function(){H.apply(this,arguments)},le)},count:function(C){var H=0;return P(C,function(){H++}),H},toArray:function(C){return P(C,function(H){return H})||[]},only:function(C){if(!q(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Tt.Activity=je,Tt.Children=W,Tt.Component=ge,Tt.Fragment=y,Tt.Profiler=U,Tt.PureComponent=K,Tt.StrictMode=u,Tt.Suspense=g,Tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Tt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return k.H.useMemoCache(C)}},Tt.cache=function(C){return function(){return C.apply(null,arguments)}},Tt.cacheSignal=function(){return null},Tt.cloneElement=function(C,H,le){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var me=Ae({},C.props),Ie=C.key;if(H!=null)for(at in H.key!==void 0&&(Ie=""+H.key),H)!R.call(H,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&H.ref===void 0||(me[at]=H[at]);var at=arguments.length-2;if(at===1)me.children=le;else if(1<at){for(var ut=Array(at),Bt=0;Bt<at;Bt++)ut[Bt]=arguments[Bt+2];me.children=ut}return m(C.type,Ie,me)},Tt.createContext=function(C){return C={$$typeof:Ce,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:X,_context:C},C},Tt.createElement=function(C,H,le){var me,Ie={},at=null;if(H!=null)for(me in H.key!==void 0&&(at=""+H.key),H)R.call(H,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ie[me]=H[me]);var ut=arguments.length-2;if(ut===1)Ie.children=le;else if(1<ut){for(var Bt=Array(ut),Ke=0;Ke<ut;Ke++)Bt[Ke]=arguments[Ke+2];Ie.children=Bt}if(C&&C.defaultProps)for(me in ut=C.defaultProps,ut)Ie[me]===void 0&&(Ie[me]=ut[me]);return m(C,at,Ie)},Tt.createRef=function(){return{current:null}},Tt.forwardRef=function(C){return{$$typeof:be,render:C}},Tt.isValidElement=q,Tt.lazy=function(C){return{$$typeof:de,_payload:{_status:-1,_result:C},_init:F}},Tt.memo=function(C,H){return{$$typeof:E,type:C,compare:H===void 0?null:H}},Tt.startTransition=function(C){var H=k.T,le={};k.T=le;try{var me=C(),Ie=k.S;Ie!==null&&Ie(le,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(D,he)}catch(at){he(at)}finally{H!==null&&le.types!==null&&(H.types=le.types),k.T=H}},Tt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Tt.use=function(C){return k.H.use(C)},Tt.useActionState=function(C,H,le){return k.H.useActionState(C,H,le)},Tt.useCallback=function(C,H){return k.H.useCallback(C,H)},Tt.useContext=function(C){return k.H.useContext(C)},Tt.useDebugValue=function(){},Tt.useDeferredValue=function(C,H){return k.H.useDeferredValue(C,H)},Tt.useEffect=function(C,H){return k.H.useEffect(C,H)},Tt.useEffectEvent=function(C){return k.H.useEffectEvent(C)},Tt.useId=function(){return k.H.useId()},Tt.useImperativeHandle=function(C,H,le){return k.H.useImperativeHandle(C,H,le)},Tt.useInsertionEffect=function(C,H){return k.H.useInsertionEffect(C,H)},Tt.useLayoutEffect=function(C,H){return k.H.useLayoutEffect(C,H)},Tt.useMemo=function(C,H){return k.H.useMemo(C,H)},Tt.useOptimistic=function(C,H){return k.H.useOptimistic(C,H)},Tt.useReducer=function(C,H,le){return k.H.useReducer(C,H,le)},Tt.useRef=function(C){return k.H.useRef(C)},Tt.useState=function(C){return k.H.useState(C)},Tt.useSyncExternalStore=function(C,H,le){return k.H.useSyncExternalStore(C,H,le)},Tt.useTransition=function(){return k.H.useTransition()},Tt.version="19.2.0",Tt}var ph;function Bf(){return ph||(ph=1,Sf.exports=Ug()),Sf.exports}var w=Bf();const Pe=Ng(w);var wf={exports:{}},Td={},jf={exports:{}},Tf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh;function Pg(){return hh||(hh=1,(function(c){function d(_,P){var F=_.length;_.push(P);e:for(;0<F;){var he=F-1>>>1,W=_[he];if(0<U(W,P))_[he]=P,_[F]=W,F=he;else break e}}function y(_){return _.length===0?null:_[0]}function u(_){if(_.length===0)return null;var P=_[0],F=_.pop();if(F!==P){_[0]=F;e:for(var he=0,W=_.length,C=W>>>1;he<C;){var H=2*(he+1)-1,le=_[H],me=H+1,Ie=_[me];if(0>U(le,F))me<W&&0>U(Ie,le)?(_[he]=Ie,_[me]=F,he=me):(_[he]=le,_[H]=F,he=H);else if(me<W&&0>U(Ie,F))_[he]=Ie,_[me]=F,he=me;else break e}}return P}function U(_,P){var F=_.sortIndex-P.sortIndex;return F!==0?F:_.id-P.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var X=performance;c.unstable_now=function(){return X.now()}}else{var Ce=Date,be=Ce.now();c.unstable_now=function(){return Ce.now()-be}}var g=[],E=[],de=1,je=null,ye=3,Me=!1,J=!1,Ae=!1,He=!1,ge=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function lt(_){for(var P=y(E);P!==null;){if(P.callback===null)u(E);else if(P.startTime<=_)u(E),P.sortIndex=P.expirationTime,d(g,P);else break;P=y(E)}}function $(_){if(Ae=!1,lt(_),!J)if(y(g)!==null)J=!0,D||(D=!0,Be());else{var P=y(E);P!==null&&re($,P.startTime-_)}}var D=!1,k=-1,R=5,m=-1;function ue(){return He?!0:!(c.unstable_now()-m<R)}function q(){if(He=!1,D){var _=c.unstable_now();m=_;var P=!0;try{e:{J=!1,Ae&&(Ae=!1,A(k),k=-1),Me=!0;var F=ye;try{t:{for(lt(_),je=y(g);je!==null&&!(je.expirationTime>_&&ue());){var he=je.callback;if(typeof he=="function"){je.callback=null,ye=je.priorityLevel;var W=he(je.expirationTime<=_);if(_=c.unstable_now(),typeof W=="function"){je.callback=W,lt(_),P=!0;break t}je===y(g)&&u(g),lt(_)}else u(g);je=y(g)}if(je!==null)P=!0;else{var C=y(E);C!==null&&re($,C.startTime-_),P=!1}}break e}finally{je=null,ye=F,Me=!1}P=void 0}}finally{P?Be():D=!1}}}var Be;if(typeof K=="function")Be=function(){K(q)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Xe=Ee.port2;Ee.port1.onmessage=q,Be=function(){Xe.postMessage(null)}}else Be=function(){ge(q,0)};function re(_,P){k=ge(function(){_(c.unstable_now())},P)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(_){_.callback=null},c.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<_?Math.floor(1e3/_):5},c.unstable_getCurrentPriorityLevel=function(){return ye},c.unstable_next=function(_){switch(ye){case 1:case 2:case 3:var P=3;break;default:P=ye}var F=ye;ye=P;try{return _()}finally{ye=F}},c.unstable_requestPaint=function(){He=!0},c.unstable_runWithPriority=function(_,P){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var F=ye;ye=_;try{return P()}finally{ye=F}},c.unstable_scheduleCallback=function(_,P,F){var he=c.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?he+F:he):F=he,_){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=F+W,_={id:de++,callback:P,priorityLevel:_,startTime:F,expirationTime:W,sortIndex:-1},F>he?(_.sortIndex=F,d(E,_),y(g)===null&&_===y(E)&&(Ae?(A(k),k=-1):Ae=!0,re($,F-he))):(_.sortIndex=W,d(g,_),J||Me||(J=!0,D||(D=!0,Be()))),_},c.unstable_shouldYield=ue,c.unstable_wrapCallback=function(_){var P=ye;return function(){var F=ye;ye=P;try{return _.apply(this,arguments)}finally{ye=F}}}})(Tf)),Tf}var gh;function _g(){return gh||(gh=1,jf.exports=Pg()),jf.exports}var Cf={exports:{}},_i={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh;function Og(){if(xh)return _i;xh=1;var c=Bf();function d(g){var E="https://react.dev/errors/"+g;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var de=2;de<arguments.length;de++)E+="&args[]="+encodeURIComponent(arguments[de])}return"Minified React error #"+g+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(){}var u={d:{f:y,r:function(){throw Error(d(522))},D:y,C:y,L:y,m:y,X:y,S:y,M:y},p:0,findDOMNode:null},U=Symbol.for("react.portal");function X(g,E,de){var je=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:je==null?null:""+je,children:g,containerInfo:E,implementation:de}}var Ce=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function be(g,E){if(g==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return _i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,_i.createPortal=function(g,E){var de=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(d(299));return X(g,E,null,de)},_i.flushSync=function(g){var E=Ce.T,de=u.p;try{if(Ce.T=null,u.p=2,g)return g()}finally{Ce.T=E,u.p=de,u.d.f()}},_i.preconnect=function(g,E){typeof g=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,u.d.C(g,E))},_i.prefetchDNS=function(g){typeof g=="string"&&u.d.D(g)},_i.preinit=function(g,E){if(typeof g=="string"&&E&&typeof E.as=="string"){var de=E.as,je=be(de,E.crossOrigin),ye=typeof E.integrity=="string"?E.integrity:void 0,Me=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;de==="style"?u.d.S(g,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:je,integrity:ye,fetchPriority:Me}):de==="script"&&u.d.X(g,{crossOrigin:je,integrity:ye,fetchPriority:Me,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},_i.preinitModule=function(g,E){if(typeof g=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var de=be(E.as,E.crossOrigin);u.d.M(g,{crossOrigin:de,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&u.d.M(g)},_i.preload=function(g,E){if(typeof g=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var de=E.as,je=be(de,E.crossOrigin);u.d.L(g,de,{crossOrigin:je,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},_i.preloadModule=function(g,E){if(typeof g=="string")if(E){var de=be(E.as,E.crossOrigin);u.d.m(g,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:de,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else u.d.m(g)},_i.requestFormReset=function(g){u.d.r(g)},_i.unstable_batchedUpdates=function(g,E){return g(E)},_i.useFormState=function(g,E,de){return Ce.H.useFormState(g,E,de)},_i.useFormStatus=function(){return Ce.H.useHostTransitionStatus()},_i.version="19.2.0",_i}var yh;function Hg(){if(yh)return Cf.exports;yh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),Cf.exports=Og(),Cf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh;function Eg(){if(bh)return Td;bh=1;var c=_g(),d=Bf(),y=Hg();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function U(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function X(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ce(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function be(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(X(e)!==e)throw Error(u(188))}function E(e){var t=e.alternate;if(!t){if(t=X(e),t===null)throw Error(u(188));return t!==e?null:e}for(var n=e,l=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(l=o.return,l!==null){n=l;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return g(o),e;if(s===l)return g(o),t;s=s.sibling}throw Error(u(188))}if(n.return!==l.return)n=o,l=s;else{for(var h=!1,j=o.child;j;){if(j===n){h=!0,n=o,l=s;break}if(j===l){h=!0,l=o,n=s;break}j=j.sibling}if(!h){for(j=s.child;j;){if(j===n){h=!0,n=s,l=o;break}if(j===l){h=!0,l=s,n=o;break}j=j.sibling}if(!h)throw Error(u(189))}}if(n.alternate!==l)throw Error(u(190))}if(n.tag!==3)throw Error(u(188));return n.stateNode.current===n?e:t}function de(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=de(e),t!==null)return t;e=e.sibling}return null}var je=Object.assign,ye=Symbol.for("react.element"),Me=Symbol.for("react.transitional.element"),J=Symbol.for("react.portal"),Ae=Symbol.for("react.fragment"),He=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),K=Symbol.for("react.context"),lt=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Be(e){return e===null||typeof e!="object"?null:(e=q&&e[q]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Symbol.for("react.client.reference");function Xe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ee?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ae:return"Fragment";case ge:return"Profiler";case He:return"StrictMode";case $:return"Suspense";case D:return"SuspenseList";case m:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case J:return"Portal";case K:return e.displayName||"Context";case A:return(e._context.displayName||"Context")+".Consumer";case lt:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:Xe(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return Xe(e(t))}catch{}}return null}var re=Array.isArray,_=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=y.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},he=[],W=-1;function C(e){return{current:e}}function H(e){0>W||(e.current=he[W],he[W]=null,W--)}function le(e,t){W++,he[W]=e.current,e.current=t}var me=C(null),Ie=C(null),at=C(null),ut=C(null);function Bt(e,t){switch(le(at,t),le(Ie,e),le(me,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mp(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mp(t),e=Up(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(me),le(me,e)}function Ke(){H(me),H(Ie),H(at)}function Jt(e){e.memoizedState!==null&&le(ut,e);var t=me.current,n=Up(t,e.type);t!==n&&(le(Ie,e),le(me,n))}function Hi(e){Ie.current===e&&(H(me),H(Ie)),ut.current===e&&(H(ut),vd._currentValue=F)}var Ua,pi;function Kn(e){if(Ua===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ua=t&&t[1]||"",pi=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ua+e+pi}var Jn=!1;function Ji(e,t){if(!e||Jn)return"";Jn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ce){var ae=ce}Reflect.construct(e,[],Se)}else{try{Se.call()}catch(ce){ae=ce}e.call(Se.prototype)}}else{try{throw Error()}catch(ce){ae=ce}(Se=e())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ce){if(ce&&ae&&typeof ce.stack=="string")return[ce.stack,ae.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=l.DetermineComponentFrameRoot(),h=s[0],j=s[1];if(h&&j){var B=h.split(`
`),ne=j.split(`
`);for(o=l=0;l<B.length&&!B[l].includes("DetermineComponentFrameRoot");)l++;for(;o<ne.length&&!ne[o].includes("DetermineComponentFrameRoot");)o++;if(l===B.length||o===ne.length)for(l=B.length-1,o=ne.length-1;1<=l&&0<=o&&B[l]!==ne[o];)o--;for(;1<=l&&0<=o;l--,o--)if(B[l]!==ne[o]){if(l!==1||o!==1)do if(l--,o--,0>o||B[l]!==ne[o]){var xe=`
`+B[l].replace(" at new "," at ");return e.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",e.displayName)),xe}while(1<=l&&0<=o);break}}}finally{Jn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Kn(n):""}function Ei(e,t){switch(e.tag){case 26:case 27:case 5:return Kn(e.type);case 16:return Kn("Lazy");case 13:return e.child!==t&&t!==null?Kn("Suspense Fallback"):Kn("Suspense");case 19:return Kn("SuspenseList");case 0:case 15:return Ji(e.type,!1);case 11:return Ji(e.type.render,!1);case 1:return Ji(e.type,!0);case 31:return Kn("Activity");default:return""}}function _l(e){try{var t="",n=null;do t+=Ei(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var hi=Object.prototype.hasOwnProperty,yl=c.unstable_scheduleCallback,Pa=c.unstable_cancelCallback,zc=c.unstable_shouldYield,Fo=c.unstable_requestPaint,gi=c.unstable_now,Ge=c.unstable_getCurrentPriorityLevel,Ct=c.unstable_ImmediatePriority,zr=c.unstable_UserBlockingPriority,Ve=c.unstable_NormalPriority,Vt=c.unstable_LowPriority,ra=c.unstable_IdlePriority,Yo=c.log,Wt=c.unstable_setDisableYieldValue,Pn=null,gn=null;function xi(e){if(typeof Yo=="function"&&Wt(e),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Pn,e)}catch{}}var we=Math.clz32?Math.clz32:_n,Ol=Math.log,yt=Math.LN2;function _n(e){return e>>>=0,e===0?32:31-(Ol(e)/yt|0)|0}var Hl=256,Lo=262144,ca=4194304;function El(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Mt(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var o=0,s=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var j=l&134217727;return j!==0?(l=j&~s,l!==0?o=El(l):(h&=j,h!==0?o=El(h):n||(n=j&~e,n!==0&&(o=El(n))))):(j=l&~s,j!==0?o=El(j):h!==0?o=El(h):n||(n=l&~e,n!==0&&(o=El(n)))),o===0?0:t!==0&&t!==o&&(t&s)===0&&(s=o&-o,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:o}function Il(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xo(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function da(){var e=ca;return ca<<=1,(ca&62914560)===0&&(ca=4194304),e}function ua(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ji(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Vl(e,t,n,l,o,s){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var j=e.entanglements,B=e.expirationTimes,ne=e.hiddenUpdates;for(n=h&~n;0<n;){var xe=31-we(n),Se=1<<xe;j[xe]=0,B[xe]=-1;var ae=ne[xe];if(ae!==null)for(ne[xe]=null,xe=0;xe<ae.length;xe++){var ce=ae[xe];ce!==null&&(ce.lane&=-536870913)}n&=~Se}l!==0&&Is(e,l,0),s!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=s&~(h&~t))}function Is(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-we(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function Vs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-we(n),o=1<<l;o&t|e[l]&t&&(e[l]|=t),n&=~o}}function Oe(e,t){var n=t&-t;return n=(n&42)!==0?1:Ii(n),(n&(e.suspendedLanes|t))!==0?0:n}function Ii(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function wt(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ln(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:ih(e.type))}function Ws(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var bl=Math.random().toString(36).slice(2),On="__reactFiber$"+bl,ei="__reactProps$"+bl,zt="__reactContainer$"+bl,_a="__reactEvents$"+bl,en="__reactListeners$"+bl,kr="__reactHandles$"+bl,tn="__reactResources$"+bl,go="__reactMarker$"+bl;function pn(e){delete e[On],delete e[ei],delete e[_a],delete e[en],delete e[kr]}function Oa(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[On]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vp(e);e!==null;){if(n=e[On])return n;e=Vp(e)}return t}e=n,n=e.parentNode}return null}function Wl(e){if(e=e[On]||e[zt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function fa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function $l(e){var t=e[tn];return t||(t=e[tn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function wn(e){e[go]=!0}var Rr=new Set,Hn={};function pa(e,t){Dt(e,t),Dt(e+"Capture",t)}function Dt(e,t){for(Hn[e]=t,e=0;e<t.length;e++)Rr.add(t[e])}var An=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ha={},$s={};function xo(e){return hi.call($s,e)?!0:hi.call(Ha,e)?!1:An.test(e)?$s[e]=!0:(Ha[e]=!0,!1)}function yo(e,t,n){if(xo(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ti(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Nn(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function yi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ha(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Go(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var o=l.get,s=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){n=""+h,s.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jn(e){if(!e._valueTracker){var t=ha(e)?"checked":"value";e._valueTracker=Go(e,t,""+e[t])}}function xn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=ha(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function el(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vi=/[\n"\\]/g;function dn(e){return e.replace(Vi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fs(e,t,n,l,o,s,h,j){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+yi(t)):e.value!==""+yi(t)&&(e.value=""+yi(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Bn(e,h,yi(t)):n!=null?Bn(e,h,yi(n)):l!=null&&e.removeAttribute("value"),o==null&&s!=null&&(e.defaultChecked=!!s),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+yi(j):e.removeAttribute("name")}function Vn(e,t,n,l,o,s,h,j){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){jn(e);return}n=n!=null?""+yi(n):"",t=t!=null?""+yi(t):n,j||t===e.value||(e.value=t),e.defaultValue=t}l=l??o,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=j?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),jn(e)}function Bn(e,t,n){t==="number"&&el(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ea(e,t,n,l){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&l&&(e[n].defaultSelected=!0)}else{for(n=""+yi(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,l&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function qo(e,t,n){if(t!=null&&(t=""+yi(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+yi(n):""}function Dr(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(u(92));if(re(l)){if(1<l.length)throw Error(u(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=yi(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),jn(e)}function hn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vt(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Ys.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jt(e,t,n){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var o in t)l=t[o],t.hasOwnProperty(o)&&n[o]!==l&&vt(e,o,l)}else for(var s in t)t.hasOwnProperty(s)&&vt(e,s,t[s])}function Ia(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ze=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ye=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ft(e){return Ye.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pt(){}var tt=null;function kt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bt=null,Ut=null;function mt(e){var t=Wl(e);if(t&&(e=t.stateNode)){var n=e[ei]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fs(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+dn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var o=l[ei]||null;if(!o)throw Error(u(90));Fs(l,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&xn(l)}break e;case"textarea":qo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ea(e,!!n.multiple,t,!1)}}}var sn=!1;function ot(e,t,n){if(sn)return e(t,n);sn=!0;try{var l=e(t);return l}finally{if(sn=!1,(bt!==null||Ut!==null)&&(Qd(),bt&&(t=bt,e=Ut,Ut=bt=null,mt(t),e)))for(t=0;t<e.length;t++)mt(e[t])}}function At(e,t){var n=e.stateNode;if(n===null)return null;var l=n[ei]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(u(231,t,typeof n));return n}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kc=!1;if(Ti)try{var $n={};Object.defineProperty($n,"passive",{get:function(){kc=!0}}),window.addEventListener("test",$n,$n),window.removeEventListener("test",$n,$n)}catch{kc=!1}var vl=null,ml=null,ga=null;function Ar(){if(ga)return ga;var e,t=ml,n=t.length,l,o="value"in vl?vl.value:vl.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(l=1;l<=h&&t[n-l]===o[s-l];l++);return ga=o.slice(e,1<l?1-l:void 0)}function Ls(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Va(){return!0}function Rc(){return!1}function bi(e){function t(n,l,o,s,h){this._reactName=n,this._targetInst=o,this.type=l,this.nativeEvent=s,this.target=h,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(n=e[j],this[j]=n?n(s):s[j]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Va:Rc,this.isPropagationStopped=Rc,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Va)},persist:function(){},isPersistent:Va}),t}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=bi(bo),ni=je({},bo,{view:0,detail:0}),Xn=bi(ni),Fl,Dc,Gn,Nr=je({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gn&&(Gn&&e.type==="mousemove"?(Fl=e.screenX-Gn.screenX,Dc=e.screenY-Gn.screenY):Dc=Fl=0,Gn=e),Fl)},movementY:function(e){return"movementY"in e?e.movementY:Dc}}),Wi=bi(Nr),$i=je({},Nr,{dataTransfer:0}),Xs=bi($i),ju=je({},ni,{relatedTarget:0}),ii=bi(ju),Gs=je({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),li=bi(Gs),Br=je({},bo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fi=bi(Br),Ac=je({},bo,{data:0}),Yl=bi(Ac),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ai={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ci(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mr[e])?!!t[e]:!1}function Zo(){return Ci}var zi=je({},ni,{key:function(e){if(e.key){var t=Tu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ls(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ai[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(e){return e.type==="keypress"?Ls(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ls(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qs=bi(zi),yn=je({},Nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zs=bi(yn),Cu=je({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),zu=bi(Cu),Nc=je({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),vo=bi(Nc),Wa=je({},Nr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ur=bi(Wa),$a=je({},bo,{newState:0,oldState:0}),Qo=bi($a),Ll=[9,13,27,32],Fa=Ti&&"CompositionEvent"in window,xa=null;Ti&&"documentMode"in document&&(xa=document.documentMode);var Bc=Ti&&"TextEvent"in window&&!xa,Qs=Ti&&(!Fa||xa&&8<xa&&11>=xa),Pr=" ",Ko=!1;function un(e,t){switch(e){case"keyup":return Ll.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qt=!1;function Ks(e,t){switch(e){case"compositionend":return Jo(t);case"keypress":return t.which!==32?null:(Ko=!0,Pr);case"textInput":return e=t.data,e===Pr&&Ko?null:e;default:return null}}function Mc(e,t){if(Qt)return e==="compositionend"||!Fa&&un(e,t)?(e=Ar(),ga=ml=vl=null,Qt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qs&&t.locale!=="ko"?null:t.data;default:return null}}var _r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_r[e.type]:t==="textarea"}function ki(e,t,n,l){bt?Ut?Ut.push(l):Ut=[l]:bt=l,t=lu(t,"onChange"),0<t.length&&(n=new ct("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var vi=null,Sl=null;function ya(e){kp(e,0)}function wl(e){var t=fa(e);if(xn(t))return e}function Ya(e,t){if(e==="change")return t}var ba=!1;if(Ti){var tl;if(Ti){var es="oninput"in document;if(!es){var Ri=document.createElement("div");Ri.setAttribute("oninput","return;"),es=typeof Ri.oninput=="function"}tl=es}else tl=!1;ba=tl&&(!document.documentMode||9<document.documentMode)}function Fn(){vi&&(vi.detachEvent("onpropertychange",va),Sl=vi=null)}function va(e){if(e.propertyName==="value"&&wl(Sl)){var t=[];ki(t,Sl,e,kt(e)),ot(ya,t)}}function oi(e,t,n){e==="focusin"?(Fn(),vi=t,Sl=n,vi.attachEvent("onpropertychange",va)):e==="focusout"&&Fn()}function jl(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wl(Sl)}function ku(e,t){if(e==="click")return wl(t)}function Js(e,t){if(e==="input"||e==="change")return wl(t)}function Dd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Di=typeof Object.is=="function"?Object.is:Dd;function $t(e,t){if(Di(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var o=n[l];if(!hi.call(t,o)||!Di(e[o],t[o]))return!1}return!0}function Tl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Or(e,t){var n=Tl(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tl(n)}}function Uc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=el(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=el(e.document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Hr=Ti&&"documentMode"in document&&11>=document.documentMode,ma=null,mo=null,ts=null,Sa=!1;function Er(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sa||ma==null||ma!==el(l)||(l=ma,"selectionStart"in l&&er(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ts&&$t(ts,l)||(ts=l,l=lu(mo,"onSelect"),0<l.length&&(t=new ct("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=ma)))}function nl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xl={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionrun:nl("Transition","TransitionRun"),transitionstart:nl("Transition","TransitionStart"),transitioncancel:nl("Transition","TransitionCancel"),transitionend:nl("Transition","TransitionEnd")},So={},tr={};Ti&&(tr=document.createElement("div").style,"AnimationEvent"in window||(delete Xl.animationend.animation,delete Xl.animationiteration.animation,delete Xl.animationstart.animation),"TransitionEvent"in window||delete Xl.transitionend.transition);function Ai(e){if(So[e])return So[e];if(!Xl[e])return e;var t=Xl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tr)return So[e]=t[n];return e}var nr=Ai("animationend"),ir=Ai("animationiteration"),_c=Ai("animationstart"),lr=Ai("transitionrun"),ar=Ai("transitionstart"),Ir=Ai("transitioncancel"),or=Ai("transitionend"),wo=new Map,Oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oc.push("scrollEnd");function Ni(e,t){wo.set(e,t),pa(t,[e])}var sr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},il=[],wa=0,rr=0;function cr(){for(var e=wa,t=rr=wa=0;t<e;){var n=il[t];il[t++]=null;var l=il[t];il[t++]=null;var o=il[t];il[t++]=null;var s=il[t];if(il[t++]=null,l!==null&&o!==null){var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}s!==0&&jo(n,o,s)}}function dr(e,t,n,l){il[wa++]=e,il[wa++]=t,il[wa++]=n,il[wa++]=l,rr|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Vr(e,t,n,l){return dr(e,t,n,l),To(e)}function Gl(e,t){return dr(e,null,null,t),To(e)}function jo(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var o=!1,s=e.return;s!==null;)s.childLanes|=n,l=s.alternate,l!==null&&(l.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(o=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,o&&t!==null&&(o=31-we(n),e=s.hiddenUpdates,l=e[o],l===null?e[o]=[t]:l.push(t),t.lane=n|536870912),s):null}function To(e){if(50<fd)throw fd=0,$u=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Cl={};function Bi(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(e,t,n,l){return new Bi(e,t,n,l)}function Mi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ll(e,t){var n=e.alternate;return n===null?(n=si(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Yi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Co(e,t,n,l,o,s){var h=0;if(l=e,typeof e=="function")Mi(e)&&(h=1);else if(typeof e=="string")h=vg(e,n,me.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case m:return e=si(31,n,t,o),e.elementType=m,e.lanes=s,e;case Ae:return qn(n.children,o,s,t);case He:h=8,o|=24;break;case ge:return e=si(12,n,t,o|2),e.elementType=ge,e.lanes=s,e;case $:return e=si(13,n,t,o),e.elementType=$,e.lanes=s,e;case D:return e=si(19,n,t,o),e.elementType=D,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:h=10;break e;case A:h=9;break e;case lt:h=11;break e;case k:h=14;break e;case R:h=16,l=null;break e}h=29,n=Error(u(130,e===null?"null":typeof e,"")),l=null}return t=si(h,n,t,o),t.elementType=e,t.type=l,t.lanes=s,t}function qn(e,t,n,l){return e=si(7,e,l,t),e.lanes=n,e}function ns(e,t,n){return e=si(6,e,null,t),e.lanes=n,e}function al(e){var t=si(18,null,null,0);return t.stateNode=e,t}function is(e,t,n){return t=si(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ja=new WeakMap;function Li(e,t){if(typeof e=="object"&&e!==null){var n=ja.get(e);return n!==void 0?n:(t={value:e,source:t,stack:_l(t)},ja.set(e,t),t)}return{value:e,source:t,stack:_l(t)}}var Xi=[],zo=0,Gi=null,Ta=0,Mn=[],ri=0,mi=null,qi=1,Je="";function nt(e,t){Xi[zo++]=Ta,Xi[zo++]=Gi,Gi=e,Ta=t}function Ad(e,t,n){Mn[ri++]=qi,Mn[ri++]=Je,Mn[ri++]=mi,mi=e;var l=qi;e=Je;var o=32-we(l)-1;l&=~(1<<o),n+=1;var s=32-we(t)+o;if(30<s){var h=o-o%5;s=(l&(1<<h)-1).toString(32),l>>=h,o-=h,qi=1<<32-we(t)+o|n<<o|l,Je=s+e}else qi=1<<s|n<<o|l,Je=e}function ls(e){e.return!==null&&(nt(e,1),Ad(e,1,0))}function as(e){for(;e===Gi;)Gi=Xi[--zo],Xi[zo]=null,Ta=Xi[--zo],Xi[zo]=null;for(;e===mi;)mi=Mn[--ri],Mn[ri]=null,Je=Mn[--ri],Mn[ri]=null,qi=Mn[--ri],Mn[ri]=null}function os(e,t){Mn[ri++]=qi,Mn[ri++]=Je,Mn[ri++]=mi,qi=t.id,Je=t.overflow,mi=e}var Wn=null,Lt=null,Pt=!1,zl=null,ol=!1,ss=Error(u(519));function ql(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zl(Li(t,e)),ss}function Wr(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[On]=e,t[ei]=l,n){case"dialog":Ot("cancel",t),Ot("close",t);break;case"iframe":case"object":case"embed":Ot("load",t);break;case"video":case"audio":for(n=0;n<hd.length;n++)Ot(hd[n],t);break;case"source":Ot("error",t);break;case"img":case"image":case"link":Ot("error",t),Ot("load",t);break;case"details":Ot("toggle",t);break;case"input":Ot("invalid",t),Vn(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ot("invalid",t);break;case"textarea":Ot("invalid",t),Dr(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Np(t.textContent,n)?(l.popover!=null&&(Ot("beforetoggle",t),Ot("toggle",t)),l.onScroll!=null&&Ot("scroll",t),l.onScrollEnd!=null&&Ot("scrollend",t),l.onClick!=null&&(t.onclick=pt),t=!0):t=!1,t||ql(e,!0)}function $r(e){for(Wn=e.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:ol=!1;return;case 27:case 3:ol=!0;return;default:Wn=Wn.return}}function kl(e){if(e!==Wn)return!1;if(!Pt)return $r(e),Pt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||af(e.type,e.memoizedProps)),n=!n),n&&Lt&&ql(e),$r(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Lt=Ip(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Lt=Ip(e)}else t===27?(t=Lt,Us(e.type)?(e=df,df=null,Lt=e):Lt=t):Lt=Wn?aa(e.stateNode.nextSibling):null;return!0}function sl(){Lt=Wn=null,Pt=!1}function rs(){var e=zl;return e!==null&&(gl===null?gl=e:gl.push.apply(gl,e),zl=null),e}function Zl(e){zl===null?zl=[e]:zl.push(e)}var ur=C(null),rl=null,cl=null;function La(e,t,n){le(ur,t._currentValue),t._currentValue=n}function Rl(e){e._currentValue=ur.current,H(ur)}function ko(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function Dl(e,t,n,l){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){var h=o.child;s=s.firstContext;e:for(;s!==null;){var j=s;s=o;for(var B=0;B<t.length;B++)if(j.context===t[B]){s.lanes|=n,j=s.alternate,j!==null&&(j.lanes|=n),ko(s.return,n,e),l||(h=null);break e}s=j.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(u(341));h.lanes|=n,s=h.alternate,s!==null&&(s.lanes|=n),ko(h,n,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function Ca(e,t,n,l){e=null;for(var o=t,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(u(387));if(h=h.memoizedProps,h!==null){var j=o.type;Di(o.pendingProps.value,h.value)||(e!==null?e.push(j):e=[j])}}else if(o===ut.current){if(h=o.alternate,h===null)throw Error(u(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(vd):e=[vd])}o=o.return}e!==null&&Dl(t,e,n,l),t.flags|=262144}function za(e){for(e=e.firstContext;e!==null;){if(!Di(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ql(e){rl=e,cl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nn(e){return Fr(rl,e)}function Xa(e,t){return rl===null&&Ql(e),Fr(e,t)}function Fr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},cl===null){if(e===null)throw Error(u(308));cl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else cl=cl.next=t;return n}var Nd=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Yr=c.unstable_scheduleCallback,Bd=c.unstable_NormalPriority,Tn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ga(){return{controller:new Nd,data:new Map,refCount:0}}function Kl(e){e.refCount--,e.refCount===0&&Yr(Bd,function(){e.controller.abort()})}var qa=null,fr=0,Ro=0,ka=null;function Md(e,t){if(qa===null){var n=qa=[];fr=0,Ro=qu(),ka={status:"pending",value:void 0,then:function(l){n.push(l)}}}return fr++,t.then(cs,cs),t}function cs(){if(--fr===0&&qa!==null){ka!==null&&(ka.status="fulfilled");var e=qa;qa=null,Ro=0,ka=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Hc(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(l.status="rejected",l.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),l}var Lr=_.S;_.S=function(e,t){tp=gi(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Md(e,t),Lr!==null&&Lr(e,t)};var Za=C(null);function Qa(){var e=Za.current;return e!==null?e:fn.pooledCache}function Ka(e,t){t===null?le(Za,Za.current):le(Za,t.pool)}function Xr(){var e=Qa();return e===null?null:{parent:Tn._currentValue,pool:e}}var Ja=Error(u(460)),ds=Error(u(474)),us=Error(u(542)),Gr={then:function(){}};function Ud(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pd(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(pt,pt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jl(e),e;default:if(typeof t.status=="string")t.then(pt,pt);else{if(e=fn,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=l}},function(l){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Jl(e),e}throw ci=t,Ja}}function eo(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ci=n,Ja):n}}var ci=null;function Al(){if(ci===null)throw Error(u(459));var e=ci;return ci=null,e}function Jl(e){if(e===Ja||e===us)throw Error(u(483))}var fs=null,pr=0;function qr(e){var t=pr;return pr+=1,fs===null&&(fs=[]),Pd(fs,e,t)}function hr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Zr(e,t){throw t.$$typeof===ye?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _d(e){function t(Y,O){if(e){var te=Y.deletions;te===null?(Y.deletions=[O],Y.flags|=16):te.push(O)}}function n(Y,O){if(!e)return null;for(;O!==null;)t(Y,O),O=O.sibling;return null}function l(Y){for(var O=new Map;Y!==null;)Y.key!==null?O.set(Y.key,Y):O.set(Y.index,Y),Y=Y.sibling;return O}function o(Y,O){return Y=ll(Y,O),Y.index=0,Y.sibling=null,Y}function s(Y,O,te){return Y.index=te,e?(te=Y.alternate,te!==null?(te=te.index,te<O?(Y.flags|=67108866,O):te):(Y.flags|=67108866,O)):(Y.flags|=1048576,O)}function h(Y){return e&&Y.alternate===null&&(Y.flags|=67108866),Y}function j(Y,O,te,ve){return O===null||O.tag!==6?(O=ns(te,Y.mode,ve),O.return=Y,O):(O=o(O,te),O.return=Y,O)}function B(Y,O,te,ve){var it=te.type;return it===Ae?xe(Y,O,te.props.children,ve,te.key):O!==null&&(O.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===R&&eo(it)===O.type)?(O=o(O,te.props),hr(O,te),O.return=Y,O):(O=Co(te.type,te.key,te.props,null,Y.mode,ve),hr(O,te),O.return=Y,O)}function ne(Y,O,te,ve){return O===null||O.tag!==4||O.stateNode.containerInfo!==te.containerInfo||O.stateNode.implementation!==te.implementation?(O=is(te,Y.mode,ve),O.return=Y,O):(O=o(O,te.children||[]),O.return=Y,O)}function xe(Y,O,te,ve,it){return O===null||O.tag!==7?(O=qn(te,Y.mode,ve,it),O.return=Y,O):(O=o(O,te),O.return=Y,O)}function Se(Y,O,te){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ns(""+O,Y.mode,te),O.return=Y,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Me:return te=Co(O.type,O.key,O.props,null,Y.mode,te),hr(te,O),te.return=Y,te;case J:return O=is(O,Y.mode,te),O.return=Y,O;case R:return O=eo(O),Se(Y,O,te)}if(re(O)||Be(O))return O=qn(O,Y.mode,te,null),O.return=Y,O;if(typeof O.then=="function")return Se(Y,qr(O),te);if(O.$$typeof===K)return Se(Y,Xa(Y,O),te);Zr(Y,O)}return null}function ae(Y,O,te,ve){var it=O!==null?O.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return it!==null?null:j(Y,O,""+te,ve);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Me:return te.key===it?B(Y,O,te,ve):null;case J:return te.key===it?ne(Y,O,te,ve):null;case R:return te=eo(te),ae(Y,O,te,ve)}if(re(te)||Be(te))return it!==null?null:xe(Y,O,te,ve,null);if(typeof te.then=="function")return ae(Y,O,qr(te),ve);if(te.$$typeof===K)return ae(Y,O,Xa(Y,te),ve);Zr(Y,te)}return null}function ce(Y,O,te,ve,it){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Y=Y.get(te)||null,j(O,Y,""+ve,it);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Me:return Y=Y.get(ve.key===null?te:ve.key)||null,B(O,Y,ve,it);case J:return Y=Y.get(ve.key===null?te:ve.key)||null,ne(O,Y,ve,it);case R:return ve=eo(ve),ce(Y,O,te,ve,it)}if(re(ve)||Be(ve))return Y=Y.get(te)||null,xe(O,Y,ve,it,null);if(typeof ve.then=="function")return ce(Y,O,te,qr(ve),it);if(ve.$$typeof===K)return ce(Y,O,te,Xa(O,ve),it);Zr(O,ve)}return null}function Fe(Y,O,te,ve){for(var it=null,qt=null,Ze=O,Nt=O=0,It=null;Ze!==null&&Nt<te.length;Nt++){Ze.index>Nt?(It=Ze,Ze=null):It=Ze.sibling;var Zt=ae(Y,Ze,te[Nt],ve);if(Zt===null){Ze===null&&(Ze=It);break}e&&Ze&&Zt.alternate===null&&t(Y,Ze),O=s(Zt,O,Nt),qt===null?it=Zt:qt.sibling=Zt,qt=Zt,Ze=It}if(Nt===te.length)return n(Y,Ze),Pt&&nt(Y,Nt),it;if(Ze===null){for(;Nt<te.length;Nt++)Ze=Se(Y,te[Nt],ve),Ze!==null&&(O=s(Ze,O,Nt),qt===null?it=Ze:qt.sibling=Ze,qt=Ze);return Pt&&nt(Y,Nt),it}for(Ze=l(Ze);Nt<te.length;Nt++)It=ce(Ze,Y,Nt,te[Nt],ve),It!==null&&(e&&It.alternate!==null&&Ze.delete(It.key===null?Nt:It.key),O=s(It,O,Nt),qt===null?it=It:qt.sibling=It,qt=It);return e&&Ze.forEach(function(Es){return t(Y,Es)}),Pt&&nt(Y,Nt),it}function dt(Y,O,te,ve){if(te==null)throw Error(u(151));for(var it=null,qt=null,Ze=O,Nt=O=0,It=null,Zt=te.next();Ze!==null&&!Zt.done;Nt++,Zt=te.next()){Ze.index>Nt?(It=Ze,Ze=null):It=Ze.sibling;var Es=ae(Y,Ze,Zt.value,ve);if(Es===null){Ze===null&&(Ze=It);break}e&&Ze&&Es.alternate===null&&t(Y,Ze),O=s(Es,O,Nt),qt===null?it=Es:qt.sibling=Es,qt=Es,Ze=It}if(Zt.done)return n(Y,Ze),Pt&&nt(Y,Nt),it;if(Ze===null){for(;!Zt.done;Nt++,Zt=te.next())Zt=Se(Y,Zt.value,ve),Zt!==null&&(O=s(Zt,O,Nt),qt===null?it=Zt:qt.sibling=Zt,qt=Zt);return Pt&&nt(Y,Nt),it}for(Ze=l(Ze);!Zt.done;Nt++,Zt=te.next())Zt=ce(Ze,Y,Nt,Zt.value,ve),Zt!==null&&(e&&Zt.alternate!==null&&Ze.delete(Zt.key===null?Nt:Zt.key),O=s(Zt,O,Nt),qt===null?it=Zt:qt.sibling=Zt,qt=Zt);return e&&Ze.forEach(function(Ag){return t(Y,Ag)}),Pt&&nt(Y,Nt),it}function cn(Y,O,te,ve){if(typeof te=="object"&&te!==null&&te.type===Ae&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case Me:e:{for(var it=te.key;O!==null;){if(O.key===it){if(it=te.type,it===Ae){if(O.tag===7){n(Y,O.sibling),ve=o(O,te.props.children),ve.return=Y,Y=ve;break e}}else if(O.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===R&&eo(it)===O.type){n(Y,O.sibling),ve=o(O,te.props),hr(ve,te),ve.return=Y,Y=ve;break e}n(Y,O);break}else t(Y,O);O=O.sibling}te.type===Ae?(ve=qn(te.props.children,Y.mode,ve,te.key),ve.return=Y,Y=ve):(ve=Co(te.type,te.key,te.props,null,Y.mode,ve),hr(ve,te),ve.return=Y,Y=ve)}return h(Y);case J:e:{for(it=te.key;O!==null;){if(O.key===it)if(O.tag===4&&O.stateNode.containerInfo===te.containerInfo&&O.stateNode.implementation===te.implementation){n(Y,O.sibling),ve=o(O,te.children||[]),ve.return=Y,Y=ve;break e}else{n(Y,O);break}else t(Y,O);O=O.sibling}ve=is(te,Y.mode,ve),ve.return=Y,Y=ve}return h(Y);case R:return te=eo(te),cn(Y,O,te,ve)}if(re(te))return Fe(Y,O,te,ve);if(Be(te)){if(it=Be(te),typeof it!="function")throw Error(u(150));return te=it.call(te),dt(Y,O,te,ve)}if(typeof te.then=="function")return cn(Y,O,qr(te),ve);if(te.$$typeof===K)return cn(Y,O,Xa(Y,te),ve);Zr(Y,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,O!==null&&O.tag===6?(n(Y,O.sibling),ve=o(O,te),ve.return=Y,Y=ve):(n(Y,O),ve=ns(te,Y.mode,ve),ve.return=Y,Y=ve),h(Y)):n(Y,O)}return function(Y,O,te,ve){try{pr=0;var it=cn(Y,O,te,ve);return fs=null,it}catch(Ze){if(Ze===Ja||Ze===us)throw Ze;var qt=si(29,Ze,null,Y.mode);return qt.lanes=ve,qt.return=Y,qt}finally{}}}var Do=_d(!0),Od=_d(!1),to=!1;function Ec(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function no(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function io(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Kt&2)!==0){var o=l.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),l.pending=t,t=To(e),jo(e,null,n),t}return dr(e,l,t,n),To(e)}function Ra(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Vs(e,n)}}function Da(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=h:s=s.next=h,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:l.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var lo=!1;function ao(){if(lo){var e=ka;if(e!==null)throw e}}function ea(e,t,n,l){lo=!1;var o=e.updateQueue;to=!1;var s=o.firstBaseUpdate,h=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var B=j,ne=B.next;B.next=null,h===null?s=ne:h.next=ne,h=B;var xe=e.alternate;xe!==null&&(xe=xe.updateQueue,j=xe.lastBaseUpdate,j!==h&&(j===null?xe.firstBaseUpdate=ne:j.next=ne,xe.lastBaseUpdate=B))}if(s!==null){var Se=o.baseState;h=0,xe=ne=B=null,j=s;do{var ae=j.lane&-536870913,ce=ae!==j.lane;if(ce?(Et&ae)===ae:(l&ae)===ae){ae!==0&&ae===Ro&&(lo=!0),xe!==null&&(xe=xe.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Fe=e,dt=j;ae=t;var cn=n;switch(dt.tag){case 1:if(Fe=dt.payload,typeof Fe=="function"){Se=Fe.call(cn,Se,ae);break e}Se=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=dt.payload,ae=typeof Fe=="function"?Fe.call(cn,Se,ae):Fe,ae==null)break e;Se=je({},Se,ae);break e;case 2:to=!0}}ae=j.callback,ae!==null&&(e.flags|=64,ce&&(e.flags|=8192),ce=o.callbacks,ce===null?o.callbacks=[ae]:ce.push(ae))}else ce={lane:ae,tag:j.tag,payload:j.payload,callback:j.callback,next:null},xe===null?(ne=xe=ce,B=Se):xe=xe.next=ce,h|=ae;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;ce=j,j=ce.next,ce.next=null,o.lastBaseUpdate=ce,o.shared.pending=null}}while(!0);xe===null&&(B=Se),o.baseState=B,o.firstBaseUpdate=ne,o.lastBaseUpdate=xe,s===null&&(o.shared.lanes=0),Ds|=h,e.lanes=h,e.memoizedState=Se}}function Qr(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Ao(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Qr(n[e],t)}var ta=C(null),oo=C(0);function gr(e,t){e=Vo,le(oo,e),le(ta,t),Vo=e|t.baseLanes}function ps(){le(oo,Vo),le(ta,ta.current)}function hs(){Vo=oo.current,H(ta),H(oo)}var En=C(null),di=null;function Zi(e){var t=e.alternate;le(Cn,Cn.current&1),le(En,e),di===null&&(t===null||ta.current!==null||t.memoizedState!==null)&&(di=e)}function Ui(e){le(Cn,Cn.current),le(En,e),di===null&&(di=e)}function Kr(e){e.tag===22?(le(Cn,Cn.current),le(En,e),di===null&&(di=e)):so()}function so(){le(Cn,Cn.current),le(En,En.current)}function Qi(e){H(En),di===e&&(di=null),H(Cn)}var Cn=C(0);function na(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||rf(n)||cf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dl=0,ht=null,Yt=null,zn=null,gs=!1,ro=!1,No=!1,xr=0,Pi=0,Bo=null,xs=0;function bn(){throw Error(u(321))}function ia(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Di(e[n],t[n]))return!1;return!0}function yr(e,t,n,l,o,s){return dl=s,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=e===null||e.memoizedState===null?b:f,No=!1,s=n(l,o),No=!1,ro&&(s=Hd(t,n,l,o)),Vc(e),s}function Vc(e){_.H=v;var t=Yt!==null&&Yt.next!==null;if(dl=0,zn=Yt=ht=null,gs=!1,Pi=0,Bo=null,t)throw Error(u(300));e===null||Re||(e=e.dependencies,e!==null&&za(e)&&(Re=!0))}function Hd(e,t,n,l){ht=e;var o=0;do{if(ro&&(Bo=null),Pi=0,ro=!1,25<=o)throw Error(u(301));if(o+=1,zn=Yt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}_.H=S,s=t(n,l)}while(ro);return s}function Ru(){var e=_.H,t=e.useState()[0];return t=typeof t.then=="function"?br(t):t,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(ht.flags|=1024),t}function Wc(){var e=xr!==0;return xr=0,e}function ys(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Jr(e){if(gs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}gs=!1}dl=0,zn=Yt=ht=null,ro=!1,Pi=xr=0,Bo=null}function Si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?ht.memoizedState=zn=e:zn=zn.next=e,zn}function kn(){if(Yt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var t=zn===null?ht.memoizedState:zn.next;if(t!==null)zn=t,Yt=e;else{if(e===null)throw ht.alternate===null?Error(u(467)):Error(u(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},zn===null?ht.memoizedState=zn=e:zn=zn.next=e}return zn}function co(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function br(e){var t=Pi;return Pi+=1,Bo===null&&(Bo=[]),e=Pd(Bo,e,t),t=ht,(zn===null?t.memoizedState:zn.next)===null&&(t=t.alternate,_.H=t===null||t.memoizedState===null?b:f),e}function bs(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return br(e);if(e.$$typeof===K)return nn(e)}throw Error(u(438,String(e)))}function $c(e){var t=null,n=ht.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=ht.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=co(),ht.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=ue;return t.index++,n}function Nl(e,t){return typeof t=="function"?t(e):t}function vs(e){var t=kn();return ec(t,Yt,e)}function ec(e,t,n){var l=e.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=n;var o=e.baseQueue,s=l.pending;if(s!==null){if(o!==null){var h=o.next;o.next=s.next,s.next=h}t.baseQueue=o=s,l.pending=null}if(s=e.baseState,o===null)e.memoizedState=s;else{t=o.next;var j=h=null,B=null,ne=t,xe=!1;do{var Se=ne.lane&-536870913;if(Se!==ne.lane?(Et&Se)===Se:(dl&Se)===Se){var ae=ne.revertLane;if(ae===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Se===Ro&&(xe=!0);else if((dl&ae)===ae){ne=ne.next,ae===Ro&&(xe=!0);continue}else Se={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},B===null?(j=B=Se,h=s):B=B.next=Se,ht.lanes|=ae,Ds|=ae;Se=ne.action,No&&n(s,Se),s=ne.hasEagerState?ne.eagerState:n(s,Se)}else ae={lane:Se,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},B===null?(j=B=ae,h=s):B=B.next=ae,ht.lanes|=Se,Ds|=Se;ne=ne.next}while(ne!==null&&ne!==t);if(B===null?h=s:B.next=j,!Di(s,e.memoizedState)&&(Re=!0,xe&&(n=ka,n!==null)))throw n;e.memoizedState=s,e.baseState=h,e.baseQueue=B,l.lastRenderedState=s}return o===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function tc(e){var t=kn(),n=t.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=e;var l=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do s=e(s,h.action),h=h.next;while(h!==o);Di(s,t.memoizedState)||(Re=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,l]}function Fc(e,t,n){var l=ht,o=kn(),s=Pt;if(s){if(n===void 0)throw Error(u(407));n=n()}else n=t();var h=!Di((Yt||o).memoizedState,n);if(h&&(o.memoizedState=n,Re=!0),o=o.queue,Sr(Ss.bind(null,l,o,e),[e]),o.getSnapshot!==t||h||zn!==null&&zn.memoizedState.tag&1){if(l.flags|=2048,Uo(9,{destroy:void 0},nc.bind(null,l,o,n,t),null),fn===null)throw Error(u(349));s||(dl&127)!==0||ms(l,t,n)}return n}function ms(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ht.updateQueue,t===null?(t=co(),ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function nc(e,t,n,l){t.value=n,t.getSnapshot=l,uo(t)&&Mo(e)}function Ss(e,t,n){return n(function(){uo(t)&&Mo(e)})}function uo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Di(e,n)}catch{return!0}}function Mo(e){var t=Gl(e,2);t!==null&&xl(t,e,2)}function vr(e){var t=Si();if(typeof e=="function"){var n=e;if(e=n(),No){xi(!0);try{n()}finally{xi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:e},t}function ic(e,t,n,l){return e.baseState=n,ec(e,Yt,typeof l=="function"?l:Nl)}function Yc(e,t,n,l,o){if(r(e))throw Error(u(485));if(e=t.action,e!==null){var s={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){s.listeners.push(h)}};_.T!==null?n(!0):s.isTransition=!1,l(s),n=t.pending,n===null?(s.next=t.pending=s,ui(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ui(e,t){var n=t.action,l=t.payload,o=e.state;if(t.isTransition){var s=_.T,h={};_.T=h;try{var j=n(o,l),B=_.S;B!==null&&B(h,j),Lc(e,t,j)}catch(ne){Xc(e,t,ne)}finally{s!==null&&h.types!==null&&(s.types=h.types),_.T=s}}else try{s=n(o,l),Lc(e,t,s)}catch(ne){Xc(e,t,ne)}}function Lc(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Ed(e,t,l)},function(l){return Xc(e,t,l)}):Ed(e,t,n)}function Ed(e,t,n){t.status="fulfilled",t.value=n,Gc(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ui(e,n)))}function Xc(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Gc(t),t=t.next;while(t!==l)}e.action=null}function Gc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qc(e,t){return t}function mr(e,t){if(Pt){var n=fn.formState;if(n!==null){e:{var l=ht;if(Pt){if(Lt){t:{for(var o=Lt,s=ol;o.nodeType!==8;){if(!s){o=null;break t}if(o=aa(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){Lt=aa(o.nextSibling),l=o.data==="F!";break e}}ql(l)}l=!1}l&&(t=n[0])}}return n=Si(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:t},n.queue=l,n=Le.bind(null,ht,l),l.dispatch=n,l=vr(!1),s=a.bind(null,ht,!1,l.queue),l=Si(),o={state:t,dispatch:null,action:e,pending:null},l.queue=o,n=Yc.bind(null,ht,o,s,n),o.dispatch=n,l.memoizedState=e,[t,n,!1]}function la(e){var t=kn();return Zc(t,Yt,e)}function Zc(e,t,n){if(t=ec(e,t,qc)[0],e=vs(Nl)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=br(t)}catch(h){throw h===Ja?us:h}else l=t;t=kn();var o=t.queue,s=o.dispatch;return n!==t.memoizedState&&(ht.flags|=2048,Uo(9,{destroy:void 0},ws.bind(null,o,n),null)),[l,s,e]}function ws(e,t){e.action=t}function Aa(e){var t=kn(),n=Yt;if(n!==null)return Zc(t,n,e);kn(),t=t.memoizedState,n=kn();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function Uo(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=ht.updateQueue,t===null&&(t=co(),ht.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function Qc(){return kn().memoizedState}function Zn(e,t,n,l){var o=Si();ht.flags|=e,o.memoizedState=Uo(1|t,{destroy:void 0},n,l===void 0?null:l)}function Na(e,t,n,l){var o=kn();l=l===void 0?null:l;var s=o.memoizedState.inst;Yt!==null&&l!==null&&ia(l,Yt.memoizedState.deps)?o.memoizedState=Uo(t,s,n,l):(ht.flags|=e,o.memoizedState=Uo(1|t,s,n,l))}function js(e,t){Zn(8390656,8,e,t)}function Sr(e,t){Na(2048,8,e,t)}function Kc(e){ht.flags|=4;var t=ht.updateQueue;if(t===null)t=co(),ht.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function lc(e){var t=kn().memoizedState;return Kc({ref:t,nextImpl:e}),function(){if((Kt&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function Ts(e,t){return Na(4,2,e,t)}function Id(e,t){return Na(4,4,e,t)}function Cs(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vd(e,t,n){n=n!=null?n.concat([e]):null,Na(4,4,Cs.bind(null,t,e),n)}function ac(){}function oc(e,t){var n=kn();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&ia(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function Wd(e,t){var n=kn();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&ia(t,l[1]))return l[0];if(l=e(),No){xi(!0);try{e()}finally{xi(!1)}}return n.memoizedState=[l,t],l}function Jc(e,t,n){return n===void 0||(dl&1073741824)!==0&&(Et&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=ip(),ht.lanes|=e,Ds|=e,n)}function ed(e,t,n,l){return Di(n,t)?n:ta.current!==null?(e=Jc(e,n,l),Di(e,t)||(Re=!0),e):(dl&42)===0||(dl&1073741824)!==0&&(Et&261930)===0?(Re=!0,e.memoizedState=n):(e=ip(),ht.lanes|=e,Ds|=e,t)}function sc(e,t,n,l,o){var s=P.p;P.p=s!==0&&8>s?s:8;var h=_.T,j={};_.T=j,a(e,!1,t,n);try{var B=o(),ne=_.S;if(ne!==null&&ne(j,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var xe=Hc(B,l);jr(e,t,xe,Pl(e))}else jr(e,t,l,Pl(e))}catch(Se){jr(e,t,{then:function(){},status:"rejected",reason:Se},Pl())}finally{P.p=s,h!==null&&j.types!==null&&(h.types=j.types),_.T=h}}function td(){}function nd(e,t,n,l){if(e.tag!==5)throw Error(u(476));var o=id(e).queue;sc(e,o,t,F,n===null?td:function(){return zs(e),n(l)})}function id(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:F},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function zs(e){var t=id(e);t.next===null&&(t=e.alternate.memoizedState),jr(e,t.next.queue,{},Pl())}function fo(){return nn(vd)}function wr(){return kn().memoizedState}function rc(){return kn().memoizedState}function ld(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Pl();e=no(n);var l=io(t,e,n);l!==null&&(xl(l,t,n),Ra(l,t,n)),t={cache:Ga()},e.payload=t;return}t=t.return}}function $d(e,t,n){var l=Pl();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},r(e)?p(t,n):(n=Vr(e,t,n,l),n!==null&&(xl(n,e,l),x(n,t,l)))}function Le(e,t,n){var l=Pl();jr(e,t,n,l)}function jr(e,t,n,l){var o={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(r(e))p(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var h=t.lastRenderedState,j=s(h,n);if(o.hasEagerState=!0,o.eagerState=j,Di(j,h))return dr(e,t,o,0),fn===null&&cr(),!1}catch{}finally{}if(n=Vr(e,t,o,l),n!==null)return xl(n,e,l),x(n,t,l),!0}return!1}function a(e,t,n,l){if(l={lane:2,revertLane:qu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},r(e)){if(t)throw Error(u(479))}else t=Vr(e,n,l,2),t!==null&&xl(t,e,2)}function r(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function p(e,t){ro=gs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function x(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,Vs(e,n)}}var v={readContext:nn,use:bs,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useLayoutEffect:bn,useInsertionEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useSyncExternalStore:bn,useId:bn,useHostTransitionStatus:bn,useFormState:bn,useActionState:bn,useOptimistic:bn,useMemoCache:bn,useCacheRefresh:bn};v.useEffectEvent=bn;var b={readContext:nn,use:bs,useCallback:function(e,t){return Si().memoizedState=[e,t===void 0?null:t],e},useContext:nn,useEffect:js,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Zn(4194308,4,Cs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zn(4194308,4,e,t)},useInsertionEffect:function(e,t){Zn(4,2,e,t)},useMemo:function(e,t){var n=Si();t=t===void 0?null:t;var l=e();if(No){xi(!0);try{e()}finally{xi(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=Si();if(n!==void 0){var o=n(t);if(No){xi(!0);try{n(t)}finally{xi(!1)}}}else o=t;return l.memoizedState=l.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},l.queue=e,e=e.dispatch=$d.bind(null,ht,e),[l.memoizedState,e]},useRef:function(e){var t=Si();return e={current:e},t.memoizedState=e},useState:function(e){e=vr(e);var t=e.queue,n=Le.bind(null,ht,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ac,useDeferredValue:function(e,t){var n=Si();return Jc(n,e,t)},useTransition:function(){var e=vr(!1);return e=sc.bind(null,ht,e.queue,!0,!1),Si().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=ht,o=Si();if(Pt){if(n===void 0)throw Error(u(407));n=n()}else{if(n=t(),fn===null)throw Error(u(349));(Et&127)!==0||ms(l,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,js(Ss.bind(null,l,s,e),[e]),l.flags|=2048,Uo(9,{destroy:void 0},nc.bind(null,l,s,n,t),null),n},useId:function(){var e=Si(),t=fn.identifierPrefix;if(Pt){var n=Je,l=qi;n=(l&~(1<<32-we(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=xr++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=xs++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:fo,useFormState:mr,useActionState:mr,useOptimistic:function(e){var t=Si();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=a.bind(null,ht,!0,n),n.dispatch=t,[e,t]},useMemoCache:$c,useCacheRefresh:function(){return Si().memoizedState=ld.bind(null,ht)},useEffectEvent:function(e){var t=Si(),n={impl:e};return t.memoizedState=n,function(){if((Kt&2)!==0)throw Error(u(440));return n.impl.apply(void 0,arguments)}}},f={readContext:nn,use:bs,useCallback:oc,useContext:nn,useEffect:Sr,useImperativeHandle:Vd,useInsertionEffect:Ts,useLayoutEffect:Id,useMemo:Wd,useReducer:vs,useRef:Qc,useState:function(){return vs(Nl)},useDebugValue:ac,useDeferredValue:function(e,t){var n=kn();return ed(n,Yt.memoizedState,e,t)},useTransition:function(){var e=vs(Nl)[0],t=kn().memoizedState;return[typeof e=="boolean"?e:br(e),t]},useSyncExternalStore:Fc,useId:wr,useHostTransitionStatus:fo,useFormState:la,useActionState:la,useOptimistic:function(e,t){var n=kn();return ic(n,Yt,e,t)},useMemoCache:$c,useCacheRefresh:rc};f.useEffectEvent=lc;var S={readContext:nn,use:bs,useCallback:oc,useContext:nn,useEffect:Sr,useImperativeHandle:Vd,useInsertionEffect:Ts,useLayoutEffect:Id,useMemo:Wd,useReducer:tc,useRef:Qc,useState:function(){return tc(Nl)},useDebugValue:ac,useDeferredValue:function(e,t){var n=kn();return Yt===null?Jc(n,e,t):ed(n,Yt.memoizedState,e,t)},useTransition:function(){var e=tc(Nl)[0],t=kn().memoizedState;return[typeof e=="boolean"?e:br(e),t]},useSyncExternalStore:Fc,useId:wr,useHostTransitionStatus:fo,useFormState:Aa,useActionState:Aa,useOptimistic:function(e,t){var n=kn();return Yt!==null?ic(n,Yt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$c,useCacheRefresh:rc};S.useEffectEvent=lc;function T(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var z={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Pl(),o=no(l);o.payload=t,n!=null&&(o.callback=n),t=io(e,o,l),t!==null&&(xl(t,e,l),Ra(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Pl(),o=no(l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=io(e,o,l),t!==null&&(xl(t,e,l),Ra(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pl(),l=no(n);l.tag=2,t!=null&&(l.callback=t),t=io(e,l,n),t!==null&&(xl(t,e,n),Ra(t,e,n))}};function I(e,t,n,l,o,s,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,s,h):t.prototype&&t.prototype.isPureReactComponent?!$t(n,l)||!$t(o,s):!0}function Q(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&z.enqueueReplaceState(t,t.state,null)}function oe(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=je({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function L(e){sr(e)}function ee(e){console.error(e)}function V(e){sr(e)}function Z(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function G(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function pe(e,t,n){return n=no(n),n.tag=3,n.payload={element:null},n.callback=function(){Z(e,t)},n}function ke(e){return e=no(e),e.tag=3,e}function Te(e,t,n,l){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=l.value;e.payload=function(){return o(s)},e.callback=function(){G(t,n,l)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){G(t,n,l),typeof o!="function"&&(As===null?As=new Set([this]):As.add(this));var j=l.stack;this.componentDidCatch(l.value,{componentStack:j!==null?j:""})})}function se(e,t,n,l,o){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Ca(t,n,o,!0),n=En.current,n!==null){switch(n.tag){case 31:case 13:return di===null?Kd():n.alternate===null&&In===0&&(In=3),n.flags&=-257,n.flags|=65536,n.lanes=o,l===Gr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),Lu(e,l,o)),!1;case 22:return n.flags|=65536,l===Gr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),Lu(e,l,o)),!1}throw Error(u(435,n.tag))}return Lu(e,l,o),Kd(),!1}if(Pt)return t=En.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,l!==ss&&(e=Error(u(422),{cause:l}),Zl(Li(e,n)))):(l!==ss&&(t=Error(u(423),{cause:l}),Zl(Li(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,l=Li(l,n),o=pe(e.stateNode,l,o),Da(e,o),In!==4&&(In=2)),!1;var s=Error(u(520),{cause:l});if(s=Li(s,n),ud===null?ud=[s]:ud.push(s),In!==4&&(In=2),t===null)return!0;l=Li(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=pe(n.stateNode,l,e),Da(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(As===null||!As.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=ke(o),Te(o,e,n,l),Da(n,o),!1}n=n.return}while(n!==null);return!1}var _e=Error(u(461)),Re=!1;function M(e,t,n,l){t.child=e===null?Od(t,null,n,l):Do(t,e.child,n,l)}function N(e,t,n,l,o){n=n.render;var s=t.ref;if("ref"in l){var h={};for(var j in l)j!=="ref"&&(h[j]=l[j])}else h=l;return Ql(t),l=yr(e,t,n,h,s,o),j=Wc(),e!==null&&!Re?(ys(e,t,o),Po(e,t,o)):(Pt&&j&&ls(t),t.flags|=1,M(e,t,l,o),t.child)}function fe(e,t,n,l,o){if(e===null){var s=n.type;return typeof s=="function"&&!Mi(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,ie(e,t,s,l,o)):(e=Co(n.type,null,l,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Au(e,o)){var h=s.memoizedProps;if(n=n.compare,n=n!==null?n:$t,n(h,l)&&e.ref===t.ref)return Po(e,t,o)}return t.flags|=1,e=ll(s,l),e.ref=t.ref,e.return=t,t.child=e}function ie(e,t,n,l,o){if(e!==null){var s=e.memoizedProps;if($t(s,l)&&e.ref===t.ref)if(Re=!1,t.pendingProps=l=s,Au(e,o))(e.flags&131072)!==0&&(Re=!0);else return t.lanes=e.lanes,Po(e,t,o)}return Qe(e,t,n,l,o)}function De(e,t,n,l){var o=l.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;l=o&~s}else l=0,t.child=null;return qe(e,t,s,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ka(t,s!==null?s.cachePool:null),s!==null?gr(t,s):ps(),Kr(t);else return l=t.lanes=536870912,qe(e,t,s!==null?s.baseLanes|n:n,n,l)}else s!==null?(Ka(t,s.cachePool),gr(t,s),so(),t.memoizedState=null):(e!==null&&Ka(t,null),ps(),so());return M(e,t,o,n),t.child}function Ue(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qe(e,t,n,l,o){var s=Qa();return s=s===null?null:{parent:Tn._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&Ka(t,null),ps(),Kr(t),e!==null&&Ca(e,t,l,!0),t.childLanes=o,null}function We(e,t){return t=ul({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function rt(e,t,n){return Do(t,e.child,null,n),e=We(t,t.pendingProps),e.flags|=2,Qi(t),t.memoizedState=null,e}function et(e,t,n){var l=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Pt){if(l.mode==="hidden")return e=We(t,l),t.lanes=536870912,Ue(null,e);if(Ui(t),(e=Lt)?(e=Ep(e,ol),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:mi!==null?{id:qi,overflow:Je}:null,retryLane:536870912,hydrationErrors:null},n=al(e),n.return=t,t.child=n,Wn=t,Lt=null)):e=null,e===null)throw ql(t);return t.lanes=536870912,null}return We(t,l)}var s=e.memoizedState;if(s!==null){var h=s.dehydrated;if(Ui(t),o)if(t.flags&256)t.flags&=-257,t=rt(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(Re||Ca(e,t,n,!1),o=(n&e.childLanes)!==0,Re||o){if(l=fn,l!==null&&(h=Oe(l,n),h!==0&&h!==s.retryLane))throw s.retryLane=h,Gl(e,h),xl(l,e,h),_e;Kd(),t=rt(e,t,n)}else e=s.treeContext,Lt=aa(h.nextSibling),Wn=t,Pt=!0,zl=null,ol=!1,e!==null&&os(t,e),t=We(t,l),t.flags|=4096;return t}return e=ll(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function gt(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(u(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Qe(e,t,n,l,o){return Ql(t),n=yr(e,t,n,l,void 0,o),l=Wc(),e!==null&&!Re?(ys(e,t,o),Po(e,t,o)):(Pt&&l&&ls(t),t.flags|=1,M(e,t,n,o),t.child)}function Ne(e,t,n,l,o,s){return Ql(t),t.updateQueue=null,n=Hd(t,l,n,o),Vc(e),l=Wc(),e!==null&&!Re?(ys(e,t,s),Po(e,t,s)):(Pt&&l&&ls(t),t.flags|=1,M(e,t,n,s),t.child)}function st(e,t,n,l,o){if(Ql(t),t.stateNode===null){var s=Cl,h=n.contextType;typeof h=="object"&&h!==null&&(s=nn(h)),s=new n(l,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=z,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=l,s.state=t.memoizedState,s.refs={},Ec(t),h=n.contextType,s.context=typeof h=="object"&&h!==null?nn(h):Cl,s.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(T(t,n,h,l),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(h=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),h!==s.state&&z.enqueueReplaceState(s,s.state,null),ea(t,l,s,o),ao(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){s=t.stateNode;var j=t.memoizedProps,B=oe(n,j);s.props=B;var ne=s.context,xe=n.contextType;h=Cl,typeof xe=="object"&&xe!==null&&(h=nn(xe));var Se=n.getDerivedStateFromProps;xe=typeof Se=="function"||typeof s.getSnapshotBeforeUpdate=="function",j=t.pendingProps!==j,xe||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(j||ne!==h)&&Q(t,s,l,h),to=!1;var ae=t.memoizedState;s.state=ae,ea(t,l,s,o),ao(),ne=t.memoizedState,j||ae!==ne||to?(typeof Se=="function"&&(T(t,n,Se,l),ne=t.memoizedState),(B=to||I(t,n,B,l,ae,ne,h))?(xe||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=ne),s.props=l,s.state=ne,s.context=h,l=B):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{s=t.stateNode,Ic(e,t),h=t.memoizedProps,xe=oe(n,h),s.props=xe,Se=t.pendingProps,ae=s.context,ne=n.contextType,B=Cl,typeof ne=="object"&&ne!==null&&(B=nn(ne)),j=n.getDerivedStateFromProps,(ne=typeof j=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(h!==Se||ae!==B)&&Q(t,s,l,B),to=!1,ae=t.memoizedState,s.state=ae,ea(t,l,s,o),ao();var ce=t.memoizedState;h!==Se||ae!==ce||to||e!==null&&e.dependencies!==null&&za(e.dependencies)?(typeof j=="function"&&(T(t,n,j,l),ce=t.memoizedState),(xe=to||I(t,n,xe,l,ae,ce,B)||e!==null&&e.dependencies!==null&&za(e.dependencies))?(ne||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(l,ce,B),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(l,ce,B)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&ae===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&ae===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ce),s.props=l,s.state=ce,s.context=B,l=xe):(typeof s.componentDidUpdate!="function"||h===e.memoizedProps&&ae===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&ae===e.memoizedState||(t.flags|=1024),l=!1)}return s=l,gt(e,t),l=(t.flags&128)!==0,s||l?(s=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&l?(t.child=Do(t,e.child,null,o),t.child=Do(t,null,n,o)):M(e,t,n,o),t.memoizedState=s.state,e=t.child):e=Po(e,t,o),e}function Xt(e,t,n,l){return sl(),t.flags|=256,M(e,t,n,l),t.child}var Gt={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ln(e){return{baseLanes:e,cachePool:Xr()}}function vn(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Ul),e}function mn(e,t,n){var l=t.pendingProps,o=!1,s=(t.flags&128)!==0,h;if((h=s)||(h=e!==null&&e.memoizedState===null?!1:(Cn.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Pt){if(o?Zi(t):so(),(e=Lt)?(e=Ep(e,ol),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:mi!==null?{id:qi,overflow:Je}:null,retryLane:536870912,hydrationErrors:null},n=al(e),n.return=t,t.child=n,Wn=t,Lt=null)):e=null,e===null)throw ql(t);return cf(e)?t.lanes=32:t.lanes=536870912,null}var j=l.children;return l=l.fallback,o?(so(),o=t.mode,j=ul({mode:"hidden",children:j},o),l=qn(l,o,n,null),j.return=t,l.return=t,j.sibling=l,t.child=j,l=t.child,l.memoizedState=ln(n),l.childLanes=vn(e,h,n),t.memoizedState=Gt,Ue(null,l)):(Zi(t),xt(t,j))}var B=e.memoizedState;if(B!==null&&(j=B.dehydrated,j!==null)){if(s)t.flags&256?(Zi(t),t.flags&=-257,t=Bl(e,t,n)):t.memoizedState!==null?(so(),t.child=e.child,t.flags|=128,t=null):(so(),j=l.fallback,o=t.mode,l=ul({mode:"visible",children:l.children},o),j=qn(j,o,n,null),j.flags|=2,l.return=t,j.return=t,l.sibling=j,t.child=l,Do(t,e.child,null,n),l=t.child,l.memoizedState=ln(n),l.childLanes=vn(e,h,n),t.memoizedState=Gt,t=Ue(null,l));else if(Zi(t),cf(j)){if(h=j.nextSibling&&j.nextSibling.dataset,h)var ne=h.dgst;h=ne,l=Error(u(419)),l.stack="",l.digest=h,Zl({value:l,source:null,stack:null}),t=Bl(e,t,n)}else if(Re||Ca(e,t,n,!1),h=(n&e.childLanes)!==0,Re||h){if(h=fn,h!==null&&(l=Oe(h,n),l!==0&&l!==B.retryLane))throw B.retryLane=l,Gl(e,l),xl(h,e,l),_e;rf(j)||Kd(),t=Bl(e,t,n)}else rf(j)?(t.flags|=192,t.child=e.child,t=null):(e=B.treeContext,Lt=aa(j.nextSibling),Wn=t,Pt=!0,zl=null,ol=!1,e!==null&&os(t,e),t=xt(t,l.children),t.flags|=4096);return t}return o?(so(),j=l.fallback,o=t.mode,B=e.child,ne=B.sibling,l=ll(B,{mode:"hidden",children:l.children}),l.subtreeFlags=B.subtreeFlags&65011712,ne!==null?j=ll(ne,j):(j=qn(j,o,n,null),j.flags|=2),j.return=t,l.return=t,l.sibling=j,t.child=l,Ue(null,l),l=t.child,j=e.child.memoizedState,j===null?j=ln(n):(o=j.cachePool,o!==null?(B=Tn._currentValue,o=o.parent!==B?{parent:B,pool:B}:o):o=Xr(),j={baseLanes:j.baseLanes|n,cachePool:o}),l.memoizedState=j,l.childLanes=vn(e,h,n),t.memoizedState=Gt,Ue(e.child,l)):(Zi(t),n=e.child,e=n.sibling,n=ll(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function xt(e,t){return t=ul({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ul(e,t){return e=si(22,e,null,t),e.lanes=0,e}function Bl(e,t,n){return Do(t,e.child,null,n),e=xt(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ki(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),ko(e.return,t,n)}function Du(e,t,n,l,o,s){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:o,treeForkCount:s}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=n,h.tailMode=o,h.treeForkCount=s)}function Mf(e,t,n){var l=t.pendingProps,o=l.revealOrder,s=l.tail;l=l.children;var h=Cn.current,j=(h&2)!==0;if(j?(h=h&1|2,t.flags|=128):h&=1,le(Cn,h),M(e,t,l,n),l=Pt?Ta:0,!j&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ki(e,n,t);else if(e.tag===19)Ki(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&na(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Du(t,!1,o,n,s,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&na(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Du(t,!0,n,null,s,l);break;case"together":Du(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Po(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ds|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ca(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,n=ll(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ll(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Au(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&za(e)))}function Ah(e,t,n){switch(t.tag){case 3:Bt(t,t.stateNode.containerInfo),La(t,Tn,e.memoizedState.cache),sl();break;case 27:case 5:Jt(t);break;case 4:Bt(t,t.stateNode.containerInfo);break;case 10:La(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Ui(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Zi(t),t.flags|=128,null):(n&t.child.childLanes)!==0?mn(e,t,n):(Zi(t),e=Po(e,t,n),e!==null?e.sibling:null);Zi(t);break;case 19:var o=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Ca(e,t,n,!1),l=(n&t.childLanes)!==0),o){if(l)return Mf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),le(Cn,Cn.current),l)break;return null;case 22:return t.lanes=0,De(e,t,n,t.pendingProps);case 24:La(t,Tn,e.memoizedState.cache)}return Po(e,t,n)}function Uf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Re=!0;else{if(!Au(e,n)&&(t.flags&128)===0)return Re=!1,Ah(e,t,n);Re=(e.flags&131072)!==0}else Re=!1,Pt&&(t.flags&1048576)!==0&&Ad(t,Ta,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=eo(t.elementType),t.type=e,typeof e=="function")Mi(e)?(l=oe(e,l),t.tag=1,t=st(null,t,e,l,n)):(t.tag=0,t=Qe(null,t,e,l,n));else{if(e!=null){var o=e.$$typeof;if(o===lt){t.tag=11,t=N(null,t,e,l,n);break e}else if(o===k){t.tag=14,t=fe(null,t,e,l,n);break e}}throw t=Xe(e)||e,Error(u(306,t,""))}}return t;case 0:return Qe(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,o=oe(l,t.pendingProps),st(e,t,l,o,n);case 3:e:{if(Bt(t,t.stateNode.containerInfo),e===null)throw Error(u(387));l=t.pendingProps;var s=t.memoizedState;o=s.element,Ic(e,t),ea(t,l,null,n);var h=t.memoizedState;if(l=h.cache,La(t,Tn,l),l!==s.cache&&Dl(t,[Tn],n,!0),ao(),l=h.element,s.isDehydrated)if(s={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Xt(e,t,l,n);break e}else if(l!==o){o=Li(Error(u(424)),t),Zl(o),t=Xt(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Lt=aa(e.firstChild),Wn=t,Pt=!0,zl=null,ol=!0,n=Od(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(sl(),l===o){t=Po(e,t,n);break e}M(e,t,l,n)}t=t.child}return t;case 26:return gt(e,t),e===null?(n=Yp(t.type,null,t.pendingProps,null))?t.memoizedState=n:Pt||(n=t.type,e=t.pendingProps,l=au(at.current).createElement(n),l[On]=t,l[ei]=e,wi(l,n,e),wn(l),t.stateNode=l):t.memoizedState=Yp(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Jt(t),e===null&&Pt&&(l=t.stateNode=Wp(t.type,t.pendingProps,at.current),Wn=t,ol=!0,o=Lt,Us(t.type)?(df=o,Lt=aa(l.firstChild)):Lt=o),M(e,t,t.pendingProps.children,n),gt(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Pt&&((o=l=Lt)&&(l=og(l,t.type,t.pendingProps,ol),l!==null?(t.stateNode=l,Wn=t,Lt=aa(l.firstChild),ol=!1,o=!0):o=!1),o||ql(t)),Jt(t),o=t.type,s=t.pendingProps,h=e!==null?e.memoizedProps:null,l=s.children,af(o,s)?l=null:h!==null&&af(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=yr(e,t,Ru,null,null,n),vd._currentValue=o),gt(e,t),M(e,t,l,n),t.child;case 6:return e===null&&Pt&&((e=n=Lt)&&(n=sg(n,t.pendingProps,ol),n!==null?(t.stateNode=n,Wn=t,Lt=null,e=!0):e=!1),e||ql(t)),null;case 13:return mn(e,t,n);case 4:return Bt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Do(t,null,l,n):M(e,t,l,n),t.child;case 11:return N(e,t,t.type,t.pendingProps,n);case 7:return M(e,t,t.pendingProps,n),t.child;case 8:return M(e,t,t.pendingProps.children,n),t.child;case 12:return M(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,La(t,t.type,l.value),M(e,t,l.children,n),t.child;case 9:return o=t.type._context,l=t.pendingProps.children,Ql(t),o=nn(o),l=l(o),t.flags|=1,M(e,t,l,n),t.child;case 14:return fe(e,t,t.type,t.pendingProps,n);case 15:return ie(e,t,t.type,t.pendingProps,n);case 19:return Mf(e,t,n);case 31:return et(e,t,n);case 22:return De(e,t,n,t.pendingProps);case 24:return Ql(t),l=nn(Tn),e===null?(o=Qa(),o===null&&(o=fn,s=Ga(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:l,cache:o},Ec(t),La(t,Tn,o)):((e.lanes&n)!==0&&(Ic(e,t),ea(t,null,null,n),ao()),o=e.memoizedState,s=t.memoizedState,o.parent!==l?(o={parent:l,cache:l},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),La(t,Tn,l)):(l=s.cache,La(t,Tn,l),l!==o.cache&&Dl(t,[Tn],n,!0))),M(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function _o(e){e.flags|=4}function Nu(e,t,n,l,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(sp())e.flags|=8192;else throw ci=Gr,ds}else e.flags&=-16777217}function Pf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Zp(t))if(sp())e.flags|=8192;else throw ci=Gr,ds}function Fd(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?da():536870912,e.lanes|=t,fc|=t)}function ad(e,t){if(!Pt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Sn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags&65011712,l|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,l|=o.subtreeFlags,l|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Nh(e,t,n){var l=t.pendingProps;switch(as(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(t),null;case 1:return Sn(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Rl(Tn),Ke(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kl(t)?_o(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,rs())),Sn(t),null;case 26:var o=t.type,s=t.memoizedState;return e===null?(_o(t),s!==null?(Sn(t),Pf(t,s)):(Sn(t),Nu(t,o,null,l,n))):s?s!==e.memoizedState?(_o(t),Sn(t),Pf(t,s)):(Sn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&_o(t),Sn(t),Nu(t,o,e,l,n)),null;case 27:if(Hi(t),n=at.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_o(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return Sn(t),null}e=me.current,kl(t)?Wr(t):(e=Wp(o,l,n),t.stateNode=e,_o(t))}return Sn(t),null;case 5:if(Hi(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_o(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return Sn(t),null}if(s=me.current,kl(t))Wr(t);else{var h=au(at.current);switch(s){case 1:s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=h.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?s.multiple=!0:l.size&&(s.size=l.size);break;default:s=typeof l.is=="string"?h.createElement(o,{is:l.is}):h.createElement(o)}}s[On]=t,s[ei]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=s;e:switch(wi(s,o,l),o){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&_o(t)}}return Sn(t),Nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&_o(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(u(166));if(e=at.current,kl(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,o=Wn,o!==null)switch(o.tag){case 27:case 5:l=o.memoizedProps}e[On]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Np(e.nodeValue,n)),e||ql(t,!0)}else e=au(e).createTextNode(l),e[On]=t,t.stateNode=e}return Sn(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=kl(t),n!==null){if(e===null){if(!l)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[On]=t}else sl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Sn(t),e=!1}else n=rs(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Qi(t),t):(Qi(t),null);if((t.flags&128)!==0)throw Error(u(558))}return Sn(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=kl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!o)throw Error(u(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(u(317));o[On]=t}else sl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Sn(t),o=!1}else o=rs(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Qi(t),t):(Qi(t),null)}return Qi(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,o=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(o=l.alternate.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==o&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Fd(t,t.updateQueue),Sn(t),null);case 4:return Ke(),e===null&&Ju(t.stateNode.containerInfo),Sn(t),null;case 10:return Rl(t.type),Sn(t),null;case 19:if(H(Cn),l=t.memoizedState,l===null)return Sn(t),null;if(o=(t.flags&128)!==0,s=l.rendering,s===null)if(o)ad(l,!1);else{if(In!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=na(e),s!==null){for(t.flags|=128,ad(l,!1),e=s.updateQueue,t.updateQueue=e,Fd(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Yi(n,e),n=n.sibling;return le(Cn,Cn.current&1|2),Pt&&nt(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&gi()>qd&&(t.flags|=128,o=!0,ad(l,!1),t.lanes=4194304)}else{if(!o)if(e=na(s),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Fd(t,e),ad(l,!0),l.tail===null&&l.tailMode==="hidden"&&!s.alternate&&!Pt)return Sn(t),null}else 2*gi()-l.renderingStartTime>qd&&n!==536870912&&(t.flags|=128,o=!0,ad(l,!1),t.lanes=4194304);l.isBackwards?(s.sibling=t.child,t.child=s):(e=l.last,e!==null?e.sibling=s:t.child=s,l.last=s)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=gi(),e.sibling=null,n=Cn.current,le(Cn,o?n&1|2:n&1),Pt&&nt(t,l.treeForkCount),e):(Sn(t),null);case 22:case 23:return Qi(t),hs(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Sn(t),t.subtreeFlags&6&&(t.flags|=8192)):Sn(t),n=t.updateQueue,n!==null&&Fd(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&H(Za),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Rl(Tn),Sn(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Bh(e,t){switch(as(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rl(Tn),Ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Hi(t),null;case 31:if(t.memoizedState!==null){if(Qi(t),t.alternate===null)throw Error(u(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Cn),null;case 4:return Ke(),null;case 10:return Rl(t.type),null;case 22:case 23:return Qi(t),hs(),e!==null&&H(Za),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Rl(Tn),null;case 25:return null;default:return null}}function _f(e,t){switch(as(t),t.tag){case 3:Rl(Tn),Ke();break;case 26:case 27:case 5:Hi(t);break;case 4:Ke();break;case 31:t.memoizedState!==null&&Qi(t);break;case 13:Qi(t);break;case 19:H(Cn);break;case 10:Rl(t.type);break;case 22:case 23:Qi(t),hs(),e!==null&&H(Za);break;case 24:Rl(Tn)}}function od(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var o=l.next;n=o;do{if((n.tag&e)===e){l=void 0;var s=n.create,h=n.inst;l=s(),h.destroy=l}n=n.next}while(n!==o)}}catch(j){on(t,t.return,j)}}function ks(e,t,n){try{var l=t.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var s=o.next;l=s;do{if((l.tag&e)===e){var h=l.inst,j=h.destroy;if(j!==void 0){h.destroy=void 0,o=t;var B=n,ne=j;try{ne()}catch(xe){on(o,B,xe)}}}l=l.next}while(l!==s)}}catch(xe){on(t,t.return,xe)}}function Of(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ao(t,n)}catch(l){on(e,e.return,l)}}}function Hf(e,t,n){n.props=oe(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){on(e,t,l)}}function sd(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(o){on(e,t,o)}}function po(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(o){on(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){on(e,t,o)}else n.current=null}function Ef(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(o){on(e,e.return,o)}}function Bu(e,t,n){try{var l=e.stateNode;eg(l,e.type,n,t),l[ei]=t}catch(o){on(e,e.return,o)}}function If(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Us(e.type)||e.tag===4}function Mu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||If(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Us(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uu(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pt));else if(l!==4&&(l===27&&Us(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Uu(e,t,n),e=e.sibling;e!==null;)Uu(e,t,n),e=e.sibling}function Yd(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&Us(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Yd(e,t,n),e=e.sibling;e!==null;)Yd(e,t,n),e=e.sibling}function Vf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);wi(t,l,n),t[On]=e,t[ei]=n}catch(s){on(e,e.return,s)}}var Oo=!1,Yn=!1,Pu=!1,Wf=typeof WeakSet=="function"?WeakSet:Set,fi=null;function Mh(e,t){if(e=e.containerInfo,nf=fu,e=Pc(e),er(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var o=l.anchorOffset,s=l.focusNode;l=l.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var h=0,j=-1,B=-1,ne=0,xe=0,Se=e,ae=null;t:for(;;){for(var ce;Se!==n||o!==0&&Se.nodeType!==3||(j=h+o),Se!==s||l!==0&&Se.nodeType!==3||(B=h+l),Se.nodeType===3&&(h+=Se.nodeValue.length),(ce=Se.firstChild)!==null;)ae=Se,Se=ce;for(;;){if(Se===e)break t;if(ae===n&&++ne===o&&(j=h),ae===s&&++xe===l&&(B=h),(ce=Se.nextSibling)!==null)break;Se=ae,ae=Se.parentNode}Se=ce}n=j===-1||B===-1?null:{start:j,end:B}}else n=null}n=n||{start:0,end:0}}else n=null;for(lf={focusedElem:e,selectionRange:n},fu=!1,fi=t;fi!==null;)if(t=fi,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fi=e;else for(;fi!==null;){switch(t=fi,s=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&s!==null){e=void 0,n=t,o=s.memoizedProps,s=s.memoizedState,l=n.stateNode;try{var Fe=oe(n.type,o);e=l.getSnapshotBeforeUpdate(Fe,s),l.__reactInternalSnapshotBeforeUpdate=e}catch(dt){on(n,n.return,dt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)sf(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,fi=e;break}fi=t.return}}function $f(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Eo(e,n),l&4&&od(5,n);break;case 1:if(Eo(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){on(n,n.return,h)}else{var o=oe(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){on(n,n.return,h)}}l&64&&Of(n),l&512&&sd(n,n.return);break;case 3:if(Eo(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ao(e,t)}catch(h){on(n,n.return,h)}}break;case 27:t===null&&l&4&&Vf(n);case 26:case 5:Eo(e,n),t===null&&l&4&&Ef(n),l&512&&sd(n,n.return);break;case 12:Eo(e,n);break;case 31:Eo(e,n),l&4&&Lf(e,n);break;case 13:Eo(e,n),l&4&&Xf(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Wh.bind(null,n),rg(e,n))));break;case 22:if(l=n.memoizedState!==null||Oo,!l){t=t!==null&&t.memoizedState!==null||Yn,o=Oo;var s=Yn;Oo=l,(Yn=t)&&!s?Io(e,n,(n.subtreeFlags&8772)!==0):Eo(e,n),Oo=o,Yn=s}break;case 30:break;default:Eo(e,n)}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&pn(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rn=null,fl=!1;function Ho(e,t,n){for(n=n.child;n!==null;)Yf(e,t,n),n=n.sibling}function Yf(e,t,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Pn,n)}catch{}switch(n.tag){case 26:Yn||po(n,t),Ho(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Yn||po(n,t);var l=Rn,o=fl;Us(n.type)&&(Rn=n.stateNode,fl=!1),Ho(e,t,n),xd(n.stateNode),Rn=l,fl=o;break;case 5:Yn||po(n,t);case 6:if(l=Rn,o=fl,Rn=null,Ho(e,t,n),Rn=l,fl=o,Rn!==null)if(fl)try{(Rn.nodeType===9?Rn.body:Rn.nodeName==="HTML"?Rn.ownerDocument.body:Rn).removeChild(n.stateNode)}catch(s){on(n,t,s)}else try{Rn.removeChild(n.stateNode)}catch(s){on(n,t,s)}break;case 18:Rn!==null&&(fl?(e=Rn,Op(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),mc(e)):Op(Rn,n.stateNode));break;case 4:l=Rn,o=fl,Rn=n.stateNode.containerInfo,fl=!0,Ho(e,t,n),Rn=l,fl=o;break;case 0:case 11:case 14:case 15:ks(2,n,t),Yn||ks(4,n,t),Ho(e,t,n);break;case 1:Yn||(po(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Hf(n,t,l)),Ho(e,t,n);break;case 21:Ho(e,t,n);break;case 22:Yn=(l=Yn)||n.memoizedState!==null,Ho(e,t,n),Yn=l;break;default:Ho(e,t,n)}}function Lf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{mc(e)}catch(n){on(t,t.return,n)}}}function Xf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{mc(e)}catch(n){on(t,t.return,n)}}function Uh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Wf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Wf),t;default:throw Error(u(435,e.tag))}}function Ld(e,t){var n=Uh(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var o=$h.bind(null,e,l);l.then(o,o)}})}function pl(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var o=n[l],s=e,h=t,j=h;e:for(;j!==null;){switch(j.tag){case 27:if(Us(j.type)){Rn=j.stateNode,fl=!1;break e}break;case 5:Rn=j.stateNode,fl=!1;break e;case 3:case 4:Rn=j.stateNode.containerInfo,fl=!0;break e}j=j.return}if(Rn===null)throw Error(u(160));Yf(s,h,o),Rn=null,fl=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Gf(t,e),t=t.sibling}var Ba=null;function Gf(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pl(t,e),hl(e),l&4&&(ks(3,e,e.return),od(3,e),ks(5,e,e.return));break;case 1:pl(t,e),hl(e),l&512&&(Yn||n===null||po(n,n.return)),l&64&&Oo&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var o=Ba;if(pl(t,e),hl(e),l&512&&(Yn||n===null||po(n,n.return)),l&4){var s=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(l){case"title":s=o.getElementsByTagName("title")[0],(!s||s[go]||s[On]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(l),o.head.insertBefore(s,o.querySelector("head > title"))),wi(s,l,n),s[On]=e,wn(s),l=s;break e;case"link":var h=Gp("link","href",o).get(l+(n.href||""));if(h){for(var j=0;j<h.length;j++)if(s=h[j],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(j,1);break t}}s=o.createElement(l),wi(s,l,n),o.head.appendChild(s);break;case"meta":if(h=Gp("meta","content",o).get(l+(n.content||""))){for(j=0;j<h.length;j++)if(s=h[j],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(j,1);break t}}s=o.createElement(l),wi(s,l,n),o.head.appendChild(s);break;default:throw Error(u(468,l))}s[On]=e,wn(s),l=s}e.stateNode=l}else qp(o,e.type,e.stateNode);else e.stateNode=Xp(o,l,e.memoizedProps);else s!==l?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,l===null?qp(o,e.type,e.stateNode):Xp(o,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Bu(e,e.memoizedProps,n.memoizedProps)}break;case 27:pl(t,e),hl(e),l&512&&(Yn||n===null||po(n,n.return)),n!==null&&l&4&&Bu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(pl(t,e),hl(e),l&512&&(Yn||n===null||po(n,n.return)),e.flags&32){o=e.stateNode;try{hn(o,"")}catch(Fe){on(e,e.return,Fe)}}l&4&&e.stateNode!=null&&(o=e.memoizedProps,Bu(e,o,n!==null?n.memoizedProps:o)),l&1024&&(Pu=!0);break;case 6:if(pl(t,e),hl(e),l&4){if(e.stateNode===null)throw Error(u(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(Fe){on(e,e.return,Fe)}}break;case 3:if(ru=null,o=Ba,Ba=ou(t.containerInfo),pl(t,e),Ba=o,hl(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{mc(t.containerInfo)}catch(Fe){on(e,e.return,Fe)}Pu&&(Pu=!1,qf(e));break;case 4:l=Ba,Ba=ou(e.stateNode.containerInfo),pl(t,e),hl(e),Ba=l;break;case 12:pl(t,e),hl(e);break;case 31:pl(t,e),hl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ld(e,l)));break;case 13:pl(t,e),hl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Gd=gi()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ld(e,l)));break;case 22:o=e.memoizedState!==null;var B=n!==null&&n.memoizedState!==null,ne=Oo,xe=Yn;if(Oo=ne||o,Yn=xe||B,pl(t,e),Yn=xe,Oo=ne,hl(e),l&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||B||Oo||Yn||Tr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){B=n=t;try{if(s=B.stateNode,o)h=s.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{j=B.stateNode;var Se=B.memoizedProps.style,ae=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;j.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Fe){on(B,B.return,Fe)}}}else if(t.tag===6){if(n===null){B=t;try{B.stateNode.nodeValue=o?"":B.memoizedProps}catch(Fe){on(B,B.return,Fe)}}}else if(t.tag===18){if(n===null){B=t;try{var ce=B.stateNode;o?Hp(ce,!0):Hp(B.stateNode,!1)}catch(Fe){on(B,B.return,Fe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,Ld(e,n))));break;case 19:pl(t,e),hl(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ld(e,l)));break;case 30:break;case 21:break;default:pl(t,e),hl(e)}}function hl(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(If(l)){n=l;break}l=l.return}if(n==null)throw Error(u(160));switch(n.tag){case 27:var o=n.stateNode,s=Mu(e);Yd(e,s,o);break;case 5:var h=n.stateNode;n.flags&32&&(hn(h,""),n.flags&=-33);var j=Mu(e);Yd(e,j,h);break;case 3:case 4:var B=n.stateNode.containerInfo,ne=Mu(e);Uu(e,ne,B);break;default:throw Error(u(161))}}catch(xe){on(e,e.return,xe)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Eo(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$f(e,t.alternate,t),t=t.sibling}function Tr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ks(4,t,t.return),Tr(t);break;case 1:po(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Hf(t,t.return,n),Tr(t);break;case 27:xd(t.stateNode);case 26:case 5:po(t,t.return),Tr(t);break;case 22:t.memoizedState===null&&Tr(t);break;case 30:Tr(t);break;default:Tr(t)}e=e.sibling}}function Io(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,o=e,s=t,h=s.flags;switch(s.tag){case 0:case 11:case 15:Io(o,s,n),od(4,s);break;case 1:if(Io(o,s,n),l=s,o=l.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(ne){on(l,l.return,ne)}if(l=s,o=l.updateQueue,o!==null){var j=l.stateNode;try{var B=o.shared.hiddenCallbacks;if(B!==null)for(o.shared.hiddenCallbacks=null,o=0;o<B.length;o++)Qr(B[o],j)}catch(ne){on(l,l.return,ne)}}n&&h&64&&Of(s),sd(s,s.return);break;case 27:Vf(s);case 26:case 5:Io(o,s,n),n&&l===null&&h&4&&Ef(s),sd(s,s.return);break;case 12:Io(o,s,n);break;case 31:Io(o,s,n),n&&h&4&&Lf(o,s);break;case 13:Io(o,s,n),n&&h&4&&Xf(o,s);break;case 22:s.memoizedState===null&&Io(o,s,n),sd(s,s.return);break;case 30:break;default:Io(o,s,n)}t=t.sibling}}function _u(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Kl(n))}function Ou(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Kl(e))}function Ma(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zf(e,t,n,l),t=t.sibling}function Zf(e,t,n,l){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Ma(e,t,n,l),o&2048&&od(9,t);break;case 1:Ma(e,t,n,l);break;case 3:Ma(e,t,n,l),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Kl(e)));break;case 12:if(o&2048){Ma(e,t,n,l),e=t.stateNode;try{var s=t.memoizedProps,h=s.id,j=s.onPostCommit;typeof j=="function"&&j(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){on(t,t.return,B)}}else Ma(e,t,n,l);break;case 31:Ma(e,t,n,l);break;case 13:Ma(e,t,n,l);break;case 23:break;case 22:s=t.stateNode,h=t.alternate,t.memoizedState!==null?s._visibility&2?Ma(e,t,n,l):rd(e,t):s._visibility&2?Ma(e,t,n,l):(s._visibility|=2,cc(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),o&2048&&_u(h,t);break;case 24:Ma(e,t,n,l),o&2048&&Ou(t.alternate,t);break;default:Ma(e,t,n,l)}}function cc(e,t,n,l,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,h=t,j=n,B=l,ne=h.flags;switch(h.tag){case 0:case 11:case 15:cc(s,h,j,B,o),od(8,h);break;case 23:break;case 22:var xe=h.stateNode;h.memoizedState!==null?xe._visibility&2?cc(s,h,j,B,o):rd(s,h):(xe._visibility|=2,cc(s,h,j,B,o)),o&&ne&2048&&_u(h.alternate,h);break;case 24:cc(s,h,j,B,o),o&&ne&2048&&Ou(h.alternate,h);break;default:cc(s,h,j,B,o)}t=t.sibling}}function rd(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,o=l.flags;switch(l.tag){case 22:rd(n,l),o&2048&&_u(l.alternate,l);break;case 24:rd(n,l),o&2048&&Ou(l.alternate,l);break;default:rd(n,l)}t=t.sibling}}var cd=8192;function dc(e,t,n){if(e.subtreeFlags&cd)for(e=e.child;e!==null;)Qf(e,t,n),e=e.sibling}function Qf(e,t,n){switch(e.tag){case 26:dc(e,t,n),e.flags&cd&&e.memoizedState!==null&&mg(n,Ba,e.memoizedState,e.memoizedProps);break;case 5:dc(e,t,n);break;case 3:case 4:var l=Ba;Ba=ou(e.stateNode.containerInfo),dc(e,t,n),Ba=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=cd,cd=16777216,dc(e,t,n),cd=l):dc(e,t,n));break;default:dc(e,t,n)}}function Kf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function dd(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];fi=l,ep(l,e)}Kf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jf(e),e=e.sibling}function Jf(e){switch(e.tag){case 0:case 11:case 15:dd(e),e.flags&2048&&ks(9,e,e.return);break;case 3:dd(e);break;case 12:dd(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Xd(e)):dd(e);break;default:dd(e)}}function Xd(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];fi=l,ep(l,e)}Kf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ks(8,t,t.return),Xd(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Xd(t));break;default:Xd(t)}e=e.sibling}}function ep(e,t){for(;fi!==null;){var n=fi;switch(n.tag){case 0:case 11:case 15:ks(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Kl(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,fi=l;else e:for(n=e;fi!==null;){l=fi;var o=l.sibling,s=l.return;if(Ff(l),l===n){fi=null;break e}if(o!==null){o.return=s,fi=o;break e}fi=s}}}var Ph={getCacheForType:function(e){var t=nn(Tn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return nn(Tn).controller.signal}},_h=typeof WeakMap=="function"?WeakMap:Map,Kt=0,fn=null,_t=null,Et=0,an=0,Ml=null,Rs=!1,uc=!1,Hu=!1,Vo=0,In=0,Ds=0,Cr=0,Eu=0,Ul=0,fc=0,ud=null,gl=null,Iu=!1,Gd=0,tp=0,qd=1/0,Zd=null,As=null,Qn=0,Ns=null,pc=null,Wo=0,Vu=0,Wu=null,np=null,fd=0,$u=null;function Pl(){return(Kt&2)!==0&&Et!==0?Et&-Et:_.T!==null?qu():Ln()}function ip(){if(Ul===0)if((Et&536870912)===0||Pt){var e=Lo;Lo<<=1,(Lo&3932160)===0&&(Lo=262144),Ul=e}else Ul=536870912;return e=En.current,e!==null&&(e.flags|=32),Ul}function xl(e,t,n){(e===fn&&(an===2||an===9)||e.cancelPendingCommit!==null)&&(hc(e,0),Bs(e,Et,Ul,!1)),ji(e,n),((Kt&2)===0||e!==fn)&&(e===fn&&((Kt&2)===0&&(Cr|=n),In===4&&Bs(e,Et,Ul,!1)),ho(e))}function lp(e,t,n){if((Kt&6)!==0)throw Error(u(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Il(e,t),o=l?Eh(e,t):Yu(e,t,!0),s=l;do{if(o===0){uc&&!l&&Bs(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!Oh(n)){o=Yu(e,t,!1),s=!1;continue}if(o===2){if(s=t,e.errorRecoveryDisabledLanes&s)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var j=e;o=ud;var B=j.current.memoizedState.isDehydrated;if(B&&(hc(j,h).flags|=256),h=Yu(j,h,!1),h!==2){if(Hu&&!B){j.errorRecoveryDisabledLanes|=s,Cr|=s,o=4;break e}s=gl,gl=o,s!==null&&(gl===null?gl=s:gl.push.apply(gl,s))}o=h}if(s=!1,o!==2)continue}}if(o===1){hc(e,0),Bs(e,t,0,!0);break}e:{switch(l=e,s=o,s){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:Bs(l,t,Ul,!Rs);break e;case 2:gl=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(o=Gd+300-gi(),10<o)){if(Bs(l,t,Ul,!Rs),Mt(l,0,!0)!==0)break e;Wo=t,l.timeoutHandle=Pp(ap.bind(null,l,n,gl,Zd,Iu,t,Ul,Cr,fc,Rs,s,"Throttled",-0,0),o);break e}ap(l,n,gl,Zd,Iu,t,Ul,Cr,fc,Rs,s,null,-0,0)}}break}while(!0);ho(e)}function ap(e,t,n,l,o,s,h,j,B,ne,xe,Se,ae,ce){if(e.timeoutHandle=-1,Se=t.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pt},Qf(t,s,Se);var Fe=(s&62914560)===s?Gd-gi():(s&4194048)===s?tp-gi():0;if(Fe=Sg(Se,Fe),Fe!==null){Wo=s,e.cancelPendingCommit=Fe(pp.bind(null,e,t,s,n,l,o,h,j,B,xe,Se,null,ae,ce)),Bs(e,s,h,!ne);return}}pp(e,t,s,n,l,o,h,j,B)}function Oh(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var o=n[l],s=o.getSnapshot;o=o.value;try{if(!Di(s(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t,n,l){t&=~Eu,t&=~Cr,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var o=t;0<o;){var s=31-we(o),h=1<<s;l[s]=-1,o&=~h}n!==0&&Is(e,n,t)}function Qd(){return(Kt&6)===0?(pd(0),!1):!0}function Fu(){if(_t!==null){if(an===0)var e=_t.return;else e=_t,cl=rl=null,Jr(e),fs=null,pr=0,e=_t;for(;e!==null;)_f(e.alternate,e),e=e.return;_t=null}}function hc(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ig(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Wo=0,Fu(),fn=e,_t=n=ll(e.current,null),Et=t,an=0,Ml=null,Rs=!1,uc=Il(e,t),Hu=!1,fc=Ul=Eu=Cr=Ds=In=0,gl=ud=null,Iu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var o=31-we(l),s=1<<o;t|=e[o],l&=~s}return Vo=t,cr(),n}function op(e,t){ht=null,_.H=v,t===Ja||t===us?(t=Al(),an=3):t===ds?(t=Al(),an=4):an=t===_e?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ml=t,_t===null&&(In=1,Z(e,Li(t,e.current)))}function sp(){var e=En.current;return e===null?!0:(Et&4194048)===Et?di===null:(Et&62914560)===Et||(Et&536870912)!==0?e===di:!1}function rp(){var e=_.H;return _.H=v,e===null?v:e}function cp(){var e=_.A;return _.A=Ph,e}function Kd(){In=4,Rs||(Et&4194048)!==Et&&En.current!==null||(uc=!0),(Ds&134217727)===0&&(Cr&134217727)===0||fn===null||Bs(fn,Et,Ul,!1)}function Yu(e,t,n){var l=Kt;Kt|=2;var o=rp(),s=cp();(fn!==e||Et!==t)&&(Zd=null,hc(e,t)),t=!1;var h=In;e:do try{if(an!==0&&_t!==null){var j=_t,B=Ml;switch(an){case 8:Fu(),h=6;break e;case 3:case 2:case 9:case 6:En.current===null&&(t=!0);var ne=an;if(an=0,Ml=null,gc(e,j,B,ne),n&&uc){h=0;break e}break;default:ne=an,an=0,Ml=null,gc(e,j,B,ne)}}Hh(),h=In;break}catch(xe){op(e,xe)}while(!0);return t&&e.shellSuspendCounter++,cl=rl=null,Kt=l,_.H=o,_.A=s,_t===null&&(fn=null,Et=0,cr()),h}function Hh(){for(;_t!==null;)dp(_t)}function Eh(e,t){var n=Kt;Kt|=2;var l=rp(),o=cp();fn!==e||Et!==t?(Zd=null,qd=gi()+500,hc(e,t)):uc=Il(e,t);e:do try{if(an!==0&&_t!==null){t=_t;var s=Ml;t:switch(an){case 1:an=0,Ml=null,gc(e,t,s,1);break;case 2:case 9:if(Ud(s)){an=0,Ml=null,up(t);break}t=function(){an!==2&&an!==9||fn!==e||(an=7),ho(e)},s.then(t,t);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:Ud(s)?(an=0,Ml=null,up(t)):(an=0,Ml=null,gc(e,t,s,7));break;case 5:var h=null;switch(_t.tag){case 26:h=_t.memoizedState;case 5:case 27:var j=_t;if(h?Zp(h):j.stateNode.complete){an=0,Ml=null;var B=j.sibling;if(B!==null)_t=B;else{var ne=j.return;ne!==null?(_t=ne,Jd(ne)):_t=null}break t}}an=0,Ml=null,gc(e,t,s,5);break;case 6:an=0,Ml=null,gc(e,t,s,6);break;case 8:Fu(),In=6;break e;default:throw Error(u(462))}}Ih();break}catch(xe){op(e,xe)}while(!0);return cl=rl=null,_.H=l,_.A=o,Kt=n,_t!==null?0:(fn=null,Et=0,cr(),In)}function Ih(){for(;_t!==null&&!zc();)dp(_t)}function dp(e){var t=Uf(e.alternate,e,Vo);e.memoizedProps=e.pendingProps,t===null?Jd(e):_t=t}function up(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ne(n,t,t.pendingProps,t.type,void 0,Et);break;case 11:t=Ne(n,t,t.pendingProps,t.type.render,t.ref,Et);break;case 5:Jr(t);default:_f(n,t),t=_t=Yi(t,Vo),t=Uf(n,t,Vo)}e.memoizedProps=e.pendingProps,t===null?Jd(e):_t=t}function gc(e,t,n,l){cl=rl=null,Jr(t),fs=null,pr=0;var o=t.return;try{if(se(e,o,t,n,Et)){In=1,Z(e,Li(n,e.current)),_t=null;return}}catch(s){if(o!==null)throw _t=o,s;In=1,Z(e,Li(n,e.current)),_t=null;return}t.flags&32768?(Pt||l===1?e=!0:uc||(Et&536870912)!==0?e=!1:(Rs=e=!0,(l===2||l===9||l===3||l===6)&&(l=En.current,l!==null&&l.tag===13&&(l.flags|=16384))),fp(t,e)):Jd(t)}function Jd(e){var t=e;do{if((t.flags&32768)!==0){fp(t,Rs);return}e=t.return;var n=Nh(t.alternate,t,Vo);if(n!==null){_t=n;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);In===0&&(In=5)}function fp(e,t){do{var n=Bh(e.alternate,e);if(n!==null){n.flags&=32767,_t=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){_t=e;return}_t=e=n}while(e!==null);In=6,_t=null}function pp(e,t,n,l,o,s,h,j,B){e.cancelPendingCommit=null;do eu();while(Qn!==0);if((Kt&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(s=t.lanes|t.childLanes,s|=rr,Vl(e,n,s,h,j,B),e===fn&&(_t=fn=null,Et=0),pc=t,Ns=e,Wo=n,Vu=s,Wu=o,np=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Fh(Ve,function(){return bp(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=_.T,_.T=null,o=P.p,P.p=2,h=Kt,Kt|=4;try{Mh(e,t,n)}finally{Kt=h,P.p=o,_.T=l}}Qn=1,hp(),gp(),xp()}}function hp(){if(Qn===1){Qn=0;var e=Ns,t=pc,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=_.T,_.T=null;var l=P.p;P.p=2;var o=Kt;Kt|=4;try{Gf(t,e);var s=lf,h=Pc(e.containerInfo),j=s.focusedElem,B=s.selectionRange;if(h!==j&&j&&j.ownerDocument&&Uc(j.ownerDocument.documentElement,j)){if(B!==null&&er(j)){var ne=B.start,xe=B.end;if(xe===void 0&&(xe=ne),"selectionStart"in j)j.selectionStart=ne,j.selectionEnd=Math.min(xe,j.value.length);else{var Se=j.ownerDocument||document,ae=Se&&Se.defaultView||window;if(ae.getSelection){var ce=ae.getSelection(),Fe=j.textContent.length,dt=Math.min(B.start,Fe),cn=B.end===void 0?dt:Math.min(B.end,Fe);!ce.extend&&dt>cn&&(h=cn,cn=dt,dt=h);var Y=Or(j,dt),O=Or(j,cn);if(Y&&O&&(ce.rangeCount!==1||ce.anchorNode!==Y.node||ce.anchorOffset!==Y.offset||ce.focusNode!==O.node||ce.focusOffset!==O.offset)){var te=Se.createRange();te.setStart(Y.node,Y.offset),ce.removeAllRanges(),dt>cn?(ce.addRange(te),ce.extend(O.node,O.offset)):(te.setEnd(O.node,O.offset),ce.addRange(te))}}}}for(Se=[],ce=j;ce=ce.parentNode;)ce.nodeType===1&&Se.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<Se.length;j++){var ve=Se[j];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}fu=!!nf,lf=nf=null}finally{Kt=o,P.p=l,_.T=n}}e.current=t,Qn=2}}function gp(){if(Qn===2){Qn=0;var e=Ns,t=pc,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=_.T,_.T=null;var l=P.p;P.p=2;var o=Kt;Kt|=4;try{$f(e,t.alternate,t)}finally{Kt=o,P.p=l,_.T=n}}Qn=3}}function xp(){if(Qn===4||Qn===3){Qn=0,Fo();var e=Ns,t=pc,n=Wo,l=np;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Qn=5:(Qn=0,pc=Ns=null,yp(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(As=null),wt(n),t=t.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Pn,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=_.T,o=P.p,P.p=2,_.T=null;try{for(var s=e.onRecoverableError,h=0;h<l.length;h++){var j=l[h];s(j.value,{componentStack:j.stack})}}finally{_.T=t,P.p=o}}(Wo&3)!==0&&eu(),ho(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===$u?fd++:(fd=0,$u=e):fd=0,pd(0)}}function yp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Kl(t)))}function eu(){return hp(),gp(),xp(),bp()}function bp(){if(Qn!==5)return!1;var e=Ns,t=Vu;Vu=0;var n=wt(Wo),l=_.T,o=P.p;try{P.p=32>n?32:n,_.T=null,n=Wu,Wu=null;var s=Ns,h=Wo;if(Qn=0,pc=Ns=null,Wo=0,(Kt&6)!==0)throw Error(u(331));var j=Kt;if(Kt|=4,Jf(s.current),Zf(s,s.current,h,n),Kt=j,pd(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Pn,s)}catch{}return!0}finally{P.p=o,_.T=l,yp(e,t)}}function vp(e,t,n){t=Li(n,t),t=pe(e.stateNode,t,2),e=io(e,t,2),e!==null&&(ji(e,2),ho(e))}function on(e,t,n){if(e.tag===3)vp(e,e,n);else for(;t!==null;){if(t.tag===3){vp(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(As===null||!As.has(l))){e=Li(n,e),n=ke(2),l=io(t,n,2),l!==null&&(Te(n,l,t,e),ji(l,2),ho(l));break}}t=t.return}}function Lu(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new _h;var o=new Set;l.set(t,o)}else o=l.get(t),o===void 0&&(o=new Set,l.set(t,o));o.has(n)||(Hu=!0,o.add(n),e=Vh.bind(null,e,t,n),t.then(e,e))}function Vh(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fn===e&&(Et&n)===n&&(In===4||In===3&&(Et&62914560)===Et&&300>gi()-Gd?(Kt&2)===0&&hc(e,0):Eu|=n,fc===Et&&(fc=0)),ho(e)}function mp(e,t){t===0&&(t=da()),e=Gl(e,t),e!==null&&(ji(e,t),ho(e))}function Wh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mp(e,n)}function $h(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(u(314))}l!==null&&l.delete(t),mp(e,n)}function Fh(e,t){return yl(e,t)}var tu=null,xc=null,Xu=!1,nu=!1,Gu=!1,Ms=0;function ho(e){e!==xc&&e.next===null&&(xc===null?tu=xc=e:xc=xc.next=e),nu=!0,Xu||(Xu=!0,Lh())}function pd(e,t){if(!Gu&&nu){Gu=!0;do for(var n=!1,l=tu;l!==null;){if(e!==0){var o=l.pendingLanes;if(o===0)var s=0;else{var h=l.suspendedLanes,j=l.pingedLanes;s=(1<<31-we(42|e)+1)-1,s&=o&~(h&~j),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Tp(l,s))}else s=Et,s=Mt(l,l===fn?s:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(s&3)===0||Il(l,s)||(n=!0,Tp(l,s));l=l.next}while(n);Gu=!1}}function Yh(){Sp()}function Sp(){nu=Xu=!1;var e=0;Ms!==0&&ng()&&(e=Ms);for(var t=gi(),n=null,l=tu;l!==null;){var o=l.next,s=wp(l,t);s===0?(l.next=null,n===null?tu=o:n.next=o,o===null&&(xc=n)):(n=l,(e!==0||(s&3)!==0)&&(nu=!0)),l=o}Qn!==0&&Qn!==5||pd(e),Ms!==0&&(Ms=0)}function wp(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var h=31-we(s),j=1<<h,B=o[h];B===-1?((j&n)===0||(j&l)!==0)&&(o[h]=Xo(j,t)):B<=t&&(e.expiredLanes|=j),s&=~j}if(t=fn,n=Et,n=Mt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(an===2||an===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Pa(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Il(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Pa(l),wt(n)){case 2:case 8:n=zr;break;case 32:n=Ve;break;case 268435456:n=ra;break;default:n=Ve}return l=jp.bind(null,e),n=yl(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Pa(l),e.callbackPriority=2,e.callbackNode=null,2}function jp(e,t){if(Qn!==0&&Qn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(eu()&&e.callbackNode!==n)return null;var l=Et;return l=Mt(e,e===fn?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(lp(e,l,t),wp(e,gi()),e.callbackNode!=null&&e.callbackNode===n?jp.bind(null,e):null)}function Tp(e,t){if(eu())return null;lp(e,t,!0)}function Lh(){lg(function(){(Kt&6)!==0?yl(Ct,Yh):Sp()})}function qu(){if(Ms===0){var e=Ro;e===0&&(e=Hl,Hl<<=1,(Hl&261888)===0&&(Hl=256)),Ms=e}return Ms}function Cp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ft(""+e)}function zp(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Xh(e,t,n,l,o){if(t==="submit"&&n&&n.stateNode===o){var s=Cp((o[ei]||null).action),h=l.submitter;h&&(t=(t=h[ei]||null)?Cp(t.formAction):h.getAttribute("formAction"),t!==null&&(s=t,h=null));var j=new ct("action","action",null,l,o);e.push({event:j,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ms!==0){var B=h?zp(o,h):new FormData(o);nd(n,{pending:!0,data:B,method:o.method,action:s},null,B)}}else typeof s=="function"&&(j.preventDefault(),B=h?zp(o,h):new FormData(o),nd(n,{pending:!0,data:B,method:o.method,action:s},s,B))},currentTarget:o}]})}}for(var Zu=0;Zu<Oc.length;Zu++){var Qu=Oc[Zu],Gh=Qu.toLowerCase(),qh=Qu[0].toUpperCase()+Qu.slice(1);Ni(Gh,"on"+qh)}Ni(nr,"onAnimationEnd"),Ni(ir,"onAnimationIteration"),Ni(_c,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(lr,"onTransitionRun"),Ni(ar,"onTransitionStart"),Ni(Ir,"onTransitionCancel"),Ni(or,"onTransitionEnd"),Dt("onMouseEnter",["mouseout","mouseover"]),Dt("onMouseLeave",["mouseout","mouseover"]),Dt("onPointerEnter",["pointerout","pointerover"]),Dt("onPointerLeave",["pointerout","pointerover"]),pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pa("onBeforeInput",["compositionend","keypress","textInput","paste"]),pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hd));function kp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],o=l.event;l=l.listeners;e:{var s=void 0;if(t)for(var h=l.length-1;0<=h;h--){var j=l[h],B=j.instance,ne=j.currentTarget;if(j=j.listener,B!==s&&o.isPropagationStopped())break e;s=j,o.currentTarget=ne;try{s(o)}catch(xe){sr(xe)}o.currentTarget=null,s=B}else for(h=0;h<l.length;h++){if(j=l[h],B=j.instance,ne=j.currentTarget,j=j.listener,B!==s&&o.isPropagationStopped())break e;s=j,o.currentTarget=ne;try{s(o)}catch(xe){sr(xe)}o.currentTarget=null,s=B}}}}function Ot(e,t){var n=t[_a];n===void 0&&(n=t[_a]=new Set);var l=e+"__bubble";n.has(l)||(Rp(t,e,2,!1),n.add(l))}function Ku(e,t,n){var l=0;t&&(l|=4),Rp(n,e,l,t)}var iu="_reactListening"+Math.random().toString(36).slice(2);function Ju(e){if(!e[iu]){e[iu]=!0,Rr.forEach(function(n){n!=="selectionchange"&&(Zh.has(n)||Ku(n,!1,e),Ku(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[iu]||(t[iu]=!0,Ku("selectionchange",!1,t))}}function Rp(e,t,n,l){switch(ih(t)){case 2:var o=Tg;break;case 8:o=Cg;break;default:o=gf}n=o.bind(null,t,n,e),o=void 0,!kc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),l?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ef(e,t,n,l,o){var s=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var j=l.stateNode.containerInfo;if(j===o)break;if(h===4)for(h=l.return;h!==null;){var B=h.tag;if((B===3||B===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;j!==null;){if(h=Oa(j),h===null)return;if(B=h.tag,B===5||B===6||B===26||B===27){l=s=h;continue e}j=j.parentNode}}l=l.return}ot(function(){var ne=s,xe=kt(n),Se=[];e:{var ae=wo.get(e);if(ae!==void 0){var ce=ct,Fe=e;switch(e){case"keypress":if(Ls(n)===0)break e;case"keydown":case"keyup":ce=qs;break;case"focusin":Fe="focus",ce=ii;break;case"focusout":Fe="blur",ce=ii;break;case"beforeblur":case"afterblur":ce=ii;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Wi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Xs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=zu;break;case nr:case ir:case _c:ce=li;break;case or:ce=vo;break;case"scroll":case"scrollend":ce=Xn;break;case"wheel":ce=Ur;break;case"copy":case"cut":case"paste":ce=Fi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Zs;break;case"toggle":case"beforetoggle":ce=Qo}var dt=(t&4)!==0,cn=!dt&&(e==="scroll"||e==="scrollend"),Y=dt?ae!==null?ae+"Capture":null:ae;dt=[];for(var O=ne,te;O!==null;){var ve=O;if(te=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||te===null||Y===null||(ve=At(O,Y),ve!=null&&dt.push(gd(O,ve,te))),cn)break;O=O.return}0<dt.length&&(ae=new ce(ae,Fe,null,n,xe),Se.push({event:ae,listeners:dt}))}}if((t&7)===0){e:{if(ae=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",ae&&n!==tt&&(Fe=n.relatedTarget||n.fromElement)&&(Oa(Fe)||Fe[zt]))break e;if((ce||ae)&&(ae=xe.window===xe?xe:(ae=xe.ownerDocument)?ae.defaultView||ae.parentWindow:window,ce?(Fe=n.relatedTarget||n.toElement,ce=ne,Fe=Fe?Oa(Fe):null,Fe!==null&&(cn=X(Fe),dt=Fe.tag,Fe!==cn||dt!==5&&dt!==27&&dt!==6)&&(Fe=null)):(ce=null,Fe=ne),ce!==Fe)){if(dt=Wi,ve="onMouseLeave",Y="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(dt=Zs,ve="onPointerLeave",Y="onPointerEnter",O="pointer"),cn=ce==null?ae:fa(ce),te=Fe==null?ae:fa(Fe),ae=new dt(ve,O+"leave",ce,n,xe),ae.target=cn,ae.relatedTarget=te,ve=null,Oa(xe)===ne&&(dt=new dt(Y,O+"enter",Fe,n,xe),dt.target=te,dt.relatedTarget=cn,ve=dt),cn=ve,ce&&Fe)t:{for(dt=Qh,Y=ce,O=Fe,te=0,ve=Y;ve;ve=dt(ve))te++;ve=0;for(var it=O;it;it=dt(it))ve++;for(;0<te-ve;)Y=dt(Y),te--;for(;0<ve-te;)O=dt(O),ve--;for(;te--;){if(Y===O||O!==null&&Y===O.alternate){dt=Y;break t}Y=dt(Y),O=dt(O)}dt=null}else dt=null;ce!==null&&Dp(Se,ae,ce,dt,!1),Fe!==null&&cn!==null&&Dp(Se,cn,Fe,dt,!0)}}e:{if(ae=ne?fa(ne):window,ce=ae.nodeName&&ae.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ae.type==="file")var qt=Ya;else if(Rd(ae))if(ba)qt=Js;else{qt=jl;var Ze=oi}else ce=ae.nodeName,!ce||ce.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ne&&Ia(ne.elementType)&&(qt=Ya):qt=ku;if(qt&&(qt=qt(e,ne))){ki(Se,qt,n,xe);break e}Ze&&Ze(e,ae,ne),e==="focusout"&&ne&&ae.type==="number"&&ne.memoizedProps.value!=null&&Bn(ae,"number",ae.value)}switch(Ze=ne?fa(ne):window,e){case"focusin":(Rd(Ze)||Ze.contentEditable==="true")&&(ma=Ze,mo=ne,ts=null);break;case"focusout":ts=mo=ma=null;break;case"mousedown":Sa=!0;break;case"contextmenu":case"mouseup":case"dragend":Sa=!1,Er(Se,n,xe);break;case"selectionchange":if(Hr)break;case"keydown":case"keyup":Er(Se,n,xe)}var Nt;if(Fa)e:{switch(e){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else Qt?un(e,n)&&(It="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(It="onCompositionStart");It&&(Qs&&n.locale!=="ko"&&(Qt||It!=="onCompositionStart"?It==="onCompositionEnd"&&Qt&&(Nt=Ar()):(vl=xe,ml="value"in vl?vl.value:vl.textContent,Qt=!0)),Ze=lu(ne,It),0<Ze.length&&(It=new Yl(It,e,null,n,xe),Se.push({event:It,listeners:Ze}),Nt?It.data=Nt:(Nt=Jo(n),Nt!==null&&(It.data=Nt)))),(Nt=Bc?Ks(e,n):Mc(e,n))&&(It=lu(ne,"onBeforeInput"),0<It.length&&(Ze=new Yl("onBeforeInput","beforeinput",null,n,xe),Se.push({event:Ze,listeners:It}),Ze.data=Nt)),Xh(Se,e,ne,n,xe)}kp(Se,t)})}function gd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lu(e,t){for(var n=t+"Capture",l=[];e!==null;){var o=e,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=At(e,n),o!=null&&l.unshift(gd(e,o,s)),o=At(e,t),o!=null&&l.push(gd(e,o,s))),e.tag===3)return l;e=e.return}return[]}function Qh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dp(e,t,n,l,o){for(var s=t._reactName,h=[];n!==null&&n!==l;){var j=n,B=j.alternate,ne=j.stateNode;if(j=j.tag,B!==null&&B===l)break;j!==5&&j!==26&&j!==27||ne===null||(B=ne,o?(ne=At(n,s),ne!=null&&h.unshift(gd(n,ne,B))):o||(ne=At(n,s),ne!=null&&h.push(gd(n,ne,B)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Kh=/\r\n?/g,Jh=/\u0000|\uFFFD/g;function Ap(e){return(typeof e=="string"?e:""+e).replace(Kh,`
`).replace(Jh,"")}function Np(e,t){return t=Ap(t),Ap(e)===t}function rn(e,t,n,l,o,s){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||hn(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&hn(e,""+l);break;case"className":ti(e,"class",l);break;case"tabIndex":ti(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(e,n,l);break;case"style":jt(e,l,s);break;case"data":if(t!=="object"){ti(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ft(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&rn(e,t,"name",o.name,o,null),rn(e,t,"formEncType",o.formEncType,o,null),rn(e,t,"formMethod",o.formMethod,o,null),rn(e,t,"formTarget",o.formTarget,o,null)):(rn(e,t,"encType",o.encType,o,null),rn(e,t,"method",o.method,o,null),rn(e,t,"target",o.target,o,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=ft(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=pt);break;case"onScroll":l!=null&&Ot("scroll",e);break;case"onScrollEnd":l!=null&&Ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=ft(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":Ot("beforetoggle",e),Ot("toggle",e),yo(e,"popover",l);break;case"xlinkActuate":Nn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Nn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Nn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Nn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Nn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Nn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Nn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Nn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Nn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=ze.get(n)||n,yo(e,n,l))}}function tf(e,t,n,l,o,s){switch(n){case"style":jt(e,l,s);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(n=l.__html,n!=null){if(o.children!=null)throw Error(u(60));e.innerHTML=n}}break;case"children":typeof l=="string"?hn(e,l):(typeof l=="number"||typeof l=="bigint")&&hn(e,""+l);break;case"onScroll":l!=null&&Ot("scroll",e);break;case"onScrollEnd":l!=null&&Ot("scrollend",e);break;case"onClick":l!=null&&(e.onclick=pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hn.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),s=e[ei]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,o),typeof l=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,o);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):yo(e,n,l)}}}function wi(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",e),Ot("load",e);var l=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"src":l=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:rn(e,t,s,h,n,null)}}o&&rn(e,t,"srcSet",n.srcSet,n,null),l&&rn(e,t,"src",n.src,n,null);return;case"input":Ot("invalid",e);var j=s=h=o=null,B=null,ne=null;for(l in n)if(n.hasOwnProperty(l)){var xe=n[l];if(xe!=null)switch(l){case"name":o=xe;break;case"type":h=xe;break;case"checked":B=xe;break;case"defaultChecked":ne=xe;break;case"value":s=xe;break;case"defaultValue":j=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(u(137,t));break;default:rn(e,t,l,xe,n,null)}}Vn(e,s,j,B,ne,h,o,!1);return;case"select":Ot("invalid",e),l=h=s=null;for(o in n)if(n.hasOwnProperty(o)&&(j=n[o],j!=null))switch(o){case"value":s=j;break;case"defaultValue":h=j;break;case"multiple":l=j;default:rn(e,t,o,j,n,null)}t=s,n=h,e.multiple=!!l,t!=null?Ea(e,!!l,t,!1):n!=null&&Ea(e,!!l,n,!0);return;case"textarea":Ot("invalid",e),s=o=l=null;for(h in n)if(n.hasOwnProperty(h)&&(j=n[h],j!=null))switch(h){case"value":l=j;break;case"defaultValue":o=j;break;case"children":s=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(u(91));break;default:rn(e,t,h,j,n,null)}Dr(e,l,o,s);return;case"option":for(B in n)if(n.hasOwnProperty(B)&&(l=n[B],l!=null))switch(B){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:rn(e,t,B,l,n,null)}return;case"dialog":Ot("beforetoggle",e),Ot("toggle",e),Ot("cancel",e),Ot("close",e);break;case"iframe":case"object":Ot("load",e);break;case"video":case"audio":for(l=0;l<hd.length;l++)Ot(hd[l],e);break;case"image":Ot("error",e),Ot("load",e);break;case"details":Ot("toggle",e);break;case"embed":case"source":case"link":Ot("error",e),Ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in n)if(n.hasOwnProperty(ne)&&(l=n[ne],l!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:rn(e,t,ne,l,n,null)}return;default:if(Ia(t)){for(xe in n)n.hasOwnProperty(xe)&&(l=n[xe],l!==void 0&&tf(e,t,xe,l,n,void 0));return}}for(j in n)n.hasOwnProperty(j)&&(l=n[j],l!=null&&rn(e,t,j,l,n,null))}function eg(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,h=null,j=null,B=null,ne=null,xe=null;for(ce in n){var Se=n[ce];if(n.hasOwnProperty(ce)&&Se!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":B=Se;default:l.hasOwnProperty(ce)||rn(e,t,ce,null,l,Se)}}for(var ae in l){var ce=l[ae];if(Se=n[ae],l.hasOwnProperty(ae)&&(ce!=null||Se!=null))switch(ae){case"type":s=ce;break;case"name":o=ce;break;case"checked":ne=ce;break;case"defaultChecked":xe=ce;break;case"value":h=ce;break;case"defaultValue":j=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(u(137,t));break;default:ce!==Se&&rn(e,t,ae,ce,l,Se)}}Fs(e,h,j,B,ne,xe,s,o);return;case"select":ce=h=j=ae=null;for(s in n)if(B=n[s],n.hasOwnProperty(s)&&B!=null)switch(s){case"value":break;case"multiple":ce=B;default:l.hasOwnProperty(s)||rn(e,t,s,null,l,B)}for(o in l)if(s=l[o],B=n[o],l.hasOwnProperty(o)&&(s!=null||B!=null))switch(o){case"value":ae=s;break;case"defaultValue":j=s;break;case"multiple":h=s;default:s!==B&&rn(e,t,o,s,l,B)}t=j,n=h,l=ce,ae!=null?Ea(e,!!n,ae,!1):!!l!=!!n&&(t!=null?Ea(e,!!n,t,!0):Ea(e,!!n,n?[]:"",!1));return;case"textarea":ce=ae=null;for(j in n)if(o=n[j],n.hasOwnProperty(j)&&o!=null&&!l.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:rn(e,t,j,null,l,o)}for(h in l)if(o=l[h],s=n[h],l.hasOwnProperty(h)&&(o!=null||s!=null))switch(h){case"value":ae=o;break;case"defaultValue":ce=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(u(91));break;default:o!==s&&rn(e,t,h,o,l,s)}qo(e,ae,ce);return;case"option":for(var Fe in n)if(ae=n[Fe],n.hasOwnProperty(Fe)&&ae!=null&&!l.hasOwnProperty(Fe))switch(Fe){case"selected":e.selected=!1;break;default:rn(e,t,Fe,null,l,ae)}for(B in l)if(ae=l[B],ce=n[B],l.hasOwnProperty(B)&&ae!==ce&&(ae!=null||ce!=null))switch(B){case"selected":e.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:rn(e,t,B,ae,l,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in n)ae=n[dt],n.hasOwnProperty(dt)&&ae!=null&&!l.hasOwnProperty(dt)&&rn(e,t,dt,null,l,ae);for(ne in l)if(ae=l[ne],ce=n[ne],l.hasOwnProperty(ne)&&ae!==ce&&(ae!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(u(137,t));break;default:rn(e,t,ne,ae,l,ce)}return;default:if(Ia(t)){for(var cn in n)ae=n[cn],n.hasOwnProperty(cn)&&ae!==void 0&&!l.hasOwnProperty(cn)&&tf(e,t,cn,void 0,l,ae);for(xe in l)ae=l[xe],ce=n[xe],!l.hasOwnProperty(xe)||ae===ce||ae===void 0&&ce===void 0||tf(e,t,xe,ae,l,ce);return}}for(var Y in n)ae=n[Y],n.hasOwnProperty(Y)&&ae!=null&&!l.hasOwnProperty(Y)&&rn(e,t,Y,null,l,ae);for(Se in l)ae=l[Se],ce=n[Se],!l.hasOwnProperty(Se)||ae===ce||ae==null&&ce==null||rn(e,t,Se,ae,l,ce)}function Bp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var o=n[l],s=o.transferSize,h=o.initiatorType,j=o.duration;if(s&&j&&Bp(h)){for(h=0,j=o.responseEnd,l+=1;l<n.length;l++){var B=n[l],ne=B.startTime;if(ne>j)break;var xe=B.transferSize,Se=B.initiatorType;xe&&Bp(Se)&&(B=B.responseEnd,h+=xe*(B<j?1:(j-ne)/(B-ne)))}if(--l,t+=8*(s+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var nf=null,lf=null;function au(e){return e.nodeType===9?e:e.ownerDocument}function Mp(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Up(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function af(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var of=null;function ng(){var e=window.event;return e&&e.type==="popstate"?e===of?!1:(of=e,!0):(of=null,!1)}var Pp=typeof setTimeout=="function"?setTimeout:void 0,ig=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(e){return _p.resolve(null).then(e).catch(ag)}:Pp;function ag(e){setTimeout(function(){throw e})}function Us(e){return e==="head"}function Op(e,t){var n=t,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(o),mc(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")xd(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,xd(n);for(var s=n.firstChild;s;){var h=s.nextSibling,j=s.nodeName;s[go]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=h}}else n==="body"&&xd(e.ownerDocument.body);n=o}while(n);mc(t)}function Hp(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function sf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sf(n),pn(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function og(e,t,n,l){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[go])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=aa(e.nextSibling),e===null)break}return null}function sg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=aa(e.nextSibling),e===null))return null;return e}function Ep(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=aa(e.nextSibling),e===null))return null;return e}function rf(e){return e.data==="$?"||e.data==="$~"}function cf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rg(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function aa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var df=null;function Ip(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return aa(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Vp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Wp(e,t,n){switch(t=au(n),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);pn(e)}var oa=new Map,$p=new Set;function ou(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $o=P.d;P.d={f:cg,r:dg,D:ug,C:fg,L:pg,m:hg,X:xg,S:gg,M:yg};function cg(){var e=$o.f(),t=Qd();return e||t}function dg(e){var t=Wl(e);t!==null&&t.tag===5&&t.type==="form"?zs(t):$o.r(e)}var yc=typeof document>"u"?null:document;function Fp(e,t,n){var l=yc;if(l&&typeof t=="string"&&t){var o=dn(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),$p.has(o)||($p.add(o),e={rel:e,crossOrigin:n,href:t},l.querySelector(o)===null&&(t=l.createElement("link"),wi(t,"link",e),wn(t),l.head.appendChild(t)))}}function ug(e){$o.D(e),Fp("dns-prefetch",e,null)}function fg(e,t){$o.C(e,t),Fp("preconnect",e,t)}function pg(e,t,n){$o.L(e,t,n);var l=yc;if(l&&e&&t){var o='link[rel="preload"][as="'+dn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+dn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+dn(n.imageSizes)+'"]')):o+='[href="'+dn(e)+'"]';var s=o;switch(t){case"style":s=bc(e);break;case"script":s=vc(e)}oa.has(s)||(e=je({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),oa.set(s,e),l.querySelector(o)!==null||t==="style"&&l.querySelector(yd(s))||t==="script"&&l.querySelector(bd(s))||(t=l.createElement("link"),wi(t,"link",e),wn(t),l.head.appendChild(t)))}}function hg(e,t){$o.m(e,t);var n=yc;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+dn(l)+'"][href="'+dn(e)+'"]',s=o;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=vc(e)}if(!oa.has(s)&&(e=je({rel:"modulepreload",href:e},t),oa.set(s,e),n.querySelector(o)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(bd(s)))return}l=n.createElement("link"),wi(l,"link",e),wn(l),n.head.appendChild(l)}}}function gg(e,t,n){$o.S(e,t,n);var l=yc;if(l&&e){var o=$l(l).hoistableStyles,s=bc(e);t=t||"default";var h=o.get(s);if(!h){var j={loading:0,preload:null};if(h=l.querySelector(yd(s)))j.loading=5;else{e=je({rel:"stylesheet",href:e,"data-precedence":t},n),(n=oa.get(s))&&uf(e,n);var B=h=l.createElement("link");wn(B),wi(B,"link",e),B._p=new Promise(function(ne,xe){B.onload=ne,B.onerror=xe}),B.addEventListener("load",function(){j.loading|=1}),B.addEventListener("error",function(){j.loading|=2}),j.loading|=4,su(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:j},o.set(s,h)}}}function xg(e,t){$o.X(e,t);var n=yc;if(n&&e){var l=$l(n).hoistableScripts,o=vc(e),s=l.get(o);s||(s=n.querySelector(bd(o)),s||(e=je({src:e,async:!0},t),(t=oa.get(o))&&ff(e,t),s=n.createElement("script"),wn(s),wi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function yg(e,t){$o.M(e,t);var n=yc;if(n&&e){var l=$l(n).hoistableScripts,o=vc(e),s=l.get(o);s||(s=n.querySelector(bd(o)),s||(e=je({src:e,async:!0,type:"module"},t),(t=oa.get(o))&&ff(e,t),s=n.createElement("script"),wn(s),wi(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},l.set(o,s))}}function Yp(e,t,n,l){var o=(o=at.current)?ou(o):null;if(!o)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=bc(n.href),n=$l(o).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=bc(n.href);var s=$l(o).hoistableStyles,h=s.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,h),(s=o.querySelector(yd(e)))&&!s._p&&(h.instance=s,h.state.loading=5),oa.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},oa.set(e,n),s||bg(o,e,n,h.state))),t&&l===null)throw Error(u(528,""));return h}if(t&&l!==null)throw Error(u(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=vc(n),n=$l(o).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function bc(e){return'href="'+dn(e)+'"'}function yd(e){return'link[rel="stylesheet"]['+e+"]"}function Lp(e){return je({},e,{"data-precedence":e.precedence,precedence:null})}function bg(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),wi(t,"link",n),wn(t),e.head.appendChild(t))}function vc(e){return'[src="'+dn(e)+'"]'}function bd(e){return"script[async]"+e}function Xp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+dn(n.href)+'"]');if(l)return t.instance=l,wn(l),l;var o=je({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),wn(l),wi(l,"style",o),su(l,n.precedence,e),t.instance=l;case"stylesheet":o=bc(n.href);var s=e.querySelector(yd(o));if(s)return t.state.loading|=4,t.instance=s,wn(s),s;l=Lp(n),(o=oa.get(o))&&uf(l,o),s=(e.ownerDocument||e).createElement("link"),wn(s);var h=s;return h._p=new Promise(function(j,B){h.onload=j,h.onerror=B}),wi(s,"link",l),t.state.loading|=4,su(s,n.precedence,e),t.instance=s;case"script":return s=vc(n.src),(o=e.querySelector(bd(s)))?(t.instance=o,wn(o),o):(l=n,(o=oa.get(s))&&(l=je({},n),ff(l,o)),e=e.ownerDocument||e,o=e.createElement("script"),wn(o),wi(o,"link",l),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,su(l,n.precedence,e));return t.instance}function su(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=l.length?l[l.length-1]:null,s=o,h=0;h<l.length;h++){var j=l[h];if(j.dataset.precedence===t)s=j;else if(s!==o)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function uf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ff(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ru=null;function Gp(e,t,n){if(ru===null){var l=new Map,o=ru=new Map;o.set(n,l)}else o=ru,l=o.get(n),l||(l=new Map,o.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var s=n[o];if(!(s[go]||s[On]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var h=s.getAttribute(t)||"";h=e+h;var j=l.get(h);j?j.push(s):l.set(h,[s])}}return l}function qp(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function vg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Zp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mg(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=bc(l.href),s=t.querySelector(yd(o));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=cu.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,wn(s);return}s=t.ownerDocument||t,l=Lp(l),(o=oa.get(o))&&uf(l,o),s=s.createElement("link"),wn(s);var h=s;h._p=new Promise(function(j,B){h.onload=j,h.onerror=B}),wi(s,"link",l),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=cu.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var pf=0;function Sg(e,t){return e.stylesheets&&e.count===0&&uu(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&uu(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&pf===0&&(pf=62500*tg());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&uu(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>pf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(o)}}:null}function cu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var du=null;function uu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,du=new Map,t.forEach(wg,e),du=null,cu.call(e))}function wg(e,t){if(!(t.state.loading&4)){var n=du.get(e);if(n)var l=n.get(null);else{n=new Map,du.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var h=o[s];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),l=h)}l&&n.set(null,l)}o=t.instance,h=o.getAttribute("data-precedence"),s=n.get(h)||l,s===l&&n.set(null,o),n.set(h,o),this.count++,l=cu.bind(this),o.addEventListener("load",l),o.addEventListener("error",l),s?s.parentNode.insertBefore(o,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var vd={$$typeof:K,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function jg(e,t,n,l,o,s,h,j,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.hiddenUpdates=ua(null),this.identifierPrefix=l,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Qp(e,t,n,l,o,s,h,j,B,ne,xe,Se){return e=new jg(e,t,n,h,B,ne,xe,Se,j),t=1,s===!0&&(t|=24),s=si(3,null,null,t),e.current=s,s.stateNode=e,t=Ga(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:l,isDehydrated:n,cache:t},Ec(s),e}function Kp(e){return e?(e=Cl,e):Cl}function Jp(e,t,n,l,o,s){o=Kp(o),l.context===null?l.context=o:l.pendingContext=o,l=no(t),l.payload={element:n},s=s===void 0?null:s,s!==null&&(l.callback=s),n=io(e,l,t),n!==null&&(xl(n,e,t),Ra(n,e,t))}function eh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hf(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function th(e){if(e.tag===13||e.tag===31){var t=Gl(e,67108864);t!==null&&xl(t,e,67108864),hf(e,67108864)}}function nh(e){if(e.tag===13||e.tag===31){var t=Pl();t=Ii(t);var n=Gl(e,t);n!==null&&xl(n,e,t),hf(e,t)}}var fu=!0;function Tg(e,t,n,l){var o=_.T;_.T=null;var s=P.p;try{P.p=2,gf(e,t,n,l)}finally{P.p=s,_.T=o}}function Cg(e,t,n,l){var o=_.T;_.T=null;var s=P.p;try{P.p=8,gf(e,t,n,l)}finally{P.p=s,_.T=o}}function gf(e,t,n,l){if(fu){var o=xf(l);if(o===null)ef(e,t,l,pu,n),lh(e,l);else if(kg(o,e,t,n,l))l.stopPropagation();else if(lh(e,l),t&4&&-1<zg.indexOf(e)){for(;o!==null;){var s=Wl(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var h=El(s.pendingLanes);if(h!==0){var j=s;for(j.pendingLanes|=2,j.entangledLanes|=2;h;){var B=1<<31-we(h);j.entanglements[1]|=B,h&=~B}ho(s),(Kt&6)===0&&(qd=gi()+500,pd(0))}}break;case 31:case 13:j=Gl(s,2),j!==null&&xl(j,s,2),Qd(),hf(s,2)}if(s=xf(l),s===null&&ef(e,t,l,pu,n),s===o)break;o=s}o!==null&&l.stopPropagation()}else ef(e,t,l,null,n)}}function xf(e){return e=kt(e),yf(e)}var pu=null;function yf(e){if(pu=null,e=Oa(e),e!==null){var t=X(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Ce(t),e!==null)return e;e=null}else if(n===31){if(e=be(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pu=e,null}function ih(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case Ct:return 2;case zr:return 8;case Ve:case Vt:return 32;case ra:return 268435456;default:return 32}default:return 32}}var bf=!1,Ps=null,_s=null,Os=null,md=new Map,Sd=new Map,Hs=[],zg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lh(e,t){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":md.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sd.delete(t.pointerId)}}function wd(e,t,n,l,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Wl(t),t!==null&&th(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function kg(e,t,n,l,o){switch(t){case"focusin":return Ps=wd(Ps,e,t,n,l,o),!0;case"dragenter":return _s=wd(_s,e,t,n,l,o),!0;case"mouseover":return Os=wd(Os,e,t,n,l,o),!0;case"pointerover":var s=o.pointerId;return md.set(s,wd(md.get(s)||null,e,t,n,l,o)),!0;case"gotpointercapture":return s=o.pointerId,Sd.set(s,wd(Sd.get(s)||null,e,t,n,l,o)),!0}return!1}function ah(e){var t=Oa(e.target);if(t!==null){var n=X(t);if(n!==null){if(t=n.tag,t===13){if(t=Ce(n),t!==null){e.blockedOn=t,Ws(e.priority,function(){nh(n)});return}}else if(t===31){if(t=be(n),t!==null){e.blockedOn=t,Ws(e.priority,function(){nh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xf(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);tt=l,n.target.dispatchEvent(l),tt=null}else return t=Wl(n),t!==null&&th(t),e.blockedOn=n,!1;t.shift()}return!0}function oh(e,t,n){hu(e)&&n.delete(t)}function Rg(){bf=!1,Ps!==null&&hu(Ps)&&(Ps=null),_s!==null&&hu(_s)&&(_s=null),Os!==null&&hu(Os)&&(Os=null),md.forEach(oh),Sd.forEach(oh)}function gu(e,t){e.blockedOn===t&&(e.blockedOn=null,bf||(bf=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Rg)))}var xu=null;function sh(e){xu!==e&&(xu=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){xu===e&&(xu=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],o=e[t+2];if(typeof l!="function"){if(yf(l||n)===null)continue;break}var s=Wl(n);s!==null&&(e.splice(t,3),t-=3,nd(s,{pending:!0,data:o,method:n.method,action:l},l,o))}}))}function mc(e){function t(B){return gu(B,e)}Ps!==null&&gu(Ps,e),_s!==null&&gu(_s,e),Os!==null&&gu(Os,e),md.forEach(t),Sd.forEach(t);for(var n=0;n<Hs.length;n++){var l=Hs[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Hs.length&&(n=Hs[0],n.blockedOn===null);)ah(n),n.blockedOn===null&&Hs.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var o=n[l],s=n[l+1],h=o[ei]||null;if(typeof s=="function")h||sh(n);else if(h){var j=null;if(s&&s.hasAttribute("formAction")){if(o=s,h=s[ei]||null)j=h.formAction;else if(yf(o)!==null)continue}else j=h.action;typeof j=="function"?n[l+1]=j:(n.splice(l,3),l-=3),sh(n)}}}function rh(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function vf(e){this._internalRoot=e}yu.prototype.render=vf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var n=t.current,l=Pl();Jp(n,l,e,t,null,null)},yu.prototype.unmount=vf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jp(e.current,2,null,e,null,null),Qd(),t[zt]=null}};function yu(e){this._internalRoot=e}yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ln();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hs.length&&t!==0&&t<Hs[n].priority;n++);Hs.splice(n,0,e),n===0&&ah(e)}};var ch=d.version;if(ch!=="19.2.0")throw Error(u(527,ch,"19.2.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=E(t),e=e!==null?de(e):null,e=e===null?null:e.stateNode,e};var Dg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{Pn=bu.inject(Dg),gn=bu}catch{}}return Td.createRoot=function(e,t){if(!U(e))throw Error(u(299));var n=!1,l="",o=L,s=ee,h=V;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Qp(e,1,!1,null,null,n,l,null,o,s,h,rh),e[zt]=t.current,Ju(e),new vf(t)},Td.hydrateRoot=function(e,t,n){if(!U(e))throw Error(u(299));var l=!1,o="",s=L,h=ee,j=V,B=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError),n.formState!==void 0&&(B=n.formState)),t=Qp(e,1,!0,t,n??null,l,o,B,s,h,j,rh),t.context=Kp(null),n=t.current,l=Pl(),l=Ii(l),o=no(l),o.callback=null,io(n,o,l),n=l,t.current.lanes=n,ji(t,n),ho(t),e[zt]=t.current,Ju(e),new yu(t)},Td.version="19.2.0",Td}var vh;function Ig(){if(vh)return wf.exports;vh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),wf.exports=Eg(),wf.exports}var Vg=Ig();/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$g=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(d,y,u)=>u?u.toUpperCase():y.toLowerCase()),mh=c=>{const d=$g(c);return d.charAt(0).toUpperCase()+d.slice(1)},Ch=(...c)=>c.filter((d,y,u)=>!!d&&d.trim()!==""&&u.indexOf(d)===y).join(" ").trim(),Fg=c=>{for(const d in c)if(d.startsWith("aria-")||d==="role"||d==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=w.forwardRef(({color:c="currentColor",size:d=24,strokeWidth:y=2,absoluteStrokeWidth:u,className:U="",children:X,iconNode:Ce,...be},g)=>w.createElement("svg",{ref:g,...Yg,width:d,height:d,stroke:c,strokeWidth:u?Number(y)*24/Number(d):y,className:Ch("lucide",U),...!X&&!Fg(be)&&{"aria-hidden":"true"},...be},[...Ce.map(([E,de])=>w.createElement(E,de)),...Array.isArray(X)?X:[X]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=(c,d)=>{const y=w.forwardRef(({className:u,...U},X)=>w.createElement(Lg,{ref:X,iconNode:d,className:Ch(`lucide-${Wg(mh(c))}`,`lucide-${c}`,u),...U}));return y.displayName=mh(c),y};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Gg=zh("mouse-pointer",Xg);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Zg=zh("pen-line",qg),zf="#2CA02C",Qg="#F0E442",Kg="#00BFC4",kf="#000000",Jg="#00008b",Rf="#FF0000",kh={DEFAULT_SIZE:18},kd={Battery:{prefix:["B","BT"],defaultPins:2},Capacitor:{prefix:["C"],defaultPins:2},"Electrolytic Capacitor":{prefix:["C","CE"],defaultPins:2},"Film Capacitor":{prefix:["C","CF"],defaultPins:2},Diode:{prefix:["D","CR"],defaultPins:2},Fuse:{prefix:["F"],defaultPins:2},FerriteBead:{prefix:["FB"],defaultPins:2},Connector:{prefix:["J","P"],defaultPins:4},Jumper:{prefix:["JP"],defaultPins:3},Relay:{prefix:["K"],defaultPins:5},Inductor:{prefix:["L"],defaultPins:2},Speaker:{prefix:["LS"],defaultPins:2},Motor:{prefix:["M"],defaultPins:2},PowerSupply:{prefix:["PS"],defaultPins:4},Transistor:{prefix:["Q"],defaultPins:3},Resistor:{prefix:["R"],defaultPins:2},ResistorNetwork:{prefix:["RN"],defaultPins:8},Thermistor:{prefix:["RT"],defaultPins:2},Switch:{prefix:["S","SW"],defaultPins:2},Transformer:{prefix:["T"],defaultPins:4},TestPoint:{prefix:["TP"],defaultPins:1},IntegratedCircuit:{prefix:["U","IC"],defaultPins:8},VacuumTube:{prefix:["V"],defaultPins:5},VariableResistor:{prefix:["VR"],defaultPins:3},Crystal:{prefix:["X","XTAL","Y"],defaultPins:2},ZenerDiode:{prefix:["Z"],defaultPins:2}},ex={Capacitors:{General:["Capacitor"],Electrolytic:["Electrolytic Capacitor"],Film:["Film Capacitor"],Tantalum:["Capacitor"]},Diodes:{Standard:["Diode"],Zener:["ZenerDiode"],LED:["Diode"],Schottky:["Diode"]},Resistors:{Standard:["Resistor"],Network:["ResistorNetwork"],Thermistor:["Thermistor"],Variable:["VariableResistor"]},Semiconductors:{Transistor:["Transistor"],"Integrated Circuit":["IntegratedCircuit"]},"Passive Components":{Inductor:["Inductor"],"Ferrite Bead":["FerriteBead"],Crystal:["Crystal"]},"Power & Energy":{Battery:["Battery"],"Power Supply":["PowerSupply"],Fuse:["Fuse"]},"Connectors & Switches":{Connector:["Connector"],Jumper:["Jumper"],Switch:["Switch"],Relay:["Relay"]},Other:{Transformer:["Transformer"],Speaker:["Speaker"],Motor:["Motor"],"Test Point":["TestPoint"],"Vacuum Tube":["VacuumTube"]}},Df={DEFAULT_SIZE:18},Rh={resistance:{validUnits:["","m","k","M"],defaultUnit:""},capacitance:{validUnits:["pF","nF","F","mF","F"],defaultUnit:"F"},voltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},current:{validUnits:["A","mA","A"],defaultUnit:"A"},power:{validUnits:["W","mW","kW"],defaultUnit:"W"},inductance:{validUnits:["nH","H","mH","H"],defaultUnit:"H"},impedance:{validUnits:["","m","k"],defaultUnit:""},capacity:{validUnits:["mAh","Ah"],defaultUnit:"mAh"},inputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},outputVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},coilVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},primaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},secondaryVoltage:{validUnits:["mV","V","kV"],defaultUnit:"V"},esr:{validUnits:["m",""],defaultUnit:""}};function Ft(c){return Rh[c]?.validUnits||[]}function $e(c){return Rh[c]?.defaultUnit||""}function zd(c){return c.includes(" ")?c:c.replace(/([a-z])([A-Z])/g,"$1 $2")}let Cc=1,wu=Promise.resolve(0);function Oi(){let c;wu=wu.then(y=>(c=y+1,Cc=c+1,c));const d=Cc;return Cc=d+1,d}function vu(c){wu=wu.then(()=>(Cc=c,c-1)),Cc=c}function Sh(){return Cc}function tx(c="id"){return`${c}-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}function wh(c){return Math.round(c*1e4)/1e4}function Ht(c){return{x:wh(c.x),y:wh(c.y)}}function nx(c){return kd[c]?.defaultPins||2}function Su(c){return(kd[c]?.prefix||["?"])[0]}function ix(c,d,y,u,U,X=kh.DEFAULT_SIZE,Ce=[],be=jc(),g=!0){let E="";if(g){const ye=Su(c),Me=lx(ye,Ce,be);E=`${ye}${Me}`}const de={id:tx("comp"),componentType:c,designator:E,layer:d,x:y,y:u,color:U,size:X,pinCount:nx(c),pinConnections:[],orientation:0};switch(de.pinConnections=new Array(de.pinCount).fill(""),(c==="Electrolytic Capacitor"||c==="Diode"||c==="Battery"||c==="ZenerDiode")&&(de.pinPolarities=new Array(de.pinCount).fill("")),c){case"Battery":return{...de,componentType:"Battery"};case"Capacitor":return{...de,componentType:"Capacitor"};case"Electrolytic Capacitor":return{...de,componentType:"Electrolytic Capacitor",polarity:"Positive"};case"Diode":return{...de,componentType:"Diode",diodeType:"Standard"};case"Fuse":return{...de,componentType:"Fuse"};case"FerriteBead":return{...de,componentType:"FerriteBead"};case"Connector":return{...de,componentType:"Connector",gender:"N/A"};case"Jumper":return{...de,componentType:"Jumper"};case"Relay":return{...de,componentType:"Relay"};case"Inductor":return{...de,componentType:"Inductor"};case"Speaker":return{...de,componentType:"Speaker"};case"Motor":return{...de,componentType:"Motor"};case"PowerSupply":return{...de,componentType:"PowerSupply"};case"Transistor":return{...de,componentType:"Transistor",transistorType:"BJT"};case"Resistor":return{...de,componentType:"Resistor"};case"ResistorNetwork":return{...de,componentType:"ResistorNetwork"};case"Thermistor":return{...de,componentType:"Thermistor",thermistorType:"NTC"};case"Switch":return{...de,componentType:"Switch"};case"Transformer":return{...de,componentType:"Transformer"};case"TestPoint":return{...de,componentType:"TestPoint"};case"IntegratedCircuit":return{...de,componentType:"IntegratedCircuit"};case"VacuumTube":return{...de,componentType:"VacuumTube"};case"VariableResistor":return{...de,componentType:"VariableResistor",vrType:"Potentiometer"};case"Crystal":return{...de,componentType:"Crystal"};case"ZenerDiode":return{...de,componentType:"ZenerDiode"};default:return{...de,componentType:"Resistor"}}}function Nf(c,d,y){const u=c.componentType==="Electrolytic Capacitor"||c.componentType==="Diode"||c.componentType==="Battery"||c.componentType==="ZenerDiode",U=c.componentType==="Capacitor"&&"dielectric"in c&&c.dielectric==="Tantalum";if(!(u||U)||c.pinCount!==2||!(d.length===2&&d[0]&&d[0].trim()!==""&&d[1]&&d[1].trim()!==""))return null;const Ce=ye=>{const Me=parseInt(ye,10);if(isNaN(Me))return null;for(const J of y)if((J.type==="via"||J.type==="pad")&&J.points.length>0){const Ae=J.points[0];if(Ae.id===Me)return{x:Ae.x,y:Ae.y}}return null},be=Ce(d[0]),g=Ce(d[1]);if(!be||!g)return null;const E=Math.hypot(c.x-be.x,c.y-be.y),de=Math.hypot(c.x-g.x,c.y-g.y),je=["",""];return E<de?(je[0]="-",je[1]="+"):(je[0]="+",je[1]="-"),je}const Dh="designatorCounters";function jc(){try{const c=localStorage.getItem(Dh);if(c)return JSON.parse(c)}catch(c){console.warn("Failed to load designator counters from localStorage:",c)}return{}}function mu(c){try{localStorage.setItem(Dh,JSON.stringify(c))}catch(d){console.warn("Failed to save designator counters to localStorage:",d)}}function lx(c,d,y){let u=0;for(const X of d)if(X.designator){const Ce=X.designator.match(new RegExp(`^${c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(Ce){const be=parseInt(Ce[1],10);be>u&&(u=be)}}const U=y[c]||0;return Math.max(u,U)+1}function ax(c,d,y){const u={...y};return u[c]=Math.max(u[c]||0,d),u}function ox(){const c=document.createElement("canvas"),d=24;c.width=d,c.height=d;const y=c.getContext("2d");y.strokeStyle="#000",y.lineWidth=3,y.lineCap="round";const u=d/2,U=8;return y.beginPath(),y.moveTo(u,u-U),y.lineTo(u,u-2),y.moveTo(u,u+2),y.lineTo(u,u+U),y.moveTo(u-U,u),y.lineTo(u-2,u),y.moveTo(u+2,u),y.lineTo(u+U,u),y.stroke(),`url(${c.toDataURL()}) ${u} ${u}, crosshair`}function sx(c){const d=document.createElement("canvas"),y=Math.max(12,Math.min(c,32)),U=y+4*2;d.width=U,d.height=U;const X=d.getContext("2d"),Ce=U/2,be=U/2,g=y/2;return X.fillStyle="#FFFF00",X.strokeStyle="#000000",X.lineWidth=2,X.beginPath(),X.moveTo(Ce,be-g),X.lineTo(Ce+g,be),X.lineTo(Ce,be+g),X.lineTo(Ce-g,be),X.closePath(),X.fill(),X.stroke(),`url(${d.toDataURL()}) ${Ce} ${be}, crosshair`}function rx(){const c=new Date,d=c.getFullYear(),y=String(c.getMonth()+1).padStart(2,"0"),u=String(c.getDate()).padStart(2,"0"),U=String(c.getHours()).padStart(2,"0"),X=String(c.getMinutes()).padStart(2,"0"),Ce=String(c.getSeconds()).padStart(2,"0");return`${d}_${y}_${u}-${U}-${X}-${Ce}`}function Sc(c){let d=c.replace(/\.json$/i,""),y="";for(;y!==d;)y=d,d=d.replace(/_\d{4}_\d{2}_\d{2}-\d{2}-\d{2}-\d{2}$/,""),d=d.replace(/_\d{4}_\d{2}_\d{2}_\d{2}_\d{2}_\d{2}$/,"");return d}const Af=c=>{const d=kd[c];return!d||!d.prefix||d.prefix.length<1?"?":d.prefix[0].substring(0,1).toUpperCase()},sa=(c,d,y)=>({color:d,size:y}),jh=(c,d,y)=>{},Dn=(c,d,y,u)=>({color:y,size:u}),wc=(c,d,y,u)=>{},cx=()=>{const c=new Map,d={top:"#0072B2",bottom:"#56B4E9"},y={top:18,bottom:18},u={top:"#FFFF00",bottom:"#FFFF00"},U={top:18,bottom:18},X={top:"#AA4499",bottom:"#F781BF"},Ce={top:6,bottom:6},be={top:"#6A3D9A",bottom:"#9467BD"},g={top:18,bottom:18};return c.set("select",{id:"select",name:"Select",toolType:"select",icon:"",shortcut:"S",tooltip:"Select objects or groups",colorReflective:!1,settings:sa("select","#ff0000",10),layerSettings:new Map([["top",Dn("select","top","#ff0000",10)],["bottom",Dn("select","bottom","#ff0000",10)]])}),c.set("via",{id:"via",name:"Via",toolType:"draw",drawingMode:"via",icon:"",shortcut:"V",tooltip:"Place via connection",colorReflective:!0,settings:sa("via",zf,Df.DEFAULT_SIZE),layerSettings:new Map([["top",Dn("via","top",zf,Df.DEFAULT_SIZE)],["bottom",Dn("via","bottom",zf,Df.DEFAULT_SIZE)]]),defaultLayer:"top"}),c.set("pad",{id:"pad",name:"Pad",toolType:"draw",drawingMode:"pad",icon:"",shortcut:"P",tooltip:"Place pad connection",colorReflective:!0,settings:sa("pad",Jg,18),layerSettings:new Map([["top",Dn("pad","top",d.top,y.top)],["bottom",Dn("pad","bottom",d.bottom,y.bottom)]]),defaultLayer:"top"}),c.set("testPoint",{id:"testPoint",name:"Test Point",toolType:"draw",drawingMode:"testPoint",icon:"",shortcut:"Y",tooltip:"Place test point",colorReflective:!0,settings:sa("testPoint","#FFFF00",18),layerSettings:new Map([["top",Dn("testPoint","top",u.top,U.top)],["bottom",Dn("testPoint","bottom",u.bottom,U.bottom)]]),defaultLayer:"top"}),c.set("trace",{id:"trace",name:"Trace",toolType:"draw",drawingMode:"trace",icon:"",shortcut:"T",tooltip:"Draw copper traces",colorReflective:!0,settings:sa("trace",Qg,6),layerSettings:new Map([["top",Dn("trace","top",X.top,Ce.top)],["bottom",Dn("trace","bottom",X.bottom,Ce.bottom)]]),defaultLayer:"top"}),c.set("component",{id:"component",name:"Component",toolType:"component",icon:"",shortcut:"C",tooltip:"Place component",colorReflective:!0,settings:sa("component",Kg,kh.DEFAULT_SIZE),layerSettings:new Map([["top",Dn("component","top",be.top,g.top)],["bottom",Dn("component","bottom",be.bottom,g.bottom)]]),defaultLayer:"top"}),c.set("componentConnection",{id:"componentConnection",name:"Component Connections",toolType:"componentConnection",icon:"",shortcut:"",tooltip:"Component connection lines",colorReflective:!1,settings:sa("componentConnection","#E69F00",3),layerSettings:new Map([["top",Dn("componentConnection","top","#E69F00",3)],["bottom",Dn("componentConnection","bottom","#E69F00",3)]])}),c.set("power",{id:"power",name:"Power",toolType:"power",icon:"",shortcut:"B",tooltip:"Place power node",colorReflective:!0,settings:sa("power",Rf,18),layerSettings:new Map([["top",Dn("power","top",Rf,18)],["bottom",Dn("power","bottom",Rf,18)]]),defaultLayer:"top"}),c.set("ground",{id:"ground",name:"Ground",toolType:"ground",icon:"",shortcut:"G",tooltip:"Place ground symbol",colorReflective:!0,settings:sa("ground",kf,18),layerSettings:new Map([["top",Dn("ground","top",kf,18)],["bottom",Dn("ground","bottom",kf,18)]]),defaultLayer:"top"}),c.set("erase",{id:"erase",name:"Erase",toolType:"erase",icon:"",shortcut:"E",tooltip:"Erase objects",colorReflective:!1,settings:sa("erase","#f5a3b3",18),layerSettings:new Map([["top",Dn("erase","top","#f5a3b3",18)],["bottom",Dn("erase","bottom","#f5a3b3",18)]])}),c.set("pan",{id:"pan",name:"Move",toolType:"pan",icon:"",shortcut:"H",tooltip:"Pan the view",colorReflective:!1,settings:sa("pan","#ff0000",10),layerSettings:new Map([["top",Dn("pan","top","#ff0000",10)],["bottom",Dn("pan","bottom","#ff0000",10)]])}),c.set("magnify",{id:"magnify",name:"Zoom",toolType:"magnify",icon:"+",shortcut:"Z",tooltip:"Zoom In (or Zoom Out)",colorReflective:!1,settings:sa("magnify","#ff0000",10),layerSettings:new Map([["top",Dn("magnify","top","#ff0000",10)],["bottom",Dn("magnify","bottom","#ff0000",10)]])}),c},Th={via:{color:"#2CA02C",size:18},padTop:{color:"#0072B2",size:18},padBottom:{color:"#56B4E9",size:18},testPointTop:{color:"#FFFF00",size:18},testPointBottom:{color:"#FFFF00",size:18},traceTop:{color:"#AA4499",size:6},traceBottom:{color:"#F781BF",size:6},componentTop:{color:"#6A3D9A",size:18},componentBottom:{color:"#9467BD",size:18},power:{color:"#ff0000",size:18},ground:{color:"#000000",size:18}},Cd={via:"Via",padTop:"Pad (Top)",padBottom:"Pad (Bottom)",testPointTop:"Test Point (Top)",testPointBottom:"Test Point (Bottom)",traceTop:"Trace (Top)",traceBottom:"Trace (Bottom)",componentTop:"Component (Top)",componentBottom:"Component (Bottom)",power:"Power",ground:"Ground"};class dx{instances=new Map;listeners=new Map;initialize(){for(const d of Object.keys(Th)){const y=Th[d];this.instances.set(d,{id:d,name:Cd[d],color:y.color,size:y.size}),this.listeners.set(d,new Set)}}initializeFromProject(d){if(this.initialize(),d?.toolInstances)for(const[y,u]of Object.entries(d.toolInstances))this.instances.has(y)&&this.instances.set(y,u)}get(d){const y=this.instances.get(d);if(!y)throw new Error(`Tool instance ${d} not found`);return y}getColor(d){const y=this.instances.get(d);if(!y)throw new Error(`Tool instance ${d} not found`);const u=Cd[d];return console.log(`${u}, returning color value=${y.color}`),y.color}getSize(d){const y=this.instances.get(d);if(!y)throw new Error(`Tool instance ${d} not found`);const u=Cd[d];return console.log(`${u}, returning size value=${y.size}`),y.size}setColor(d,y){const u=this.instances.get(d);if(u){const U=Cd[d];console.log(`${U}, setting color value=${y}`),u.color=y,this.notifyListeners(d)}}setSize(d,y){const u=this.instances.get(d);if(u){const U=Cd[d];console.log(`${U}, setting size value=${y}`),u.size=y,this.notifyListeners(d)}}getAll(){const d={};for(const[y,u]of this.instances.entries())d[y]=u;return d}subscribe(d,y){const u=this.listeners.get(d);return u?(u.add(y),()=>{u.delete(y)}):()=>{}}notifyListeners(d){const y=this.listeners.get(d);y&&y.forEach(u=>u())}}const St=new dx;St.initialize();function Tc(c,d){switch(c){case"via":return"via";case"pad":return d==="bottom"?"padBottom":"padTop";case"testPoint":return d==="bottom"?"testPointBottom":"testPointTop";case"trace":return d==="bottom"?"traceBottom":"traceTop";case"component":return d==="bottom"?"componentBottom":"componentTop";case"power":return"power";case"ground":return"ground";default:throw new Error(`Unknown tool: ${c}`)}}const ux=({visible:c,toolRegistry:d,currentTool:y,drawingMode:u,traceToolLayer:U,padToolLayer:X,testPointToolLayer:Ce,componentToolLayer:be,updateToolSettings:g,updateToolLayerSettings:E,setBrushSize:de,saveToolSettings:je,saveToolLayerSettings:ye,setTopTraceSize:Me,setBottomTraceSize:J,setTopPadSize:Ae,setBottomPadSize:He,setTopTestPointSize:ge,setBottomTestPointSize:A,setTopComponentSize:K,setBottomComponentSize:lt,setComponentConnectionSize:$,saveDefaultSize:D,onClose:k})=>{if(!c)return null;const R=Array.from({length:50},(q,Be)=>Be+1),m=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],ue=(q,Be,Ee)=>{const Xe=d.get(q);if(!Xe)return;if(["trace","pad","testPoint","component"].includes(q)&&Ee){Xe.layerSettings.get(Ee);const _=Tc(q,Ee);St.setSize(_,Be),(q==="trace"&&y==="draw"&&u==="trace"||q==="pad"&&y==="draw"&&u==="pad"||q==="testPoint"&&y==="draw"&&u==="testPoint"||q==="component"&&y==="component")&&((q==="trace"?U:q==="pad"?X:q==="testPoint"?Ce:be)||"top")===Ee&&de(Be)}else{const _=Tc(q);_&&(St.setSize(_,Be),(q==="via"&&y==="draw"&&u==="via"||q==="power"&&y==="power"||q==="ground"&&y==="ground")&&de(Be)),q==="componentConnection"&&($(Be),D("componentConnection",Be)),q==="erase"&&y==="erase"&&de(Be)}};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:q=>{q.target===q.currentTarget&&k()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",maxWidth:"400px",maxHeight:"70vh",overflowY:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:q=>q.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Size"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:m.map((q,Be)=>{const Ee=d.get(q.id);if(!Ee)return null;const Xe=q.layer?`${q.name} (${q.layer==="top"?"Top":"Bottom"})`:q.name,re=q.layer?Ee.layerSettings.get(q.layer)?.size??Ee.settings.size??10:Ee.settings.size??10;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[Xe,":"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[i.jsx("select",{value:re,onChange:_=>{const P=parseInt(_.target.value,10);ue(q.id,P,q.layer)},style:{width:"50px",padding:"4px 6px",background:"#2b2b31",border:"1px solid #3a3a44",borderRadius:4,color:"#f2f2f2",fontSize:"12px",cursor:"pointer"},children:R.map(_=>i.jsx("option",{value:_,style:{background:"#2b2b31",color:"#f2f2f2"},children:_},_))}),i.jsx("span",{style:{color:"#f2f2f2",fontSize:"12px"},children:"px"})]})]},`${q.id}-${q.layer||"default"}-${Be}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:k,style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},fx=({visible:c,toolRegistry:d,currentTool:y,drawingMode:u,traceToolLayer:U,padToolLayer:X,testPointToolLayer:Ce,componentToolLayer:be,updateToolSettings:g,updateToolLayerSettings:E,saveToolSettings:de,saveToolLayerSettings:je,setBrushColor:ye,setTopTraceColor:Me,setBottomTraceColor:J,setTopPadColor:Ae,setBottomPadColor:He,setTopTestPointColor:ge,setBottomTestPointColor:A,setTopComponentColor:K,setBottomComponentColor:lt,setComponentConnectionColor:$,saveDefaultColor:D,colorPalette:k,onClose:R})=>{const[m,ue]=Pe.useState(null),[q,Be]=Pe.useState(0);if(Pe.useEffect(()=>{const P=[];return[{id:"via"},{id:"pad",layer:"top"},{id:"pad",layer:"bottom"},{id:"testPoint",layer:"top"},{id:"testPoint",layer:"bottom"},{id:"trace",layer:"top"},{id:"trace",layer:"bottom"},{id:"component",layer:"top"},{id:"component",layer:"bottom"},{id:"power"},{id:"ground"}].forEach(({id:he,layer:W})=>{try{const C=Tc(he,W),H=St.subscribe(C,()=>{Be(le=>le+1)});P.push(H)}catch{}}),()=>{P.forEach(he=>he())}},[]),!c)return null;const Ee=["pad","testPoint","trace","component"],Xe=[{id:"via",name:"Via"},{id:"pad",name:"Pad",layer:"top"},{id:"pad",name:"Pad",layer:"bottom"},{id:"testPoint",name:"Test Point",layer:"top"},{id:"testPoint",name:"Test Point",layer:"bottom"},{id:"trace",name:"Trace",layer:"top"},{id:"trace",name:"Trace",layer:"bottom"},{id:"component",name:"Component",layer:"top"},{id:"component",name:"Component",layer:"bottom"},{id:"componentConnection",name:"Component Connections"},{id:"power",name:"Power"},{id:"ground",name:"Ground"},{id:"erase",name:"Erase"}],re=(P,F,he)=>{if(P==="componentConnection"){$(F),D("componentConnection",F),ue(null);return}if(P==="erase"){const W=d.get(P);W&&(g(P,{...W.settings,color:F}),de(P,F,W.settings.size)),ue(null);return}try{let W;he&&Ee.includes(P)?W=Tc(P,he):W=Tc(P),St.setColor(W,F),(P==="via"&&y==="draw"&&u==="via"||P==="trace"&&y==="draw"&&u==="trace"||P==="pad"&&y==="draw"&&u==="pad"||P==="testPoint"&&y==="draw"&&u==="testPoint"||P==="component"&&y==="component"||P==="power"&&y==="power"||P==="ground"&&y==="ground")&&(he&&Ee.includes(P)?((P==="trace"?U:P==="pad"?X:P==="testPoint"?Ce:be)||"top")===he&&ye(F):ye(F))}catch(W){console.error(`Error updating color for tool ${P}:`,W);const C=d.get(P);C&&(he&&Ee.includes(P)?(E(P,he,{...C.layerSettings.get(he),color:F}),je(P,he,F,C.layerSettings.get(he)?.size||C.settings.size)):(g(P,{...C.settings,color:F}),de(P,F,C.settings.size)))}ue(null)},_=(P,F)=>{let he;try{const H=Tc(P,F);he=St.get(H).color}catch{const H=d.get(P);if(!H)return null;he=H.settings.color??"#000000"}const W=F?`${P}-${F}`:P,C=m?.toolId===P&&m?.layer===F;return i.jsxs("div",{style:{position:"relative",display:"inline-block",zIndex:10005},children:[i.jsx("button",{className:"color-swatch-button",onClick:H=>{H.stopPropagation(),ue(C?null:{toolId:P,layer:F})},style:{width:"40px",height:"24px",background:he,backgroundColor:he,backgroundImage:"none",border:"1px solid #3a3a44",borderRadius:3,cursor:"pointer",padding:0,margin:0,display:"block","--swatch-color":he},title:he},`${W}-button-${he}-${q}`),C&&i.jsx("div",{onClick:H=>{H.stopPropagation()},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:100},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:k.map(H=>i.jsx("div",{onClick:()=>re(P,H,F),title:H,style:{width:22,height:22,backgroundColor:H,border:H===he?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},H))})})]},`${W}-${he}-${q}`)};return i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:P=>{P.target===P.currentTarget&&(R(),ue(null))},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"16px",width:"fit-content",minWidth:"450px",maxWidth:"600px",maxHeight:"70vh",overflowY:"auto",overflowX:"visible",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:P=>P.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},children:"Set Tool Color"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Xe.map((P,F)=>{if(!d.get(P.id))return null;const W=P.layer?`${P.name} (${P.layer==="top"?"Top":"Bottom"})`:P.name;return i.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 10px",background:"#1f1f24",borderRadius:4},children:[i.jsxs("label",{style:{color:"#f2f2f2",fontSize:"13px",width:"140px",flexShrink:0,marginRight:"8px"},children:[W,":"]}),_(P.id,P.layer)]},`${P.id}-${P.layer||"default"}-${F}`)})}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px",marginTop:"16px"},children:i.jsx("button",{onClick:()=>{R(),ue(null)},style:{padding:"6px 12px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"13px",fontWeight:600},children:"Close"})})]})})},px=({openMenu:c,setOpenMenu:d,isReadOnlyMode:y,currentProjectFilePath:u,onNewProject:U,onOpenProject:X,onSaveProject:Ce,onSaveAs:be,onPrint:g,hasUnsavedChanges:E,setNewProjectDialog:de,setAutoSaveDialog:je,topImage:ye,bottomImage:Me,selectedImageForTransform:J,setSelectedImageForTransform:Ae,setCurrentTool:He,transformMode:ge,setTransformMode:A,updateImageTransform:K,resetImageTransform:lt,isGrayscale:$,setIsGrayscale:D,isBlackAndWhiteEdges:k,setIsBlackAndWhiteEdges:R,isBlackAndWhiteInverted:m,setIsBlackAndWhiteInverted:ue,areImagesLocked:q,setAreImagesLocked:Be,onEnterBoardDimensions:Ee,fileInputTopRef:Xe,fileInputBottomRef:re,openProjectRef:_,increaseSize:P,decreaseSize:F,brushSize:he,drawingStrokes:W,selectedIds:C,selectedComponentIds:H,selectedPowerIds:le,selectedGroundIds:me,componentsTop:Ie,componentsBottom:at,powers:ut,grounds:Bt,powerNodeNames:Ke,groundNodeNames:Jt,setSetSizeDialog:Hi,areViasLocked:Ua,setAreViasLocked:pi,arePadsLocked:Kn,setArePadsLocked:Jn,areTestPointsLocked:Ji,setAreTestPointsLocked:Ei,areTracesLocked:_l,setAreTracesLocked:hi,areComponentsLocked:yl,setAreComponentsLocked:Pa,areGroundNodesLocked:zc,setAreGroundNodesLocked:Fo,arePowerNodesLocked:gi,setArePowerNodesLocked:Ge,setSelectedIds:Ct,setSelectedComponentIds:zr,setSelectedPowerIds:Ve,setSelectedGroundIds:Vt,selectAllVias:ra,selectAllTraces:Yo,selectAllPads:Wt,selectAllComponents:Pn,selectDisconnectedComponents:gn,selectAllPowerNodes:xi,selectAllGroundNodes:we,selectPowerNodesByName:Ol,selectGroundNodesByName:yt,setShowPowerBusManager:_n,setShowGroundBusManager:Hl,setShowDesignatorManager:Lo,toolRegistry:ca,updateToolSettings:El,updateToolLayerSettings:Mt,setBrushSize:Il,setBrushColor:Xo,saveToolSettings:da,saveToolLayerSettings:ua,colorPalette:ji,currentTool:Vl,drawingMode:Is,traceToolLayer:Vs,padToolLayer:Oe,testPointToolLayer:Ii,componentToolLayer:wt,setTopTraceSize:Ln,setBottomTraceSize:Ws,setTopPadSize:bl,setBottomPadSize:On,setTopTestPointSize:ei,setBottomTestPointSize:zt,setTopComponentSize:_a,setBottomComponentSize:en,setComponentConnectionSize:kr,topTraceColor:tn,bottomTraceColor:go,topPadColor:pn,bottomPadColor:Oa,topTestPointColor:Wl,bottomTestPointColor:fa,topComponentColor:$l,bottomComponentColor:wn,setTopTraceColor:Rr,setBottomTraceColor:Hn,setTopPadColor:pa,setBottomPadColor:Dt,setTopTestPointColor:An,setBottomTestPointColor:Ha,setTopComponentColor:$s,setBottomComponentColor:xo,setComponentConnectionColor:yo,saveDefaultSize:ti,saveDefaultColor:Nn,menuBarRef:yi,onOpenProjectNotes:ha})=>{const[Go,jn]=Pe.useState(null),xn=Pe.useRef(null),[el,Vi]=Pe.useState(null),dn=Pe.useRef(null),[Fs,Vn]=Pe.useState(null),Bn=Pe.useRef(null),[Ea,qo]=Pe.useState(!1),[Dr,hn]=Pe.useState(!1),Ys=(ze,Ye)=>{const ft=ze==="top",pt=ze==="bottom",tt=ze==="both",kt=ft?ye:pt?Me:null,Ut=!(tt?ye&&Me:kt!==null)||q,mt=tt?ye?.brightness??100:kt?.brightness??100,sn=tt?ye?.contrast??100:kt?.contrast??100;return i.jsxs("div",{onMouseEnter:()=>{Ye.current&&(clearTimeout(Ye.current),Ye.current=null),jn(ze)},onMouseLeave:()=>{jn(null)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{const ot=J==="top"||J==="bottom"?J:ze;if(ot==="both"){const At=!ye?.flipX;K("both",{flipX:At})}else{const At=ot==="top"?ye?.flipX||!1:Me?.flipX||!1;K(ot,{flipX:!At})}jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:"Horizontal Flip"}),i.jsx("button",{onClick:()=>{const ot=J==="top"||J==="bottom"?J:ze;if(ot==="both"){const At=!ye?.flipY;K("both",{flipY:At})}else{const At=ot==="top"?ye?.flipY||!1:Me?.flipY||!1;K(ot,{flipY:!At})}jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:"Vertical Flip"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("button",{onClick:()=>{J==="top"||J==="bottom"||Ae(ze),A("nudge"),He("transform"),jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:[ge==="nudge"&&J===ze?" ":"","Mode: Nudge"]}),i.jsxs("button",{onClick:()=>{J==="top"||J==="bottom"||Ae(ze),A("scale"),He("transform"),jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:[ge==="scale"&&J===ze?" ":"","Mode: Scale"]}),i.jsxs("button",{onClick:()=>{J==="top"||J==="bottom"||Ae(ze),A("rotate"),He("transform"),jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:[ge==="rotate"&&J===ze?" ":"","Mode: Rotate"]}),i.jsxs("button",{onClick:()=>{J==="top"||J==="bottom"||Ae(ze),A("slant"),He("transform"),jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:[ge==="slant"&&J===ze?" ":"","Mode: Slant"]}),i.jsxs("button",{onClick:()=>{J==="top"||J==="bottom"||Ae(ze),A("keystone"),He("transform"),jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:[ge==="keystone"&&J===ze?" ":"","Mode: Keystone"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("div",{style:{padding:"8px 10px",borderBottom:"1px solid #444"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[i.jsx("label",{style:{color:"#f2f2f2",fontSize:"12px",fontWeight:500},children:"Brightness"}),i.jsxs("span",{style:{color:"#aaa",fontSize:"11px",minWidth:"40px",textAlign:"right"},children:[mt,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:mt,onChange:ot=>{const At=parseInt(ot.target.value,10);tt?K("both",{brightness:At}):K(ze,{brightness:At})},disabled:Ut,style:{width:"100%",cursor:Ut?"not-allowed":"pointer"}})]}),i.jsxs("div",{style:{padding:"8px 10px",borderBottom:"1px solid #444"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[i.jsx("label",{style:{color:"#f2f2f2",fontSize:"12px",fontWeight:500},children:"Contrast"}),i.jsxs("span",{style:{color:"#aaa",fontSize:"11px",minWidth:"40px",textAlign:"right"},children:[sn,"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"200",step:"1",value:sn,onChange:ot=>{const At=parseInt(ot.target.value,10);tt?K("both",{contrast:At}):K(ze,{contrast:At})},disabled:Ut,style:{width:"100%",cursor:Ut?"not-allowed":"pointer"}})]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Ae(ze),He("transform"),$||k?(D(!1),R(!1),ue(!1)):D(!0),jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:$||k?"Color Mode":"Grayscale Mode"}),i.jsx("button",{onClick:()=>{Ae(ze),He("transform"),k?ue(ot=>!ot):(R(!0),ue(!1)),jn(null),d(null)},disabled:Ut,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:Ut?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:Ut?"not-allowed":"pointer"},children:k?"Invert Edges":"Black & White Edges"})]})},vt=ze=>{const Ye=ze==="power"?Ke:Jt,ft=Ye.length>0,pt=ze==="power"?"Select Power Nodes":"Select Ground Nodes";return i.jsxs("div",{onMouseEnter:()=>{dn.current&&(clearTimeout(dn.current),dn.current=null),Vi(ze)},onMouseLeave:()=>{dn.current=window.setTimeout(()=>{Vi(tt=>tt===ze?null:tt)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:[pt," by Name"]}),i.jsxs("button",{onClick:()=>{ze==="power"?xi():we(),Vi(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:["All ",ze==="power"?"Power Nodes":"Ground Nodes"]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),ft?Ye.map(tt=>i.jsx("button",{onClick:()=>{ze==="power"?Ol(tt):yt(tt),Vi(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:tt},tt)):i.jsxs("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:["No ",ze==="power"?"power":"ground"," nodes available."]})]})},jt=()=>i.jsxs("div",{onMouseEnter:()=>{Bn.current&&(clearTimeout(Bn.current),Bn.current=null),Vn("lock")},onMouseLeave:()=>{Bn.current=window.setTimeout(()=>{Vn(ze=>ze==="lock"?null:ze)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsxs("label",{onClick:ze=>{ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Ua,onChange:()=>{pi(ze=>!ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Vias"})]}),i.jsxs("label",{onClick:ze=>{ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Kn,onChange:()=>{Jn(ze=>!ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Pads"})]}),i.jsxs("label",{onClick:ze=>{ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:Ji,onChange:()=>{Ei(ze=>!ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Test Points"})]}),i.jsxs("label",{onClick:ze=>{ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:_l,onChange:()=>{hi(ze=>!ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Traces"})]}),i.jsxs("label",{onClick:ze=>{ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:yl,onChange:()=>{Pa(ze=>!ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Components"})]}),i.jsxs("label",{onClick:ze=>{ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:zc,onChange:()=>{Fo(ze=>!ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Ground Node"})]}),i.jsxs("label",{onClick:ze=>{ze.stopPropagation()},style:{display:"flex",alignItems:"center",width:"100%",padding:"6px 10px",color:"#f2f2f2",cursor:"pointer",userSelect:"none"},children:[i.jsx("input",{type:"checkbox",checked:gi,onChange:()=>{Ge(ze=>!ze)},style:{marginRight:"8px",cursor:"pointer",width:"16px",height:"16px",accentColor:"#4a9eff"}}),i.jsx("span",{children:"Lock Power Nodes"})]})]}),Ia=()=>i.jsxs("div",{onMouseEnter:()=>{Bn.current&&(clearTimeout(Bn.current),Bn.current=null),Vn("select")},onMouseLeave:()=>{Bn.current=window.setTimeout(()=>{Vn(ze=>ze==="select"?null:ze)},200)},style:{position:"absolute",top:0,left:"100%",marginLeft:"4px",minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6,zIndex:10},children:[i.jsx("button",{onClick:()=>{ra(),Vn(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Vias"}),i.jsx("button",{onClick:()=>{Yo(),Vn(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Traces"}),i.jsx("button",{onClick:()=>{Wt(),Vn(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Pads"}),i.jsx("button",{onClick:()=>{const ze=new Set(W.filter(Ye=>Ye.type==="testPoint").map(Ye=>Ye.id));Ct(ze),zr(new Set),Ve(new Set),Vt(new Set),Vn(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Test Points"}),i.jsx("button",{onClick:()=>{Pn(),Vn(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"All Components"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{dn.current&&(clearTimeout(dn.current),dn.current=null),Vi("power")},onMouseLeave:()=>{dn.current=window.setTimeout(()=>{Vi(ze=>ze==="power"?null:ze)},200)},onClick:()=>{Vi(ze=>ze==="power"?null:"power")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Power Nodes "}),el==="power"&&vt("power")]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{dn.current&&(clearTimeout(dn.current),dn.current=null),Vi("ground")},onMouseLeave:()=>{dn.current=window.setTimeout(()=>{Vi(ze=>ze==="ground"?null:ze)},200)},onClick:()=>{Vi(ze=>ze==="ground"?null:"ground")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Ground Nodes "}),el==="ground"&&vt("ground")]}),i.jsx("button",{onClick:()=>{gn(),Vn(null),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Disconnected Components"})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{ref:yi,style:{position:"relative",background:"rgba(250,250,255,0.9)",borderBottom:"1px solid #e6e6ef",padding:"6px 12px",display:"flex",gap:16,alignItems:"center",zIndex:3},children:[i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ze=>{ze.stopPropagation(),d(Ye=>Ye==="file"?null:"file")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="file"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"File "}),c==="file"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:200,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{y||(d(null),E()?de({visible:!0}):U())},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"New Project"}),i.jsx("button",{onClick:async()=>{await X(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Open Project"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{y||(Ce(),d(null))},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"Save Project"}),i.jsx("button",{onClick:()=>{y||(be(),d(null))},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"Save As"}),i.jsx("button",{onClick:()=>{y||(je({visible:!0,interval:5}),d(null))},disabled:y,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y?"not-allowed":"pointer"},children:"Auto Save"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{g(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Print"}),i.jsx("button",{onClick:()=>{g(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Printer Settings"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ze=>{y||(ze.stopPropagation(),d(Ye=>Ye==="transform"?null:"transform"))},disabled:y,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="transform"?"#eef3ff":"#fff",fontWeight:600,color:y?"#999":"#222",cursor:y?"not-allowed":"pointer",opacity:y?.5:1},children:"Images "}),c==="transform"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:260,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Load Images"}),i.jsx("button",{onClick:()=>{!y&&!q&&(Xe.current?.click(),d(null))},disabled:y||q,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y||q?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y||q?"not-allowed":"pointer"},children:"Load Top PCB"}),i.jsx("button",{onClick:()=>{!y&&!q&&(re.current?.click(),d(null))},disabled:y||q,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:y||q?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:y||q?"not-allowed":"pointer"},children:"Load Bottom PCB"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{q||(Ee(),d(null))},disabled:q,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:q?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:q?"not-allowed":"pointer"},children:"Enter PCB Dimensions"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("div",{style:{padding:"4px 10px",fontSize:12,color:"#bbb"},children:"Select Image"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!ye||q,onMouseEnter:()=>{q||(xn.current&&(clearTimeout(xn.current),xn.current=null),jn("top"))},onMouseLeave:()=>{xn.current=setTimeout(()=>{jn(ze=>ze==="top"?null:ze)},300)},onClick:()=>{q||(Ae("top"),He("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!ye||q?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!ye||q?"not-allowed":"pointer"},children:[J==="top"?" ":"","Top Image "]}),Go==="top"&&!q&&Ys("top",xn)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!Me||q,onMouseEnter:()=>{q||(xn.current&&(clearTimeout(xn.current),xn.current=null),jn("bottom"))},onMouseLeave:()=>{xn.current=setTimeout(()=>{jn(ze=>ze==="bottom"?null:ze)},300)},onClick:()=>{q||(Ae("bottom"),He("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!Me||q?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!Me||q?"not-allowed":"pointer"},children:[J==="bottom"?" ":"","Bottom Image "]}),Go==="bottom"&&!q&&Ys("bottom",xn)]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsxs("button",{disabled:!ye||!Me||q,onMouseEnter:()=>{q||(xn.current&&(clearTimeout(xn.current),xn.current=null),jn("both"))},onMouseLeave:()=>{xn.current=setTimeout(()=>{jn(ze=>ze==="both"?null:ze)},300)},onClick:()=>{q||(Ae("both"),He("transform"))},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:!ye||!Me||q?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:!ye||!Me||q?"not-allowed":"pointer"},children:[J==="both"?" ":"","Both Images "]}),Go==="both"&&!q&&Ys("both",xn)]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{q||(He("transform"),lt(),d(null))},disabled:q,style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:q?"#777":"#f2f2f2",background:"transparent",border:"none",cursor:q?"not-allowed":"pointer"},children:"Reset Transform"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Be(ze=>!ze),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:q?"Unlock Images ":"Lock Images"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ze=>{y||(ze.stopPropagation(),d(Ye=>Ye==="tools"?null:"tools"))},disabled:y,style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="tools"?"#eef3ff":"#fff",fontWeight:600,color:y?"#999":"#222",cursor:y?"not-allowed":"pointer",opacity:y?.5:1},children:"Tools "}),c==="tools"&&i.jsxs("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:220,background:"#2b2b31",border:"1px solid #1f1f24",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:6},children:[i.jsx("button",{onClick:()=>{P(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Increase Size (+)"}),i.jsx("button",{onClick:()=>{F(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Decrease Size (-)"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{qo(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Size"}),i.jsx("button",{onClick:()=>{hn(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Set Tool Color"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Bn.current&&(clearTimeout(Bn.current),Bn.current=null),Vn("lock")},onMouseLeave:()=>{Bn.current=window.setTimeout(()=>{Vn(ze=>ze==="lock"?null:ze)},200)},onClick:()=>{Vn(ze=>ze==="lock"?null:"lock")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Lock "}),Fs==="lock"&&jt()]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onMouseEnter:()=>{Bn.current&&(clearTimeout(Bn.current),Bn.current=null),Vn("select")},onMouseLeave:()=>{Bn.current=window.setTimeout(()=>{Vn(ze=>ze==="select"?null:ze)},200)},onClick:()=>{Vn(ze=>ze==="select"?null:"select")},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Select "}),Fs==="select"&&Ia()]}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{ha(),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none",cursor:"pointer"},children:"Project Notes"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{_n(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>{Hl(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Ground Buses"}),i.jsx("div",{style:{height:1,background:"#eee",margin:"6px 0"}}),i.jsx("button",{onClick:()=>{Lo(!0),d(null)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 10px",color:"#f2f2f2",background:"transparent",border:"none"},children:"Manage Designators"})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:ze=>{ze.stopPropagation(),d(Ye=>Ye==="about"?null:"about")},style:{padding:"6px 10px",borderRadius:6,border:"1px solid #ddd",background:c==="about"?"#eef3ff":"#fff",fontWeight:600,color:"#222"},children:"About "}),c==="about"&&i.jsx("div",{style:{position:"absolute",top:"calc(100% + 6px)",left:0,minWidth:500,maxWidth:700,maxHeight:"80vh",background:"#fff",border:"1px solid #ccc",borderRadius:6,boxShadow:"0 6px 18px rgba(0,0,0,0.25)",padding:20,overflowY:"auto",zIndex:100},children:i.jsxs("div",{style:{marginBottom:16},children:[i.jsx("h2",{style:{margin:"0 0 16px 0",color:"#000",fontSize:"20px",fontWeight:700},children:"PCB Reverse Engineering Tool"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"About"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"A specialized tool for reverse engineering printed circuit boards (PCBs) by tracing and documenting circuit connections from PCB images. This application supports typical 2 to 4 layer PCBs and enables comprehensive PCB analysis and documentation."}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"This tool can also be used to assist in troubleshooting electronics by tracing circuits, holding contextual notes, comparing test results, and documenting findings during the debugging process."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Technology"}),i.jsx("p",{style:{margin:"0 0 12px 0",color:"#222",fontSize:"14px",lineHeight:"1.6"},children:"The application runs entirely client-side in the browser, to provide a responsive, interactive drawing experience with no backend server requirements."})]}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Features"}),i.jsxs("div",{style:{marginBottom:20},children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Tools & Shortcuts"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 16px",fontSize:"13px",color:"#222"},children:[i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Select"}),"  ",i.jsx("code",{children:"S"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Via"}),"  ",i.jsx("code",{children:"V"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Pad"}),"  ",i.jsx("code",{children:"P"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Test Point"}),"  ",i.jsx("code",{children:"Y"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Trace"}),"  ",i.jsx("code",{children:"T"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component"}),"  ",i.jsx("code",{children:"C"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Component Properties"}),"  double-click component"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Resize Icons"}),"  ",i.jsx("code",{children:"+"})," / ",i.jsx("code",{children:"-"})]})]})}),i.jsx("div",{children:i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Power"}),"  ",i.jsx("code",{children:"B"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Ground"}),"  ",i.jsx("code",{children:"G"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Erase"}),"  ",i.jsx("code",{children:"E"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move (Pan)"}),"  ",i.jsx("code",{children:"H"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Zoom"}),"  ",i.jsx("code",{children:"Z"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Center"}),"  ",i.jsx("code",{children:"X"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Information Dialog"}),"  ",i.jsx("code",{children:"I"})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Notes Dialog"}),"  ",i.jsx("code",{children:"N"})]})]})})]}),i.jsxs("div",{style:{marginTop:"12px",fontSize:"13px",color:"#222"},children:[i.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:600},children:"Arrow Keys"}),i.jsxs("ul",{style:{margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Image Transformations"}),"  Arrow keys for scaling, rotating, and adjusting image transformations (when image is selected for transform)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Move Selected Components"}),"  Arrow keys to nudge selected components"]})]})]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px 20px"},children:[i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Image Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Load top and bottom PCB images"}),i.jsx("li",{children:"Image alignment and transformation"}),i.jsx("li",{children:"Transform modes: nudge, scale, rotate, slant, keystone"}),i.jsx("li",{children:"Horizontal and vertical flip controls"}),i.jsx("li",{children:"Grayscale and edge detection modes"}),i.jsx("li",{children:"Board dimensions configuration"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Drawing Tools"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Draw copper traces (top and bottom layers)"}),i.jsx("li",{children:"Place vias for layer connections"}),i.jsx("li",{children:"Place component pads (SMD and through-hole)"}),i.jsx("li",{children:"Place test points for circuit testing"}),i.jsx("li",{children:"Place and annotate components"}),i.jsx("li",{children:"Place power and ground nodes"}),i.jsx("li",{children:"Erase tool for removing elements"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Layer Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Separate top and bottom layer support"}),i.jsx("li",{children:"Layer-specific color customization"}),i.jsx("li",{children:"Layer-specific size controls"}),i.jsx("li",{children:"Layer visibility toggles"}),i.jsx("li",{children:"Overlay view mode"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Component Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Component placement with pin counts"}),i.jsx("li",{children:"Pin connection tracking"}),i.jsx("li",{children:"Component type classification"}),i.jsx("li",{children:"Designator and value annotation"}),i.jsx("li",{children:"Component editor dialog"}),i.jsx("li",{children:"Find and center component"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Selection & Locking"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Select individual elements or groups"}),i.jsx("li",{children:"Select all vias, traces, pads, or components"}),i.jsx("li",{children:"Select power/ground nodes by name"}),i.jsx("li",{children:"Select disconnected components"}),i.jsx("li",{children:"Lock/unlock elements by type"}),i.jsx("li",{children:"Image locking for protection"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Power & Ground"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Multiple voltage power nodes"}),i.jsx("li",{children:"Power bus management"}),i.jsx("li",{children:"Ground node placement"}),i.jsx("li",{children:"Ground bus management"}),i.jsx("li",{children:"Node naming and organization"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Customization"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Customizable colors per layer"}),i.jsx("li",{children:"Adjustable brush/tool sizes"}),i.jsx("li",{children:"Size presets for common tools"}),i.jsx("li",{children:"Color palette management"}),i.jsx("li",{children:"Tool settings persistence"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"Project Management"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Create, open, and save projects"}),i.jsx("li",{children:"Auto-save with configurable intervals"}),i.jsx("li",{children:"File history automatically saved in history subdirectory when Auto Save is enabled"}),i.jsx("li",{children:"Project file format (JSON)"}),i.jsx("li",{children:"Print functionality"}),i.jsx("li",{children:"Export to KiCad schematic format (future feature, not yet implemented)"})]})]}),i.jsxs("div",{children:[i.jsx("p",{style:{margin:"0 0 8px 0",color:"#222",fontSize:"14px",fontWeight:600},children:"View Controls"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"Zoom in/out with mouse wheel"}),i.jsx("li",{children:"Pan view with hand tool"}),i.jsx("li",{children:"Zoom to fit"}),i.jsx("li",{children:"View mode switching (top/bottom/overlay)"}),i.jsx("li",{children:"Detailed information dialog"})]})]})]})]}),i.jsx("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #ddd"},children:i.jsxs("p",{style:{margin:"0 0 8px 0",color:"#666",fontSize:"12px",lineHeight:"1.5"},children:["Use the ",i.jsx("strong",{children:"File"})," menu to manage projects, the ",i.jsx("strong",{children:"Images"})," menu for image loading and transformation, and the ",i.jsx("strong",{children:"Tools"})," menu for selection, locking, and customization options."]})}),i.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid #ddd"},children:[i.jsx("h3",{style:{margin:"0 0 10px 0",color:"#000",fontSize:"16px",fontWeight:600},children:"Future / TODO List"}),i.jsxs("ul",{style:{margin:"0 0 12px 0",paddingLeft:"20px",color:"#222",fontSize:"13px",lineHeight:"1.6"},children:[i.jsx("li",{children:"A searchable list of common components"}),i.jsx("li",{children:"Output schematics (perhaps as KiCad files)"}),i.jsx("li",{children:"Multiple shortcuts to different views"}),i.jsx("li",{children:"Dynamic layers"}),i.jsx("li",{children:"Add a checklist tool"})]})]})]})})]}),u&&i.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"8px",paddingLeft:"16px"},children:i.jsx("div",{style:{fontSize:"12px",color:"#333",fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"40vw"},title:u,children:u})})]}),i.jsx(ux,{visible:Ea,toolRegistry:ca,currentTool:Vl,drawingMode:Is,traceToolLayer:Vs,padToolLayer:Oe,testPointToolLayer:Ii,componentToolLayer:wt,updateToolSettings:El,updateToolLayerSettings:Mt,setBrushSize:Il,saveToolSettings:da,saveToolLayerSettings:ua,setTopTraceSize:Ln,setBottomTraceSize:Ws,setTopPadSize:bl,setBottomPadSize:On,setTopTestPointSize:ei,setBottomTestPointSize:zt,setTopComponentSize:_a,setBottomComponentSize:en,setComponentConnectionSize:kr,saveDefaultSize:ti,onClose:()=>qo(!1)}),i.jsx(fx,{visible:Dr,toolRegistry:ca,currentTool:Vl,drawingMode:Is,traceToolLayer:Vs,padToolLayer:Oe,testPointToolLayer:Ii,componentToolLayer:wt,updateToolSettings:El,updateToolLayerSettings:Mt,saveToolSettings:da,saveToolLayerSettings:ua,setBrushColor:Xo,setTopTraceColor:Rr,setBottomTraceColor:Hn,setTopPadColor:pa,setBottomPadColor:Dt,setTopTestPointColor:An,setBottomTestPointColor:Ha,setTopComponentColor:$s,setBottomComponentColor:xo,setComponentConnectionColor:yo,saveDefaultColor:Nn,colorPalette:ji,onClose:()=>hn(!1)})]})},hx=({visible:c})=>c?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"24px 32px",background:"rgba(255, 255, 255, 0.95)",borderRadius:8,border:"2px solid #4CAF50",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1,maxWidth:"500px"},children:[i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"12px"},children:"PCB Reverse Engineering Tool"}),i.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#000",marginBottom:"16px",lineHeight:"1.5"},children:"Supports Typical 4-Layer PCBs"}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"1) Use the File menu to start a new project."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"8px",lineHeight:"1.5",textAlign:"left"},children:"2) Use the Images menu to load PCB photos."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginBottom:"12px",lineHeight:"1.5",textAlign:"left"},children:"3) Use the tools to draw vias, pads, traces, etc."}),i.jsx("div",{style:{fontSize:"13px",color:"#555",marginTop:"16px",lineHeight:"1.5",textAlign:"left",fontWeight:"bold"},children:"Best viewed in browser's Full Screen Mode"})]}):null,gx=({visible:c,title:d,message:y,onClose:u})=>c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:U=>{U.target===U.currentTarget&&u()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"2px solid #ff4444"},onClick:U=>U.stopPropagation(),children:[i.jsxs("div",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"12px"},children:[i.jsx("div",{style:{fontSize:"24px",color:"#ff4444"},children:""}),i.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},children:d})]}),i.jsx("div",{style:{marginBottom:"20px",color:"#ddd",fontSize:"14px",lineHeight:"1.5"},children:y}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:i.jsx("button",{onClick:u,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"OK"})})]})}):null,xx=({visible:c,selectedIds:d,selectedComponentIds:y,selectedPowerIds:u,selectedGroundIds:U,drawingStrokes:X,componentsTop:Ce,componentsBottom:be,powers:g,grounds:E,powerBuses:de,onClose:je,setComponentsTop:ye,setComponentsBottom:Me,determineViaType:J,determinePadType:Ae,determineTestPointType:He,onFindComponent:ge,position:A,isDragging:K,onDragStart:lt,onOpenNotesDialog:$})=>{if(!c)return null;const D=A?{position:"fixed",left:`${A.x}px`,top:`${A.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:K?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},k={padding:"20px",overflow:"auto",flex:1};return i.jsxs("div",{style:D,children:[i.jsxs("div",{onMouseDown:R=>{const m=R.target;m.tagName==="BUTTON"||m.closest("button")||A&&lt(R)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:K?"grabbing":A?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Information (I)"}),i.jsx("button",{onClick:je,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:k,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[(()=>{const R=X.filter(Ee=>d.has(Ee.id)).length,m=[...Ce,...be].filter(Ee=>y.has(Ee.id)).length,ue=g.filter(Ee=>u.has(Ee.id)).length,q=E.filter(Ee=>U.has(Ee.id)).length,Be=R+m+ue+q;return i.jsx("div",{style:{padding:"12px 16px",backgroundColor:Be>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:Be>0?"#333":"#856404",marginBottom:"8px"},children:Be>0?`${Be} Object${Be!==1?"s":""} Selected`:"Zero Objects Selected"})})(),y.size>0&&(()=>{const R=X.some(m=>d.has(m.id)&&(m.type==="via"||m.type==="pad"));return[...Ce,...be].filter(m=>y.has(m.id)).map(m=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",minHeight:"32px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:zd(m.componentType)})]}),ge&&i.jsx("button",{onClick:()=>{ge(m.id,m.x,m.y)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap",marginLeft:"8px"},onMouseEnter:ue=>{ue.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ue=>{ue.currentTarget.style.backgroundColor="#4CAF50"},children:"Find"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Layer: ",m.layer]}),m.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[m.description&&i.jsxs("div",{children:["Description: ",m.description]}),m.icType&&i.jsxs("div",{children:["IC Type: ",m.icType]})]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:m.notes||"",readOnly:!0,onClick:$,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsxs("span",{children:["Designator: ",m.designator||"(empty)"]}),R&&i.jsx("button",{onClick:()=>{const ue=[...Ce,...be].filter(F=>y.has(F.id)&&F.componentType===m.componentType),q=ue.length,Be=X.filter(F=>d.has(F.id)&&F.type==="pad"&&F.points.length>0&&F.points[0].id!==void 0).map(F=>{const he=F.points[0].id;if(he===void 0)throw new Error("Unexpected undefined id");return{stroke:F,nodeId:he}}).sort((F,he)=>F.nodeId-he.nodeId),Ee=Be.length>0?Be:X.filter(F=>d.has(F.id)&&F.type==="via"&&F.points.length>0&&F.points[0].id!==void 0).map(F=>{const he=F.points[0].id;if(he===void 0)throw new Error("Unexpected undefined id");return{stroke:F,nodeId:he}}).sort((F,he)=>F.nodeId-he.nodeId),Xe=Ee.length;if(Xe===0){console.warn("No vias or pads with Node IDs found in selection");return}const re=Math.floor(Xe/q);if(re===0){console.warn(`Not enough ${Be.length>0?"pads":"vias"} (${Xe}) for ${q} components`);return}[...ue].sort((F,he)=>F.id.localeCompare(he.id)).forEach((F,he)=>{const W=he*re,C=W+re,le=Ee.slice(W,C).map(Ie=>Ie.nodeId.toString()),me=Nf(F,le,X);F.layer==="top"?ye(Ie=>Ie.map(at=>{if(at.id===F.id){const ut={...at,pinCount:re,pinConnections:le};return me&&(ut.pinPolarities=me),ut}return at})):Me(Ie=>Ie.map(at=>{if(at.id===F.id){const ut={...at,pinCount:re,pinConnections:le};return me&&(ut.pinPolarities=me),ut}return at}))});const P=Be.length>0?"pads":"vias";console.log(`Connected ${q} components of type ${m.componentType} to ${Xe} ${P} (${re} pins each)`)},style:{padding:"2px 8px",fontSize:"10px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500,whiteSpace:"nowrap"},onMouseEnter:ue=>{ue.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:ue=>{ue.currentTarget.style.backgroundColor="#4CAF50"},children:"Connect"})]}),i.jsxs("div",{children:["Abbreviation: ",m.abbreviation||"(empty)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:m.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:m.color})]}),i.jsxs("div",{children:["Size: ",m.size]}),i.jsxs("div",{children:["Pin Count: ",m.pinCount]}),m.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[m.capacitance&&i.jsxs("div",{children:["Capacitance: ",m.capacitance]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.dielectric&&i.jsxs("div",{children:["Dielectric: ",m.dielectric]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[m.capacitance&&i.jsxs("div",{children:["Capacitance: ",m.capacitance]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]}),m.polarity&&i.jsxs("div",{children:["Polarity: ",m.polarity]}),m.esr&&i.jsxs("div",{children:["ESR: ",m.esr]}),m.temperature&&i.jsxs("div",{children:["Temperature: ",m.temperature]})]}),m.pinConnections&&m.pinConnections.length>0&&(()=>{const ue=m.componentType==="Electrolytic Capacitor"||m.componentType==="Diode"||m.componentType==="Battery"||m.componentType==="ZenerDiode",q=m.componentType==="Capacitor"&&"dielectric"in m&&m.dielectric==="Tantalum",Be=ue||q;return i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600},children:"Pin Connections:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Pin #"}),Be&&i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Polarity"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:m.pinConnections.map((Ee,Xe)=>{const re=m.pinPolarities&&m.pinPolarities.length>Xe?m.pinPolarities[Xe]:"";return i.jsxs("tr",{style:{backgroundColor:Xe%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Xe+1}),Be&&i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"center",fontFamily:"monospace",fontWeight:600,color:re==="+"?"#d32f2f":re==="-"?"#1976d2":"#999"},children:re||"-"}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:Ee||"(not connected)"})]},Xe)})})]})]})})(),"manufacturer"in m&&m.manufacturer&&i.jsxs("div",{children:["Manufacturer: ",m.manufacturer]}),"partNumber"in m&&m.partNumber&&i.jsxs("div",{children:["Part Number: ",m.partNumber]}),m.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[m.diodeType&&i.jsxs("div",{children:["Type: ",m.diodeType]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.ledColor&&i.jsxs("div",{children:["LED Color: ",m.ledColor]})]}),m.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.capacity&&i.jsxs("div",{children:["Capacity: ",m.capacity]}),m.chemistry&&i.jsxs("div",{children:["Chemistry: ",m.chemistry]})]}),m.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.fuseType&&i.jsxs("div",{children:["Type: ",m.fuseType]})]}),m.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[m.impedance&&i.jsxs("div",{children:["Impedance: ",m.impedance]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[m.connectorType&&i.jsxs("div",{children:["Type: ",m.connectorType]}),m.gender&&i.jsxs("div",{children:["Gender: ",m.gender]})]}),m.componentType==="Jumper"&&i.jsx(i.Fragment,{children:m.positions&&i.jsxs("div",{children:["Positions: ",m.positions]})}),m.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[m.coilVoltage&&i.jsxs("div",{children:["Coil Voltage: ",m.coilVoltage]}),m.contactType&&i.jsxs("div",{children:["Contact Type: ",m.contactType]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[m.inductance&&i.jsxs("div",{children:["Inductance: ",m.inductance]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.resistance&&i.jsxs("div",{children:["DC Resistance: ",m.resistance]})]}),m.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[m.impedance&&i.jsxs("div",{children:["Impedance: ",m.impedance]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]})]}),m.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[m.motorType&&i.jsxs("div",{children:["Type: ",m.motorType]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[m.inputVoltage&&i.jsxs("div",{children:["Input Voltage: ",m.inputVoltage]}),m.outputVoltage&&i.jsxs("div",{children:["Output Voltage: ",m.outputVoltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[m.transistorType&&i.jsxs("div",{children:["Type: ",m.transistorType]}),m.polarity&&i.jsxs("div",{children:["Polarity: ",m.polarity]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]})]}),m.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.configuration&&i.jsxs("div",{children:["Configuration: ",m.configuration]})]}),m.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.thermistorType&&i.jsxs("div",{children:["Type: ",m.thermistorType]}),m.beta&&i.jsxs("div",{children:["Beta: ",m.beta]})]}),m.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[m.switchType&&i.jsxs("div",{children:["Type: ",m.switchType]}),m.current&&i.jsxs("div",{children:["Current: ",m.current]}),m.voltage&&i.jsxs("div",{children:["Voltage: ",m.voltage]})]}),m.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[m.primaryVoltage&&i.jsxs("div",{children:["Primary Voltage: ",m.primaryVoltage]}),m.secondaryVoltage&&i.jsxs("div",{children:["Secondary Voltage: ",m.secondaryVoltage]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.turns&&i.jsxs("div",{children:["Turns Ratio: ",m.turns]})]}),m.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:m.signal&&i.jsxs("div",{children:["Signal: ",m.signal]})}),m.componentType==="IntegratedCircuit"&&i.jsx(i.Fragment,{children:m.datasheet&&i.jsxs("div",{children:["Datasheet: ",i.jsx("a",{href:m.datasheet,target:"_blank",rel:"noopener noreferrer",children:m.datasheet})]})}),m.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:m.tubeType&&i.jsxs("div",{children:["Type: ",m.tubeType]})}),m.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[m.vrType&&i.jsxs("div",{children:["Type: ",m.vrType]}),m.resistance&&i.jsxs("div",{children:["Resistance: ",m.resistance]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.taper&&i.jsxs("div",{children:["Taper: ",m.taper]})]}),m.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[m.frequency&&i.jsxs("div",{children:["Frequency: ",m.frequency]}),m.loadCapacitance&&i.jsxs("div",{children:["Load Capacitance: ",m.loadCapacitance]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),m.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[m.voltage&&i.jsxs("div",{children:["Zener Voltage: ",m.voltage]}),m.power&&i.jsxs("div",{children:["Power: ",m.power]}),m.tolerance&&i.jsxs("div",{children:["Tolerance: ",m.tolerance]})]}),i.jsx("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #eee",fontSize:"10px",color:"#999"},children:i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]})})]})]},m.id))})(),d.size>0&&X.filter(R=>d.has(R.id)&&R.type==="via"&&R.points.length>0).map(R=>{const m=R.points[0],ue=R.viaType||(m.id!==void 0?J(m.id,de):"Via (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ue})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&i.jsxs("div",{children:["Node ID: ",m.id]}),i.jsx("div",{children:"Layer: Top and Bottom"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:$,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),d.size>0&&X.filter(R=>d.has(R.id)&&R.type==="pad"&&R.points.length>0).map(R=>{const m=R.points[0],ue=R.padType||(m.id!==void 0?Ae(m.id,de):"Pad (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ue})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&i.jsxs("div",{children:["Node ID: ",m.id]}),i.jsxs("div",{children:["Layer: ",R.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:$,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),d.size>0&&X.filter(R=>d.has(R.id)&&R.type==="testPoint"&&R.points.length>0).map(R=>{const m=R.points[0],ue=R.testPointType||(m.id!==void 0?He(m.id,de):"Test Point (Signal)");return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:ue})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[m.id&&i.jsxs("div",{children:["Node ID: ",m.id]}),i.jsxs("div",{children:["Layer: ",R.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",m.x.toFixed(2),", y=",m.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:$,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),d.size>0&&X.filter(R=>d.has(R.id)&&R.type==="trace").map(R=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R.type||"unknown"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[R.points.length>0&&i.jsxs("div",{style:{marginTop:"8px",marginBottom:"8px"},children:[i.jsxs("div",{style:{marginBottom:"4px",fontWeight:600},children:["Points: ",R.points.length]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"10px",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Point #"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"x"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"y"}),i.jsx("th",{style:{padding:"4px 8px",textAlign:"left",border:"1px solid #ddd",fontWeight:600},children:"Node ID"})]})}),i.jsx("tbody",{children:R.points.map((m,ue)=>i.jsxs("tr",{style:{backgroundColor:ue%2===0?"#fff":"#f9f9f9"},children:[i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:ue}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.x.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.y.toFixed(2)}),i.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ddd"},children:m.id||"(none)"})]},ue))})]})]}),i.jsxs("div",{style:{marginTop:"4px"},children:["Layer: ",R.layer]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:$,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)),u.size>0&&g.filter(R=>u.has(R.id)).map(R=>{const m=de.find(ue=>ue.id===R.powerBusId);return i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R.type||(m?`${m.name} Power Node`:"Power Node")})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",R.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Layer: ",R.layer]}),i.jsxs("div",{children:["Power Bus: ",m?.name||R.powerBusId||"(unknown)"]}),i.jsxs("div",{children:["Position: x=",R.x.toFixed(2),", y=",R.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:$,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id)}),U.size>0&&E.filter(R=>U.has(R.id)).map(R=>i.jsxs("div",{style:{marginTop:"16px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"12px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type:"}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:R.type||"Ground Node"})]}),i.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"8px"},children:[i.jsxs("div",{children:["Node ID: ",R.pointId||"(not assigned)"]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("span",{children:"Color:"}),i.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:R.color,border:"1px solid #ccc",borderRadius:2}}),i.jsx("span",{children:R.color})]}),i.jsxs("div",{children:["Size: ",R.size]}),i.jsxs("div",{children:["Position: x=",R.x.toFixed(2),", y=",R.y.toFixed(2)]}),i.jsxs("div",{style:{marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#666",whiteSpace:"nowrap",flexShrink:0},children:"Notes:"}),i.jsx("input",{type:"text",value:R.notes||"",readOnly:!0,onClick:$,placeholder:"Click to edit notes...",maxLength:200,style:{flex:1,padding:"4px 6px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#f9f9f9",color:"#333",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}})]})]})]},R.id))]})})]})},Un=200,yx=({visible:c,selectedIds:d,selectedComponentIds:y,selectedPowerIds:u,selectedGroundIds:U,drawingStrokes:X,componentsTop:Ce,componentsBottom:be,powers:g,grounds:E,powerBuses:de,onClose:je,setComponentsTop:ye,setComponentsBottom:Me,setDrawingStrokes:J,setPowerSymbols:Ae,setGroundSymbols:He,determineViaType:ge,determinePadType:A,determineTestPointType:K,position:lt,isDragging:$,onDragStart:D})=>{const[k,R]=w.useState(new Map),m=w.useRef(""),ue=()=>[...Array.from(d).sort(),...Array.from(y).sort(),...Array.from(u).sort(),...Array.from(U).sort()].join(",");if(w.useEffect(()=>{if(!c)return;const W=ue();W!==m.current&&(m.current=W,R(C=>{const H=new Map;return[...Ce,...be].filter(le=>y.has(le.id)).forEach(le=>{const me=C.get(le.id);H.set(le.id,me!==void 0?me:le.notes||"")}),X.filter(le=>d.has(le.id)).forEach(le=>{const me=C.get(le.id);H.set(le.id,me!==void 0?me:le.notes||"")}),g.filter(le=>u.has(le.id)).forEach(le=>{const me=C.get(le.id);H.set(le.id,me!==void 0?me:le.notes||"")}),E.filter(le=>U.has(le.id)).forEach(le=>{const me=C.get(le.id);H.set(le.id,me!==void 0?me:le.notes||"")}),H}))},[c,d,y,u,U,X,Ce,be,g,E]),!c)return null;const q=lt?{position:"fixed",left:`${lt.x}px`,top:`${lt.y}px`,backgroundColor:"#fff",borderRadius:8,minWidth:"150px",maxWidth:"400px",width:"fit-content",maxHeight:"80%",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:$?"grabbing":"default"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",display:"flex",alignItems:"flex-start",justifyContent:"flex-end",paddingRight:"20px",paddingTop:"80px",zIndex:1e4,pointerEvents:"none"},Be={padding:"20px",overflow:"auto",flex:1},Ee=X.filter(W=>d.has(W.id)).length,Xe=[...Ce,...be].filter(W=>y.has(W.id)).length,re=g.filter(W=>u.has(W.id)).length,_=E.filter(W=>U.has(W.id)).length,P=Ee+Xe+re+_,F=(W,C)=>{const H=C.length>Un?C.substring(0,Un):C;R(le=>{const me=new Map(le);return me.set(W,H),me})},he=()=>{ye(W=>W.map(C=>{if(y.has(C.id)&&k.has(C.id)){const H=k.get(C.id)||"";return{...C,notes:H.trim()===""?null:H.trim()}}return C})),Me(W=>W.map(C=>{if(y.has(C.id)&&k.has(C.id)){const H=k.get(C.id)||"";return{...C,notes:H.trim()===""?null:H.trim()}}return C})),J(W=>W.map(C=>{if(d.has(C.id)&&k.has(C.id)){const H=k.get(C.id)||"";return{...C,notes:H.trim()===""?null:H.trim()}}return C})),Ae(W=>W.map(C=>{if(u.has(C.id)&&k.has(C.id)){const H=k.get(C.id)||"";return{...C,notes:H.trim()===""?null:H.trim()}}return C})),He(W=>W.map(C=>{if(U.has(C.id)&&k.has(C.id)){const H=k.get(C.id)||"";return{...C,notes:H.trim()===""?null:H.trim()}}return C}))};return i.jsxs("div",{style:q,children:[i.jsxs("div",{onMouseDown:W=>{const C=W.target;C.tagName==="BUTTON"||C.closest("button")||lt&&D(W)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:$?"grabbing":lt?"grab":"default",userSelect:"none",flexShrink:0},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Notes (N)"}),i.jsx("button",{onClick:je,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:Be,children:i.jsxs("div",{style:{margin:0,padding:0,backgroundColor:"#f5f5f5",borderRadius:4,fontSize:"12px",fontFamily:"monospace",maxHeight:"calc(80vh - 100px)",overflow:"auto",color:"#000"},children:[i.jsx("div",{style:{padding:"12px 16px",backgroundColor:P>0?"#e8e8e8":"#fff3cd",borderBottom:"2px solid #ccc",fontSize:"13px",fontWeight:600,color:P>0?"#333":"#856404",marginBottom:"8px"},children:P>0?`${P} Object${P!==1?"s":""} Selected`:"Zero Objects Selected"}),P===0?i.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"No objects selected. Select one or more objects to add or edit notes."}):i.jsxs(i.Fragment,{children:[[...Ce,...be].filter(W=>y.has(W.id)).map(W=>{const C=k.get(W.id)||"",H=C.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsxs("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:[zd(W.componentType),W.designator&&W.designator.trim()?` (${W.designator.trim()})`:""]})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:C,onChange:le=>F(W.id,le.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:H>=Un?"#d32f2f":"#666",textAlign:"right"},children:[H," / ",Un]})]})]},W.id)}),X.filter(W=>d.has(W.id)&&W.type==="via"&&W.points.length>0).map(W=>{const C=W.points[0],H=W.viaType||(C.id!==void 0?ge(C.id,de):"Via (Signal)"),le=k.get(W.id)||"",me=le.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:H})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:C.id&&i.jsxs("div",{children:["Node ID: ",C.id]})}),i.jsx("textarea",{value:le,onChange:Ie=>F(W.id,Ie.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:me>=Un?"#d32f2f":"#666",textAlign:"right"},children:[me," / ",Un]})]})]},W.id)}),X.filter(W=>d.has(W.id)&&W.type==="pad"&&W.points.length>0).map(W=>{const C=W.points[0],H=W.padType||(C.id!==void 0?A(C.id,de):"Pad (Signal)"),le=k.get(W.id)||"",me=le.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:H})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:C.id&&i.jsxs("div",{children:["Node ID: ",C.id]})}),i.jsx("textarea",{value:le,onChange:Ie=>F(W.id,Ie.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:me>=Un?"#d32f2f":"#666",textAlign:"right"},children:[me," / ",Un]})]})]},W.id)}),X.filter(W=>d.has(W.id)&&W.type==="testPoint"&&W.points.length>0).map(W=>{const C=W.points[0],H=W.testPointType||(C.id!==void 0?K(C.id,de):"Test Point (Signal)"),le=k.get(W.id)||"",me=le.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:H})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:C.id&&i.jsxs("div",{children:["Node ID: ",C.id]})}),i.jsx("textarea",{value:le,onChange:Ie=>F(W.id,Ie.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:me>=Un?"#d32f2f":"#666",textAlign:"right"},children:[me," / ",Un]})]})]},W.id)}),X.filter(W=>d.has(W.id)&&W.type==="trace").map(W=>{const C=k.get(W.id)||"",H=C.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:W.type||"unknown"})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("textarea",{value:C,onChange:le=>F(W.id,le.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:H>=Un?"#d32f2f":"#666",textAlign:"right"},children:[H," / ",Un]})]})]},W.id)}),g.filter(W=>u.has(W.id)).map(W=>{const C=de.find(Ie=>Ie.id===W.powerBusId),H=W.type||(C?`${C.name} Power Node`:"Power Node"),le=k.get(W.id)||"",me=le.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:H})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",W.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:le,onChange:Ie=>F(W.id,Ie.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:me>=Un?"#d32f2f":"#666",textAlign:"right"},children:[me," / ",Un]})]})]},W.id)}),E.filter(W=>U.has(W.id)).map(W=>{const C=W.type||"Ground Node",H=k.get(W.id)||"",le=H.length;return i.jsxs("div",{style:{marginTop:"8px",padding:0,backgroundColor:"#fff",borderRadius:4,border:"1px solid #ddd"},children:[i.jsxs("div",{style:{backgroundColor:"#000",marginBottom:"8px",display:"flex",alignItems:"center",padding:"8px 12px",minHeight:"32px"},children:[i.jsx("label",{style:{fontSize:"11px",color:"#fff",marginRight:"8px"},children:"Type: "}),i.jsx("div",{style:{color:"#fff",padding:"4px 8px",fontSize:"12px",fontWeight:500},children:C})]}),i.jsxs("div",{style:{padding:"8px"},children:[i.jsx("div",{style:{fontSize:"11px",color:"#666",marginBottom:"4px"},children:i.jsxs("div",{children:["Node ID: ",W.pointId||"(not assigned)"]})}),i.jsx("textarea",{value:H,onChange:me=>F(W.id,me.target.value),placeholder:"Enter notes (max 200 characters)...",maxLength:Un,style:{width:"100%",minHeight:"50px",padding:"8px",fontSize:"11px",fontFamily:"sans-serif",backgroundColor:"#fff",color:"#000",border:"1px solid #ccc",borderRadius:4,resize:"vertical",boxSizing:"border-box"}}),i.jsxs("div",{style:{marginTop:"4px",fontSize:"10px",color:le>=Un?"#d32f2f":"#666",textAlign:"right"},children:[le," / ",Un]})]})]},W.id)}),i.jsxs("div",{style:{marginTop:"20px",padding:"12px",display:"flex",justifyContent:"flex-end",gap:"8px",borderTop:"1px solid #ddd"},children:[i.jsx("button",{onClick:he,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#4CAF50",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#4CAF50"},children:"Save Notes"}),i.jsx("button",{onClick:je,style:{padding:"8px 16px",fontSize:"12px",backgroundColor:"#757575",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:500},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="#616161"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="#757575"},children:"Close"})]})]})]})})]})},bx=({visible:c,projectNotes:d,setProjectNotes:y,onClose:u,position:U,isDragging:X,onDragStart:Ce})=>{const[be,g]=w.useState([]),[E,de]=w.useState(null),[je,ye]=w.useState(null),Me=w.useRef(new Map),[J,Ae]=w.useState({width:Math.min(window.innerWidth*.85,1400),height:window.innerHeight*.7}),[He,ge]=w.useState(!1),[A,K]=w.useState({x:0,y:0,width:0,height:0});w.useEffect(()=>{c&&(g([...d]),de(null),ye(null))},[c,d]),w.useEffect(()=>{if(!He)return;const re=P=>{const F=P.clientX-A.x,he=P.clientY-A.y,W=Math.max(400,Math.min(window.innerWidth-20,A.width+F)),C=Math.max(300,Math.min(window.innerHeight-20,A.height+he));Ae({width:W,height:C})},_=()=>{ge(!1)};return document.addEventListener("mousemove",re),document.addEventListener("mouseup",_),()=>{document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",_)}},[He,A]);const lt=re=>{re.preventDefault(),re.stopPropagation(),ge(!0),K({x:re.clientX,y:re.clientY,width:J.width,height:J.height})};if(!c)return null;const $=()=>{const re={name:"",value:"",checked:!1};g([...be,re]),de(be.length),ye("name")},D=re=>{const _=be.filter((P,F)=>F!==re);g(_),E===re?(de(null),ye(null)):E!==null&&E>re&&de(E-1)},k=()=>{const re=be.filter(_=>_.name.trim()!==""||_.value.trim()!=="");y(re),u()},R=()=>{g([...d]),de(null),ye(null),u()},m=(re,_,P)=>{const F=[...be];F[re]={...F[re],[_]:P},g(F)},ue=(re,_)=>{const P=[...be];P[re]={...P[re],checked:_},g(P)},q=(re,_,P)=>{if(!(re.key==="Enter"&&re.altKey)){if(re.key==="ArrowRight"&&!re.ctrlKey&&!re.shiftKey&&!re.altKey){if(re.preventDefault(),P==="name"){const F=`${_}-value`,he=Me.current.get(F);he&&(he.focus(),de(_),ye("value"))}return}if(re.key==="ArrowLeft"&&!re.ctrlKey&&!re.shiftKey&&!re.altKey){if(re.preventDefault(),P==="value"){const F=`${_}-name`,he=Me.current.get(F);he&&(he.focus(),de(_),ye("name"))}return}if(re.key==="ArrowDown"&&!re.ctrlKey&&!re.shiftKey&&!re.altKey){if(re.preventDefault(),_<be.length-1){const F=`${_+1}-${P}`,he=Me.current.get(F);he&&(he.focus(),de(_+1),ye(P))}else $(),setTimeout(()=>{const F=`${be.length}-${P}`,he=Me.current.get(F);he&&he.focus()},0);return}if(re.key==="ArrowUp"&&!re.ctrlKey&&!re.shiftKey&&!re.altKey){if(re.preventDefault(),_>0){const F=`${_-1}-${P}`,he=Me.current.get(F);he&&(he.focus(),de(_-1),ye(P))}return}if(re.key==="Enter"&&!re.altKey&&!re.shiftKey){if(re.preventDefault(),P==="name"){const F=`${_}-value`,he=Me.current.get(F);he&&(he.focus(),de(_),ye("value"))}else if(P==="value")if(_<be.length-1){const F=`${_+1}-name`,he=Me.current.get(F);he&&(he.focus(),de(_+1),ye("name"))}else $(),setTimeout(()=>{const F=`${be.length}-name`,he=Me.current.get(F);he&&he.focus()},0);return}if(re.key==="Tab"&&!re.shiftKey){if(re.preventDefault(),P==="name"){const F=`${_}-value`,he=Me.current.get(F);he&&(he.focus(),de(_),ye("value"))}else if(P==="value")if(_<be.length-1){const F=`${_+1}-name`,he=Me.current.get(F);he&&(he.focus(),de(_+1),ye("name"))}else $(),setTimeout(()=>{const F=`${be.length}-name`,he=Me.current.get(F);he&&he.focus()},0)}}},Be=()=>{de(null),ye(null)},Ee=(re,_)=>{de(re),ye(_)},Xe={position:"fixed",top:U?.y??100,left:U?.x??(window.innerWidth-J.width)/2,width:`${J.width}px`,height:`${J.height}px`,backgroundColor:"#fff",borderRadius:8,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",border:"1px solid #ddd",zIndex:1e4,display:"flex",flexDirection:"column",cursor:X?"grabbing":"default",overflow:"hidden"};return i.jsxs("div",{style:Xe,onMouseDown:re=>{re.target.closest('[title="Drag to resize"]')||Ce(re)},children:[i.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e0e0e0",background:"#888",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",userSelect:"none"},children:[i.jsx("h2",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Project Notes / TODO List (L)"}),i.jsx("button",{onClick:R,style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:"0 4px",lineHeight:1},title:"Close",children:""})]}),i.jsxs("div",{className:"project-notes-content",style:{padding:0,flex:1,overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",minHeight:0,scrollbarWidth:"thin",scrollbarColor:"#888 #f0f0f0"},children:[i.jsxs("div",{style:{border:"none",borderTop:"1px solid #ccc",borderRadius:0,overflow:"visible",marginBottom:"16px",backgroundColor:"#e0e0e0",flexShrink:0},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",backgroundColor:"#e0e0e0",borderBottom:"1px solid #ccc",position:"sticky",top:0,zIndex:10},children:[i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:i.jsx("label",{className:"radio-label",style:{margin:0,cursor:"default"},children:i.jsx("input",{type:"checkbox",disabled:!0,style:{opacity:.5}})})}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Item"}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",borderRight:"1px solid #ccc",color:"#000"},children:"Notes"}),i.jsx("div",{style:{padding:"8px 12px",fontWeight:600,fontSize:"12px",color:"#000"}})]}),i.jsx("div",{children:be.length===0?i.jsx("div",{style:{padding:"24px",textAlign:"center",color:"#999",fontSize:"13px"},children:'No notes. Click "Add Note" to create one.'}):be.map((re,_)=>i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr 3fr auto",borderBottom:"1px solid #ccc",backgroundColor:"#fff"},children:[i.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("label",{className:"radio-label",style:{margin:0,cursor:"pointer"},children:i.jsx("input",{type:"checkbox",checked:re.checked||!1,onChange:P=>ue(_,P.target.checked)})})}),i.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc"},children:E===_&&je==="name"?i.jsx("textarea",{ref:P=>{P?Me.current.set(`${_}-name`,P):Me.current.delete(`${_}-name`)},value:re.name,onChange:P=>m(_,"name",P.target.value),onBlur:Be,onKeyDown:P=>q(P,_,"name"),autoFocus:!0,rows:1,style:{width:"100%",padding:"4px 6px",border:"1px solid #ccc",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"vertical",minHeight:"20px",lineHeight:"1.4",overflow:"hidden"},onInput:P=>{const F=P.target;F.style.height="auto",F.style.height=`${F.scrollHeight}px`}}):i.jsx("div",{onClick:()=>Ee(_,"name"),style:{padding:"4px 6px",cursor:"pointer",fontSize:"12px",minHeight:"20px",color:re.name.trim()?"#000":"#999",whiteSpace:"pre-wrap",wordWrap:"break-word"},title:"Click to edit",children:re.name.trim()||"(empty)"})}),i.jsx("div",{style:{padding:"8px 12px",borderRight:"1px solid #ccc"},children:E===_&&je==="value"?i.jsx("textarea",{ref:P=>{P?Me.current.set(`${_}-value`,P):Me.current.delete(`${_}-value`)},value:re.value,onChange:P=>m(_,"value",P.target.value),onBlur:Be,onKeyDown:P=>q(P,_,"value"),autoFocus:!0,rows:1,style:{width:"100%",padding:"4px 6px",border:"1px solid #ccc",borderRadius:3,fontSize:"12px",backgroundColor:"#fff",color:"#000",fontFamily:"inherit",resize:"vertical",minHeight:"20px",lineHeight:"1.4",overflow:"hidden"},onInput:P=>{const F=P.target;F.style.height="auto",F.style.height=`${F.scrollHeight}px`}}):i.jsx("div",{onClick:()=>Ee(_,"value"),style:{padding:"4px 6px",cursor:"pointer",fontSize:"12px",minHeight:"20px",color:re.value.trim()?"#000":"#999",whiteSpace:"pre-wrap",wordWrap:"break-word"},title:"Click to edit",children:re.value.trim()||"(empty)"})}),i.jsx("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("button",{onClick:()=>D(_),style:{background:"#f44336",color:"#fff",border:"none",borderRadius:3,padding:"4px 8px",cursor:"pointer",fontSize:"11px"},title:"Delete note",children:"Delete"})})]},_))})]}),i.jsx("div",{style:{padding:"16px",flexShrink:0},children:i.jsx("button",{onClick:$,style:{background:"#888",color:"#fff",border:"none",borderRadius:4,padding:"8px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500,alignSelf:"flex-start"},children:"+ Add Note"})})]}),i.jsxs("div",{style:{padding:"12px 16px",borderTop:"1px solid #ddd",display:"flex",justifyContent:"flex-end",gap:"8px",flexShrink:0},children:[i.jsx("button",{onClick:R,style:{background:"#f5f5f5",color:"#000",border:"1px solid #ddd",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),i.jsx("button",{onClick:k,style:{background:"#0b5fff",color:"#fff",border:"none",borderRadius:4,padding:"6px 16px",cursor:"pointer",fontSize:"12px",fontWeight:500},children:"Save"})]}),i.jsx("div",{onMouseDown:lt,style:{position:"absolute",bottom:0,right:0,width:"20px",height:"20px",cursor:"nwse-resize",background:"linear-gradient(135deg, transparent 0%, transparent 40%, #ccc 40%, #ccc 45%, transparent 45%, transparent 55%, #ccc 55%, #ccc 60%, transparent 60%)",zIndex:10001},title:"Drag to resize"})]})},vx=({visible:c,dimensions:d,onSave:y,onClose:u})=>{const[U,X]=w.useState(""),[Ce,be]=w.useState(""),[g,E]=w.useState("inches");w.useEffect(()=>{c&&d?(X(d.width.toString()),be(d.height.toString()),E(d.unit)):c&&(X(""),be(""),E("inches"))},[c,d]);const de=()=>{const ye=parseFloat(U),Me=parseFloat(Ce);if(isNaN(ye)||ye<=0){alert("Please enter a valid width greater than 0");return}if(isNaN(Me)||Me<=0){alert("Please enter a valid height greater than 0");return}y({width:ye,height:Me,unit:g}),u()},je=()=>{u()};return c?i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:ye=>{ye.target===ye.currentTarget&&je()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"320px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #444"},onClick:ye=>ye.stopPropagation(),children:[i.jsx("h3",{style:{margin:"0 0 20px 0",color:"#fff",fontSize:"18px",fontWeight:600},children:"Board Dimensions"}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Width"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:U,onChange:ye=>X(ye.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:g,onChange:ye=>E(ye.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsxs("div",{style:{marginBottom:"20px"},children:[i.jsx("label",{style:{display:"block",marginBottom:"6px",color:"#ddd",fontSize:"14px"},children:"Height"}),i.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[i.jsx("input",{type:"number",step:"0.001",min:"0.001",value:Ce,onChange:ye=>be(ye.target.value),style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px"},placeholder:"0.000"}),i.jsxs("select",{value:g,onChange:ye=>E(ye.target.value),style:{padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:4,color:"#fff",fontSize:"14px",cursor:"pointer"},children:[i.jsx("option",{value:"inches",children:"inches"}),i.jsx("option",{value:"mm",children:"mm"})]})]})]}),i.jsx("div",{style:{marginBottom:"12px",padding:"10px",background:"#1f1f24",borderRadius:4,fontSize:"12px",color:"#bbb"},children:"This information will be used to convert pixel coordinates to real-world measurements."}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[i.jsx("button",{onClick:je,style:{padding:"8px 16px",background:"#444",color:"#fff",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px"},children:"Cancel"}),i.jsx("button",{onClick:de,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Save"})]})]})}):null},mx=({component:c,componentEditor:d,setComponentEditor:y,areComponentsLocked:u,componentsTop:U,componentsBottom:X,setComponentsTop:Ce,setComponentsBottom:be})=>i.jsxs(i.Fragment,{children:[c.componentType==="Resistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||$e("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"5%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.05%",children:"0.05%"}),i.jsx("option",{value:"0.1%",children:"0.1%"}),i.jsx("option",{value:"0.25%",children:"0.25%"}),i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:g=>y({...d,capacitance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.capacitanceUnit||$e("capacitance"),onChange:g=>y({...d,capacitanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("capacitance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-dielectric-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Dielectric:"}),i.jsxs("select",{id:`component-dielectric-${c.id}`,value:d.dielectric||"Ceramic",onChange:g=>y({...d,dielectric:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Ceramic",children:"Ceramic"}),i.jsx("option",{value:"Tantalum",children:"Tantalum"}),i.jsx("option",{value:"Film",children:"Film"}),i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Mica",children:"Mica"}),i.jsx("option",{value:"Paper",children:"Paper"}),i.jsx("option",{value:"Glass",children:"Glass"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Film Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:g=>y({...d,capacitance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.capacitanceUnit||$e("capacitance"),onChange:g=>y({...d,capacitanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("capacitance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-filmtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Film Type:"}),i.jsxs("select",{id:`component-filmtype-${c.id}`,value:d.filmType||"Polyester",onChange:g=>y({...d,filmType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Polyester",children:"Polyester"}),i.jsx("option",{value:"Polypropylene",children:"Polypropylene"}),i.jsx("option",{value:"Polyethylene",children:"Polyethylene"}),i.jsx("option",{value:"Polystyrene",children:"Polystyrene"}),i.jsx("option",{value:"Polycarbonate",children:"Polycarbonate"}),i.jsx("option",{value:"PTFE",children:"PTFE (Teflon)"}),i.jsx("option",{value:"PPS",children:"PPS (Polyphenylene Sulfide)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]}),c.componentType==="Electrolytic Capacitor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacitance:"}),i.jsx("input",{id:`component-capacitance-${c.id}`,type:"text",value:d.capacitance||"",onChange:g=>y({...d,capacitance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsxs("select",{value:d.capacitanceUnit||"F",onChange:g=>y({...d,capacitanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:[i.jsx("option",{value:"pF",children:"pF"}),i.jsx("option",{value:"nF",children:"nF"}),i.jsx("option",{value:"F",children:"F"}),i.jsx("option",{value:"mF",children:"mF"}),i.jsx("option",{value:"F",children:"F"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 25"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"20%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:d.polarityCapacitor||c.polarity||"Positive",onChange:g=>y({...d,polarityCapacitor:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Positive",children:"Positive"}),i.jsx("option",{value:"Negative",children:"Negative"})]})]})]}),c.componentType==="Inductor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inductance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Inductance:"}),i.jsx("input",{id:`component-inductance-${c.id}`,type:"text",value:d.inductance||"",onChange:g=>y({...d,inductance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.inductanceUnit||$e("inductance"),onChange:g=>y({...d,inductanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("inductance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"DC Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.resistanceUnit||"",onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Diode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-diodetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Diode Type:"}),i.jsxs("select",{id:`component-diodetype-${c.id}`,value:d.diodeType||"Standard",onChange:g=>y({...d,diodeType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Standard",children:"Standard"}),i.jsx("option",{value:"Zener",children:"Zener"}),i.jsx("option",{value:"LED",children:"LED"}),i.jsx("option",{value:"Schottky",children:"Schottky"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),d.diodeType==="LED"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ledcolor-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"LED Color:"}),i.jsxs("select",{id:`component-ledcolor-${c.id}`,value:d.ledColor||"",onChange:g=>y({...d,ledColor:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"",children:"Select..."}),i.jsx("option",{value:"Red",children:"Red"}),i.jsx("option",{value:"Green",children:"Green"}),i.jsx("option",{value:"Blue",children:"Blue"}),i.jsx("option",{value:"Yellow",children:"Yellow"}),i.jsx("option",{value:"Orange",children:"Orange"}),i.jsx("option",{value:"White",children:"White"}),i.jsx("option",{value:"RGB",children:"RGB"}),i.jsx("option",{value:"IR",children:"IR (Infrared)"}),i.jsx("option",{value:"UV",children:"UV (Ultraviolet)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Battery"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 3.7"}),i.jsx("select",{value:d.voltageUnit||"V",onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-capacity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Capacity:"}),i.jsx("input",{id:`component-capacity-${c.id}`,type:"text",value:d.capacity||"",onChange:g=>y({...d,capacity:g.target.value}),disabled:u,style:{width:"120px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 2000mAh"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-chemistry-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Chemistry:"}),i.jsxs("select",{id:`component-chemistry-${c.id}`,value:d.chemistry||"Li-ion",onChange:g=>y({...d,chemistry:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Li-ion",children:"Li-ion"}),i.jsx("option",{value:"LiPo",children:"LiPo"}),i.jsx("option",{value:"NiMH",children:"NiMH"}),i.jsx("option",{value:"NiCd",children:"NiCd"}),i.jsx("option",{value:"Alkaline",children:"Alkaline"}),i.jsx("option",{value:"Lead-Acid",children:"Lead-Acid"}),i.jsx("option",{value:"Lithium",children:"Lithium"}),i.jsx("option",{value:"Zinc-Carbon",children:"Zinc-Carbon"})]})]})]}),c.componentType==="Fuse"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:d.currentUnit||"A",onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:d.voltageUnit||"V",onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-fusetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Fuse Type:"}),i.jsxs("select",{id:`component-fusetype-${c.id}`,value:d.fuseType||"Fast-blow",onChange:g=>y({...d,fuseType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Fast-blow",children:"Fast-blow"}),i.jsx("option",{value:"Slow-blow",children:"Slow-blow"}),i.jsx("option",{value:"Time-delay",children:"Time-delay"}),i.jsx("option",{value:"Resettable",children:"Resettable"}),i.jsx("option",{value:"Cartridge",children:"Cartridge"}),i.jsx("option",{value:"Glass",children:"Glass"}),i.jsx("option",{value:"Ceramic",children:"Ceramic"})]})]})]}),c.componentType==="Relay"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-coilvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Coil Voltage:"}),i.jsx("input",{id:`component-coilvoltage-${c.id}`,type:"text",value:d.coilVoltage||"",onChange:g=>y({...d,coilVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.coilVoltageUnit||$e("voltage"),onChange:g=>y({...d,coilVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-contacttype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Contact Type:"}),i.jsxs("select",{id:`component-contacttype-${c.id}`,value:d.contactType||"SPST",onChange:g=>y({...d,contactType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"SPST",children:"SPST (Single Pole Single Throw)"}),i.jsx("option",{value:"SPDT",children:"SPDT (Single Pole Double Throw)"}),i.jsx("option",{value:"DPST",children:"DPST (Double Pole Single Throw)"}),i.jsx("option",{value:"DPDT",children:"DPDT (Double Pole Double Throw)"}),i.jsx("option",{value:"3PDT",children:"3PDT (3 Pole Double Throw)"}),i.jsx("option",{value:"4PDT",children:"4PDT (4 Pole Double Throw)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Motor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-motortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Motor Type:"}),i.jsxs("select",{id:`component-motortype-${c.id}`,value:d.motorType||"DC",onChange:g=>y({...d,motorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"DC",children:"DC Motor"}),i.jsx("option",{value:"Stepper",children:"Stepper Motor"}),i.jsx("option",{value:"Servo",children:"Servo Motor"}),i.jsx("option",{value:"Brushless",children:"Brushless DC"}),i.jsx("option",{value:"AC",children:"AC Motor"}),i.jsx("option",{value:"Synchronous",children:"Synchronous"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Switch"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-switchtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Switch Type:"}),i.jsxs("select",{id:`component-switchtype-${c.id}`,value:d.switchType||"Toggle",onChange:g=>y({...d,switchType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Toggle",children:"Toggle"}),i.jsx("option",{value:"Push-button",children:"Push-button"}),i.jsx("option",{value:"Slide",children:"Slide"}),i.jsx("option",{value:"Rotary",children:"Rotary"}),i.jsx("option",{value:"DIP",children:"DIP Switch"}),i.jsx("option",{value:"Momentary",children:"Momentary"}),i.jsx("option",{value:"Latching",children:"Latching"}),i.jsx("option",{value:"Reed",children:"Reed Switch"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 5"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 250"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="FerriteBead"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:d.impedance||"",onChange:g=>y({...d,impedance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 100"}),i.jsx("select",{value:d.impedanceUnit||$e("impedance"),onChange:g=>y({...d,impedanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("impedance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Connector"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-connectortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Connector Type:"}),i.jsx("input",{id:`component-connectortype-${c.id}`,type:"text",value:d.connectorType||"",onChange:g=>y({...d,connectorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., USB-A, HDMI"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-gender-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Gender:"}),i.jsxs("select",{id:`component-gender-${c.id}`,value:d.gender||"N/A",onChange:g=>y({...d,gender:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"}),i.jsx("option",{value:"N/A",children:"N/A"})]})]})]}),c.componentType==="Jumper"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-positions-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Positions:"}),i.jsx("input",{id:`component-positions-${c.id}`,type:"number",min:"2",value:d.positions||3,onChange:g=>y({...d,positions:parseInt(g.target.value)||3}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"}})]})}),c.componentType==="Speaker"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-impedance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Impedance:"}),i.jsx("input",{id:`component-impedance-${c.id}`,type:"text",value:d.impedance||"",onChange:g=>y({...d,impedance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 8"}),i.jsx("select",{value:d.impedanceUnit||$e("impedance"),onChange:g=>y({...d,impedanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("impedance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]})]}),c.componentType==="PowerSupply"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-inputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Input Voltage:"}),i.jsx("input",{id:`component-inputvoltage-${c.id}`,type:"text",value:d.inputVoltage||"",onChange:g=>y({...d,inputVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:d.inputVoltageUnit||$e("voltage"),onChange:g=>y({...d,inputVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-outputvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Output Voltage:"}),i.jsx("input",{id:`component-outputvoltage-${c.id}`,type:"text",value:d.outputVoltage||"",onChange:g=>y({...d,outputVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.outputVoltageUnit||$e("voltage"),onChange:g=>y({...d,outputVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="Transistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-transistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Transistor Type:"}),i.jsxs("select",{id:`component-transistortype-${c.id}`,value:d.transistorType||"BJT",onChange:g=>y({...d,transistorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"BJT",children:"BJT (Bipolar Junction Transistor)"}),i.jsx("option",{value:"FET",children:"FET (Field Effect Transistor)"}),i.jsx("option",{value:"MOSFET",children:"MOSFET"}),i.jsx("option",{value:"IGBT",children:"IGBT"}),i.jsx("option",{value:"JFET",children:"JFET"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-polarity-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Polarity:"}),i.jsxs("select",{id:`component-polarity-${c.id}`,value:d.polarity||"NPN",onChange:g=>y({...d,polarity:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NPN",children:"NPN"}),i.jsx("option",{value:"PNP",children:"PNP"}),i.jsx("option",{value:"N-Channel",children:"N-Channel"}),i.jsx("option",{value:"P-Channel",children:"P-Channel"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 50"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-current-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Current:"}),i.jsx("input",{id:`component-current-${c.id}`,type:"text",value:d.current||"",onChange:g=>y({...d,current:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 1"}),i.jsx("select",{value:d.currentUnit||$e("current"),onChange:g=>y({...d,currentUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("current").map(g=>i.jsx("option",{value:g,children:g},g))})]})]}),c.componentType==="ResistorNetwork"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||$e("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-configuration-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Configuration:"}),i.jsx("input",{id:`component-configuration-${c.id}`,type:"text",value:d.configuration||"",onChange:g=>y({...d,configuration:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., Isolated, Bussed"})]})]}),c.componentType==="Thermistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||$e("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-thermistortype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Thermistor Type:"}),i.jsxs("select",{id:`component-thermistortype-${c.id}`,value:d.thermistorType||"NTC",onChange:g=>y({...d,thermistorType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"NTC",children:"NTC (Negative Temperature Coefficient)"}),i.jsx("option",{value:"PTC",children:"PTC (Positive Temperature Coefficient)"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-beta-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Beta ():"}),i.jsx("input",{id:`component-beta-${c.id}`,type:"text",value:d.beta||"",onChange:g=>y({...d,beta:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 3950"})]})]}),c.componentType==="Transformer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-primaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Primary Voltage:"}),i.jsx("input",{id:`component-primaryvoltage-${c.id}`,type:"text",value:d.primaryVoltage||"",onChange:g=>y({...d,primaryVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 120"}),i.jsx("select",{value:d.primaryVoltageUnit||$e("voltage"),onChange:g=>y({...d,primaryVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-secondaryvoltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Secondary Voltage:"}),i.jsx("input",{id:`component-secondaryvoltage-${c.id}`,type:"text",value:d.secondaryVoltage||"",onChange:g=>y({...d,secondaryVoltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 12"}),i.jsx("select",{value:d.secondaryVoltageUnit||$e("voltage"),onChange:g=>y({...d,secondaryVoltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-turns-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Turns Ratio:"}),i.jsx("input",{id:`component-turns-${c.id}`,type:"text",value:d.turns||"",onChange:g=>y({...d,turns:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 10:1"})]})]}),c.componentType==="TestPoint"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-signal-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Signal:"}),i.jsx("input",{id:`component-signal-${c.id}`,type:"text",value:d.signal||"",onChange:g=>y({...d,signal:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., VCC, GND, CLK"})]})}),c.componentType==="IntegratedCircuit"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0",fontSize:"9px",fontWeight:600,color:"#666"},children:"IC Properties:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-ictype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"IC Type:"}),i.jsxs("select",{id:`component-ictype-${c.id}`,value:d.icType||"Op-Amp",onChange:g=>y({...d,icType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Op-Amp",children:"Op-Amp"}),i.jsx("option",{value:"Microcontroller",children:"Microcontroller"}),i.jsx("option",{value:"Microprocessor",children:"Microprocessor"}),i.jsx("option",{value:"Logic",children:"Logic"}),i.jsx("option",{value:"Memory",children:"Memory"}),i.jsx("option",{value:"Voltage Regulator",children:"Voltage Regulator"}),i.jsx("option",{value:"Timer",children:"Timer"}),i.jsx("option",{value:"ADC",children:"ADC (Analog-to-Digital)"}),i.jsx("option",{value:"DAC",children:"DAC (Digital-to-Analog)"}),i.jsx("option",{value:"Comparator",children:"Comparator"}),i.jsx("option",{value:"Transceiver",children:"Transceiver"}),i.jsx("option",{value:"Driver",children:"Driver"}),i.jsx("option",{value:"Amplifier",children:"Amplifier"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-datasheet-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Datasheet:"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flex:1},children:[i.jsx("input",{id:`component-datasheet-${c.id}`,type:"text",value:d.datasheet||"",onChange:g=>y({...d,datasheet:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"URL"}),d.datasheet&&d.datasheet.trim()&&i.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation();const E=d.datasheet.trim(),de=E.match(/^https?:\/\//)?E:`https://${E}`;window.open(de,"_blank","noopener,noreferrer")},style:{background:"transparent",border:"none",cursor:"pointer",padding:"2px",display:"flex",alignItems:"center",justifyContent:"center",opacity:u?.4:1,flexShrink:0},title:"Open URL in new tab",disabled:u,children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#4a9eff"},children:[i.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),i.jsx("polyline",{points:"15 3 21 3 21 9"}),i.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${c.id}`,name:`component-pincount-${c.id}`,type:"number",min:"1",value:d.pinCount,onChange:g=>{const E=Math.max(1,parseInt(g.target.value)||1);y({...d,pinCount:E})},onBlur:g=>{if(u){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const E=Math.max(1,parseInt(g.target.value)||1),je=(d.layer==="top"?U:X).find(ye=>ye.id===d.id);if(je&&E!==je.pinCount){const ye=je.pinConnections||[],Me=new Array(E).fill("").map((ge,A)=>A<ye.length?ye[A]:""),J=je.pinPolarities||[],Ae=je.pinPolarities?new Array(E).fill("").map((ge,A)=>A<J.length?J[A]:""):void 0,He={...je,pinCount:E,pinConnections:Me,...Ae!==void 0&&{pinPolarities:Ae}};d.layer==="top"?Ce(ge=>ge.map(A=>A.id===d.id?He:A)):be(ge=>ge.map(A=>A.id===d.id?He:A)),y({...d,pinCount:E})}},disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"}})]})]}),c.componentType==="VacuumTube"&&i.jsx(i.Fragment,{children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tubetype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tube Type:"}),i.jsx("input",{id:`component-tubetype-${c.id}`,type:"text",value:d.tubeType||"",onChange:g=>y({...d,tubeType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 12AX7, 6L6"})]})}),c.componentType==="VariableResistor"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-vrtype-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"VR Type:"}),i.jsxs("select",{id:`component-vrtype-${c.id}`,value:d.vrType||"Potentiometer",onChange:g=>y({...d,vrType:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Potentiometer",children:"Potentiometer"}),i.jsx("option",{value:"Rheostat",children:"Rheostat"}),i.jsx("option",{value:"Trimmer",children:"Trimmer"}),i.jsx("option",{value:"Varistor",children:"Varistor"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-resistance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Resistance:"}),i.jsx("input",{id:`component-resistance-${c.id}`,type:"text",value:d.resistance||"",onChange:g=>y({...d,resistance:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 10"}),i.jsx("select",{value:d.resistanceUnit||$e("resistance"),onChange:g=>y({...d,resistanceUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("resistance").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-taper-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Taper:"}),i.jsxs("select",{id:`component-taper-${c.id}`,value:d.taper||"Linear",onChange:g=>y({...d,taper:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"Linear",children:"Linear"}),i.jsx("option",{value:"Logarithmic",children:"Logarithmic"}),i.jsx("option",{value:"Audio",children:"Audio"})]})]})]}),c.componentType==="Crystal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-frequency-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Frequency:"}),i.jsx("input",{id:`component-frequency-${c.id}`,type:"text",value:d.frequency||"",onChange:g=>y({...d,frequency:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 16.000 MHz"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-loadcapacitance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Load Capacitance:"}),i.jsx("input",{id:`component-loadcapacitance-${c.id}`,type:"text",value:d.loadCapacitance||"",onChange:g=>y({...d,loadCapacitance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},placeholder:"e.g., 18pF"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"10ppm",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"10ppm",children:"10ppm"}),i.jsx("option",{value:"20ppm",children:"20ppm"}),i.jsx("option",{value:"30ppm",children:"30ppm"}),i.jsx("option",{value:"50ppm",children:"50ppm"}),i.jsx("option",{value:"100ppm",children:"100ppm"})]})]})]}),c.componentType==="ZenerDiode"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-voltage-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Zener Voltage:"}),i.jsx("input",{id:`component-voltage-${c.id}`,type:"text",value:d.voltage||"",onChange:g=>y({...d,voltage:g.target.value}),disabled:u,style:{width:"90px",padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1},placeholder:"e.g., 5.1"}),i.jsx("select",{value:d.voltageUnit||$e("voltage"),onChange:g=>y({...d,voltageUnit:g.target.value}),disabled:u,style:{padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,width:"60px",marginRight:"12px"},children:Ft("voltage").map(g=>i.jsx("option",{value:g,children:g},g))})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-power-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Power:"}),i.jsxs("select",{id:`component-power-${c.id}`,value:d.power||"1/4",onChange:g=>y({...d,power:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"12px"},children:[i.jsx("option",{value:"1/20",children:"1/20 W"}),i.jsx("option",{value:"1/16",children:"1/16 W"}),i.jsx("option",{value:"1/10",children:"1/10 W"}),i.jsx("option",{value:"1/8",children:"1/8 W"}),i.jsx("option",{value:"1/4",children:"1/4 W"}),i.jsx("option",{value:"1/2",children:"1/2 W"}),i.jsx("option",{value:"1",children:"1 W"}),i.jsx("option",{value:"2",children:"2 W"}),i.jsx("option",{value:"3",children:"3 W"}),i.jsx("option",{value:"5",children:"5 W"}),i.jsx("option",{value:"10",children:"10 W"}),i.jsx("option",{value:"25",children:"25 W"}),i.jsx("option",{value:"50",children:"50 W"}),i.jsx("option",{value:"100",children:"100 W"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-tolerance-${c.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Tolerance:"}),i.jsxs("select",{id:`component-tolerance-${c.id}`,value:d.tolerance||"5%",onChange:g=>y({...d,tolerance:g.target.value}),disabled:u,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:u?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0.5%",children:"0.5%"}),i.jsx("option",{value:"1%",children:"1%"}),i.jsx("option",{value:"2%",children:"2%"}),i.jsx("option",{value:"5%",children:"5%"}),i.jsx("option",{value:"10%",children:"10%"}),i.jsx("option",{value:"20%",children:"20%"})]})]})]})]}),Sx=c=>{const d=kd[c];return!d||!d.prefix||d.prefix.length<1?"?":d.prefix[0].substring(0,1).toUpperCase()},wx=({componentEditor:c,setComponentEditor:d,componentsTop:y,componentsBottom:u,setComponentsTop:U,setComponentsBottom:X,connectingPin:Ce,setConnectingPin:be,componentDialogPosition:g,setComponentDialogPosition:E,isDraggingDialog:de,setIsDraggingDialog:je,dialogDragOffset:ye,setDialogDragOffset:Me,areComponentsLocked:J,setSelectedComponentIds:Ae,setNotesDialogVisible:He})=>{if(!c||!c.visible)return null;let ge=y.find($=>$.id===c.id),A="top";if(ge||(ge=u.find($=>$.id===c.id),A="bottom"),!ge)return null;c.layer!==A&&d({...c,layer:A});const K=$=>{const D={...$},k=c.designator?.trim()||"";D.designator=k,D.x=c.x,D.y=c.y,D.layer=c.layer,D.orientation=c.orientation??0;const R=k.length>0?k.charAt(0).toUpperCase():Sx($.componentType);if(D.abbreviation=R,"manufacturer"in D&&(D.manufacturer=c.manufacturer?.trim()||void 0),"partNumber"in D&&(D.partNumber=c.partNumber?.trim()||void 0),c.pinCount!==$.pinCount){D.pinCount=c.pinCount;const m=$.pinConnections||[];if(D.pinConnections=new Array(c.pinCount).fill("").map((ue,q)=>q<m.length?m[q]:""),$.pinPolarities){const ue=$.pinPolarities||[];D.pinPolarities=new Array(c.pinCount).fill("").map((q,Be)=>Be<ue.length?ue[Be]:"")}}else D.pinConnections=$.pinConnections||[],$.pinPolarities&&(D.pinPolarities=$.pinPolarities);return $.componentType==="Resistor"?(D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.tolerance=c.tolerance||void 0):$.componentType==="Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.dielectric=c.dielectric||void 0):$.componentType==="Electrolytic Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.polarity=c.polarityCapacitor||void 0,D.esr=c.esr||void 0,D.esrUnit=c.esrUnit||void 0,D.temperature=c.temperature||void 0):$.componentType==="Film Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.filmType=c.filmType||void 0):$.componentType==="Diode"?(D.diodeType=c.diodeType||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.ledColor=c.ledColor||void 0):$.componentType==="Battery"?(D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.capacity=c.capacity||void 0,D.capacityUnit=c.capacityUnit||void 0,D.chemistry=c.chemistry||void 0):$.componentType==="Fuse"?(D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.fuseType=c.fuseType||void 0):$.componentType==="FerriteBead"?(D.impedance=c.impedance||void 0,D.impedanceUnit=c.impedanceUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):$.componentType==="Connector"?(D.connectorType=c.connectorType||void 0,D.gender=c.gender||void 0):$.componentType==="Jumper"?D.positions=c.positions||void 0:$.componentType==="Relay"?(D.coilVoltage=c.coilVoltage||void 0,D.coilVoltageUnit=c.coilVoltageUnit||void 0,D.contactType=c.contactType||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):$.componentType==="Inductor"?(D.inductance=c.inductance||void 0,D.inductanceUnit=c.inductanceUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0):$.componentType==="Speaker"?(D.impedance=c.impedance||void 0,D.impedanceUnit=c.impedanceUnit||void 0,D.power=c.power?`${c.power}W`:void 0):$.componentType==="Motor"?(D.motorType=c.motorType||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):$.componentType==="PowerSupply"?(D.inputVoltage=c.inputVoltage||void 0,D.inputVoltageUnit=c.inputVoltageUnit||void 0,D.outputVoltage=c.outputVoltage||void 0,D.outputVoltageUnit=c.outputVoltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):$.componentType==="Transistor"?(D.transistorType=c.transistorType||void 0,D.polarity=c.polarity||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0):$.componentType==="ResistorNetwork"?(D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.configuration=c.configuration||void 0):$.componentType==="Thermistor"?(D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.thermistorType=c.thermistorType||void 0,D.beta=c.beta||void 0):$.componentType==="Switch"?(D.switchType=c.switchType||void 0,D.current=c.current||void 0,D.currentUnit=c.currentUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0):$.componentType==="Transformer"?(D.primaryVoltage=c.primaryVoltage||void 0,D.primaryVoltageUnit=c.primaryVoltageUnit||void 0,D.secondaryVoltage=c.secondaryVoltage||void 0,D.secondaryVoltageUnit=c.secondaryVoltageUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.turns=c.turns||void 0):$.componentType==="TestPoint"?D.signal=c.signal||void 0:$.componentType==="Film Capacitor"?(D.capacitance=c.capacitance||void 0,D.capacitanceUnit=c.capacitanceUnit||void 0,D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.tolerance=c.tolerance||void 0,D.filmType=c.filmType||void 0):$.componentType==="IntegratedCircuit"?(D.description=c.description?.trim()||void 0,D.datasheet=c.datasheet?.trim()||void 0,D.icType=c.icType||void 0):D.description=c.description?.trim()||void 0,$.componentType==="VacuumTube"?D.tubeType=c.tubeType||void 0:$.componentType==="VariableResistor"?(D.vrType=c.vrType||void 0,D.resistance=c.resistance||void 0,D.resistanceUnit=c.resistanceUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.taper=c.taper||void 0):$.componentType==="Crystal"?(D.frequency=c.frequency||void 0,D.loadCapacitance=c.loadCapacitance||void 0,D.tolerance=c.tolerance||void 0):$.componentType==="ZenerDiode"&&(D.voltage=c.voltage||void 0,D.voltageUnit=c.voltageUnit||void 0,D.power=c.power?`${c.power}W`:void 0,D.tolerance=c.tolerance||void 0),D},lt=()=>{if(J){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const $=y.find(R=>R.id===c.id),D=u.find(R=>R.id===c.id),k=$||D;if(k){const R=K(k),m=k.layer,ue=c.layer;m!==ue?m==="top"?(U(q=>q.filter(Be=>Be.id!==c.id)),X(q=>[...q,R])):(X(q=>q.filter(Be=>Be.id!==c.id)),U(q=>[...q,R])):ue==="top"?U(q=>q.map(Be=>Be.id===c.id?R:Be)):X(q=>q.map(Be=>Be.id===c.id?R:Be))}else if(console.warn(`Component ${c.id} not found in either layer array`),c.layer==="top"){const R=u.find(m=>m.id===c.id);if(R){const m=K(R);X(ue=>ue.filter(q=>q.id!==c.id)),U(ue=>[...ue,m])}}else{const R=y.find(m=>m.id===c.id);if(R){const m=K(R);U(ue=>ue.filter(q=>q.id!==c.id)),X(ue=>[...ue,m])}}d(null),be(null)};return i.jsxs("div",{"data-component-editor-dialog":!0,onClick:$=>{if(Ce&&Ce.componentId===ge.id){const D=$.target;(D.tagName==="BUTTON"||D.tagName==="INPUT"||D.closest("button")||D.closest("input"))&&$.stopPropagation()}},style:{position:"fixed",top:g?`${g.y}px`:"90px",left:g?`${g.x}px`:`${window.innerWidth-280}px`,transform:"none",background:Ce&&Ce.componentId===ge.id?"rgba(255, 255, 255, 0.95)":"#fff",border:"1px solid #0b5fff",borderRadius:4,boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",display:"flex",flexDirection:"column",pointerEvents:"auto",cursor:de?"grabbing":"default"},children:[i.jsxs("div",{onMouseDown:$=>{const D=$.target;D.tagName==="BUTTON"||D.tagName==="INPUT"||D.closest("button")||D.closest("input")||g&&(Me({x:$.clientX-g.x,y:$.clientY-g.y}),je(!0),$.preventDefault())},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px",borderBottom:"1px solid #e0e0e0",background:"#888",cursor:de?"grabbing":"grab",userSelect:"none",flexShrink:0},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#fff",fontWeight:600},children:"Component Properties"}),i.jsx("button",{onClick:()=>{d(null),be(null)},style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#fff",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",padding:"6px 20px 6px 6px",overflowY:"auto",flex:1,minHeight:0},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Type:"}),i.jsx("div",{style:{flex:1,padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:zd(ge.componentType)})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-layer-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Layer:"}),i.jsxs("select",{id:`component-layer-${ge.id}`,name:`component-layer-${ge.id}`,value:c.layer,onChange:$=>d({...c,layer:$.target.value}),disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-orientation-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Orientation:"}),i.jsxs("select",{id:`component-orientation-${ge.id}`,name:`component-orientation-${ge.id}`,value:c.orientation??0,onChange:$=>{const D=parseInt($.target.value)||0;if(d({...c,orientation:D}),!J){const R=(c.layer==="top"?y:u).find(m=>m.id===c.id);if(R){const m={...R,orientation:D};c.layer==="top"?U(ue=>ue.map(q=>q.id===c.id?m:q)):X(ue=>ue.map(q=>q.id===c.id?m:q))}}},disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1,marginRight:"8px"},children:[i.jsx("option",{value:"0",children:"0"}),i.jsx("option",{value:"90",children:"90"}),i.jsx("option",{value:"180",children:"180"}),i.jsx("option",{value:"270",children:"270"})]})]}),i.jsx(mx,{component:ge,componentEditor:c,setComponentEditor:d,areComponentsLocked:J,componentsTop:y,componentsBottom:u,setComponentsTop:U,setComponentsBottom:X}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{htmlFor:`component-designator-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Designator:"}),i.jsx("input",{id:`component-designator-${ge.id}`,name:`component-designator-${ge.id}`,type:"text",value:c.designator||"",onChange:$=>{const D=$.target.value,k=D.length>0?D.charAt(0).toUpperCase():c.abbreviation;d({...c,designator:D,abbreviation:k})},disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",fontFamily:"monospace",textTransform:"uppercase",opacity:J?.6:1},placeholder:"e.g., U2, R7, C1"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-description-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Description:"}),i.jsx("input",{id:`component-description-${ge.id}`,name:`component-description-${ge.id}`,type:"text",value:c.description||"",onChange:$=>{d({...c,description:$.target.value})},disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1},placeholder:ge.componentType==="IntegratedCircuit"?"e.g., Dual Op-Amp":"e.g., Op Amp OP07"})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-notes-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Notes:"}),i.jsx("input",{id:`component-notes-${ge.id}`,name:`component-notes-${ge.id}`,type:"text",readOnly:!0,value:ge.notes||"",onClick:()=>{J||(Ae(new Set([ge.id])),He(!0))},disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1,cursor:J?"not-allowed":"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},placeholder:"Click to edit notes...",title:ge.notes||"Click to edit notes..."})]}),ge.componentType!=="IntegratedCircuit"&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-pincount-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Pin Count:"}),i.jsx("input",{id:`component-pincount-${ge.id}`,name:`component-pincount-${ge.id}`,type:"number",min:"1",value:c.pinCount,onChange:$=>{const D=Math.max(1,parseInt($.target.value)||1);d({...c,pinCount:D})},onBlur:$=>{if(J){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const D=Math.max(1,parseInt($.target.value)||1),R=(c.layer==="top"?y:u).find(m=>m.id===c.id);if(R&&D!==R.pinCount){const m=R.pinConnections||[],ue=new Array(D).fill("").map((Xe,re)=>re<m.length?m[re]:""),q=R.pinPolarities||[],Be=R.pinPolarities?new Array(D).fill("").map((Xe,re)=>re<q.length?q[re]:""):void 0,Ee={...R,pinCount:D,pinConnections:ue,...Be!==void 0&&{pinPolarities:Be}};c.layer==="top"?U(Xe=>Xe.map(re=>re.id===c.id?Ee:re)):X(Xe=>Xe.map(re=>re.id===c.id?Ee:re)),d({...c,pinCount:D})}},disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-x-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"X:"}),i.jsx("input",{id:`component-x-${ge.id}`,name:`component-x-${ge.id}`,type:"number",value:c.x.toFixed(2),onChange:$=>{const D=parseFloat($.target.value)||0;d({...c,x:D})},disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-y-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Y:"}),i.jsx("input",{id:`component-y-${ge.id}`,name:`component-y-${ge.id}`,type:"number",value:c.y.toFixed(2),onChange:$=>{const D=parseFloat($.target.value)||0;d({...c,y:D})},disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-manufacturer-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Manufacturer:"}),i.jsx("input",{id:`component-manufacturer-${ge.id}`,name:`component-manufacturer-${ge.id}`,type:"text",value:c.manufacturer,onChange:$=>d({...c,manufacturer:$.target.value}),disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("label",{htmlFor:`component-partnumber-${ge.id}`,style:{fontSize:"9px",fontWeight:600,color:"#333",whiteSpace:"nowrap",width:"90px",flexShrink:0},children:"Part Number:"}),i.jsx("input",{id:`component-partnumber-${ge.id}`,name:`component-partnumber-${ge.id}`,type:"text",value:c.partNumber,onChange:$=>d({...c,partNumber:$.target.value}),disabled:J,style:{flex:1,padding:"2px 3px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",color:"#666",opacity:J?.6:1}})]}),i.jsxs("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid #e0e0e0"},children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"2px"},children:"Pin Connections:"}),Ce&&Ce.componentId===ge.id&&i.jsxs("div",{style:{padding:"2px 3px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:2,marginBottom:"2px",fontSize:"8px",color:"#856404"},children:["Pin ",Ce.pinIndex+1," selected. Click on a via or pad to connect."]}),(()=>{const $=ge.componentType==="Electrolytic Capacitor"||ge.componentType==="Diode"||ge.componentType==="Battery"||ge.componentType==="ZenerDiode",D=ge.componentType==="Capacitor"&&"dielectric"in ge&&ge.dielectric==="Tantalum",k=$||D;return i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"8px",marginTop:"2px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd",background:"#f5f5f5"},children:[i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"20px"}}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"40px"},children:"Pin"}),k&&i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333",width:"50px"},children:"Polarity"}),i.jsx("th",{style:{padding:"2px 4px",textAlign:"left",fontWeight:600,fontSize:"8px",color:"#333"},children:"Node ID"})]})}),i.jsx("tbody",{children:Array.from({length:c.pinCount},(R,m)=>{const q=(c.layer==="top"?y:u).find(re=>re.id===c.id),Be=q?.pinConnections&&q.pinConnections.length>m?q.pinConnections[m]:"",Ee=q?.pinPolarities&&q.pinPolarities.length>m&&q.pinPolarities[m]||"",Xe=Ce&&Ce.componentId===ge.id&&Ce.pinIndex===m;return i.jsxs("tr",{style:{cursor:J?"not-allowed":"pointer",background:Xe?"#e6f0ff":Be?"#d4edda":"#fff",borderBottom:"1px solid #eee"},onClick:re=>{if(re.target.tagName!=="SELECT"){if(J){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}be(Xe?null:{componentId:ge.id,pinIndex:m})}},title:Be?`Connected to: ${Be}`:"Select this pin, then click on a via or pad to connect",children:[i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsx("input",{id:`pin-radio-${ge.id}-${m}`,name:`pin-radio-${ge.id}`,type:"radio",checked:!!Xe,onChange:()=>{if(J){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}be(Xe?null:{componentId:ge.id,pinIndex:m})},disabled:J,style:{margin:0,cursor:J?"not-allowed":"pointer",opacity:J?.6:1,width:"10px",height:"10px"}})}),i.jsx("td",{style:{padding:"2px 4px",color:"#333",fontWeight:Xe?600:400,fontFamily:"monospace"},children:m+1}),k&&i.jsx("td",{style:{padding:"2px 4px",textAlign:"center"},children:i.jsxs("select",{value:Ee??"",onChange:re=>{if(J){alert("Cannot edit: Components are locked. Unlock components to edit them.");return}const _=re.target.value,F=(c.layer==="top"?y:u).find(he=>he.id===c.id);if(F){const W=[...F.pinPolarities||new Array(F.pinCount).fill("")];for(;W.length<F.pinCount;)W.push("");W[m]=_;const C={...F,pinPolarities:W};c.layer==="top"?U(H=>H.map(le=>le.id===c.id?C:le)):X(H=>H.map(le=>le.id===c.id?C:le))}},disabled:J,onClick:re=>re.stopPropagation(),onFocus:re=>re.stopPropagation(),style:{padding:"1px 2px",fontSize:"8px",border:"1px solid #ddd",borderRadius:2,background:"#fff",cursor:J?"not-allowed":"pointer",opacity:J?.6:1,width:"100%",fontFamily:"monospace",fontWeight:600},children:[i.jsx("option",{value:"",children:"-"}),i.jsx("option",{value:"+",children:"+"}),i.jsx("option",{value:"-",children:"-"})]},`polarity-${ge.id}-${m}-${Ee}`)}),i.jsx("td",{style:{padding:"2px 4px",color:Be?"#28a745":"#999",fontWeight:Be?600:400,fontFamily:"monospace"},children:Be||"-"})]},m)})})]})})()]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"6px",padding:"6px",borderTop:"1px solid #e0e0e0",flexShrink:0},children:[i.jsx("button",{onClick:()=>{d(null),be(null)},disabled:J,style:{padding:"2px 5px",background:J?"#f5f5f5":"#fff",color:J?"#999":"#333",border:"1px solid #ddd",borderRadius:2,cursor:J?"not-allowed":"pointer",fontSize:"10px",opacity:J?.6:1},children:"Cancel"}),i.jsx("button",{onClick:lt,disabled:J,style:{padding:"2px 5px",background:J?"#f5f5f5":"#0b5fff",color:J?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:J?"not-allowed":"pointer",fontSize:"10px",opacity:J?.6:1},children:"Save"})]})]})};function jx(){const[c,d]=w.useState([]),[y,u]=w.useState(!1),[U,X]=w.useState([]),[Ce,be]=w.useState(null),[g,E]=w.useState("trace"),[de,je]=w.useState("top"),ye=w.useRef([]),Me=w.useRef(0),J=w.useRef(!1),Ae=w.useCallback(()=>{u(!0),X([]),ye.current=[]},[]),He=w.useCallback(()=>{u(!1),X([]),ye.current=[]},[]),ge=w.useCallback(K=>{X(lt=>[...lt,K]),ye.current=[...ye.current,K]},[]),A=w.useCallback(K=>{d(lt=>[...lt,K]),X([]),ye.current=[]},[]);return{drawingStrokes:c,setDrawingStrokes:d,isDrawing:y,setIsDrawing:u,currentStroke:U,setCurrentStroke:X,tracePreviewMousePos:Ce,setTracePreviewMousePos:be,drawingMode:g,setDrawingMode:E,selectedDrawingLayer:de,setSelectedDrawingLayer:je,currentStrokeRef:ye,lastTraceClickTimeRef:Me,isDoubleClickingTraceRef:J,startDrawing:Ae,stopDrawing:He,addPointToStroke:ge,finishStroke:A}}function Tx(){const[c,d]=w.useState(new Set),[y,u]=w.useState(!1),[U,X]=w.useState(new Set),[Ce,be]=w.useState(new Set),[g,E]=w.useState(new Set),de=w.useCallback(()=>{d(new Set),X(new Set),be(new Set),E(new Set)},[]),je=w.useCallback((J,Ae="stroke")=>{Ae==="stroke"?d(He=>new Set([...He,J])):Ae==="component"?X(He=>new Set([...He,J])):Ae==="power"?be(He=>new Set([...He,J])):Ae==="ground"&&E(He=>new Set([...He,J]))},[]),ye=w.useCallback((J,Ae="stroke")=>{Ae==="stroke"?d(He=>{const ge=new Set(He);return ge.delete(J),ge}):Ae==="component"?X(He=>{const ge=new Set(He);return ge.delete(J),ge}):Ae==="power"?be(He=>{const ge=new Set(He);return ge.delete(J),ge}):Ae==="ground"&&E(He=>{const ge=new Set(He);return ge.delete(J),ge})},[]),Me=w.useCallback((J,Ae="stroke")=>{Ae==="stroke"?d(J):Ae==="component"?X(J):Ae==="power"?be(J):Ae==="ground"&&E(J)},[]);return{selectedIds:c,setSelectedIds:d,isSelecting:y,setIsSelecting:u,selectedComponentIds:U,setSelectedComponentIds:X,selectedPowerIds:Ce,setSelectedPowerIds:be,selectedGroundIds:g,setSelectedGroundIds:E,clearSelection:de,addToSelection:je,removeFromSelection:ye,setSelection:Me}}function Cx(){const[c,d]=w.useState(null),[y,u]=w.useState(!1),[U,X]=w.useState(null),[Ce,be]=w.useState("nudge"),g=w.useCallback((de,je)=>{d(de),u(!0),X(je)},[]),E=w.useCallback(()=>{u(!1),d(null),X(null)},[]);return{selectedImageForTransform:c,setSelectedImageForTransform:d,isTransforming:y,setIsTransforming:u,transformStartPos:U,setTransformStartPos:X,transformMode:Ce,setTransformMode:be,startTransform:g,stopTransform:E}}function zx(){const[c,d]=w.useState(null),[y,u]=w.useState(null),[U,X]=w.useState("overlay"),[Ce,be]=w.useState(50),[g,E]=w.useState(!1),[de,je]=w.useState(!1),[ye,Me]=w.useState(!1),[J,Ae]=w.useState(!1),He=w.useCallback(K=>{d(K)},[]),ge=w.useCallback(K=>{u(K)},[]),A=w.useCallback(()=>{d(null),u(null)},[]);return{topImage:c,setTopImage:d,bottomImage:y,setBottomImage:u,currentView:U,setCurrentView:X,transparency:Ce,setTransparency:be,isTransparencyCycling:g,setIsTransparencyCycling:E,isGrayscale:de,setIsGrayscale:je,isBlackAndWhiteEdges:ye,setIsBlackAndWhiteEdges:Me,isBlackAndWhiteInverted:J,setIsBlackAndWhiteInverted:Ae,loadTopImage:He,loadBottomImage:ge,clearImages:A}}function kx(){const[c,d]=w.useState(1),[y,u]=w.useState({x:0,y:0}),[U,X]=w.useState(!1),[Ce,be]=w.useState(!1),g=w.useCallback(()=>{d(1),u({x:0,y:0})},[]),E=w.useCallback((J=1.2)=>{d(Ae=>Ae*J)},[]),de=w.useCallback((J=1.2)=>{d(Ae=>Ae/J)},[]),je=w.useCallback(J=>{d(J)},[]),ye=w.useCallback((J,Ae)=>{u(He=>({x:He.x+J,y:He.y+Ae}))},[]),Me=w.useCallback((J,Ae)=>{u({x:J,y:Ae})},[]);return{viewScale:c,setViewScale:d,viewPan:y,setViewPan:u,isShiftConstrained:U,setIsShiftConstrained:X,showBothLayers:Ce,setShowBothLayers:be,resetView:g,zoomIn:E,zoomOut:de,setZoom:je,pan:ye,setPan:Me}}function Rt(c,d,y,u){if(d==="power"){const X=c[d]||"";return typeof X=="string"&&X.trim()!==""?{value:X.replace(/W$/i,"").trim(),unit:"W"}:{value:"",unit:"W"}}if(c[d]!==void 0||c[y]!==void 0)return{value:c[d]||"",unit:c[y]||u};const U=c[d]||"";return typeof U=="string"&&U.trim()!==""?Rx(U):{value:"",unit:u}}function Rx(c){if(!c||c.trim()==="")return{value:"",unit:""};const d=c.trim(),y=d.match(/^([\d]+\/[\d]+)\s*([a-zA-ZuW]+)?$/);if(y)return{value:y[1],unit:y[2]||""};const u=d.match(/^([\d.]+)\s*([a-zA-ZuW]+)?$/);return u?{value:u[1],unit:u[2]||""}:{value:d,unit:""}}function Dx(){const[c,d]=w.useState([]),[y,u]=w.useState([]),[U,X]=w.useState(null),[Ce,be]=w.useState(null),[g,E]=w.useState(null),[de,je]=w.useState(!1),[ye,Me]=w.useState(null),J=w.useCallback((K,lt)=>{lt==="top"?d($=>[...$,K]):u($=>[...$,K])},[]),Ae=w.useCallback((K,lt,$)=>{$==="top"?d(D=>D.map(k=>k.id===K?{...k,...lt}:k)):u(D=>D.map(k=>k.id===K?{...k,...lt}:k))},[]),He=w.useCallback((K,lt)=>{lt==="top"?d($=>$.filter(D=>D.id!==K)):u($=>$.filter(D=>D.id!==K))},[]),ge=w.useCallback((K,lt)=>{const $=K.designator||"",D=K.abbreviation||($.length>0?$.charAt(0).toUpperCase():""),k={visible:!0,layer:lt,id:K.id,designator:$,abbreviation:D,manufacturer:"manufacturer"in K&&K.manufacturer||"",partNumber:"partNumber"in K&&K.partNumber||"",pinCount:K.pinCount,x:K.x,y:K.y,orientation:K.orientation??0,description:K.description||""};if(K.componentType==="Resistor"){const R=K,m=Rt(R,"resistance","resistanceUnit",$e("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit;const ue=Rt(R,"power","powerUnit","W");k.power=ue.value||"1/4",k.tolerance=R.tolerance||"5%"}else if(K.componentType==="Capacitor"){const R=K,m=Rt(R,"capacitance","capacitanceUnit",$e("capacitance"));k.capacitance=m.value,k.capacitanceUnit=m.unit;const ue=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=ue.value,k.voltageUnit=ue.unit,k.tolerance=R.tolerance||"10%",k.dielectric=R.dielectric||"Ceramic"}else if(K.componentType==="Electrolytic Capacitor"){const R=K,m=Rt(R,"capacitance","capacitanceUnit",$e("capacitance"));k.capacitance=m.value,k.capacitanceUnit=m.unit;const ue=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=ue.value,k.voltageUnit=ue.unit,k.tolerance=R.tolerance||"20%",k.polarityCapacitor=R.polarity||"Positive";const q=Rt(R,"esr","esrUnit",$e("esr"));k.esr=q.value,k.esrUnit=q.unit,k.temperature=R.temperature||""}else if(K.componentType==="Film Capacitor"){const R=K,m=Rt(R,"capacitance","capacitanceUnit",$e("capacitance"));k.capacitance=m.value,k.capacitanceUnit=m.unit;const ue=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=ue.value,k.voltageUnit=ue.unit,k.tolerance=R.tolerance||"10%",k.filmType=R.filmType||"Polyester"}else if(K.componentType==="Diode"){const R=K;k.diodeType=R.diodeType||"Standard";const m=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const ue=Rt(R,"current","currentUnit",$e("current"));k.current=ue.value,k.currentUnit=ue.unit,k.ledColor=R.ledColor||""}else if(K.componentType==="Battery"){const R=K,m=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const ue=Rt(R,"capacity","capacityUnit",$e("capacity"));k.capacity=ue.value,k.capacityUnit=ue.unit,k.chemistry=R.chemistry||"Li-ion"}else if(K.componentType==="Fuse"){const R=K,m=Rt(R,"current","currentUnit",$e("current"));k.current=m.value,k.currentUnit=m.unit;const ue=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=ue.value,k.voltageUnit=ue.unit,k.fuseType=R.fuseType||"Fast-blow"}else if(K.componentType==="FerriteBead"){const R=K,m=Rt(R,"impedance","impedanceUnit",$e("impedance"));k.impedance=m.value,k.impedanceUnit=m.unit;const ue=Rt(R,"current","currentUnit",$e("current"));k.current=ue.value,k.currentUnit=ue.unit}else if(K.componentType==="Connector"){const R=K;k.connectorType=R.connectorType||"",k.gender=R.gender||"N/A"}else if(K.componentType==="Jumper"){const R=K;k.positions=R.positions||3}else if(K.componentType==="Relay"){const R=K,m=Rt(R,"coilVoltage","coilVoltageUnit",$e("coilVoltage"));k.coilVoltage=m.value,k.coilVoltageUnit=m.unit,k.contactType=R.contactType||"SPST";const ue=Rt(R,"current","currentUnit",$e("current"));k.current=ue.value,k.currentUnit=ue.unit}else if(K.componentType==="Inductor"){const R=K,m=Rt(R,"inductance","inductanceUnit",$e("inductance"));k.inductance=m.value,k.inductanceUnit=m.unit;const ue=Rt(R,"current","currentUnit",$e("current"));k.current=ue.value,k.currentUnit=ue.unit;const q=Rt(R,"resistance","resistanceUnit",$e("resistance"));k.resistance=q.value,k.resistanceUnit=q.unit}else if(K.componentType==="Speaker"){const R=K,m=Rt(R,"impedance","impedanceUnit",$e("impedance"));k.impedance=m.value,k.impedanceUnit=m.unit;const ue=Rt(R,"power","powerUnit","W");k.power=ue.value||"1"}else if(K.componentType==="Motor"){const R=K;k.motorType=R.motorType||"DC";const m=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const ue=Rt(R,"current","currentUnit",$e("current"));k.current=ue.value,k.currentUnit=ue.unit}else if(K.componentType==="PowerSupply"){const R=K,m=Rt(R,"inputVoltage","inputVoltageUnit",$e("inputVoltage"));k.inputVoltage=m.value,k.inputVoltageUnit=m.unit;const ue=Rt(R,"outputVoltage","outputVoltageUnit",$e("outputVoltage"));k.outputVoltage=ue.value,k.outputVoltageUnit=ue.unit;const q=Rt(R,"current","currentUnit",$e("current"));k.current=q.value,k.currentUnit=q.unit}else if(K.componentType==="Transistor"){const R=K;k.transistorType=R.transistorType||"BJT",k.polarity=R.polarity||"NPN";const m=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const ue=Rt(R,"current","currentUnit",$e("current"));k.current=ue.value,k.currentUnit=ue.unit}else if(K.componentType==="ResistorNetwork"){const R=K,m=Rt(R,"resistance","resistanceUnit",$e("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit,k.configuration=R.configuration||""}else if(K.componentType==="Thermistor"){const R=K,m=Rt(R,"resistance","resistanceUnit",$e("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit,k.thermistorType=R.thermistorType||"NTC",k.beta=R.beta||""}else if(K.componentType==="Switch"){const R=K;k.switchType=R.switchType||"Toggle";const m=Rt(R,"current","currentUnit",$e("current"));k.current=m.value,k.currentUnit=m.unit;const ue=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=ue.value,k.voltageUnit=ue.unit}else if(K.componentType==="Transformer"){const R=K,m=Rt(R,"primaryVoltage","primaryVoltageUnit",$e("primaryVoltage"));k.primaryVoltage=m.value,k.primaryVoltageUnit=m.unit;const ue=Rt(R,"secondaryVoltage","secondaryVoltageUnit",$e("secondaryVoltage"));k.secondaryVoltage=ue.value,k.secondaryVoltageUnit=ue.unit;const q=Rt(R,"power","powerUnit",$e("power"));k.power=q.value||"1",k.turns=R.turns||""}else if(K.componentType==="TestPoint"){const R=K;k.signal=R.signal||""}else if(K.componentType==="IntegratedCircuit"){const R=K;k.description=R.description||K.designator||"",k.datasheet=R.datasheet||"",k.icType=R.icType||"Op-Amp"}else if(K.componentType==="VacuumTube"){const R=K;k.tubeType=R.tubeType||""}else if(K.componentType==="VariableResistor"){const R=K;k.vrType=R.vrType||"Potentiometer";const m=Rt(R,"resistance","resistanceUnit",$e("resistance"));k.resistance=m.value,k.resistanceUnit=m.unit;const ue=Rt(R,"power","powerUnit",$e("power"));k.power=ue.value||"1/4",k.taper=R.taper||""}else if(K.componentType==="Crystal"){const R=K;k.frequency=R.frequency||"",k.loadCapacitance=R.loadCapacitance||"",k.tolerance=R.tolerance||""}else if(K.componentType==="ZenerDiode"){const R=K,m=Rt(R,"voltage","voltageUnit",$e("voltage"));k.voltage=m.value,k.voltageUnit=m.unit;const ue=Rt(R,"power","powerUnit",$e("power"));k.power=ue.value||"1/4",k.tolerance=R.tolerance||"5%"}X(k)},[]),A=w.useCallback(()=>{X(null),be(null)},[]);return{componentsTop:c,setComponentsTop:d,componentsBottom:y,setComponentsBottom:u,componentEditor:U,setComponentEditor:X,connectingPin:Ce,setConnectingPin:be,componentDialogPosition:g,setComponentDialogPosition:E,isDraggingDialog:de,setIsDraggingDialog:je,dialogDragOffset:ye,setDialogDragOffset:Me,addComponent:J,updateComponent:Ae,removeComponent:He,openComponentEditor:ge,closeComponentEditor:A}}function Ax(){const[c,d]=w.useState([]),[y,u]=w.useState(()=>[{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),[U,X]=w.useState([]),[Ce,be]=w.useState([]),[g,E]=w.useState(null),[de,je]=w.useState(null),ye=w.useCallback(D=>{d(k=>[...k,D])},[]),Me=w.useCallback((D,k)=>{d(R=>R.map(m=>m.id===D?{...m,...k}:m))},[]),J=w.useCallback(D=>{d(k=>k.filter(R=>R.id!==D)),X(k=>k.filter(R=>R.powerBusId!==D))},[]),Ae=w.useCallback(D=>{X(k=>[...k,D])},[]),He=w.useCallback(D=>{X(k=>k.filter(R=>R.id!==D))},[]),ge=w.useCallback(D=>{be(k=>[...k,D])},[]),A=w.useCallback(D=>{be(k=>k.filter(R=>R.id!==D))},[]),K=w.useCallback(D=>{u(k=>[...k,D])},[]),lt=w.useCallback((D,k)=>{u(R=>R.map(m=>m.id===D?{...m,...k}:m))},[]),$=w.useCallback(D=>{u(k=>k.filter(R=>R.id!==D)),be(k=>k.filter(R=>R.groundBusId===D))},[]);return{powerBuses:c,setPowerBuses:d,groundBuses:y,setGroundBuses:u,powerSymbols:U,setPowerSymbols:X,groundSymbols:Ce,setGroundSymbols:be,powerEditor:g,setPowerEditor:E,groundEditor:de,setGroundEditor:je,addPowerBus:ye,updatePowerBus:Me,removePowerBus:J,addPowerSymbol:Ae,removePowerSymbol:He,addGroundSymbol:ge,removeGroundSymbol:A,addGroundBus:K,updateGroundBus:lt,removeGroundBus:$}}function Nx(){const d=w.useCallback(()=>({brushColor:localStorage.getItem("defaultBrushColor")||"#008080",brushSize:parseInt(localStorage.getItem("defaultBrushSize")||"6",10),topTraceColor:localStorage.getItem("defaultTopTraceColor")||"#AA4499",bottomTraceColor:localStorage.getItem("defaultBottomTraceColor")||"#F781BF",topTraceSize:parseInt(localStorage.getItem("defaultTopTraceSize")||"6",10),bottomTraceSize:parseInt(localStorage.getItem("defaultBottomTraceSize")||"6",10),viaSize:parseInt(localStorage.getItem("defaultViaSize")||"18",10),viaColor:localStorage.getItem("defaultViaColor")||"#ff0000",topPadColor:localStorage.getItem("defaultTopPadColor")||"#0072B2",bottomPadColor:localStorage.getItem("defaultBottomPadColor")||"#56B4E9",topPadSize:parseInt(localStorage.getItem("defaultTopPadSize")||"18",10),bottomPadSize:parseInt(localStorage.getItem("defaultBottomPadSize")||"18",10),topTestPointColor:localStorage.getItem("defaultTopTestPointColor")||"#FFFF00",bottomTestPointColor:localStorage.getItem("defaultBottomTestPointColor")||"#FFFF00",topTestPointSize:parseInt(localStorage.getItem("defaultTopTestPointSize")||"18",10),bottomTestPointSize:parseInt(localStorage.getItem("defaultBottomTestPointSize")||"18",10),topComponentColor:localStorage.getItem("defaultTopComponentColor")||"#8C564B",bottomComponentColor:localStorage.getItem("defaultBottomComponentColor")||"#9C755F",topComponentSize:parseInt(localStorage.getItem("defaultTopComponentSize")||"18",10),bottomComponentSize:parseInt(localStorage.getItem("defaultBottomComponentSize")||"18",10),componentConnectionColor:localStorage.getItem("defaultComponentConnectionColor")||"#E69F00",componentConnectionSize:parseInt(localStorage.getItem("defaultComponentConnectionSize")||"3",10),powerSize:parseInt(localStorage.getItem("defaultPowerSize")||"18",10),groundSize:parseInt(localStorage.getItem("defaultGroundSize")||"18",10)}),[])(),[y,u]=w.useState(d.brushColor),[U,X]=w.useState(d.brushSize),[Ce,be]=w.useState(d.topTraceColor),[g,E]=w.useState(d.bottomTraceColor),[de,je]=w.useState(d.topTraceSize),[ye,Me]=w.useState(d.bottomTraceSize),[J,Ae]=w.useState(d.topPadColor),[He,ge]=w.useState(d.bottomPadColor),[A,K]=w.useState(d.topPadSize),[lt,$]=w.useState(d.bottomPadSize),[D,k]=w.useState(d.topTestPointColor),[R,m]=w.useState(d.bottomTestPointColor),[ue,q]=w.useState(d.topTestPointSize),[Be,Ee]=w.useState(d.bottomTestPointSize),[Xe,re]=w.useState(d.topComponentColor),[_,P]=w.useState(d.bottomComponentColor),[F,he]=w.useState(d.topComponentSize),[W,C]=w.useState(d.bottomComponentSize),[H,le]=w.useState(d.componentConnectionColor),[me,Ie]=w.useState(d.componentConnectionSize),at=w.useCallback((Bt,Ke,Jt)=>{Bt==="trace"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTraceSize",String(Ke)):localStorage.setItem("defaultBottomTraceSize",String(Ke)):Bt==="pad"&&Jt?Jt==="top"?localStorage.setItem("defaultTopPadSize",String(Ke)):localStorage.setItem("defaultBottomPadSize",String(Ke)):Bt==="testPoint"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTestPointSize",String(Ke)):localStorage.setItem("defaultBottomTestPointSize",String(Ke)):Bt==="component"&&Jt?Jt==="top"?localStorage.setItem("defaultTopComponentSize",String(Ke)):localStorage.setItem("defaultBottomComponentSize",String(Ke)):Bt==="componentConnection"?localStorage.setItem("defaultComponentConnectionSize",String(Ke)):Bt==="via"?localStorage.setItem("defaultViaSize",String(Ke)):Bt==="power"?localStorage.setItem("defaultPowerSize",String(Ke)):Bt==="ground"?localStorage.setItem("defaultGroundSize",String(Ke)):Bt==="brush"&&localStorage.setItem("defaultBrushSize",String(Ke))},[]),ut=w.useCallback((Bt,Ke,Jt)=>{Bt==="trace"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTraceColor",Ke):localStorage.setItem("defaultBottomTraceColor",Ke):Bt==="pad"&&Jt?Jt==="top"?localStorage.setItem("defaultTopPadColor",Ke):localStorage.setItem("defaultBottomPadColor",Ke):Bt==="testPoint"&&Jt?Jt==="top"?localStorage.setItem("defaultTopTestPointColor",Ke):localStorage.setItem("defaultBottomTestPointColor",Ke):Bt==="component"&&Jt?Jt==="top"?localStorage.setItem("defaultTopComponentColor",Ke):localStorage.setItem("defaultBottomComponentColor",Ke):Bt==="componentConnection"?localStorage.setItem("defaultComponentConnectionColor",Ke):Bt==="via"?localStorage.setItem("defaultViaColor",Ke):Bt==="brush"&&localStorage.setItem("defaultBrushColor",Ke)},[]);return{brushColor:y,setBrushColor:u,brushSize:U,setBrushSize:X,topTraceColor:Ce,setTopTraceColor:be,bottomTraceColor:g,setBottomTraceColor:E,topTraceSize:de,setTopTraceSize:je,bottomTraceSize:ye,setBottomTraceSize:Me,topPadColor:J,setTopPadColor:Ae,bottomPadColor:He,setBottomPadColor:ge,topPadSize:A,setTopPadSize:K,bottomPadSize:lt,setBottomPadSize:$,topTestPointColor:D,setTopTestPointColor:k,bottomTestPointColor:R,setBottomTestPointColor:m,topTestPointSize:ue,setTopTestPointSize:q,bottomTestPointSize:Be,setBottomTestPointSize:Ee,topComponentColor:Xe,setTopComponentColor:re,bottomComponentColor:_,setBottomComponentColor:P,topComponentSize:F,setTopComponentSize:he,bottomComponentSize:W,setBottomComponentSize:C,componentConnectionColor:H,setComponentConnectionColor:le,componentConnectionSize:me,setComponentConnectionSize:Ie,saveDefaultSize:at,saveDefaultColor:ut}}const Bx=(c,d,y)=>{const u=`tool_${c}_color`,U=`tool_${c}_size`;localStorage.setItem(u,d),localStorage.setItem(U,String(y))};function Mx(c,d,y,u,U,X,Ce,be,g,E,de,je,ye,Me,J,Ae,He,ge,A,K,lt,$,D,k,R){const[m,ue]=w.useState(()=>c()),q=w.useRef(null),Be=w.useRef(u),Ee=w.useRef(U),Xe=w.useCallback(P=>d==="draw"&&y==="trace"?P.get("trace"):d==="draw"&&y==="via"?P.get("via"):d==="draw"&&y==="pad"?P.get("pad"):d==="component"?P.get("component"):d==="power"?P.get("power"):d==="ground"?P.get("ground"):null,[d,y]);w.useEffect(()=>{ue(P=>{const F=Xe(P),he=F?.id||null,W=q.current,C=new Map(P);if(W&&W!==he){const H=P.get(W);H&&(Bx(W,Be.current,Ee.current),C.set(W,{...H,settings:{color:Be.current,size:Ee.current}}))}if(F&&he!==W)if(d==="draw"&&y==="trace"){const H=$||"top",le=H==="top"?X:Ce,me=H==="top"?be:g;Be.current=le,Ee.current=me,C.set("trace",{...F,settings:{color:le,size:me}})}else if(d==="draw"&&y==="pad"){const H=D||"top",le=H==="top"?E:de,me=H==="top"?je:ye;Be.current=le,Ee.current=me,C.set("pad",{...F,settings:{color:le,size:me}})}else if(d==="component"){const H=R||"top",le=H==="top"?ge:A,me=H==="top"?K:lt;Be.current=le,Ee.current=me,C.set("component",{...F,settings:{color:le,size:me}})}else Be.current=F.settings.color,Ee.current=F.settings.size;return q.current=he,C})},[d,y,u,U,X,Ce,be,g,E,de,je,ye,ge,A,K,lt,$,D,R,Xe]);const re=w.useCallback((P,F)=>{ue(he=>{const W=new Map(he),C=W.get(P);return C&&W.set(P,{...C,settings:F}),W})},[]),_=w.useCallback((P,F,he)=>{ue(W=>{const C=new Map(W),H=C.get(P);if(H){const le=new Map(H.layerSettings);le.set(F,he),C.set(P,{...H,layerSettings:le})}return C})},[]);return{toolRegistry:m,setToolRegistry:ue,updateToolSettings:re,updateToolLayerSettings:_,getCurrentToolDef:Xe}}function Ux(c){const{currentTool:d,drawingMode:y,traceToolLayer:u,padToolLayer:U,testPointToolLayer:X,componentToolLayer:Ce}=c,[be,g]=w.useState(0),E=w.useCallback(()=>d==="draw"&&y==="via"?"via":d==="draw"&&y==="pad"?U==="bottom"?"padBottom":"padTop":d==="draw"&&y==="testPoint"?X==="bottom"?"testPointBottom":"testPointTop":d==="draw"&&y==="trace"?u==="bottom"?"traceBottom":"traceTop":d==="component"?Ce==="bottom"?"componentBottom":"componentTop":d==="power"?"power":d==="ground"?"ground":null,[d,y,U,X,u,Ce]),de=w.useCallback(()=>{const J=E();if(J){const Ae=St.get(J);return{currentTool:d,drawingMode:y,layer:d==="draw"&&y==="pad"?U||"top":d==="draw"&&y==="testPoint"?X||"top":d==="draw"&&y==="trace"?u||"top":d==="component"?Ce||"top":void 0,toolInstanceId:J,color:Ae.color,size:Ae.size}}return{currentTool:d,drawingMode:y,layer:void 0,toolInstanceId:null,color:"#000000",size:10}},[d,y,U,X,u,Ce,E]);w.useEffect(()=>{const J=E();return J?St.subscribe(J,()=>{g(He=>He+1)}):void 0},[E]);const je=de(),ye=w.useCallback(J=>{const Ae=E();Ae&&St.setColor(Ae,J)},[E]),Me=w.useCallback(J=>{const Ae=E();Ae&&St.setSize(Ae,J)},[E]);return{toolState:je,setColor:ye,setSize:Me,getCurrentToolInstanceId:E}}function Px(){const[c,d]=w.useState(!1),[y,u]=w.useState(!1),[U,X]=w.useState(!1),[Ce,be]=w.useState(!1),[g,E]=w.useState(!1),[de,je]=w.useState(!1),[ye,Me]=w.useState(!1),[J,Ae]=w.useState(!1),He=w.useCallback(()=>{d(!0),u(!0),X(!0),be(!0),E(!0),je(!0),Me(!0),Ae(!0)},[]),ge=w.useCallback(()=>{d(!1),u(!1),X(!1),be(!1),E(!1),je(!1),Me(!1),Ae(!1)},[]);return{areImagesLocked:c,setAreImagesLocked:d,areViasLocked:y,setAreViasLocked:u,arePadsLocked:U,setArePadsLocked:X,areTestPointsLocked:Ce,setAreTestPointsLocked:be,areTracesLocked:g,setAreTracesLocked:E,areComponentsLocked:de,setAreComponentsLocked:je,areGroundNodesLocked:ye,setAreGroundNodesLocked:Me,arePowerNodesLocked:J,setArePowerNodesLocked:Ae,lockAll:He,unlockAll:ge}}function _x(){const[c,d]=w.useState(null),[y,u]=w.useState({visible:!1,size:6}),[U,X]=w.useState({visible:!1,interval:5}),[Ce,be]=w.useState({visible:!1,source:null,interval:5}),[g,E]=w.useState({visible:!1,text:""}),[de,je]=w.useState({visible:!1,title:"",message:""}),[ye,Me]=w.useState({visible:!1}),[J,Ae]=w.useState({visible:!1,projectName:"",locationPath:"",locationHandle:null}),[He,ge]=w.useState({visible:!1,filename:"",locationPath:"",locationHandle:null}),[A,K]=w.useState(!1),[lt,$]=w.useState(!0);return{openMenu:c,setOpenMenu:d,setSizeDialog:y,setSetSizeDialog:u,autoSaveDialog:U,setAutoSaveDialog:X,autoSavePromptDialog:Ce,setAutoSavePromptDialog:be,debugDialog:g,setDebugDialog:E,errorDialog:de,setErrorDialog:je,newProjectDialog:ye,setNewProjectDialog:Me,newProjectSetupDialog:J,setNewProjectSetupDialog:Ae,saveAsDialog:He,setSaveAsDialog:ge,showColorPicker:A,setShowColorPicker:K,showWelcomeDialog:lt,setShowWelcomeDialog:$}}function Ox(){const[c,d]=w.useState(!1),[y,u]=w.useState(1),[U,X]=w.useState(null),[Ce,be]=w.useState(""),[g,E]=w.useState(""),[de,je]=w.useState(null),[ye,Me]=w.useState("pcb_project"),[J,Ae]=w.useState([]),[He,ge]=w.useState(-1),A=w.useRef(null),K=w.useRef(!1),lt=w.useRef(!1);return{autoSaveEnabled:c,setAutoSaveEnabled:d,autoSaveInterval:y,setAutoSaveInterval:u,autoSaveDirHandle:U,setAutoSaveDirHandle:X,autoSaveBaseName:Ce,setAutoSaveBaseName:be,currentProjectFilePath:g,setCurrentProjectFilePath:E,projectDirHandle:de,setProjectDirHandle:je,projectName:ye,setProjectName:Me,autoSaveFileHistory:J,setAutoSaveFileHistory:Ae,currentFileIndex:He,setCurrentFileIndex:ge,autoSaveIntervalRef:A,hasChangesSinceLastAutoSaveRef:K,prevAutoSaveEnabledRef:lt}}function Hx(){const d=zx(),{topImage:y,setTopImage:u,bottomImage:U,setBottomImage:X,currentView:Ce,setCurrentView:be,transparency:g,setTransparency:E,isTransparencyCycling:de,setIsTransparencyCycling:je,isGrayscale:ye,setIsGrayscale:Me,isBlackAndWhiteEdges:J,setIsBlackAndWhiteEdges:Ae,isBlackAndWhiteInverted:He,setIsBlackAndWhiteInverted:ge}=d,[A,K]=w.useState("none"),lt=Nx(),{brushColor:$,setBrushColor:D,brushSize:k,setBrushSize:R,topTraceColor:m,setTopTraceColor:ue,bottomTraceColor:q,setBottomTraceColor:Be,topTraceSize:Ee,setTopTraceSize:Xe,bottomTraceSize:re,setBottomTraceSize:_,topPadColor:P,setTopPadColor:F,bottomPadColor:he,setBottomPadColor:W,topPadSize:C,setTopPadSize:H,bottomPadSize:le,setBottomPadSize:me,topTestPointColor:Ie,setTopTestPointColor:at,bottomTestPointColor:ut,setBottomTestPointColor:Bt,topTestPointSize:Ke,setTopTestPointSize:Jt,bottomTestPointSize:Hi,setBottomTestPointSize:Ua,topComponentColor:pi,setTopComponentColor:Kn,bottomComponentColor:Jn,setBottomComponentColor:Ji,topComponentSize:Ei,setTopComponentSize:_l,bottomComponentSize:hi,setBottomComponentSize:yl,componentConnectionColor:Pa,setComponentConnectionColor:zc,componentConnectionSize:Fo,setComponentConnectionSize:gi,saveDefaultSize:Ge,saveDefaultColor:Ct}=lt,zr=jx(),{drawingStrokes:Ve,setDrawingStrokes:Vt,isDrawing:ra,setIsDrawing:Yo,currentStroke:Wt,setCurrentStroke:Pn,tracePreviewMousePos:gn,setTracePreviewMousePos:xi,drawingMode:we,setDrawingMode:Ol,selectedDrawingLayer:yt,setSelectedDrawingLayer:_n,currentStrokeRef:Hl,lastTraceClickTimeRef:Lo,isDoubleClickingTraceRef:ca}=zr,El=Cx(),{selectedImageForTransform:Mt,setSelectedImageForTransform:Il,isTransforming:Xo,setIsTransforming:da,transformStartPos:ua,setTransformStartPos:ji,transformMode:Vl,setTransformMode:Is}=El,Vs=kx(),{viewScale:Oe,setViewScale:Ii,viewPan:wt,setViewPan:Ln,isShiftConstrained:Ws,setIsShiftConstrained:bl,showBothLayers:On,setShowBothLayers:ei}=Vs,[zt,_a]=w.useState("top"),[en,kr]=w.useState("top"),[tn,go]=w.useState("top"),[pn,Oa]=w.useState("top"),Wl=Pe.useRef("top"),fa=Pe.useRef("top"),$l=Pe.useRef("top"),wn=Pe.useRef("top");Pe.useEffect(()=>{Wl.current=zt},[zt]),Pe.useEffect(()=>{fa.current=en},[en]),Pe.useEffect(()=>{$l.current=tn},[tn]),Pe.useEffect(()=>{wn.current=pn},[pn]);const Rr=Ux({currentTool:A,drawingMode:we,traceToolLayer:zt,padToolLayer:en,testPointToolLayer:tn,componentToolLayer:pn}),{toolState:Hn}=Rr,pa=Mx(cx,A,we,$,k,m,q,Ee,re,P,he,C,le,Ie,ut,Ke,Hi,pi,Jn,Ei,hi,zt,en,tn,pn),{toolRegistry:Dt,setToolRegistry:An,getCurrentToolDef:Ha,updateToolSettings:$s,updateToolLayerSettings:xo}=pa,yo=Pe.useRef(null),ti=Pe.useRef($),Nn=Pe.useRef(k);Pe.useEffect(()=>{An(a=>{const r=Ha(a),p=r?.id||null,x=yo.current,v=new Map(a);if(x&&x!==p){const b=a.get(x);b&&v.set(x,{...b,settings:{color:ti.current,size:Nn.current}})}if(r&&p!==x)if(A==="draw"&&we==="trace"){const b=zt||"top",f=b==="top"?m:q,S=b==="top"?Ee:re;D(f),R(S),ti.current=f,Nn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:m,size:Ee}),T.set("bottom",{color:q,size:re}),v.set("trace",{...r,settings:{color:f,size:S},layerSettings:T})}else if(A==="draw"&&we==="pad"){const b=en||"top",f=b==="top"?P:he,S=b==="top"?C:le;D(f),R(S),ti.current=f,Nn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:P,size:C}),T.set("bottom",{color:he,size:le}),v.set("pad",{...r,settings:{color:f,size:S},layerSettings:T})}else if(A==="draw"&&we==="testPoint"){const b=tn||"top",f=b==="top"?Ie:ut,S=b==="top"?Ke:Hi;D(f),R(S),ti.current=f,Nn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:Ie,size:Ke}),T.set("bottom",{color:ut,size:Hi}),v.set("testPoint",{...r,settings:{color:f,size:S},layerSettings:T})}else if(A==="component"){const b=pn||"top",f=b==="top"?pi:Jn,S=b==="top"?Ei:hi;D(f),R(S),ti.current=f,Nn.current=S;const T=new Map(r.layerSettings);T.set("top",{color:pi,size:Ei}),T.set("bottom",{color:Jn,size:hi}),v.set("component",{...r,settings:{color:f,size:S},layerSettings:T})}else{const b=r.settings;D(b.color),R(b.size),ti.current=b.color,Nn.current=b.size}return yo.current=p,v})},[A,we,Ha,m,q,Ee,re,P,he,C,le,Ie,ut,Ke,Hi,tn,pi,Jn,Ei,hi]),Pe.useEffect(()=>{const a=Dt.get("trace");if(a){const v=a.layerSettings.get("top"),b=a.layerSettings.get("bottom");v&&(ue(v.color),Xe(v.size)),b&&(Be(b.color),_(b.size))}const r=Dt.get("pad");if(r){const v=r.layerSettings.get("top"),b=r.layerSettings.get("bottom");v&&(F(v.color),H(v.size)),b&&(W(b.color),me(b.size))}const p=Dt.get("testPoint");if(p){const v=p.layerSettings.get("top"),b=p.layerSettings.get("bottom");v&&(at(v.color),Jt(v.size)),b&&(Bt(b.color),Ua(b.size))}const x=Dt.get("component");if(x){const v=x.layerSettings.get("top"),b=x.layerSettings.get("bottom");v&&(Kn(v.color),_l(v.size)),b&&(Ji(b.color),yl(b.size))}},[]),Pe.useEffect(()=>{An(a=>{const r=new Map(a),p=a.get("trace");if(p){const S=new Map(p.layerSettings);S.set("top",{color:m,size:Ee}),S.set("bottom",{color:q,size:re}),r.set("trace",{...p,layerSettings:S})}const x=a.get("pad");if(x){const S=new Map(x.layerSettings);S.set("top",{color:P,size:C}),S.set("bottom",{color:he,size:le}),r.set("pad",{...x,layerSettings:S})}const v=a.get("testPoint");if(v){const S=new Map(v.layerSettings);S.set("top",{color:Ie,size:Ke}),S.set("bottom",{color:ut,size:Hi}),r.set("testPoint",{...v,layerSettings:S})}const b=a.get("component");if(b){const S=new Map(b.layerSettings);S.set("top",{color:pi,size:Ei}),S.set("bottom",{color:Jn,size:hi}),r.set("component",{...b,layerSettings:S})}const f=a.get("componentConnection");return f&&r.set("componentConnection",{...f,settings:{color:Pa,size:Fo}}),r})},[m,q,Ee,re,P,he,C,le,Ie,ut,Ke,Hi,pi,Jn,Ei,hi,Pa,Fo,An]),Pe.useEffect(()=>{An(a=>{const r=Ha(a);if(r)if(A==="draw"&&we==="trace"){const p=zt||"top";p==="top"?(ue($),Xe(k),Ct("trace",$,"top"),Ge("trace",k,"top")):(Be($),_(k),Ct("trace",$,"bottom"),Ge("trace",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:$,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:$,size:k}}),ti.current=$,Nn.current=k,x}else if(A==="draw"&&we==="pad"){const p=en||"top";p==="top"?(F($),H(k),Ct("pad",$,"top"),Ge("pad",k,"top")):(W($),me(k),Ct("pad",$,"bottom"),Ge("pad",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:$,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:$,size:k}}),ti.current=$,Nn.current=k,x}else if(A==="draw"&&we==="testPoint"){const p=tn||"top";p==="top"?(at($),Jt(k),Ct("testPoint",$,"top"),Ge("testPoint",k,"top")):(Bt($),Ua(k),Ct("testPoint",$,"bottom"),Ge("testPoint",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:$,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:$,size:k}}),ti.current=$,Nn.current=k,x}else if(A==="component"){const p=pn||"top";p==="top"?(Kn($),_l(k),Ct("component",$,"top"),Ge("component",k,"top")):(Ji($),yl(k),Ct("component",$,"bottom"),Ge("component",k,"bottom"));const x=new Map(a),v=new Map(r.layerSettings);return v.set(p,{color:$,size:k}),x.set(r.id,{...r,layerSettings:v,settings:{color:$,size:k}}),ti.current=$,Nn.current=k,x}else{const p=new Map(a);return p.set(r.id,{...r,settings:{color:$,size:k}}),ti.current=$,Nn.current=k,p}return a})},[$,k,A,we,zt,en,tn,pn,Ha,Ct,Ge,wc,ue,Be,Xe,_,F,W,H,me,at,Bt,Jt,Ua,Kn,Ji,_l,yl]),Pe.useEffect(()=>{A==="power"?(Lt(!0),zl(null)):(Lt(!1),zl(null))},[A]),Pe.useEffect(()=>{A==="ground"?(kl(!0),rs(null)):(kl(!1),rs(null))},[A]),Pe.useEffect(()=>{Da(A==="draw"&&we==="trace")},[A,we]),Pe.useEffect(()=>{ea(A==="draw"&&we==="pad")},[A,we]),Pe.useEffect(()=>{Ao(A==="draw"&&we==="testPoint")},[A,we]),Pe.useEffect(()=>{Hn.toolInstanceId&&(D(Hn.color),R(Hn.size))},[Hn.toolInstanceId,Hn.color,Hn.size,D,R,A,we]);const[yi,ha]=w.useState(void 0),[,Go]=w.useState([]),[,jn]=w.useState([]),[,xn]=w.useState([]),[,el]=w.useState([]),[Vi,dn]=w.useState([]),[Fs,Vn]=w.useState([]),[Bn,Ea]=w.useState([]),[qo,Dr]=w.useState([]),hn=w.useRef(null),Ys=Tx(),{selectedIds:vt,setSelectedIds:jt,isSelecting:Ia,setIsSelecting:ze,selectedComponentIds:Ye,setSelectedComponentIds:ft,selectedPowerIds:pt,setSelectedPowerIds:tt,selectedGroundIds:kt,setSelectedGroundIds:bt}=Ys,Ut=Dx(),{componentsTop:mt,setComponentsTop:sn,componentsBottom:ot,setComponentsBottom:At,componentEditor:Ti,setComponentEditor:kc,connectingPin:$n,setConnectingPin:vl,componentDialogPosition:ml,setComponentDialogPosition:ga,isDraggingDialog:Ar,setIsDraggingDialog:Ls,dialogDragOffset:Va,setDialogDragOffset:Rc,openComponentEditor:bi}=Ut,bo=Ax(),{powerBuses:ct,setPowerBuses:ni,groundBuses:Xn,setGroundBuses:Fl,powerSymbols:Dc,setPowerSymbols:Gn,groundSymbols:Nr,setGroundSymbols:Wi,powerEditor:$i,setPowerEditor:Xs}=bo,ju=Px(),{areImagesLocked:ii,setAreImagesLocked:Gs,areViasLocked:li,setAreViasLocked:Br,arePadsLocked:Fi,setArePadsLocked:Ac,areTestPointsLocked:Yl,setAreTestPointsLocked:Tu,areTracesLocked:ai,setAreTracesLocked:Mr,areComponentsLocked:Ci,setAreComponentsLocked:Zo,areGroundNodesLocked:zi,setAreGroundNodesLocked:qs,arePowerNodesLocked:yn,setArePowerNodesLocked:Zs}=ju,Cu=_x(),{openMenu:zu,setOpenMenu:Nc,setSizeDialog:vo,setSetSizeDialog:Wa,autoSaveDialog:Ur,setAutoSaveDialog:$a,autoSavePromptDialog:Qo,setAutoSavePromptDialog:Ll,debugDialog:Fa,setDebugDialog:xa,errorDialog:Bc,setErrorDialog:Qs,newProjectDialog:Pr,setNewProjectDialog:Ko,newProjectSetupDialog:un,setNewProjectSetupDialog:Jo,saveAsDialog:Qt,setSaveAsDialog:Ks,showColorPicker:Mc,setShowColorPicker:_r}=Cu,Rd=Ox(),{autoSaveEnabled:ki,setAutoSaveEnabled:vi,autoSaveInterval:Sl,setAutoSaveInterval:ya,autoSaveDirHandle:wl,setAutoSaveDirHandle:Ya,autoSaveBaseName:ba,setAutoSaveBaseName:tl,currentProjectFilePath:es,setCurrentProjectFilePath:Ri,projectDirHandle:Fn,setProjectDirHandle:va,projectName:oi,setProjectName:jl,autoSaveFileHistory:ku,setAutoSaveFileHistory:Js,currentFileIndex:Dd,setCurrentFileIndex:Di,autoSaveIntervalRef:$t,hasChangesSinceLastAutoSaveRef:Tl,prevAutoSaveEnabledRef:Or}=Rd,Uc=w.useRef(null),Pc=w.useRef(null),er=w.useRef(null),Hr=w.useRef(null),ma=w.useRef(null),mo=w.useRef(null),ts=w.useRef(null),[Sa,Er]=w.useState(!1),nl=w.useRef(null),Xl=w.useRef(null),[So,tr]=w.useState(!1),[Ai,nr]=w.useState(null),[ir,_c]=w.useState(!1),[lr,ar]=w.useState(null),[Ir,or]=w.useState(null),[wo,Oc]=w.useState({width:960,height:600}),Ni=w.useRef(null),sr=w.useRef(null),il=w.useRef(null),wa=w.useRef(null),rr=w.useRef(null),cr=w.useRef(null),dr=w.useRef(null),Vr=w.useRef(null),[Gl,jo]=w.useState(!0),[To,Cl]=w.useState(!0),[Bi,si]=w.useState(!0),[Mi,ll]=w.useState(!0),[Yi,Co]=w.useState(!0),[qn,ns]=w.useState(!0),[al,is]=w.useState(!0),[ja,Li]=w.useState(!0),[Xi,zo]=w.useState(!0),[Gi,Ta]=w.useState(!0),[Mn,ri]=w.useState(!0),[mi,qi]=w.useState(!0),Je=Dc,nt=Nr,[Ad,ls]=w.useState(!1),[as,os]=w.useState(null),[Wn,Lt]=w.useState(!1),[Pt,zl]=w.useState(null),[ol,ss]=w.useState(!1),[ql,Wr]=w.useState(null),[$r,kl]=w.useState(!1),[sl,rs]=w.useState(null),[Zl,ur]=w.useState(()=>{const a=localStorage.getItem("autoAssignDesignators");return a!==null?a==="true":!0}),[rl,cl]=w.useState(!1),[La,Rl]=w.useState(!1),ko=w.useRef({}),[Dl,Ca]=w.useState(!0),[za,Ql]=w.useState(!0),[nn,Xa]=w.useState(null),[Fr,Nd]=w.useState(!1),[Yr,Bd]=w.useState(null),[Tn,Ga]=w.useState(!1),[Kl,qa]=w.useState(null),[fr,Ro]=w.useState(!1),[ka,Md]=w.useState(null),[cs,Hc]=w.useState([]),[Lr,Za]=w.useState(!1),[Qa,Ka]=w.useState(null),[Xr,Ja]=w.useState(!1),[ds,us]=w.useState(null),[Gr,Ud]=w.useState(()=>{const a=localStorage.getItem("boardDimensions");if(a)try{return JSON.parse(a)}catch{return null}return null}),[Pd,eo]=w.useState(!1);Pe.useEffect(()=>{ct.length===0&&ni([{id:"default-3v3",name:"+3.3V",voltage:"+3.3VDC",color:"#ff6600"},{id:"default-5v",name:"+5V",voltage:"+5VDC",color:"#ff0000"}])},[ct.length,ni]);const ci=w.useCallback((a,r)=>{const p=Je.find(v=>v.pointId===a);if(p){const v=r.find(f=>f.id===p.powerBusId);return`Via (${v?v.voltage:p.type||"Power Node"})`}const x=nt.find(v=>v.pointId===a);return x?`Via (${x.type||"Ground"})`:"Via (Signal)"},[Je,nt]),Al=w.useCallback((a,r)=>{const p=Je.find(v=>v.pointId===a);if(p){const v=r.find(f=>f.id===p.powerBusId);return`Pad (${v?v.voltage:p.type||"Power Node"})`}const x=nt.find(v=>v.pointId===a);return x?`Pad (${x.type||"Ground"})`:"Pad (Signal)"},[Je,nt]),Jl=w.useCallback((a,r)=>{const p=Je.find(v=>v.pointId===a);if(p){const v=r.find(f=>f.id===p.powerBusId);return`Test Point (${v?v.voltage:p.type||"Power Node"})`}const x=nt.find(v=>v.pointId===a);return x?`Test Point (${x.type||"Ground"})`:"Test Point (Signal)"},[Je,nt]),fs=w.useCallback(()=>{const a=Ve.filter(r=>r.type==="via").map(r=>r.id);jt(new Set(a)),ft(new Set),tt(new Set),bt(new Set)},[Ve,jt,ft,tt,bt]),pr=w.useCallback(()=>{const a=Ve.filter(r=>r.type==="trace").map(r=>r.id);jt(new Set(a)),ft(new Set),tt(new Set),bt(new Set)},[Ve,jt,ft,tt,bt]),qr=w.useCallback(()=>{const a=Ve.filter(r=>r.type==="pad").map(r=>r.id);jt(new Set(a)),ft(new Set),tt(new Set),bt(new Set)},[Ve,jt,ft,tt,bt]),hr=w.useCallback(()=>{const a=[...mt,...ot].map(r=>r.id);ft(new Set(a)),jt(new Set),tt(new Set),bt(new Set)},[mt,ot,ft,jt,tt,bt]),Zr=w.useCallback(()=>{const a=[...mt,...ot].filter(r=>{const p=r.pinConnections||[];return!(p.length>0&&p.length===r.pinCount&&p.every(v=>v&&v.trim()!==""))}).map(r=>r.id);ft(new Set(a)),jt(new Set),tt(new Set),bt(new Set),xa({visible:!0,text:""})},[mt,ot,ft,jt,tt,bt,xa]),_d=w.useCallback((a,r,p)=>{const x=hn.current;if(!x)return;const v=x.width-80,b=x.height-80,f=v/2,S=b/2,T=f-r*Oe,z=S-p*Oe;Ln({x:T,y:z}),ft(new Set([a])),jt(new Set),tt(new Set),bt(new Set)},[Oe,Ln,ft,jt,tt,bt]),Do=Pe.useMemo(()=>{const a=new Set(Je.map(p=>p.powerBusId).filter(p=>typeof p=="string"&&p.length>0)),r=ct.filter(p=>a.has(p.id)).map(p=>p.name);return Array.from(new Set(r)).sort()},[Je,ct]),Od=Pe.useMemo(()=>{const a=new Set(nt.map(p=>p.groundBusId).filter(p=>typeof p=="string"&&p.length>0)),r=Xn.filter(p=>a.has(p.id)).map(p=>p.name);return Array.from(new Set(r)).sort()},[nt,Xn]),to=w.useCallback(()=>{const a=Je.map(r=>r.id);tt(new Set(a)),jt(new Set),ft(new Set),bt(new Set)},[Je,tt,jt,ft,bt]),Ec=w.useCallback(()=>{const a=nt.map(r=>r.id);bt(new Set(a)),jt(new Set),ft(new Set),tt(new Set)},[nt,bt,jt,ft,tt]),Ic=w.useCallback(a=>{const r=ct.filter(x=>x.name===a).map(x=>x.id);if(r.length===0)return;const p=Je.filter(x=>x.powerBusId&&r.includes(x.powerBusId)).map(x=>x.id);tt(new Set(p)),jt(new Set),ft(new Set),bt(new Set)},[ct,Je,tt,jt,ft,bt]),no=w.useCallback(a=>{const r=Xn.filter(x=>x.name===a).map(x=>x.id);if(r.length===0)return;const p=nt.filter(x=>x.groundBusId&&r.includes(x.groundBusId)).map(x=>x.id);bt(new Set(p)),jt(new Set),ft(new Set),tt(new Set)},[Xn,nt,bt,jt,ft,tt]);w.useCallback(a=>{switch(a.componentType){case"Resistor":case"ResistorNetwork":case"Thermistor":case"VariableResistor":if("resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit)return`${a.resistance} ${a.resistanceUnit}`;break;case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":if("capacitance"in a&&a.capacitance&&"capacitanceUnit"in a&&a.capacitanceUnit)return`${a.capacitance} ${a.capacitanceUnit}`;break;case"Inductor":if("inductance"in a&&a.inductance&&"inductanceUnit"in a&&a.inductanceUnit)return`${a.inductance} ${a.inductanceUnit}`;break;case"Battery":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Diode":case"ZenerDiode":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"Fuse":if("current"in a&&a.current&&"currentUnit"in a&&a.currentUnit)return`${a.current} ${a.currentUnit}`;break;case"FerriteBead":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Relay":if("coilVoltage"in a&&a.coilVoltage&&"coilVoltageUnit"in a&&a.coilVoltageUnit)return`${a.coilVoltage} ${a.coilVoltageUnit}`;break;case"Speaker":if("impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit)return`${a.impedance} ${a.impedanceUnit}`;break;case"Motor":if("voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit)return`${a.voltage} ${a.voltageUnit}`;break;case"PowerSupply":if("outputVoltage"in a&&a.outputVoltage&&"outputVoltageUnit"in a&&a.outputVoltageUnit)return`${a.outputVoltage} ${a.outputVoltageUnit}`;break;case"Transistor":if("partNumber"in a&&a.partNumber)return a.partNumber;break;case"IntegratedCircuit":if("partNumber"in a&&a.partNumber)return a.partNumber;break}return null},[]);const io=w.useCallback(a=>{const r=[];switch(a.componentType){case"Capacitor":case"Electrolytic Capacitor":case"Film Capacitor":"capacitance"in a&&a.capacitance&&"capacitanceUnit"in a&&a.capacitanceUnit&&r.push(`Capacitance: ${a.capacitance} ${a.capacitanceUnit}`),"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"dielectric"in a&&a.dielectric&&r.push(`Dielectric: ${a.dielectric}`);break;case"Resistor":case"ResistorNetwork":case"Thermistor":"resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit&&r.push(`Resistance: ${a.resistance} ${a.resistanceUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"VariableResistor":"resistance"in a&&a.resistance&&"resistanceUnit"in a&&a.resistanceUnit&&r.push(`Resistance: ${a.resistance} ${a.resistanceUnit}`),"vrType"in a&&a.vrType&&r.push(`Type: ${a.vrType}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"taper"in a&&a.taper&&r.push(`Taper: ${a.taper}`);break;case"Inductor":"inductance"in a&&a.inductance&&"inductanceUnit"in a&&a.inductanceUnit&&r.push(`Inductance: ${a.inductance} ${a.inductanceUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"Battery":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"capacity"in a&&a.capacity&&"capacityUnit"in a&&a.capacityUnit&&r.push(`Capacity: ${a.capacity} ${a.capacityUnit}`);break;case"Diode":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`);break;case"ZenerDiode":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"Fuse":"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`),"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`);break;case"FerriteBead":"impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit&&r.push(`Impedance: ${a.impedance} ${a.impedanceUnit}`),"current"in a&&a.current&&"currentUnit"in a&&a.currentUnit&&r.push(`Current: ${a.current} ${a.currentUnit}`);break;case"Relay":"coilVoltage"in a&&a.coilVoltage&&"coilVoltageUnit"in a&&a.coilVoltageUnit&&r.push(`Coil Voltage: ${a.coilVoltage} ${a.coilVoltageUnit}`),"contactRating"in a&&a.contactRating&&r.push(`Contact Rating: ${a.contactRating}`);break;case"Speaker":"impedance"in a&&a.impedance&&"impedanceUnit"in a&&a.impedanceUnit&&r.push(`Impedance: ${a.impedance} ${a.impedanceUnit}`),"power"in a&&a.power&&r.push(`Power: ${a.power}`);break;case"Motor":"voltage"in a&&a.voltage&&"voltageUnit"in a&&a.voltageUnit&&r.push(`Voltage: ${a.voltage} ${a.voltageUnit}`),"speed"in a&&a.speed&&"speedUnit"in a&&a.speedUnit&&r.push(`Speed: ${a.speed} ${a.speedUnit}`);break;case"PowerSupply":"outputVoltage"in a&&a.outputVoltage&&"outputVoltageUnit"in a&&a.outputVoltageUnit&&r.push(`Output Voltage: ${a.outputVoltage} ${a.outputVoltageUnit}`),"outputCurrent"in a&&a.outputCurrent&&"outputCurrentUnit"in a&&a.outputCurrentUnit&&r.push(`Output Current: ${a.outputCurrent} ${a.outputCurrentUnit}`);break;case"Transistor":"partNumber"in a&&a.partNumber&&r.push(`Part Number: ${a.partNumber}`),"transistorType"in a&&a.transistorType&&r.push(`Type: ${a.transistorType}`);break;case"Crystal":"frequency"in a&&a.frequency&&r.push(`Frequency: ${a.frequency}`),"loadCapacitance"in a&&a.loadCapacitance&&r.push(`Load Capacitance: ${a.loadCapacitance}`),"tolerance"in a&&a.tolerance&&r.push(`Tolerance: ${a.tolerance}`);break;case"VacuumTube":"tubeType"in a&&a.tubeType&&r.push(`Tube Type: ${a.tubeType}`),"partNumber"in a&&a.partNumber&&r.push(`Part Number: ${a.partNumber}`);break}return r},[]),[Ra,Da]=w.useState(!1),lo=w.useRef(null),[ao,ea]=w.useState(!1),[Qr,Ao]=w.useState(!1),ta=w.useRef(null),oo=w.useRef(null),gr=w.useRef(null),ps=w.useRef(null),[hs,En]=w.useState(!1),[di,Zi]=w.useState(!1),[Ui,Kr]=w.useState(null),[so,Qi]=w.useState(new Set),Cn=w.useRef(null),na=w.useRef(null),dl=w.useRef(null),ht=w.useRef(null),Yt=w.useRef(null),zn=w.useRef(null),gs=w.useRef(null),ro=w.useRef(null),[No,xr]=w.useState(null),[Pi,Bo]=w.useState(!1),[xs,bn]=w.useState(null),[ia,yr]=w.useState(null),Vc=w.useCallback(async(a,r)=>{try{const p=await createImageBitmap(a),x=URL.createObjectURL(a),v=await new Promise((I,Q)=>{const oe=new FileReader;oe.onload=()=>I(oe.result),oe.onerror=Q,oe.readAsDataURL(a)}),b=hn.current;let f=0,S=0;if(b){const I=b.width-80,Q=b.height-80,oe=I/2,L=Q/2;f=(oe-wt.x)/Oe,S=(L-wt.y)/Oe}const T=a.name,z={url:x,name:a.name,width:p.width,height:p.height,dataUrl:v,filePath:T,x:f,y:S,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,bitmap:p};r==="top"?u(z):X(z)}catch(p){console.error("Failed to load image",p)}},[wt.x,wt.y,Oe,y,U]),Hd=w.useCallback(a=>{a.stopPropagation(),a.preventDefault();const r=hn.current;if(!r)return;document.activeElement!==r&&r.focus();const p=r.getBoundingClientRect(),x=r.width/p.width,v=r.height/p.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,S=typeof b=="number"?b:a.clientX-p.left,T=typeof f=="number"?f:a.clientY-p.top,z=S*x,I=T*v,Q=z-40,oe=I-40,L=(Q-wt.x)/Oe,ee=(oe-wt.y)/Oe;if(A==="center"){const V=r.width-80,Z=r.height-80,G=V/2,pe=Z/2,ke=(G-wt.x)/Oe,Te=(pe-wt.y)/Oe;nr({x:ke,y:Te,zoom:Oe}),K("select"),ha(void 0);return}if(A==="select"){if($n){let N=1/0,fe=null,ie=null;const De=Math.max(6/Oe,4),qe=[...mt,...ot].find(We=>We.id===$n.componentId)?.layer||"top";for(const We of Ve)if((We.type==="via"||We.type==="pad")&&We.points.length>0){if(We.type==="pad"&&(We.layer||"top")!==qe)continue;const rt=We.points[0],et=Math.max(1,We.size/2),gt=Math.hypot(rt.x-L,rt.y-ee),Qe=Math.max(et,De);gt<=Qe&&gt<N&&(N=gt,fe=rt.id??null,ie=We)}if(ie?(console.log(`
[PIN CONNECTION] Found via!`),console.log(`  Stroke ID: ${ie.id}`),console.log(`  Point ID: ${fe}`),console.log(`  Point coordinates: x=${ie.points[0].x.toFixed(2)}, y=${ie.points[0].y.toFixed(2)}`),console.log(`  Click coordinates: x=${L.toFixed(2)}, y=${ee.toFixed(2)}`),console.log(`  Distance: ${N.toFixed(2)}`),console.log(`  Via size: ${ie.size}, radius: ${Math.max(1,ie.size/2)}`)):(console.log(`
[PIN CONNECTION] No via found!`),console.log(`  Click coordinates: x=${L.toFixed(2)}, y=${ee.toFixed(2)}`),console.log(`  Hit tolerance: ${De.toFixed(2)}`),console.log(`  Total vias in drawingStrokes: ${Ve.filter(We=>We.type==="via").length}`)),fe!=null){console.log(`
[PIN CONNECTION] Proceeding with connection...`),console.log(`  bestPointId is valid: ${fe} (type: ${typeof fe})`);const We=String(fe),rt=$n.pinIndex,et=$n.componentId;console.log(`
=== PIN CONNECTION START ===`),console.log(`Connecting pin ${rt} (Pin ${rt+1}) of component ${et} to point ID ${We}`);const gt=mt.find(Ne=>Ne.id===et),Qe=ot.find(Ne=>Ne.id===et);gt?(console.log("Component found in TOP layer"),sn(Ne=>{const st=Ne.find(xt=>xt.id===et);if(!st)return console.error(`Component ${et} not found in TOP layer during update!`),Ne;console.log("BEFORE update: pinConnections =",st.pinConnections);const Xt=st.pinConnections||[],Gt=Xt.length>0?[...Xt]:new Array(st.pinCount).fill("");let ln;if(Gt.length!==st.pinCount){ln=new Array(st.pinCount).fill("");for(let xt=0;xt<Math.min(Gt.length,st.pinCount);xt++)ln[xt]=Gt[xt]||""}else ln=[...Gt];ln[rt]=We,console.log(`Updating pin ${rt} with value: ${We}`),console.log("New pinConnections array:",ln);const vn=Ne.map(xt=>xt.id===et?{...xt,pinConnections:ln}:xt),mn=vn.find(xt=>xt.id===et);return console.log("AFTER update: pinConnections =",mn?.pinConnections),console.log(`Pin ${rt} value: ${mn?.pinConnections[rt]}`),console.log(`=== PIN CONNECTION COMPLETE (TOP) ===
`),vn})):Qe?(console.log("Component found in BOTTOM layer"),At(Ne=>{const st=Ne.find(xt=>xt.id===et);if(!st)return console.error(`Component ${et} not found in BOTTOM layer during update!`),Ne;console.log("BEFORE update: pinConnections =",st.pinConnections);const Xt=st.pinConnections||[],Gt=Xt.length>0?[...Xt]:new Array(st.pinCount).fill("");let ln;if(Gt.length!==st.pinCount){ln=new Array(st.pinCount).fill("");for(let xt=0;xt<Math.min(Gt.length,st.pinCount);xt++)ln[xt]=Gt[xt]||""}else ln=[...Gt];ln[rt]=We,console.log(`Updating pin ${rt} with value: ${We}`),console.log("New pinConnections array:",ln);const vn=Ne.map(xt=>xt.id===et?{...xt,pinConnections:ln}:xt),mn=vn.find(xt=>xt.id===et);return console.log("AFTER update: pinConnections =",mn?.pinConnections),console.log(`Pin ${rt} value: ${mn?.pinConnections[rt]}`),console.log(`=== PIN CONNECTION COMPLETE (BOTTOM) ===
`),vn})):(console.error(`Component ${et} not found in either TOP or BOTTOM layer!`),console.log("Available TOP components:",mt.map(Ne=>Ne.id)),console.log("Available BOTTOM components:",ot.map(Ne=>Ne.id))),setTimeout(()=>{vl(null)},0);return}else vl(null)}const V=10,Z=(()=>{for(const N of mt)if(L>=N.x-V&&L<=N.x+V&&ee>=N.y-V&&ee<=N.y+V)return{layer:"top",comp:N};for(const N of ot)if(L>=N.x-V&&L<=N.x+V&&ee>=N.y-V&&ee<=N.y+V)return{layer:"bottom",comp:N};return null})();if(Z){const{comp:N}=Z;a.shiftKey?ft(fe=>{const ie=new Set(fe);return ie.has(N.id)?ie.delete(N.id):ie.add(N.id),ie}):(ft(new Set([N.id])),jt(new Set),tt(new Set),bt(new Set));return}const G=Math.max(6/Oe,4);let pe=null;for(const N of Je){const fe=Math.max(6,N.size/2),ie=fe*.8,De=fe+ie,Ue=Math.hypot(N.x-L,N.y-ee),qe=Math.abs(L-N.x)<=G&&Math.abs(ee-N.y)<=De,We=Math.abs(ee-N.y)<=G&&Math.abs(L-N.x)<=De;if(Ue<=Math.max(fe,G)||qe||We){pe=N;break}}if(pe){a.shiftKey?tt(N=>{const fe=new Set(N);return fe.has(pe.id)?fe.delete(pe.id):fe.add(pe.id),fe}):(tt(new Set([pe.id])),jt(new Set),ft(new Set),bt(new Set));return}let ke=null;for(const N of nt){const fe=Math.max(6,(N.size||18)/2),ie=fe*.8,De=fe+ie,Ue=Math.hypot(N.x-L,N.y-ee),qe=Math.abs(L-N.x)<=G&&Math.abs(ee-N.y)<=De,We=Math.abs(ee-N.y)<=G&&Math.abs(L-N.x)<=De;if(Ue<=Math.max(fe,G)||qe||We){ke=N;break}}if(ke){a.shiftKey?bt(N=>{const fe=new Set(N);return fe.has(ke.id)?fe.delete(ke.id):fe.add(ke.id),fe}):(bt(new Set([ke.id])),jt(new Set),ft(new Set),tt(new Set));return}const se=Math.max(6/Oe,4/Oe),Re=Math.max(se,.5);let M=null;for(const N of Ve)if((N.type==="via"||N.type==="pad"||N.type==="testPoint")&&N.points.length>0){let fe=!1;if(N.type==="via"?fe=Bi:N.type==="pad"?fe=(N.layer||"top")==="top"?qn:al:N.type==="testPoint"&&(fe=(N.layer||"top")==="top"?ja:Xi),!fe)continue;const ie=N.points[0],De=Math.max(1,N.size/2);if(Math.hypot(ie.x-L,ie.y-ee)<=Math.max(De,Re)){M=N;break}}if(M){a.shiftKey?jt(N=>{const fe=new Set(N);return fe.has(M.id)?fe.delete(M.id):fe.add(M.id),fe}):(jt(new Set([M.id])),ft(new Set),tt(new Set),bt(new Set));return}a.shiftKey||(jt(new Set),ft(new Set),tt(new Set),bt(new Set)),ze(!0),bn({x:L,y:ee,shiftKey:a.shiftKey}),yr({x:L,y:ee,width:0,height:0});return}else if(A==="magnify"){const V=a.shiftKey?.5:2,Z=Math.max(.25,Math.min(8,Oe*V)),G=Q-Z*L,pe=oe-Z*ee;Ii(Z),Ln({x:G,y:pe});return}else if(A==="pan"){nl.current={startCX:Q,startCY:oe,panX:wt.x,panY:wt.y},Xl.current={startClientX:a.clientX,startClientY:a.clientY,panX:wt.x,panY:wt.y},Er(!0);return}else if(A==="draw"){const V=(pe,ke)=>{let Te=1/0,se=null;const Re=10/Oe,M=Oe>20?Math.max(Re,1e-4):Oe>10?Math.max(Re,.001):Math.max(Re,.01);for(const ie of Ve)if(ie.type==="via"){const De=ie.points[0],Ue=Math.hypot(De.x-pe,De.y-ke);Ue<=M&&Ue<Te&&(Te=Ue,se=De)}else if(ie.type==="pad"){const De=ie.points[0],Ue=Math.hypot(De.x-pe,De.y-ke);Ue<=M&&Ue<Te&&(Te=Ue,se=De)}for(const ie of Je)if(ie.pointId!==void 0){const De=Math.hypot(ie.x-pe,ie.y-ke);De<=M&&De<Te&&(Te=De,se={x:ie.x,y:ie.y,id:ie.pointId})}for(const ie of nt)if(ie.pointId!==void 0){const De=Math.hypot(ie.x-pe,ie.y-ke);De<=M&&De<Te&&(Te=De,se={x:ie.x,y:ie.y,id:ie.pointId})}const fe=Ht(se??{x:pe,y:ke});return{x:fe.x,y:fe.y,nodeId:se?.id}};if(we==="via"){const pe=St.get("via"),ke=pe.color,Te=pe.size,_e=Pi?{x:Ht({x:L,y:ee}).x,y:Ht({x:L,y:ee}).y}:((ie,De)=>{let Ue=1/0,qe=null;const rt=10/Oe,et=Oe>10?Math.max(rt,.001):Math.max(rt,.01);for(const Ne of Ve)if(Ne.type==="via"||Ne.type==="pad"){const st=Ne.points[0],Xt=Math.hypot(st.x-ie,st.y-De);Xt<=et&&Xt<Ue&&(Ue=Xt,qe=st)}for(const Ne of Je)if(Ne.pointId!==void 0){const st=Math.hypot(Ne.x-ie,Ne.y-De);st<=et&&st<Ue&&(Ue=st,qe={x:Ne.x,y:Ne.y,id:Ne.pointId})}for(const Ne of nt)if(Ne.pointId!==void 0){const st=Math.hypot(Ne.x-ie,Ne.y-De);st<=et&&st<Ue&&(Ue=st,qe={x:Ne.x,y:Ne.y,id:Ne.pointId})}const Qe=Ht(qe??{x:ie,y:De});return{x:Qe.x,y:Qe.y,nodeId:qe?.id}})(L,ee),Re=_e.nodeId??Oi(),M=ci(Re,ct),N={id:Re,x:_e.x,y:_e.y},fe={id:`${Date.now()}-via`,points:[N],color:ke,size:Te,layer:yt,type:"via",viaType:M};Vt(ie=>[...ie,fe]),yt==="top"?Go(ie=>[...ie,fe.id]):jn(ie=>[...ie,fe.id]);return}if(we==="pad"){if(!en)return;const ke=Pi?{x:Ht({x:L,y:ee}).x,y:Ht({x:L,y:ee}).y}:((fe,ie)=>{let De=1/0,Ue=null;const We=10/Oe,rt=Oe>10?Math.max(We,.001):Math.max(We,.01);for(const Qe of Ve)if(Qe.type==="via"||Qe.type==="pad"||Qe.type==="testPoint"){const Ne=Qe.points[0],st=Math.hypot(Ne.x-fe,Ne.y-ie);st<=rt&&st<De&&(De=st,Ue=Ne)}for(const Qe of Je)if(Qe.pointId!==void 0){const Ne=Math.hypot(Qe.x-fe,Qe.y-ie);Ne<=rt&&Ne<De&&(De=Ne,Ue={x:Qe.x,y:Qe.y,id:Qe.pointId})}for(const Qe of nt)if(Qe.pointId!==void 0){const Ne=Math.hypot(Qe.x-fe,Qe.y-ie);Ne<=rt&&Ne<De&&(De=Ne,Ue={x:Qe.x,y:Qe.y,id:Qe.pointId})}const gt=Ht(Ue??{x:fe,y:ie});return{x:gt.x,y:gt.y,nodeId:Ue?.id}})(L,ee),Te=ke.nodeId??Oi(),se=Al(Te,ct),_e=$||(en==="top"?P:he),Re=k||(en==="top"?C:le),M={id:Te,x:ke.x,y:ke.y},N={id:`${Date.now()}-pad`,points:[M],color:_e,size:Re,layer:en,type:"pad",padType:se};Vt(fe=>[...fe,N]);return}if(we==="testPoint"){if(!tn)return;const ke=Pi?{x:Ht({x:L,y:ee}).x,y:Ht({x:L,y:ee}).y}:((ie,De)=>{let Ue=1/0,qe=null;const We=15;for(const gt of Ve)if(gt.type==="via"||gt.type==="pad"||gt.type==="testPoint"){const Qe=gt.points[0],Ne=Math.hypot(Qe.x-ie,Qe.y-De);Ne<=We&&Ne<Ue&&(Ue=Ne,qe=Qe)}for(const gt of Je)if(gt.pointId!==void 0){const Qe=Math.hypot(gt.x-ie,gt.y-De);Qe<=We&&Qe<Ue&&(Ue=Qe,qe={x:gt.x,y:gt.y,id:gt.pointId})}for(const gt of nt)if(gt.pointId!==void 0){const Qe=Math.hypot(gt.x-ie,gt.y-De);Qe<=We&&Qe<Ue&&(Ue=Qe,qe={x:gt.x,y:gt.y,id:gt.pointId})}const et=Ht(qe??{x:ie,y:De});return{x:et.x,y:et.y,nodeId:qe?.id}})(L,ee),Te=ke.nodeId??Oi(),se=Jl(Te,ct),_e=se.includes("Power")?"power":se.includes("Ground")?"ground":se.includes("Signal")?"signal":"unknown",Re=Ht({x:ke.x,y:ke.y}),M=$||(tn==="top"?Ie:ut),N=k||(tn==="top"?Ke:Hi),fe={id:`${Date.now()}-testPoint`,points:[{id:Te,x:Re.x,y:Re.y}],color:M,size:N,layer:tn,type:"testPoint",testPointType:_e};Vt(ie=>[...ie,fe]);return}if(ca.current)return;const Z=we==="trace"&&!Pi?V(L,ee):{x:Ht({x:L,y:ee}).x,y:Ht({x:L,y:ee}).y},G=Z.nodeId!==void 0?{id:Z.nodeId,x:Z.x,y:Z.y}:{x:Z.x,y:Z.y};Pn(pe=>pe.length===0?[G]:[...pe,G]),Lo.current=Date.now(),xi(null),Yo(!1),bl(!1)}else if(A==="erase"){if(Ve.some(Z=>Z.layer===yt&&(Z.type==="via"&&li||Z.type==="pad"&&Fi||Z.type==="testPoint"&&Yl||Z.type==="trace"&&ai))){const Z=[];li&&Ve.some(G=>G.layer===yt&&G.type==="via")&&Z.push("vias"),Fi&&Ve.some(G=>G.layer===yt&&G.type==="pad")&&Z.push("pads"),Yl&&Ve.some(G=>G.layer===yt&&G.type==="testPoint")&&Z.push("test points"),ai&&Ve.some(G=>G.layer===yt&&G.type==="trace")&&Z.push("traces"),Z.length>0&&alert(`Cannot erase: ${Z.join(", ")} are locked on the ${yt} layer. Unlock them to erase.`)}Yo(!0),Pn([{id:Oi(),x:L,y:ee}]),console.log("Starting erase at:",L,ee,"selectedDrawingLayer:",yt,"total strokes:",Ve.length)}else if(A==="transform"&&Mt){if(ii){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}da(!0),ji({x:L,y:ee})}else if(A==="component"){if(!Ui)return;const V=Ht({x:L,y:ee}),Z=$||(pn==="top"?pi:Jn),G=k||(pn==="top"?Ei:hi),pe=[...mt,...ot];let ke;rl?ke=jc():ke={...ko.current};const Te=ix(Ui,pn,V.x,V.y,Z,G,pe,ke,Zl);if(Te.abbreviation=Af(Ui),Zl&&Te.designator){const se=Su(Ui),_e=Te.designator.match(new RegExp(`^${se.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(_e){const Re=parseInt(_e[1],10);if(rl){const M=jc(),N=ax(se,Re,M);mu(N)}else ko.current[se]=Math.max(ko.current[se]||0,Re)}}pn==="top"?(Ta(!0),sn(se=>[...se,Te])):(ri(!0),At(se=>[...se,Te]));return}else if(A==="power"){if(!Pt)return;const Z=Pi?{x:Ht({x:L,y:ee}).x,y:Ht({x:L,y:ee}).y}:((pe,ke)=>{let Te=1/0,se=null;const Re=10/Oe,M=Oe>20?Math.max(Re,1e-4):Oe>10?Math.max(Re,.001):Math.max(Re,.01);for(const ie of Ve)if(ie.type==="via"||ie.type==="pad"){const De=ie.points[0],Ue=Math.hypot(De.x-pe,De.y-ke);Ue<=M&&Ue<Te&&(Te=Ue,se=De)}else if(ie.type==="trace")for(const De of ie.points){const Ue=Math.hypot(De.x-pe,De.y-ke);Ue<=M&&Ue<Te&&(Te=Ue,se=De)}const fe=Ht(se??{x:pe,y:ke});return{x:fe.x,y:fe.y,nodeId:se?.id}})(L,ee),G=ct.find(pe=>pe.id===Pt);if(G){const pe=Z.nodeId??Oi(),ke=`${G.voltage} Power Node`;if(nt.find(_e=>_e.pointId===pe)){Qs({visible:!0,title:"Node ID Conflict",message:`Cannot place power node: A ground node already exists at this Node ID (${pe}). Power and ground nodes cannot share the same Node ID.`});return}const se={id:`power-${Date.now()}-${Math.random()}`,x:Z.x,y:Z.y,color:"#ff0000",size:k,powerBusId:G.id,layer:yt,type:ke,pointId:pe};if(Gn(_e=>[..._e,se]),Z.nodeId!==void 0){const _e=ci(Z.nodeId,ct),Re=Al(Z.nodeId,ct),M=Jl(Z.nodeId,ct),N=M.includes("Power")?"power":M.includes("Ground")?"ground":M.includes("Signal")?"signal":"unknown";Vt(fe=>fe.map(ie=>ie.type==="via"&&ie.points.length>0&&ie.points[0].id===Z.nodeId?{...ie,viaType:_e}:ie.type==="pad"&&ie.points.length>0&&ie.points[0].id===Z.nodeId?{...ie,padType:Re}:ie.type==="testPoint"&&ie.points.length>0&&ie.points[0].id===Z.nodeId?{...ie,testPointType:N}:ie))}}return}else if(A==="ground"){if(sl===null){if(Xn.length===0){Qs({visible:!0,title:"No Ground Bus",message:"No ground buses are defined. Please create a ground bus first using Tools  Manage Ground Buses."});return}kl(!0);return}const V=Xn.find(Z=>Z.id===sl);if(V){const G=Pi?{x:Ht({x:L,y:ee}).x,y:Ht({x:L,y:ee}).y}:((_e,Re)=>{let M=1/0,N=null;const ie=10/Oe,De=Oe>20?Math.max(ie,1e-4):Oe>10?Math.max(ie,.001):Math.max(ie,.01);for(const We of Ve)if(We.type==="via"||We.type==="pad"){const rt=We.points[0],et=Math.hypot(rt.x-_e,rt.y-Re);et<=De&&et<M&&(M=et,N=rt)}else if(We.type==="trace")for(const rt of We.points){const et=Math.hypot(rt.x-_e,rt.y-Re);et<=De&&et<M&&(M=et,N=rt)}const qe=Ht(N??{x:_e,y:Re});return{x:qe.x,y:qe.y,nodeId:N?.id}})(L,ee),pe=G.nodeId??Oi(),ke=`${V.name} Ground Node`,Te=Je.find(_e=>_e.pointId===pe);if(Te){Qs({visible:!0,title:"Node ID Conflict",message:`Cannot place ground node: A power node (${Te.type||"Power Node"}) already exists at this Node ID (${pe}). Power and ground nodes cannot share the same Node ID.`});return}const se={id:`gnd-${Date.now()}-${Math.random().toString(36).slice(2,6)}`,x:G.x,y:G.y,color:V.color,size:k||Dt.get("ground")?.settings.size||18,groundBusId:V.id,layer:yt,type:ke,pointId:pe};if(Wi(_e=>[..._e,se]),G.nodeId!==void 0){const _e=ci(G.nodeId,ct),Re=Al(G.nodeId,ct);Vt(M=>M.map(N=>N.type==="via"&&N.points.length>0&&N.points[0].id===G.nodeId?{...N,viaType:_e}:N.type==="pad"&&N.points.length>0&&N.points[0].id===G.nodeId?{...N,padType:Re}:N))}}return}},[A,Mt,k,$,we,yt,Ve,Oe,wt.x,wt.y,Pi,Pt,sl,ct,Xn,Ui,Dt,en,zt,tn,Je,nt,ci,Al,Jl,Bi,qn,al]),Ru=w.useCallback(a=>{if(A!=="magnify")return;a.preventDefault();const r=hn.current;if(!r)return;const p=r.getBoundingClientRect(),x=r.width/p.width,v=r.height/p.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,S=typeof b=="number"?b:a.clientX-p.left,T=typeof f=="number"?f:a.clientY-p.top,z=S*x,I=T*v,Q=(z-40-wt.x)/Oe,oe=(I-40-wt.y)/Oe,L=1.2,ee=1/L,V=a.deltaY<0?L:ee,Z=Math.max(.25,Math.min(8,Oe*V)),G=z-40-Z*Q,pe=I-40-Z*oe;Ii(Z),Ln({x:G,y:pe})},[A,Oe,wt.x,wt.y]),Wc=w.useCallback(a=>{if(A==="draw"&&we==="trace"){ca.current=!0;let G=Wt;if(G.length>1){const pe=[G[0]];for(let ke=1;ke<G.length;ke++){const Te=pe[pe.length-1],se=G[ke];(Math.abs(Te.x-se.x)>.001||Math.abs(Te.y-se.y)>.001)&&pe.push(se)}G=pe}if(G.length>=1){const pe=zt||"top",ke=pe==="top"?"traceTop":"traceBottom",Te=St.get(ke),se={id:`${Date.now()}-trace`,points:G,color:Te.color,size:Te.size,layer:pe,type:"trace"};Vt(_e=>[..._e,se]),pe==="top"?xn(_e=>[..._e,se.id]):el(_e=>[..._e,se.id]),Pn([]),xi(null),setTimeout(()=>{ca.current=!1},300);return}}const r=hn.current;if(!r)return;const p=r.getBoundingClientRect(),x=r.width/p.width,v=r.height/p.height,b=a.nativeEvent.offsetX,f=a.nativeEvent.offsetY,S=typeof b=="number"?b:a.clientX-p.left,T=typeof f=="number"?f:a.clientY-p.top,z=S*x,I=T*v,Q=z-40,oe=I-40,L=(Q-wt.x)/Oe,ee=(oe-wt.y)/Oe,V=Math.max(8/Oe,4),Z=(()=>{for(const G of Ve)if(G.type==="testPoint"&&G.points.length>0){const pe=G.points[0],ke=Math.hypot(pe.x-L,pe.y-ee),Te=(G.size||18)/2;if(ke<=Te+V)return G}return null})();if(Z){jt(new Set([Z.id])),ft(new Set),tt(new Set),bt(new Set),Ga(!0);return}if(A==="select"||A==="component"){const pe=(()=>{for(const se of mt)if(L>=se.x-10&&L<=se.x+10&&ee>=se.y-10&&ee<=se.y+10)return{layer:"top",comp:se};for(const se of ot)if(L>=se.x-10&&L<=se.x+10&&ee>=se.y-10&&ee<=se.y+10)return{layer:"bottom",comp:se};return null})(),ke=Math.max(6/Oe,4);let Te=null;for(const se of Je){const _e=Math.max(6,se.size/2),Re=_e*.8,M=_e+Re,N=Math.hypot(se.x-L,se.y-ee),fe=Math.abs(L-se.x)<=ke&&Math.abs(ee-se.y)<=M,ie=Math.abs(ee-se.y)<=ke&&Math.abs(L-se.x)<=M;if(N<=Math.max(_e,ke)||fe||ie){Te=se;break}}if(Te){tt(new Set([Te.id])),Xs({visible:!0,id:Te.id,layer:Te.layer,x:Te.x,y:Te.y,size:Te.size,color:Te.color,powerBusId:Te.powerBusId});return}if(pe){const{layer:se,comp:_e}=pe;bi(_e,se)}}},[A,we,$,k,yt,mt,ot,Je,Oe,wt.x,wt.y,Ui,hs,Pi,Ve,Mt,Sa,No,$n,Dt,Wt,zt,m,q,Ee,re,Ga,jt,ft,tt,bt,bi]),ys=w.useCallback(()=>{const a=Hl.current;if(A==="draw"&&we==="trace"&&a.length>=2){let r=[a[0]];for(let f=1;f<a.length;f++){const S=r[r.length-1],T=a[f];(Math.abs(S.x-T.x)>.001||Math.abs(S.y-T.y)>.001)&&r.push(T)}const p=zt||"top",x=p==="top"?"traceTop":"traceBottom",v=St.get(x),b={id:`${Date.now()}-trace`,points:r,color:v.color,size:v.size,layer:p,type:"trace"};Vt(f=>[...f,b]),p==="top"?xn(f=>[...f,b.id]):el(f=>[...f,b.id]),Pn([]),xi(null)}else if(A==="draw"&&we==="trace"&&a.length===1){const r=zt||"top",p=r==="top"?"traceTop":"traceBottom",x=St.get(p),v={id:`${Date.now()}-trace-dot`,points:a,color:x.color,size:x.size,layer:r,type:"trace"};Vt(b=>[...b,v]),r==="top"?xn(b=>[...b,v.id]):el(b=>[...b,v.id]),Pn([])}},[A,we,zt,m,q,Ee,re,Vt]),Jr=w.useCallback((a,r,p)=>{const x=r-a.x,v=p-a.y;if(x===0&&v===0)return{x:r,y:p};const f=(Math.atan2(v,x)*180/Math.PI%180+180)%180,S=[0,45,90];let T=0,z=1e9;for(const I of S){const Q=Math.abs(f-I);Q<z&&(z=Q,T=I)}if(T===0)return{x:r,y:a.y};if(T===90)return{x:a.x,y:p};{const I=Math.min(Math.abs(x),Math.abs(v)),Q=x>=0?1:-1,oe=v>=0?1:-1;return{x:a.x+Q*I,y:a.y+oe*I}}},[]),Si=w.useCallback(a=>{const r=hn.current?.getBoundingClientRect();if(!r)return;const p=a.clientX-r.left,x=a.clientY-r.top,v=hn.current,b=v.width/r.width,f=v.height/r.height,S=p*b,T=x*f,z=S-40,I=T-40,Q=(z-wt.x)/Oe,oe=(I-wt.y)/Oe;if(A==="draw"&&we==="trace"&&Wt.length>0){const ee=Pi?{x:Ht({x:Q,y:oe}).x,y:Ht({x:Q,y:oe}).y}:((V,Z)=>{let G=1/0,pe=null;const Te=10/Oe,se=Oe>20?Math.max(Te,1e-4):Oe>10?Math.max(Te,.001):Math.max(Te,.01);for(const M of Ve)if(M.type==="via"){const N=M.points[0],fe=Math.hypot(N.x-V,N.y-Z);fe<=se&&fe<G&&(G=fe,pe=N)}else if(M.type==="pad"){const N=M.points[0],fe=Math.hypot(N.x-V,N.y-Z);fe<=se&&fe<G&&(G=fe,pe=N)}for(const M of Je)if(M.pointId!==void 0){const N=Math.hypot(M.x-V,M.y-Z);N<=se&&N<G&&(G=N,pe={x:M.x,y:M.y,id:M.pointId})}for(const M of nt)if(M.pointId!==void 0){const N=Math.hypot(M.x-V,M.y-Z);N<=se&&N<G&&(G=N,pe={x:M.x,y:M.y,id:M.pointId})}const Re=Ht(pe??{x:V,y:Z});return{x:Re.x,y:Re.y,nodeId:pe?.id}})(Q,oe);xi({x:ee.x,y:ee.y})}else xi(null);if(ir){const ee=(()=>{for(const V of mt)if(Q>=V.x-10&&Q<=V.x+10&&oe>=V.y-10&&oe<=V.y+10)return{layer:"top",comp:V};for(const V of ot)if(Q>=V.x-10&&Q<=V.x+10&&oe>=V.y-10&&oe<=V.y+10)return{layer:"bottom",comp:V};return null})();if(ee)ar({component:ee.comp,layer:ee.layer,x:a.clientX,y:a.clientY}),or(null);else{ar(null);const V=Math.max(8/Oe,4),Z=(()=>{for(const G of Ve)if(G.type==="testPoint"&&G.points.length>0){const pe=G.points[0],ke=Math.hypot(pe.x-Q,pe.y-oe),Te=(G.size||18)/2;if(ke<=Te+V)return G}return null})();or(Z?{stroke:Z,x:a.clientX,y:a.clientY}:null)}}else ar(null),or(null);if(A==="select"&&Ia&&xs){const L=xs.x,ee=xs.y;yr({x:Math.min(L,Q),y:Math.min(ee,oe),width:Math.abs(Q-L),height:Math.abs(oe-ee)})}else if(A==="pan"&&Sa&&nl.current){const{startCX:L,startCY:ee,panX:V,panY:Z}=nl.current,G=z-L,pe=I-ee;Ln({x:V+G,y:Z+pe})}else if(ra&&Wt.length>0){if(A==="draw")if(Ws){const L=Wt[0],ee=Jr(L,Q,oe),V=Ht(ee),Z={id:Oi(),x:V.x,y:V.y};Pn([L,Z])}else{const L=Ht({x:Q,y:oe});Pn(ee=>[...ee,{id:Oi(),x:L.x,y:L.y}])}else if(A==="erase"&&(Pn(L=>[...L,{id:Oi(),x:Q,y:oe}]),Vt(L=>{const ee=L.filter(Z=>{if(Z.type==="via"&&li||Z.type==="pad"&&Fi||Z.type==="testPoint"&&Yl||Z.type==="trace"&&ai||Z.layer!==yt)return!0;const G=k/2,pe=Q-G,ke=Q+G,Te=oe-G,se=oe+G,_e=(N,fe)=>N>=pe&&N<=ke&&fe>=Te&&fe<=se,Re=(N,fe,ie,De)=>{const gt=(vn,mn)=>{let xt=0;return vn<pe?xt|=1:vn>ke&&(xt|=2),mn<Te?xt|=4:mn>se&&(xt|=8),xt};let Qe=N,Ne=fe,st=ie,Xt=De,Gt=gt(Qe,Ne),ln=gt(st,Xt);for(;;){if((Gt|ln)===0)return!0;if((Gt&ln)!==0)return!1;const vn=Gt!==0?Gt:ln;let mn=0,xt=0;vn&8?(mn=Qe+(st-Qe)*(se-Ne)/(Xt-Ne),xt=se):vn&4?(mn=Qe+(st-Qe)*(Te-Ne)/(Xt-Ne),xt=Te):vn&2?(xt=Ne+(Xt-Ne)*(ke-Qe)/(st-Qe),mn=ke):(xt=Ne+(Xt-Ne)*(pe-Qe)/(st-Qe),mn=pe),vn===Gt?(Qe=mn,Ne=xt,Gt=gt(Qe,Ne)):(st=mn,Xt=xt,ln=gt(st,Xt))}};let M=!1;if(Z.points.length===1){const N=Z.points[0];M=_e(N.x,N.y)}else for(let N=0;N<Z.points.length-1;N++){const fe=Z.points[N],ie=Z.points[N+1];if(Re(fe.x,fe.y,ie.x,ie.y)){M=!0;break}}return M&&console.log("Erasing stroke at position:",Q,oe,"brushSize:",k,"selectedLayer:",yt),!M});console.log("Strokes before:",L.length,"after:",ee.length);const V=new Set(ee.map(Z=>Z.id));return Go(Z=>Z.filter(G=>V.has(G))),jn(Z=>Z.filter(G=>V.has(G))),xn(Z=>Z.filter(G=>V.has(G))),el(Z=>Z.filter(G=>V.has(G))),ee}),yn||Gn(L=>{const ee=k/2,V=Q-ee,Z=Q+ee,G=oe-ee,pe=oe+ee,ke=Te=>{const se=Te.size/2,_e=Te.x-se,Re=Te.x+se,M=Te.y-se,N=Te.y+se;return!(Z<_e||V>Re||pe<M||G>N)};return L.filter(Te=>!ke(Te))}),zi||Wi(L=>{const ee=k/2,V=Q-ee,Z=Q+ee,G=oe-ee,pe=oe+ee,ke=se=>{const _e=Math.max(6,(se.size||18)/2),Re=_e*.8,M=_e+Re,N=se.x-M,fe=se.x+M,ie=se.y-M,De=se.y+M;return!(Z<N||V>fe||pe<ie||G>De)};return L.filter(se=>!ke(se))}),!Ci)){const L=k/2,ee=Q-L,V=Q+L,Z=oe-L,G=oe+L,pe=ke=>{const se=(ke.size||18)/2,_e=ke.x-se,Re=ke.x+se,M=ke.y-se,N=ke.y+se;return!(V<_e||ee>Re||G<M||Z>N)};sn(ke=>ke.filter(Te=>!pe(Te))),At(ke=>ke.filter(Te=>!pe(Te)))}}else if(Xo&&ua&&Mt){if(ii){da(!1),ji(null);return}const L=Q-ua.x,ee=oe-ua.y;if(Mt==="top"){y&&u(V=>V?{...V,x:V.x+L,y:V.y+ee}:null),ji({x:Q,y:oe});return}if(Mt==="bottom"){U&&X(V=>V?{...V,x:V.x+L,y:V.y+ee}:null),ji({x:Q,y:oe});return}if(Mt==="both"){y&&u(V=>V?{...V,x:V.x+L,y:V.y+ee}:null),U&&X(V=>V?{...V,x:V.x+L,y:V.y+ee}:null),ji({x:Q,y:oe});return}}},[ra,Wt,A,k,Xo,ua,Mt,y,U,Ws,Jr,yt,Vt,Oe,wt.x,wt.y,Ia,xs,ii,li,Fi,ai,yn,zi,mt,ot,sn,At,ir,ar,Pi,Ve,Je,nt,Wt,we,gn,xi,Sa,nl,Ln,40,wt,Oi,Ht,nr,K]),kn=w.useCallback(()=>{if(A==="select"&&Ia){const a=ia,r=xs;if(ze(!1),bn(null),yr(null),a&&r){const v=Math.max(3,5/Oe),b=a.width<v&&a.height<v,f=(M,N)=>{const fe=a.x,ie=a.y,De=a.x+a.width,Ue=a.y+a.height;return M>=fe&&M<=De&&N>=ie&&N<=Ue},S=(M,N,fe,ie,De,Ue,qe,We)=>{const st=(ul,Bl)=>{let Ki=0;return ul<De?Ki|=1:ul>qe&&(Ki|=2),Bl<Ue?Ki|=4:Bl>We&&(Ki|=8),Ki};let Xt=M,Gt=N,ln=fe,vn=ie,mn=st(Xt,Gt),xt=st(ln,vn);for(;;){if((mn|xt)===0)return!0;if((mn&xt)!==0)return!1;const ul=mn!==0?mn:xt;let Bl=0,Ki=0;ul&8?(Bl=Xt+(ln-Xt)*(We-Gt)/(vn-Gt),Ki=We):ul&4?(Bl=Xt+(ln-Xt)*(Ue-Gt)/(vn-Gt),Ki=Ue):ul&2?(Ki=Gt+(vn-Gt)*(qe-Xt)/(ln-Xt),Bl=qe):(Ki=Gt+(vn-Gt)*(De-Xt)/(ln-Xt),Bl=De),ul===mn?(Xt=Bl,Gt=Ki,mn=st(Xt,Gt)):(ln=Bl,vn=Ki,xt=st(ln,vn))}},T=a.x,z=a.y,I=a.x+a.width,Q=a.y+a.height,L=Math.max(6/Oe,4/Oe,.5),ee=(M,N,fe,ie,De,Ue)=>{const qe=De-fe,We=Ue-ie;if(qe===0&&We===0)return Math.hypot(M-fe,N-ie);const rt=Math.max(0,Math.min(1,((M-fe)*qe+(N-ie)*We)/(qe*qe+We*We))),et=fe+rt*qe,gt=ie+rt*We;return Math.hypot(M-et,N-gt)},V=r?.shiftKey===!0,Z=new Set(V?Array.from(vt):[]),G=new Set(V?Array.from(Ye):[]),pe=new Set(V?Array.from(pt):[]),ke=new Set(V?Array.from(kt):[]),Te=r?.hitStrokeId;if(Te){const M=Ve.find(N=>N.id===Te);if(M){let N=!1;if(M.type==="via"||M.type==="pad"?N=Bi:N=M.layer==="top"?Mi:Yi,N){V?jt(fe=>{const ie=new Set(fe);return ie.has(Te)?ie.delete(Te):ie.add(Te),ie}):(jt(new Set([Te])),ft(new Set),tt(new Set),bt(new Set));return}}}if(b){let M=null;for(const N of Ve){let fe=!1;if(N.type==="via"?fe=Bi:N.type==="pad"?fe=(N.layer||"top")==="top"?qn:al:N.type==="testPoint"?fe=(N.layer||"top")==="top"?ja:Xi:N.type==="trace"?fe=N.layer==="top"?Mi:Yi:fe=!1,!fe)continue;let ie=1/0;if(N.type==="via"||N.type==="pad"||N.type==="testPoint"){const De=N.points[0],Ue=Math.max(1,N.size/2);ie=Math.hypot(De.x-r.x,De.y-r.y);const We=Math.max(6/Oe,4/Oe,.5);ie<=Math.max(Ue,We)&&(!M||ie<M.dist)&&(M={id:N.id,dist:ie})}else for(let De=0;De<N.points.length-1;De++){const Ue=N.points[De],qe=N.points[De+1],We=ee(r.x,r.y,Ue.x,Ue.y,qe.x,qe.y);if(We<=Math.max(L,N.size/2)){(!M||We<M.dist)&&(M={id:N.id,dist:We});break}}}M&&(V&&Z.has(M.id)?Z.delete(M.id):Z.add(M.id))}else for(const M of Ve){let N=!1;if(M.type==="via"?N=Bi:M.type==="pad"?N=(M.layer||"top")==="top"?qn:al:M.type==="testPoint"?N=(M.layer||"top")==="top"?ja:Xi:M.type==="trace"?N=M.layer==="top"?Mi:Yi:N=!1,!N)continue;let fe=!1;if(M.type==="via"||M.type==="pad"||M.type==="testPoint"){const ie=M.points[0];fe=f(ie.x,ie.y)}else for(let ie=0;ie<M.points.length-1;ie++){const De=M.points[ie],Ue=M.points[ie+1];if(S(De.x,De.y,Ue.x,Ue.y,T,z,I,Q)||f(De.x,De.y)&&f(Ue.x,Ue.y)){fe=!0;break}}fe&&(V&&Z.has(M.id)?Z.delete(M.id):Z.add(M.id))}const se=M=>{const fe=Math.max(10,M.size||18)/2;return M.x-fe<=I&&M.x+fe>=T&&M.y-fe<=Q&&M.y+fe>=z};if(b){const M=N=>{const ie=Math.max(10,N.size||18)/2;return r.x>=N.x-ie&&r.x<=N.x+ie&&r.y>=N.y-ie&&r.y<=N.y+ie};Gi&&mt.forEach(N=>{M(N)&&(V&&G.has(N.id)?G.delete(N.id):G.add(N.id))}),Mn&&ot.forEach(N=>{M(N)&&(V&&G.has(N.id)?G.delete(N.id):G.add(N.id))})}else Gi&&mt.forEach(M=>{se(M)&&(V&&G.has(M.id)?G.delete(M.id):G.add(M.id))}),Mn&&ot.forEach(M=>{se(M)&&(V&&G.has(M.id)?G.delete(M.id):G.add(M.id))});const _e=M=>{const N=Math.max(6,M.size/2),fe=N*.8,ie=N+fe;return M.x-ie<=I&&M.x+ie>=T&&M.y-ie<=Q&&M.y+ie>=z};if(mi)if(b){let M=null;for(const N of Je){const fe=Math.max(6,N.size/2),ie=fe*.8,De=fe+ie,Ue=Math.hypot(N.x-r.x,N.y-r.y),qe=Math.abs(r.x-N.x)<=L&&Math.abs(r.y-N.y)<=De,We=Math.abs(r.y-N.y)<=L&&Math.abs(r.x-N.x)<=De;if(Ue<=Math.max(fe,L)||qe||We){const et=Math.min(Ue,Math.abs(r.x-N.x)+Math.abs(r.y-N.y));(!M||et<M.dist)&&(M={id:N.id,dist:et})}}M&&(V&&pe.has(M.id)?pe.delete(M.id):pe.add(M.id))}else Je.forEach(M=>{_e(M)&&(V&&pe.has(M.id)?pe.delete(M.id):pe.add(M.id))});const Re=M=>{const N=Math.max(6,(M.size||18)/2),fe=N*.8,ie=N+fe;return M.x-ie<=I&&M.x+ie>=T&&M.y-ie<=Q&&M.y+ie>=z};if(Dl)if(b){let M=null;for(const N of nt){const fe=Math.max(6,(N.size||18)/2),ie=fe*.8,De=fe+ie,Ue=Math.hypot(N.x-r.x,N.y-r.y),qe=Math.abs(r.x-N.x)<=L&&Math.abs(r.y-N.y)<=De,We=Math.abs(r.y-N.y)<=L&&Math.abs(r.x-N.x)<=De;if(Ue<=Math.max(fe,L)||qe||We){const et=Math.min(Ue,Math.abs(r.x-N.x)+Math.abs(r.y-N.y));(!M||et<M.dist)&&(M={id:N.id,dist:et})}}M&&(V&&ke.has(M.id)?ke.delete(M.id):ke.add(M.id))}else nt.forEach(M=>{Re(M)&&(V&&ke.has(M.id)?ke.delete(M.id):ke.add(M.id))});jt(Z),ft(G),tt(pe),bt(ke)}}if(ra&&Wt.length>0){if(A==="draw"&&we!=="trace"){const a={id:Date.now().toString(),points:Wt,color:$,size:k,layer:yt,type:"trace"};Vt(r=>[...r,a]),yt==="top"?xn(r=>[...r,a.id]):el(r=>[...r,a.id])}Pn([])}Sa&&(Er(!1),nl.current=null,Xl.current=null),Yo(!1),da(!1),ji(null),bl(!1)},[ra,Wt,A,$,k,yt,ia,xs,Ia,Ve,Oe,So,vt,Je,nt,mt,ot,Ye,pt,kt,Bi,Mi,Yi,Gi,Mn,mi,Dl]);Pe.useEffect(()=>{if(!(A==="pan"&&Sa&&Xl.current))return;const a=p=>{const x=hn.current;if(!x)return;const v=x.getBoundingClientRect(),b=x.width/v.width,f=x.height/v.height,{startClientX:S,startClientY:T,panX:z,panY:I}=Xl.current,Q=(p.clientX-S)*b,oe=(p.clientY-T)*f;Ln({x:z+Q,y:I+oe})},r=()=>{Er(!1),nl.current=null,Xl.current=null,window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)};return window.addEventListener("mousemove",a,!0),window.addEventListener("mouseup",r,!0),()=>{window.removeEventListener("mousemove",a,!0),window.removeEventListener("mouseup",r,!0)}},[A,Sa]);const co=w.useCallback(()=>{const a=hn.current;if(!a)return;const r=a.getContext("2d");if(!r)return;r.clearRect(0,0,a.width,a.height),r.save(),r.beginPath(),r.rect(40,40,a.width-80,a.height-80),r.clip(),r.translate(40,40);const p=(b,f)=>{const S=b.width,T=b.height,z=document.createElement("canvas");z.width=S,z.height=T;const I=z.getContext("2d");if(!I)return z;I.drawImage(b,0,0,S,T);const oe=I.getImageData(0,0,S,T).data,L=new Uint8ClampedArray(S*T);for(let se=0;se<S*T;se++){const _e=oe[se*4+0],Re=oe[se*4+1],M=oe[se*4+2];L[se]=Math.round(.299*_e+.587*Re+.114*M)}const ee=[-1,0,1,-2,0,2,-1,0,1],V=[-1,-2,-1,0,0,0,1,2,1],Z=new Float32Array(S*T);for(let se=1;se<T-1;se++)for(let _e=1;_e<S-1;_e++){let Re=0,M=0,N=0;for(let ie=-1;ie<=1;ie++)for(let De=-1;De<=1;De++){const Ue=_e+De,qe=se+ie,We=L[qe*S+Ue];Re+=We*ee[N],M+=We*V[N],N++}const fe=Math.sqrt(Re*Re+M*M);Z[se*S+_e]=fe}let G=0;for(let se=0;se<Z.length;se++)Z[se]>G&&(G=Z[se]);const pe=I.createImageData(S,T),ke=pe.data,Te=.2;for(let se=0;se<S*T;se++){const Re=(G>0?Z[se]/G:0)>=Te?255:0,M=f?255-Re:Re;ke[se*4+0]=M,ke[se*4+1]=M,ke[se*4+2]=M,ke[se*4+3]=255}return I.putImageData(pe,0,0),z},x=(b,f,S,T,z,I,Q,oe)=>{const L=document.createElement("canvas");L.width=S,L.height=T;const ee=L.getContext("2d",{willReadFrequently:!0});ee.clearRect(0,0,S,T),ee.drawImage(f,0,0,S,T);let V=L;if(Math.abs(z)>1e-6){const Z=Math.tan(z),G=Math.max(.2,1-Z),pe=Math.max(.2,1+Z),ke=Math.max(G,pe),Te=Math.max(1,Math.ceil(S*ke)),se=document.createElement("canvas");se.width=Te,se.height=T;const _e=se.getContext("2d",{willReadFrequently:!0});_e.clearRect(0,0,Te,T);for(let Re=0;Re<T;Re++){const M=T<=1?0:Re/(T-1),N=G*(1-M)+pe*M,fe=Math.max(1,S*N),ie=(Te-fe)/2;_e.drawImage(V,0,Re,S,1,ie,Re,fe,1)}V=se}if(Math.abs(I)>1e-6){const Z=Math.tan(I),G=Math.max(.2,1-Z),pe=Math.max(.2,1+Z),ke=Math.max(G,pe),Te=Math.max(1,Math.ceil(T*ke)),se=document.createElement("canvas");se.width=V.width,se.height=Te;const _e=se.getContext("2d",{willReadFrequently:!0});_e.clearRect(0,0,se.width,Te);for(let Re=0;Re<V.width;Re++){const M=V.width<=1?0:Re/(V.width-1),N=G*(1-M)+pe*M,fe=Math.max(1,T*N),ie=(Te-fe)/2;_e.drawImage(V,Re,0,1,V.height,Re,ie,1,fe)}V=se}b.drawImage(V,-Q/2,-oe/2,Q,oe)};r.translate(wt.x,wt.y),r.scale(Oe,Oe);{const b=Gl&&To;if(y&&y.bitmap&&Gl){const f=y.bitmap;r.save(),r.globalAlpha=1;const S=[];if(y.brightness!==void 0&&y.brightness!==100&&S.push(`brightness(${y.brightness}%)`),y.contrast!==void 0&&y.contrast!==100&&S.push(`contrast(${y.contrast}%)`),ye&&!J&&S.push("grayscale(100%)"),r.filter=S.length>0?S.join(" "):"none",r.translate(y.x,y.y),r.rotate(y.rotation*Math.PI/180),y.skewX||y.skewY){const Q=Math.tan(y.skewX||0),oe=Math.tan(y.skewY||0);r.transform(1,oe,Q,1,0,0)}r.scale(y.scale*(y.flipX?-1:1),y.scale*(y.flipY?-1:1));const T=f.width*1,z=f.height*1,I=J?p(f,He):f;y.keystoneV&&Math.abs(y.keystoneV)>1e-6||y.keystoneH&&Math.abs(y.keystoneH)>1e-6?x(r,I,f.width,f.height,y.keystoneV||0,y.keystoneH||0,T,z):r.drawImage(I,-T/2,-z/2,T,z),r.restore()}if(U&&U.bitmap&&To){const f=U.bitmap;r.save(),r.globalAlpha=b?g/100:1;const S=[];if(U.brightness!==void 0&&U.brightness!==100&&S.push(`brightness(${U.brightness}%)`),U.contrast!==void 0&&U.contrast!==100&&S.push(`contrast(${U.contrast}%)`),ye&&!J&&S.push("grayscale(100%)"),r.filter=S.length>0?S.join(" "):"none",r.translate(U.x,U.y),r.rotate(U.rotation*Math.PI/180),U.skewX||U.skewY){const Q=Math.tan(U.skewX||0),oe=Math.tan(U.skewY||0);r.transform(1,oe,Q,1,0,0)}r.scale(U.scale*(U.flipX?-1:1),U.scale*(U.flipY?-1:1));const T=f.width*1,z=f.height*1,I=J?p(f,He):f;U.keystoneV&&Math.abs(U.keystoneV)>1e-6||U.keystoneH&&Math.abs(U.keystoneH)>1e-6?x(r,I,f.width,f.height,U.keystoneV||0,U.keystoneH||0,T,z):r.drawImage(I,-T/2,-z/2,T,z),r.restore()}}if(br(r),mi&&Je.length>0){const b=f=>{r.save();const S=ct.find(oe=>oe.id===f.powerBusId),T=pt.has(f.id),z="#ff0000";r.strokeStyle=z,r.lineWidth=Math.max(1,(T?3:2)/Math.max(Oe,.001)),r.lineCap="round";const I=Math.max(6,f.size/2),Q=I*.8;T&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Oe,.001)),r.beginPath(),r.arc(f.x,f.y,I+Q+3,0,Math.PI*2),r.stroke()),r.strokeStyle=z,r.lineWidth=Math.max(1,(T?3:2)/Math.max(Oe,.001)),r.beginPath(),r.arc(f.x,f.y,I,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(f.x,f.y-I-Q),r.lineTo(f.x,f.y+I+Q),r.stroke(),r.beginPath(),r.moveTo(f.x-I-Q,f.y),r.lineTo(f.x+I+Q,f.y),r.stroke(),S&&(r.fillStyle=z,r.font=`${Math.max(10,I*.8)}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.fillText(S.voltage,f.x,f.y+I+Q+12)),r.restore()};Je.forEach(b)}if(Dl&&nt.length>0){const b=f=>{r.save();const S=kt.has(f.id),T=f.color||"#000000";if(f.groundBusId==="groundbus-earth"){const I=Math.max(6,f.size||18),Q=I*.9,oe=I*.24,L=I*1.6;r.strokeStyle=T,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Oe,.001)),r.lineCap="round",S&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Oe,.001)),r.setLineDash([5,5]),r.strokeRect(f.x-L/2-3,f.y-3,L+6,Q+oe*2+6),r.setLineDash([])),r.strokeStyle=T,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Oe,.001)),r.beginPath(),r.moveTo(f.x,f.y),r.lineTo(f.x,f.y+Q),r.stroke();for(let ee=0;ee<3;ee++){const V=f.y+Q+ee*oe,Z=L*(1-ee*.25);r.beginPath(),r.moveTo(f.x-Z/2,V),r.lineTo(f.x+Z/2,V),r.stroke()}}else{const I=Math.max(6,(f.size||18)/2),Q=I*.8;S&&(r.strokeStyle="#0066ff",r.lineWidth=Math.max(1,4/Math.max(Oe,.001)),r.beginPath(),r.arc(f.x,f.y,I+Q+3,0,Math.PI*2),r.stroke()),r.strokeStyle=T,r.lineWidth=Math.max(1,(S?3:2)/Math.max(Oe,.001)),r.beginPath(),r.arc(f.x,f.y,I,0,Math.PI*2),r.stroke(),r.beginPath(),r.moveTo(f.x,f.y-I-Q),r.lineTo(f.x,f.y+I+Q),r.stroke(),r.beginPath(),r.moveTo(f.x-I-Q,f.y),r.lineTo(f.x+I+Q,f.y),r.stroke()}r.restore()};nt.forEach(b)}const v=b=>{const f=Math.max(10,b.size||18),S=f/2;r.save(),r.strokeStyle=b.color||"#111",r.lineWidth=Math.max(1,2/Math.max(Oe,.001));const T=b.pinConnections||[],z=T.length>0&&T.length===b.pinCount&&T.every(oe=>oe&&oe.trim()!=="");r.fillStyle=z?"rgba(178, 223, 138, 0.85)":"rgba(255,255,255,0.85)",r.beginPath(),r.rect(b.x-S,b.y-S,f,f),r.fill(),r.stroke();const I=b.designator?.trim()||"";if(I){r.fillStyle=b.color||"#111";const oe=Math.max(6,f*.35),L=f*.9;let ee=oe;r.font=`bold ${ee}px sans-serif`;const V=r.measureText(I);V.width>L&&(ee=L/V.width*ee,ee=Math.max(6,ee),r.font=`bold ${ee}px sans-serif`),r.textAlign="center",r.textBaseline="middle",r.fillText(I,b.x,b.y)}Ye.has(b.id)&&(r.setLineDash([4,3]),r.strokeStyle="#00bfff",r.lineWidth=1.5,r.strokeRect(b.x-S-3,b.y-S-3,f+6,f+6),r.setLineDash([])),r.restore()};if(za){const b=S=>{const T=parseInt(S,10);if(isNaN(T))return null;for(const z of Ve)if((z.type==="via"||z.type==="pad"||z.type==="testPoint")&&z.points.length>0){const I=z.points[0];if(I.id===T)return{x:I.x,y:I.y}}for(const z of Ve)if(z.type==="trace"){for(const I of z.points)if(I.id===T)return{x:I.x,y:I.y}}for(const z of Je)if(z.pointId===T)return{x:z.x,y:z.y};for(const z of nt)if(z.pointId===T)return{x:z.x,y:z.y};return null},f=S=>{const T=S.pinConnections||[],z=S.componentType==="Electrolytic Capacitor"||S.componentType==="Diode"||S.componentType==="Battery"||S.componentType==="ZenerDiode",I=S.componentType==="Capacitor"&&"dielectric"in S&&S.dielectric==="Tantalum",Q=(z||I)&&S.pinPolarities,oe=new Map;for(let L=0;L<T.length;L++){const ee=T[L];if(ee&&ee.trim()!==""){const V=ee.trim(),Z=!!(Q&&S.pinPolarities&&L<S.pinPolarities.length&&S.pinPolarities[L]==="-"),G=oe.get(V);G!==void 0?oe.set(V,G||Z):oe.set(V,Z)}}for(const[L,ee]of oe){const V=b(L);if(V){const Z={x:S.x,y:S.y};r.save(),r.strokeStyle=ee?"rgba(0, 0, 0, 0.8)":Pa,r.lineWidth=Math.max(1,Fo/Math.max(Oe,.001)),r.beginPath(),r.moveTo(Z.x,Z.y),r.lineTo(V.x,V.y),r.stroke(),r.restore()}}};Gi&&mt.forEach(f),Mn&&ot.forEach(f)}if(Gi&&mt.forEach(v),Mn&&ot.forEach(v),A==="select"&&ia){r.save();const b=Math.max(2,6/Math.max(1e-4,Oe));r.strokeStyle="#00bfff",r.fillStyle="rgba(0, 191, 255, 0.15)",r.lineWidth=Math.max(1,1.5/Math.max(1e-4,Oe)),r.setLineDash([b,b]),r.beginPath(),r.rect(ia.x,ia.y,ia.width,ia.height),r.fill(),r.stroke(),r.setLineDash([]),r.restore()}r.restore()},[y,U,g,Ve,Wt,ra,A,$,k,ye,J,He,Mt,yt,Oe,wt.x,wt.y,Gl,To,Bi,Mi,Yi,qn,al,ja,Xi,Gi,Mn,mt,ot,mi,Je,Dl,nt,za,ia,vt,Ye,pt,kt,zt,m,q,Ee,re,we,gn,ii,Pa,Fo]);Pe.useEffect(()=>{const a=()=>{const r=ma.current;if(!r)return;const p=1.6,x=244,v=12,b=12,f=r.clientWidth-x-v,S=r.clientHeight-b,T=Math.floor(S*p),z=Math.floor(f/p);let I,Q;T<=f?(I=T,Q=S):(I=f,Q=z),I=Math.max(600,I),Q=Math.max(375,Q),Oc(oe=>{if(oe.width!==I||oe.height!==Q){const L=oe.width-80,ee=oe.height-80,V=I-80,Z=Q-80,G=L>0?V/L:1,pe=ee>0?Z/ee:1;Ln(ke=>({x:ke.x*G,y:ke.y*pe}))}return oe.width===I&&oe.height===Q?oe:{width:I,height:Q}})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[Ln]),Pe.useEffect(()=>{ii&&(Xo&&(da(!1),ji(null)),Il(null))},[ii,Xo,da,ji,Il]);const br=w.useCallback(a=>{if(Ve.forEach(r=>{if(r.type==="via"||r.type==="pad"||r.type==="testPoint"||r.testPointType!==void 0||r.type!=="trace")return;let p=!1;if(r.layer==="top"?p=Mi:r.layer==="bottom"&&(p=Yi),!!p)if(r.points.length===1){const x=r.points[0],v=Math.max(.5,r.size/2);vt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(x.x,x.y,v+3,0,Math.PI*2),a.stroke(),a.setLineDash([])),a.fillStyle=r.color,a.beginPath(),a.arc(x.x,x.y,v,0,Math.PI*2),a.fill()}else{vt.has(r.id)&&(a.strokeStyle="#00bfff",a.lineWidth=r.size+4,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),r.points.forEach((x,v)=>{v===0?a.moveTo(x.x,x.y):a.lineTo(x.x,x.y)}),a.stroke(),a.globalAlpha=1),a.strokeStyle=r.color,a.lineWidth=r.size,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),r.points.forEach((x,v)=>{v===0?a.moveTo(x.x,x.y):a.lineTo(x.x,x.y)}),a.stroke();for(const x of r.points)a.beginPath(),a.arc(x.x,x.y,r.size/2,0,Math.PI*2),a.fill()}}),Ve.forEach(r=>{if(r.type==="via"){if(!Bi)return}else if(r.type==="pad"){const x=r.layer||"top";if(x==="top"&&!qn||x==="bottom"&&!al)return}else if(r.type==="testPoint"){const x=r.layer||"top";if(x==="top"&&!ja||x==="bottom"&&!Xi)return}else return;const p=r.points[0];if(vt.has(r.id)){if(r.type==="via"){const x=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.arc(p.x,p.y,x,0,Math.PI*2),a.stroke(),a.setLineDash([])}else if(r.type==="pad"){const x=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.strokeRect(p.x-x,p.y-x,r.size+6,r.size+6),a.setLineDash([])}else if(r.type==="testPoint"){const x=Math.max(.5,r.size/2)+3;a.strokeStyle="#00bfff",a.lineWidth=2,a.setLineDash([4,3]),a.beginPath(),a.moveTo(p.x,p.y-x),a.lineTo(p.x+x,p.y),a.lineTo(p.x,p.y+x),a.lineTo(p.x-x,p.y),a.closePath(),a.stroke(),a.setLineDash([])}}if(r.type==="via"){const x=Math.max(.5,r.size/2),v=x*.5,b=x*.7;a.fillStyle=r.color,a.beginPath(),a.arc(p.x,p.y,x,0,Math.PI*2),a.arc(p.x,p.y,v,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(p.x-b,p.y),a.lineTo(p.x+b,p.y),a.stroke(),a.beginPath(),a.moveTo(p.x,p.y-b),a.lineTo(p.x,p.y+b),a.stroke()}else if(r.type==="pad"){const x=Math.max(.5,r.size/2),v=r.size,b=v*.5,f=x*.7;a.fillStyle=r.color,a.beginPath(),a.rect(p.x-x,p.y-x,v,v),a.rect(p.x-b/2,p.y-b/2,b,b),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(p.x-f,p.y),a.lineTo(p.x+f,p.y),a.stroke(),a.beginPath(),a.moveTo(p.x,p.y-f),a.lineTo(p.x,p.y+f),a.stroke()}else if(r.type==="testPoint"){const x=Math.max(.5,r.size/2),v=x*.7;a.fillStyle=r.color||"#FFFF00",a.strokeStyle="#000000",a.lineWidth=2,a.beginPath(),a.moveTo(p.x,p.y-x),a.lineTo(p.x+x,p.y),a.lineTo(p.x,p.y+x),a.lineTo(p.x-x,p.y),a.closePath(),a.fill(),a.stroke(),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(p.x-v,p.y),a.lineTo(p.x+v,p.y),a.stroke(),a.beginPath(),a.moveTo(p.x,p.y-v),a.lineTo(p.x,p.y+v),a.stroke()}}),Wt.length>0){const r=yt;let p=!0;if(A==="draw"&&(we==="via"?p=Bi:p=r==="top"?Mi:Yi),p)if(A==="draw")if(we==="via"){const x=Wt[Wt.length-1],v=Math.max(.5,k/2),b=v*.5,f=v*.7;a.fillStyle=$,a.beginPath(),a.arc(x.x,x.y,v,0,Math.PI*2),a.arc(x.x,x.y,b,0,Math.PI*2),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-f,x.y),a.lineTo(x.x+f,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-f),a.lineTo(x.x,x.y+f),a.stroke()}else if(we==="pad"){const x=Wt[Wt.length-1],v=Math.max(.5,k/2),b=k,f=b*.5,S=v*.7;a.fillStyle=$,a.beginPath(),a.rect(x.x-v,x.y-v,b,b),a.rect(x.x-f/2,x.y-f/2,f,f),a.fill("evenodd"),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-S,x.y),a.lineTo(x.x+S,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-S),a.lineTo(x.x,x.y+S),a.stroke()}else if(we==="testPoint"){const x=Wt[Wt.length-1],v=Math.max(.5,k/2),b=v*.7;a.fillStyle=$,a.beginPath(),a.moveTo(x.x,x.y-v),a.lineTo(x.x+v,x.y),a.lineTo(x.x,x.y+v),a.lineTo(x.x-v,x.y),a.closePath(),a.fill(),a.strokeStyle="#808080",a.lineWidth=1,a.beginPath(),a.moveTo(x.x-b,x.y),a.lineTo(x.x+b,x.y),a.stroke(),a.beginPath(),a.moveTo(x.x,x.y-b),a.lineTo(x.x,x.y+b),a.stroke()}else{const x=zt||"top",v=x==="top"?m:q,b=x==="top"?Ee:re;if(Wt.length===1){const f=Wt[0],S=Math.max(.5,b/2);a.fillStyle=v,a.beginPath(),a.arc(f.x,f.y,S,0,Math.PI*2),a.fill(),gn&&(a.strokeStyle=v,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(gn.x,gn.y),a.stroke(),a.globalAlpha=1)}else if(a.strokeStyle=v,a.lineWidth=b,a.lineCap="round",a.lineJoin="round",a.globalAlpha=1,a.beginPath(),Wt.forEach((f,S)=>{S===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)}),a.stroke(),gn&&Wt.length>0){const f=Wt[Wt.length-1];a.globalAlpha=.6,a.beginPath(),a.moveTo(f.x,f.y),a.lineTo(gn.x,gn.y),a.stroke(),a.globalAlpha=1}}else A==="erase"&&(a.strokeStyle="rgba(255, 0, 0, 0.5)",a.lineWidth=k,a.lineCap="round",a.lineJoin="round",a.globalAlpha=.5,a.beginPath(),Wt.forEach((x,v)=>{v===0?a.moveTo(x.x,x.y):a.lineTo(x.x,x.y)}),a.stroke())}},[Ve,vt,Mi,Yi,Bi,qn,al,ja,Xi,Wt,A,we,$,k,yt,zt,m,q,Ee,re,gn]),bs=w.useCallback((a,r)=>{if(ii){alert("Cannot transform: Images are locked. Unlock images to transform them.");return}a==="top"&&y?u(p=>p?{...p,...r}:null):a==="bottom"&&U?X(p=>p?{...p,...r}:null):a==="both"&&(y&&u(p=>p?{...p,...r}:null),U&&X(p=>p?{...p,...r}:null))},[y,U,ii]),$c=w.useCallback(()=>{Mt&&(bs(Mt,{x:0,y:0,scale:1,rotation:0,flipX:!1,flipY:!1,skewX:0,skewY:0,keystoneV:0,keystoneH:0,brightness:100,contrast:100}),Me(!1),Ae(!1),ge(!1))},[bs,Mt]),Nl=w.useCallback(()=>{if(vt.size>0||Ye.size>0||pt.size>0||kt.size>0){if(vt.size>0){const a=Ve.filter(v=>vt.has(v.id)),r=li&&a.some(v=>v.type==="via"),p=ai&&a.some(v=>v.type==="trace"),x=Fi&&a.some(v=>v.type==="pad");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(p){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(x){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}}if(Ye.size>0&&Ci){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(pt.size>0&&yn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(kt.size>0&&zi){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Vt(a=>a.map(r=>{if(vt.has(r.id)){const p=r.size+1;return r.type==="via"?Ge("via",p):r.type==="pad"?Ge("pad",p):r.type==="trace"&&Ge("trace",p,r.layer),{...r,size:p}}return r})),Ye.size>0){const a=(Ye.size>0&&mt.find(r=>Ye.has(r.id))?.size||18)+1;Ge("component",a),sn(r=>r.map(p=>Ye.has(p.id)?{...p,size:(p.size||18)+1}:p)),At(r=>r.map(p=>Ye.has(p.id)?{...p,size:(p.size||18)+1}:p))}if(pt.size>0){const a=(Je.find(r=>pt.has(r.id))?.size||18)+1;Ge("power",a),Gn(r=>r.map(p=>pt.has(p.id)?{...p,size:p.size+1}:p))}if(kt.size>0){const a=(nt.find(r=>kt.has(r.id))?.size||18)+1;Ge("ground",a),Wi(r=>r.map(p=>kt.has(p.id)?{...p,size:(p.size||18)+1}:p))}}else{let a=null;if(A==="draw"&&we==="via"?a="via":A==="draw"&&we==="pad"?a=fa.current==="bottom"?"padBottom":"padTop":A==="draw"&&we==="testPoint"?a=$l.current==="bottom"?"testPointBottom":"testPointTop":A==="draw"&&we==="trace"?a=Wl.current==="bottom"?"traceBottom":"traceTop":A==="component"?a=wn.current==="bottom"?"componentBottom":"componentTop":A==="power"?a="power":A==="ground"&&(a="ground"),a){const r=St.get(a),p=Math.min(40,r.size+1);St.setSize(a,p)}}},[vt,Ye,pt,kt,Ve,li,ai,Fi,Yl,Ci,yn,zi,A,we,Ge]),vs=w.useCallback(()=>{if(vt.size>0||Ye.size>0||pt.size>0||kt.size>0){if(vt.size>0){const a=Ve.filter(b=>vt.has(b.id)),r=li&&a.some(b=>b.type==="via"),p=ai&&a.some(b=>b.type==="trace"),x=Fi&&a.some(b=>b.type==="pad"),v=Yl&&a.some(b=>b.type==="testPoint");if(r){alert("Cannot change size: Vias are locked. Unlock vias to change their size.");return}if(p){alert("Cannot change size: Traces are locked. Unlock traces to change their size.");return}if(x){alert("Cannot change size: Pads are locked. Unlock pads to change their size.");return}if(v){alert("Cannot change size: Test Points are locked. Unlock test points to change their size.");return}}if(Ye.size>0&&Ci){alert("Cannot change size: Components are locked. Unlock components to change their size.");return}if(pt.size>0&&yn){alert("Cannot change size: Power nodes are locked. Unlock power nodes to change their size.");return}if(kt.size>0&&zi){alert("Cannot change size: Ground nodes are locked. Unlock ground nodes to change their size.");return}if(Vt(a=>a.map(r=>{if(vt.has(r.id)){const p=Math.max(1,r.size-1);return r.type==="via"?Ge("via",p):r.type==="pad"?Ge("pad",p,r.layer):r.type==="testPoint"?Ge("testPoint",p,r.layer):r.type==="trace"&&Ge("trace",p,r.layer),{...r,size:p}}return r})),Ye.size>0){const a=Math.max(1,(mt.find(r=>Ye.has(r.id))?.size||18)-1);Ge("component",a),sn(r=>r.map(p=>Ye.has(p.id)?{...p,size:Math.max(1,(p.size||18)-1)}:p)),At(r=>r.map(p=>Ye.has(p.id)?{...p,size:Math.max(1,(p.size||18)-1)}:p))}if(pt.size>0){const a=Math.max(1,(Je.find(r=>pt.has(r.id))?.size||18)-1);Ge("power",a),Gn(r=>r.map(p=>pt.has(p.id)?{...p,size:Math.max(1,p.size-1)}:p))}if(kt.size>0){const a=Math.max(1,(nt.find(r=>kt.has(r.id))?.size||18)-1);Ge("ground",a),Wi(r=>r.map(p=>kt.has(p.id)?{...p,size:Math.max(1,(p.size||18)-1)}:p))}}else{let a=null;if(A==="draw"&&we==="via"?a="via":A==="draw"&&we==="pad"?a=(yt||en||"top")==="bottom"?"padBottom":"padTop":A==="draw"&&we==="testPoint"?a=(yt||tn||"top")==="bottom"?"testPointBottom":"testPointTop":A==="draw"&&we==="trace"?a=(yt||zt||"top")==="bottom"?"traceBottom":"traceTop":A==="component"?a=(yt||pn||"top")==="bottom"?"componentBottom":"componentTop":A==="power"?a="power":A==="ground"&&(a="ground"),a){const r=St.get(a),p=Math.max(1,r.size-1);St.setSize(a,p)}}},[vt,Ye,pt,kt,Ve,li,ai,Fi,Yl,Ci,yn,zi,A,we,yt,en,tn,zt,pn,Ge]),ec=w.useCallback(()=>{const a=vo.size;if(vt.size>0||Ye.size>0||pt.size>0||kt.size>0){if(vt.size>0){const r=Ve.filter(f=>vt.has(f.id)),p=li&&r.some(f=>f.type==="via"),x=Fi&&r.some(f=>f.type==="pad"),v=ai&&r.some(f=>f.type==="trace"),b=Yl&&r.some(f=>f.type==="testPoint");if(p||x||v||b){alert("Cannot change size: selected items are locked.");return}}if(Ye.size>0&&Ci){alert("Cannot change size: selected components are locked.");return}if(pt.size>0&&yn){alert("Cannot change size: selected power nodes are locked.");return}if(kt.size>0&&zi){alert("Cannot change size: selected ground nodes are locked.");return}Vt(r=>r.map(p=>vt.has(p.id)?(p.type==="via"?(Ge("via",a),An(x=>{const v=new Map(x),b=v.get("via");return b&&v.set("via",{...b,settings:{...b.settings,size:a}}),v})):p.type==="pad"?(Ge("pad",a,p.layer),An(x=>{const v=new Map(x),b=v.get("pad");if(b){const f=new Map(b.layerSettings);f.set(p.layer,{...f.get(p.layer)||{color:b.settings.color,size:a},size:a}),v.set("pad",{...b,layerSettings:f})}return v})):p.type==="testPoint"?(Ge("testPoint",a,p.layer),An(x=>{const v=new Map(x),b=v.get("testPoint");if(b){const f=new Map(b.layerSettings);f.set(p.layer,{...f.get(p.layer)||{color:b.settings.color,size:a},size:a}),v.set("testPoint",{...b,layerSettings:f})}return v})):p.type==="trace"&&Ge("trace",a,p.layer),{...p,size:a}):p)),Ye.size>0&&(Ge("component",a),sn(r=>r.map(p=>Ye.has(p.id)?{...p,size:a}:p)),At(r=>r.map(p=>Ye.has(p.id)?{...p,size:a}:p))),pt.size>0&&(Ge("power",a),Gn(r=>r.map(p=>pt.has(p.id)?{...p,size:a}:p))),kt.size>0&&(Ge("ground",a),Wi(r=>r.map(p=>kt.has(p.id)?{...p,size:a}:p)))}else R(a),A==="draw"&&we==="trace"?yt==="top"?(Xe(a),Ge("trace",a,"top")):(_(a),Ge("trace",a,"bottom")):A==="draw"&&we==="via"?Ge("via",a):A==="draw"&&we==="pad"?Ge("pad",a,yt):A==="draw"&&we==="testPoint"?Ge("testPoint",a,yt):Ge(A==="component"?"component":A==="power"?"power":A==="ground"?"ground":"brush",a);Wa({visible:!1,size:6})},[vo.size,vt,Ye,pt,kt,Ve,li,ai,Ci,yn,zi,A,we,yt,Ge,Dt,An]),tc=w.useCallback(()=>{Ll({visible:!1,source:null,interval:5})},[]),Fc=w.useCallback(async(a,r=!1)=>{if(a===null){vi(!1),ya(null),$t.current&&(clearInterval($t.current),$t.current=null),$a({visible:!1,interval:5}),r&&Ll({visible:!1,source:null,interval:5}),console.log("Auto save: Disabled");return}if(!oi){alert("Please create a new project (File -> New Project) or open an existing project (File -> Open Project) first.");return}let p=Fn;if(!p){const f=window;if(typeof f.showDirectoryPicker=="function")try{p=await f.showDirectoryPicker(),va(p)}catch(S){S?.name!=="AbortError"&&(console.error("Failed to get directory:",S),alert("Failed to select project directory."));return}else{alert("Directory picker is not supported in this browser. Auto-save requires a directory handle.");return}}Ya(p);const x=oi.replace(/\.json$/i,""),b=Sc(x).replace(/[^a-zA-Z0-9_-]/g,"_");tl(b),ws.current=p,Aa.current=b,ya(a),vi(!0),Tl.current=!0,$a({visible:!1,interval:5}),r&&Ll({visible:!1,source:null,interval:5}),setTimeout(()=>{console.log(`Auto save: Enabled with interval ${a} minutes`),er.current&&er.current()},200)},[oi,Fn,vi,ya,Ya,tl,$a,Ll,va]),ms=w.useCallback(()=>{K("select"),jt(new Set),ft(new Set),tt(new Set),bt(new Set)},[jt,ft,tt,bt]),nc=w.useCallback(a=>{if(a.key==="Escape"){const x=document.activeElement;if(x&&(x.tagName==="INPUT"&&x.type==="checkbox"||x.tagName==="INPUT"&&x.type==="radio")){x.blur(),a.preventDefault(),a.stopPropagation();return}}const r=document.activeElement;if(!(r&&(r.tagName==="INPUT"&&r.type!=="checkbox"&&r.type!=="radio"||r.tagName==="TEXTAREA"||r.isContentEditable)||Na.current>0&&a.key!=="z"&&a.key!=="Z")){if(a.key==="+"||a.key==="="){a.preventDefault(),a.stopPropagation(),Nl();return}if(a.key==="-"||a.key==="_"){a.preventDefault(),a.stopPropagation(),vs();return}if((a.key==="ArrowUp"||a.key==="ArrowDown"||a.key==="ArrowLeft"||a.key==="ArrowRight")&&Ye.size>0){a.preventDefault(),a.stopPropagation();const x=a.shiftKey?10:1;let v=0,b=0;a.key==="ArrowUp"?b=-x:a.key==="ArrowDown"?b=x:a.key==="ArrowLeft"?v=-x:a.key==="ArrowRight"&&(v=x);for(const f of Ye){const S=mt.find(T=>T.id===f);if(S){const T=S.x+v,z=S.y+b,I=Ht({x:T,y:z});sn(Q=>Q.map(oe=>oe.id===f?{...oe,x:I.x,y:I.y}:oe))}else{const T=ot.find(z=>z.id===f);if(T){const z=T.x+v,I=T.y+b,Q=Ht({x:z,y:I});At(oe=>oe.map(L=>L.id===f?{...L,x:Q.x,y:Q.y}:L))}}}return}if((a.key==="I"||a.key==="i")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const x=document.activeElement;if(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;a.preventDefault(),a.stopPropagation();const b=[];vt.size>0,vt.size===0&&Ye.size===0&&pt.size===0&&kt.size===0&&b.push(`
No objects selected.`);const f=b.join(`
`);console.log(f),xa({visible:!0,text:f});return}if((a.key==="N"||a.key==="n")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const x=document.activeElement;if(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Ga(!0);return}if((a.key==="L"||a.key==="l")&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){const x=document.activeElement;if(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;a.preventDefault(),a.stopPropagation(),Lc();return}if(a.key==="O"||a.key==="o"){const x=document.activeElement;if(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable))return;if(a.preventDefault(),a.stopPropagation(),Ai){Ii(Ai.zoom);const b=hn.current;let f=0,S=0;if(b){const T=b.width-80,z=b.height-80,I=T/2,Q=z/2,oe=Ai.x,L=Ai.y,ee=Ai.zoom;f=I-oe*ee,S=Q-L*ee}Ln({x:f,y:S})}else{Ii(1);const b=hn.current;let f=0,S=0;if(b){const T=b.width-80,z=b.height-80,I=T/2,Q=z/2,oe=0,L=0;f=I-oe*1,S=Q-L*1}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Ln({x:f,y:S})}be("overlay"),jt(new Set),ft(new Set),tt(new Set),bt(new Set),K("select");return}if((a.key==="Alt"||a.altKey)&&(Bo(!0),_c(!0)),a.key==="Escape"){a.preventDefault(),a.stopPropagation(),ms(),Da(!1),ea(!1),Ao(!1),Zi(!1),En(!1),Lt(!1),_r(!1),xr(null);return}if(a.key==="Enter"&&A==="draw"&&we==="trace"){ys();return}if((a.key==="Delete"||a.key==="Backspace")&&(vt.size>0||Ye.size>0||pt.size>0||kt.size>0)){if(a.preventDefault(),a.stopPropagation(),vt.size>0){const x=Ve.filter(T=>vt.has(T.id)),v=li&&x.some(T=>T.type==="via"),b=ai&&x.some(T=>T.type==="trace"),f=Fi&&x.some(T=>T.type==="pad"),S=Yl&&x.some(T=>T.type==="testPoint");v?alert("Cannot delete: Vias are locked. Unlock vias to delete them."):b?alert("Cannot delete: Traces are locked. Unlock traces to delete them."):f?alert("Cannot delete: Pads are locked. Unlock pads to delete them."):S?alert("Cannot delete: Test points are locked. Unlock test points to delete them."):(Vt(T=>T.filter(z=>!vt.has(z.id))),jt(new Set))}Ye.size>0&&(Ci?alert("Cannot delete: Components are locked. Unlock components to delete them."):(sn(x=>x.filter(v=>!Ye.has(v.id))),At(x=>x.filter(v=>!Ye.has(v.id))),ft(new Set))),pt.size>0&&(yn?alert("Cannot delete: Power nodes are locked. Unlock power nodes to delete them."):(Gn(x=>x.filter(v=>!pt.has(v.id))),tt(new Set))),kt.size>0&&(zi?alert("Cannot delete: Ground nodes are locked. Unlock ground nodes to delete them."):(Wi(x=>x.filter(v=>!kt.has(v.id))),bt(new Set)));return}if((A==="draw"||A==="erase"||A==="power"||A==="ground")&&(a.key==="z"||a.key==="Z")&&a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),A==="power"){Gn(x=>x.length===0?x:x.slice(0,-1));return}if(A==="ground"){Wi(x=>x.length===0?x:x.slice(0,-1));return}if(A==="draw"&&we==="trace"){const x=Wt,v=Hl.current,b=x.length>0?x:v;if(b.length>0){b.length>1?Pn(f=>f.slice(0,-1)):Pn([]);return}Vt(f=>{for(let S=f.length-1;S>=0;S--){const T=f[S];if(T.type==="trace"&&T.layer===yt&&T.points.length>=2)if(T.points.length>2){const z=T.points.slice(0,-1);return Pn(z),[...f.slice(0,S),...f.slice(S+1)]}else return[...f.slice(0,S),...f.slice(S+1)]}return f});return}if(ra&&Wt.length>0){Pn([]);return}A==="draw"&&(we==="via"||we==="pad"||we==="testPoint")&&Vt(x=>{for(let v=x.length-1;v>=0;v--){const b=x[v];if(b.layer===yt&&b.type===we)return[...x.slice(0,v),...x.slice(v+1)]}return x});return}if(!a.ctrlKey&&!a.altKey){const x=document.activeElement;if(!(!!x&&(x.tagName==="INPUT"&&x.type!=="range"&&x.type!=="checkbox"&&x.type!=="radio"||x.tagName==="TEXTAREA"||x.isContentEditable)))switch(a.key){case"s":case"S":a.preventDefault(),ms();return;case"b":case"B":a.preventDefault(),K("power");return;case"g":case"G":a.preventDefault(),K("ground");return;case"v":case"V":a.preventDefault(),Ol("via"),K("draw");return;case"p":case"P":a.preventDefault(),Ol("pad"),K("draw"),_n(en||"top");return;case"y":case"Y":a.preventDefault(),Ol("testPoint"),K("draw"),_n(tn||"top");return;case"t":case"T":a.preventDefault(),Ol("trace"),K("draw"),_n(zt||"top");return;case"c":case"C":a.preventDefault(),K("component"),Zi(!0),En(!1),Kr(null);return;case"e":case"E":a.preventDefault(),K("erase");return;case"h":case"H":a.preventDefault(),K("pan");return;case"x":case"X":a.preventDefault(),K("center");return;case"z":case"Z":if(!a.ctrlKey){a.preventDefault(),tr(!1),K("magnify");return}break}}if(A==="transform"&&Mt){if(!(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="ArrowUp"||a.key==="ArrowDown"))return;a.preventDefault(),a.stopPropagation();const v=document.activeElement;if(v&&v.tagName==="INPUT"){const b=v;b.type==="radio"&&b.blur()}if(ii)return;if(Vl==="nudge"){let b=0,f=0;switch(a.key){case"ArrowLeft":b=-1;break;case"ArrowRight":b=1;break;case"ArrowUp":f=-1;break;case"ArrowDown":f=1;break;default:return}Mt==="top"&&y?u(S=>S?{...S,x:S.x+b,y:S.y+f}:null):Mt==="bottom"&&U?X(S=>S?{...S,x:S.x+b,y:S.y+f}:null):Mt==="both"&&(y&&u(S=>S?{...S,x:S.x+b,y:S.y+f}:null),U&&X(S=>S?{...S,x:S.x+b,y:S.y+f}:null))}else if(Vl==="scale"){let b=0;switch(a.key){case"ArrowUp":b=.01;break;case"ArrowDown":b=-.01;break;case"ArrowRight":b=.001;break;case"ArrowLeft":b=-.001;break;default:return}if(Mt==="top"){y&&u(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null);return}if(Mt==="bottom"){U&&X(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null);return}if(Mt==="both"){y&&u(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null),U&&X(f=>f?{...f,scale:Math.max(.1,Math.min(3,f.scale+b))}:null);return}}else if(Vl==="rotate"){let b=0;switch(a.key){case"ArrowUp":b=1;break;case"ArrowDown":b=-1;break;case"ArrowRight":b=.1;break;case"ArrowLeft":b=-.1;break;default:return}if(Mt==="top"){y&&u(f=>f?{...f,rotation:f.rotation+b}:null);return}if(Mt==="bottom"){U&&X(f=>f?{...f,rotation:f.rotation+b}:null);return}if(Mt==="both"){y&&u(f=>f?{...f,rotation:f.rotation+b}:null),U&&X(f=>f?{...f,rotation:f.rotation+b}:null);return}}else if(Vl==="slant"){let b=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||f!==0){const S=z=>z*Math.PI/180,T=z=>Math.max(-.7,Math.min(.7,z));if(Mt==="top"){y&&u(z=>z?{...z,skewX:T((z.skewX||0)+S(b)),skewY:T((z.skewY||0)+S(f))}:null);return}if(Mt==="bottom"){U&&X(z=>z?{...z,skewX:T((z.skewX||0)+S(b)),skewY:T((z.skewY||0)+S(f))}:null);return}if(Mt==="both"){y&&u(z=>z?{...z,skewX:T((z.skewX||0)+S(b)),skewY:T((z.skewY||0)+S(f))}:null),U&&X(z=>z?{...z,skewX:T((z.skewX||0)+S(b)),skewY:T((z.skewY||0)+S(f))}:null);return}}}else if(Vl==="keystone"){let b=0,f=0;switch(a.key){case"ArrowUp":f=-.5;break;case"ArrowDown":f=.5;break;case"ArrowLeft":b=-.5;break;case"ArrowRight":b=.5;break}if(b!==0||f!==0){const S=z=>z*Math.PI/180,T=z=>Math.max(-.35,Math.min(.35,z));if(Mt==="top"){y&&u(z=>z?{...z,keystoneH:T((z.keystoneH||0)+S(b)),keystoneV:T((z.keystoneV||0)+S(f))}:null);return}if(Mt==="bottom"){U&&X(z=>z?{...z,keystoneH:T((z.keystoneH||0)+S(b)),keystoneV:T((z.keystoneV||0)+S(f))}:null);return}if(Mt==="both"){y&&u(z=>z?{...z,keystoneH:T((z.keystoneH||0)+S(b)),keystoneV:T((z.keystoneV||0)+S(f))}:null),U&&X(z=>z?{...z,keystoneH:T((z.keystoneH||0)+S(b)),keystoneV:T((z.keystoneV||0)+S(f))}:null);return}}}}else{const x=a.target;if(x.tagName==="INPUT"&&x.type==="range"){const v=x,b=Number(v.value),f=Number(v.min),S=Number(v.max),T=Number(v.step)||1;switch(a.key){case"ArrowLeft":a.preventDefault();const z=Math.max(f,b-T);v.value=z.toString(),v.dispatchEvent(new Event("input",{bubbles:!0}));break;case"ArrowRight":a.preventDefault();const I=Math.min(S,b+T);v.value=I.toString(),v.dispatchEvent(new Event("input",{bubbles:!0}));break}}}}},[A,Mt,Vl,y,U,vt,Ye,pt,kt,Ve,mt,ot,Je,nt,ct,we,ys,zt,m,q,Ee,re,ms,sn,At]);Pe.useEffect(()=>{A!=="transform"&&Il(null)},[A]),Pe.useEffect(()=>{window.addEventListener("keydown",nc,!0);const a=r=>{r.key==="Alt"&&(Bo(!1),_c(!1),ar(null))};return window.addEventListener("keyup",a,!0),()=>{window.removeEventListener("keydown",nc,!0),window.removeEventListener("keyup",a,!0)}},[nc,pt,kt,yn,yn,Je,nt,Nl,vs,ms,Ye,mt,ot,sn,At,Ai]);const Ss=w.useCallback(()=>{ko.current={},ue("#AA4499"),Be("#F781BF"),Xe(6),_(6),Ct("trace","#AA4499","top"),Ct("trace","#F781BF","bottom"),Ge("trace",6,"top"),Ge("trace",6,"bottom"),F("#0072B2"),W("#56B4E9"),H(18),me(18),Ct("pad","#0072B2","top"),Ct("pad","#56B4E9","bottom"),Ge("pad",18,"top"),Ge("pad",18,"bottom"),Kn("#6A3D9A"),Ji("#9467BD"),_l(18),yl(18),Ct("component","#6A3D9A","top"),Ct("component","#9467BD","bottom"),Ge("component",18,"top"),Ge("component",18,"bottom"),_a("top"),D("#AA4499"),R(6),ni([{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}]),Fl([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]),Ge("power",18),Ge("ground",18),Gs(!1),Br(!1),Mr(!1),Zo(!1),qs(!1),Zs(!1),_n("top"),K("select"),E(50),je(!1),be("overlay"),vu(1)},[Ct,Ge]),uo=w.useCallback(()=>{Ss(),setTimeout(()=>{Ii(1);const a=hn.current,r=ma.current;let p=0,x=0;if(a&&r){const v=a.getBoundingClientRect(),b=r.getBoundingClientRect(),f=a.width-80,S=a.height-80,I=60+168+6,Q=v.left-b.left,oe=I-Q,L=v.width-Math.max(0,oe),ee=oe+L/2,V=v.height/2,Z=f/2,G=S/2,pe=v.width/a.width,ke=v.height/a.height,Te=ee/pe,se=V/ke,_e=Te-40,Re=se-40;p=_e-Z,x=Re-G}document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),Ln({x:p,y:x}),jt(new Set),ft(new Set),tt(new Set),bt(new Set)},100)},[Ss]);Pe.useEffect(()=>{uo()},[]),Pe.useEffect(()=>{if(!Fa.visible)return;const a=[];vt.size>0,vt.size===0&&Ye.size===0&&pt.size===0&&kt.size===0&&a.push(`
No objects selected.`);const r=a.join(`
`);xa(p=>({...p,text:r}))},[Fa.visible,vt,Ye,pt,kt,Ve,mt,ot,Je,nt,ct]),Pe.useEffect(()=>{const a=r=>{const p=hn.current;if(p&&!(na.current&&na.current.contains(r.target))&&!(r.target instanceof Node&&p.contains(r.target))){if(ys(),Ra){const x=lo.current;(!x||!(r.target instanceof Node)||!x.contains(r.target))&&Da(!1)}if(di){const x=na.current;(!x||!(r.target instanceof Node)||!x.contains(r.target))&&(Zi(!1),K("select"))}if(hs){const x=Cn.current;(!x||!(r.target instanceof Node)||!x.contains(r.target))&&(En(!1),xr(null))}if(Mc){const x=Vr.current;!r.target?.closest('button[title="Color Picker"]')&&(!x||!(r.target instanceof Node)||!x.contains(r.target))&&_r(!1)}}};return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[ys,Ra,ao,di,hs,Mc]);const Mo=a=>{if(!a.current)return{top:0,left:0};const r=a.current.getBoundingClientRect(),p=ma.current?.getBoundingClientRect();return p?{top:r.top-p.top,left:r.left-p.left+r.width+4}:{top:0,left:0}},vr=w.useCallback(()=>{lo.current&&dl.current&&requestAnimationFrame(()=>{if(lo.current&&dl.current){const a=Mo(dl);lo.current.style.top=`${a.top}px`,lo.current.style.left=`${a.left}px`}})},[]),ic=w.useCallback(()=>{ta.current&&ht.current&&requestAnimationFrame(()=>{if(ta.current&&ht.current){const a=Mo(ht);ta.current.style.top=`${a.top}px`,ta.current.style.left=`${a.left}px`}})},[]),Yc=w.useCallback(()=>{oo.current&&Yt.current&&requestAnimationFrame(()=>{if(oo.current&&Yt.current){const a=Mo(Yt);oo.current.style.top=`${a.top}px`,oo.current.style.left=`${a.left}px`}})},[]);Pe.useEffect(()=>{Ra&&vr()},[Ra,vr]),Pe.useEffect(()=>{ao&&ic()},[ao,ic]),Pe.useEffect(()=>{Qr&&Yc()},[Qr,Yc]),Pe.useEffect(()=>{if(di&&na.current&&zn.current){const a=Mo(zn);na.current.style.top=`${a.top}px`,na.current.style.left=`${a.left}px`}},[di]),Pe.useEffect(()=>{if(Wn&&gr.current&&gs.current){const a=Mo(gs);gr.current.style.top=`${a.top}px`,gr.current.style.left=`${a.left}px`}},[Wn]),Pe.useEffect(()=>{if($r&&ps.current&&ro.current){const a=Mo(ro);ps.current.style.top=`${a.top}px`,ps.current.style.left=`${a.left}px`}},[$r]),Pe.useEffect(()=>{const a=r=>{if(!$n)return;const p=document.querySelector("[data-component-editor-dialog]");if(p&&r.target instanceof Node&&p.contains(r.target)){const Re=r.target;if(Re.tagName==="BUTTON"||Re.tagName==="INPUT"||Re.closest("button")||Re.closest("input"))return}const x=hn.current;if(!x)return;const v=x.getBoundingClientRect(),b=r.clientX,f=r.clientY;if(b<v.left||b>v.right||f<v.top||f>v.bottom)return;const S=x.width/v.width,T=x.height/v.height,z=b-v.left,I=f-v.top,Q=z*S,oe=I*T,L=Q-40,ee=oe-40,V=(L-wt.x)/Oe,Z=(ee-wt.y)/Oe;let G=1/0,pe=null,ke=null;const Te=Math.max(6/Oe,4),_e=[...mt,...ot].find(Re=>Re.id===$n.componentId)?.layer||"top";for(const Re of Ve)if((Re.type==="via"||Re.type==="pad")&&Re.points.length>0){if(Re.type==="pad"&&(Re.layer||"top")!==_e)continue;const M=Re.points[0],N=Math.max(1,Re.size/2),fe=Math.hypot(M.x-V,M.y-Z),ie=Math.max(N,Te);fe<=ie&&fe<G&&(G=fe,pe=M.id??null,ke=Re)}if(pe!=null&&ke){console.log(`
[PIN CONNECTION - DOCUMENT HANDLER] Found via!`),console.log(`  Point ID: ${pe}`),console.log(`  Connecting pin ${$n.pinIndex+1} of component ${$n.componentId}`);const Re=String(pe),M=$n.pinIndex,N=$n.componentId,fe=mt.find(De=>De.id===N),ie=ot.find(De=>De.id===N);if(fe){const De=Ve;sn(Ue=>{const qe=Ue.find(Ne=>Ne.id===N);if(!qe)return Ue;const We=qe.pinConnections||[],rt=We.length>0?[...We]:new Array(qe.pinCount).fill("");let et;if(rt.length!==qe.pinCount){et=new Array(qe.pinCount).fill("");for(let Ne=0;Ne<Math.min(rt.length,qe.pinCount);Ne++)et[Ne]=rt[Ne]||""}else et=[...rt];et[M]=Re,console.log(`Updated pin ${M} with value: ${Re}`),console.log("New pinConnections:",et);const gt=Ue.find(Ne=>Ne.id===N),Qe=gt?Nf(gt,et,De):null;return Ue.map(Ne=>{if(Ne.id===N){const st={...Ne,pinConnections:et};return Qe&&(st.pinPolarities=Qe),st}return Ne})})}else if(ie){const De=Ve;At(Ue=>{const qe=Ue.find(Ne=>Ne.id===N);if(!qe)return Ue;const We=qe.pinConnections||[],rt=We.length>0?[...We]:new Array(qe.pinCount).fill("");let et;if(rt.length!==qe.pinCount){et=new Array(qe.pinCount).fill("");for(let Ne=0;Ne<Math.min(rt.length,qe.pinCount);Ne++)et[Ne]=rt[Ne]||""}else et=[...rt];et[M]=Re,console.log(`Updated pin ${M} with value: ${Re}`),console.log("New pinConnections:",et);const gt=Ue.find(Ne=>Ne.id===N),Qe=gt?Nf(gt,et,De):null;return Ue.map(Ne=>{if(Ne.id===N){const st={...Ne,pinConnections:et};return Qe&&(st.pinPolarities=Qe),st}return Ne})})}setTimeout(()=>{vl(null)},0)}else console.log("[PIN CONNECTION - DOCUMENT HANDLER] No via found at click location")};if($n)return document.addEventListener("mousedown",a,!0),()=>document.removeEventListener("mousedown",a,!0)},[$n,mt,ot,Ve,Oe,wt.x,wt.y]);const ui=w.useCallback((a,r,p,x)=>{const v=window.innerWidth,b=window.innerHeight,f=10;let S=Math.max(f,Math.min(a,v-p-f)),T=Math.max(f,Math.min(r,b-x-f));return{x:S,y:T}},[]);Pe.useEffect(()=>{if(!Ar)return;const a=p=>{if(!Va)return;const x={x:p.clientX-Va.x,y:p.clientY-Va.y},v=ui(x.x,x.y,250,window.innerHeight*.4);ga(v),localStorage.setItem("componentDialogPosition",JSON.stringify(v))},r=()=>{Ls(!1),Rc(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Ar,Va,ui]),Pe.useEffect(()=>{if(!Fr)return;const a=p=>{if(!Yr)return;const x={x:p.clientX-Yr.x,y:p.clientY-Yr.y},v=ui(x.x,x.y,250,window.innerHeight*.4);Xa(v),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(v))},r=()=>{Nd(!1),Bd(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Fr,Yr,ui]),Pe.useEffect(()=>{if(!fr)return;const a=p=>{if(!ka)return;const x={x:p.clientX-ka.x,y:p.clientY-ka.y};qa(x),localStorage.setItem("notesDialogPosition",JSON.stringify(x))},r=()=>{Ro(!1),Md(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[fr,ka]),Pe.useEffect(()=>{if(Tn&&Kl===null){const a=localStorage.getItem("notesDialogPosition");if(a)try{const r=JSON.parse(a);qa(r)}catch{qa({x:window.innerWidth-550,y:100})}else qa({x:window.innerWidth-550,y:100})}},[Tn,Kl]),Pe.useEffect(()=>{if(!Xr)return;const a=p=>{if(!ds)return;const x={x:p.clientX-ds.x,y:p.clientY-ds.y};Ka(x),localStorage.setItem("projectNotesDialogPosition",JSON.stringify(x))},r=()=>{Ja(!1),us(null)};return document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}},[Xr,ds]),Pe.useEffect(()=>{if(Lr&&Qa===null){const a=localStorage.getItem("projectNotesDialogPosition");if(a)try{const r=JSON.parse(a);Ka(r)}catch{Ka({x:100,y:100})}else Ka({x:100,y:100})}},[Lr,Qa]);const Lc=w.useCallback(()=>{Za(!0)},[]);Pe.useEffect(()=>{if(Ti&&Ti.visible&&ml===null){const a=localStorage.getItem("componentDialogPosition");let r;if(a)try{const p=JSON.parse(a);r=ui(p.x,p.y,250,window.innerHeight*.4),ga(r)}catch{r=ui(window.innerWidth-280,90,250,window.innerHeight*.4),ga(r)}else r=ui(window.innerWidth-280,90,250,window.innerHeight*.4),ga(r)}else!Ti||Ti.visible},[Ti,ml,ui]),Pe.useEffect(()=>{if(Fa.visible&&nn===null){const a=localStorage.getItem("detailedInfoDialogPosition");let r;if(a)try{const p=JSON.parse(a);r=ui(p.x,p.y,400,window.innerHeight*.8),Xa(r)}catch{r=ui(window.innerWidth-450,90,400,window.innerHeight*.8),Xa(r)}else r=ui(window.innerWidth-450,90,400,window.innerHeight*.8),Xa(r)}else Fa.visible},[Fa.visible,nn,ui]),Pe.useEffect(()=>{const a=()=>{if(ml){const r=ui(ml.x,ml.y,250,window.innerHeight*.4);(r.x!==ml.x||r.y!==ml.y)&&(ga(r),localStorage.setItem("componentDialogPosition",JSON.stringify(r)))}if(nn){const r=ui(nn.x,nn.y,400,window.innerHeight*.8);(r.x!==nn.x||r.y!==nn.y)&&(Xa(r),localStorage.setItem("detailedInfoDialogPosition",JSON.stringify(r)))}};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[ml,nn,ui]);const Ed=w.useCallback(a=>{switch(a){case"transparency":E(50);break;case"brushSize":R(3);break}},[]);Pe.useEffect(()=>{if(de){ts.current=performance.now(),E(0);const a=r=>{const p=ts.current||r,x=2e3,v=(r-p)%x/x,b=1-Math.abs(1-2*v);E(Math.round(b*100)),mo.current=requestAnimationFrame(a)};mo.current=requestAnimationFrame(a)}return()=>{mo.current&&(cancelAnimationFrame(mo.current),mo.current=null)}},[de]),Pe.useEffect(()=>{if(A==="center"){ha(ox());return}const a=A==="erase"?"erase":A==="magnify"?"magnify":A==="ground"?"ground":A==="power"?"power":A==="component"?"component":A==="draw"?we==="via"?"via":we==="pad"?"pad":we==="testPoint"?"testPoint":"trace":"default";if(a==="default"){ha(void 0);return}const r=Math.max(1,Oe),p=a==="magnify"?18:Math.max(a==="component"?16:a==="power"||a==="ground"?12:6,Math.round(k*r)),v=p+4*2+(a==="magnify"?8:0),b=document.createElement("canvas");b.width=v,b.height=v;const f=b.getContext("2d");if(!f){ha(void 0);return}const S=v/2,T=v/2,z=p/2;if(f.clearRect(0,0,v,v),a==="via"){const Q=z,oe=z*.5,L=z*.7,V=St.get("via").color;f.fillStyle=V,f.beginPath(),f.arc(S,T,Q,0,Math.PI*2),f.arc(S,T,oe,0,Math.PI*2),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(S-L,T),f.lineTo(S+L,T),f.stroke(),f.beginPath(),f.moveTo(S,T-L),f.lineTo(S,T+L),f.stroke()}else if(a==="pad"){const Q=en==="top"?"padTop":"padBottom",oe=St.get(Q),L=oe.color,V=Math.max(6,Math.round(oe.size*r))/2,Z=V*2,G=Z*.5,pe=V*.7;f.fillStyle=L,f.beginPath(),f.rect(S-V,T-V,Z,Z),f.rect(S-G/2,T-G/2,G,G),f.fill("evenodd"),f.strokeStyle="#808080",f.lineWidth=1,f.beginPath(),f.moveTo(S-pe,T),f.lineTo(S+pe,T),f.stroke(),f.beginPath(),f.moveTo(S,T-pe),f.lineTo(S,T+pe),f.stroke()}else if(a==="trace"){const Q=zt==="top"?"traceTop":"traceBottom",L=St.get(Q).color;f.fillStyle=L,f.beginPath(),f.arc(S,T,z,0,Math.PI*2),f.fill()}else if(a==="testPoint"){const Q=tn==="top"?"testPointTop":"testPointBottom",oe=St.get(Q);ha(sx(oe.size));return}else if(a==="erase"){const Q=Math.max(k*.75,8),oe=Math.max(k*.5,6),L=Math.max(k*.2,2);f.save(),f.translate(S,T),f.rotate(-35*Math.PI/180),f.fillStyle="#f5a3b3",f.strokeStyle="#111",f.lineWidth=1.5;const ee=1.5,V=-Q/2,Z=-oe/2;f.beginPath(),f.moveTo(V+ee,Z),f.lineTo(V+Q-ee,Z),f.quadraticCurveTo(V+Q,Z,V+Q,Z+ee),f.lineTo(V+Q,Z+oe-ee),f.quadraticCurveTo(V+Q,Z+oe,V+Q-ee,Z+oe),f.lineTo(V+ee,Z+oe),f.quadraticCurveTo(V,Z+oe,V,Z+oe-ee),f.lineTo(V,Z+ee),f.quadraticCurveTo(V,Z,V+ee,Z),f.closePath(),f.fill(),f.stroke(),f.fillStyle="#f18ea4",f.beginPath(),f.rect(-Q/2,oe/2-L,Q,L),f.fill(),f.restore()}else if(a==="magnify"){const Q=z;f.strokeStyle="#111",f.lineWidth=2,f.beginPath(),f.arc(S-2,T-2,Q,0,Math.PI*2),f.stroke();const oe=S+Q*.6,L=T+Q*.6,ee=oe+6,V=L+6;f.beginPath(),f.moveTo(oe,L),f.lineTo(ee,V),f.stroke(),f.beginPath(),f.moveTo(S-6,T-2),f.lineTo(S+2,T-2),f.stroke(),So||(f.beginPath(),f.moveTo(S-2,T-6),f.lineTo(S-2,T+2),f.stroke())}else if(a==="ground"){const Q=St.get("ground");if(f.strokeStyle=Q.color,f.lineWidth=2,f.lineCap="round",sl==="groundbus-earth"){const L=z*1.5,ee=L*.9,V=L*.24,Z=L*1.6;f.beginPath(),f.moveTo(S,T-ee/2),f.lineTo(S,T+ee/2),f.stroke();for(let G=0;G<3;G++){const pe=T+ee/2+G*V,ke=Z*(1-G*.25);f.beginPath(),f.moveTo(S-ke/2,pe),f.lineTo(S+ke/2,pe),f.stroke()}}else{const L=z*.8;f.beginPath(),f.arc(S,T,z,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(S,T-z-L),f.lineTo(S,T+z+L),f.stroke(),f.beginPath(),f.moveTo(S-z-L,T),f.lineTo(S+z+L,T),f.stroke()}}else if(a==="power"){const Q=St.get("power");f.strokeStyle=Q.color,f.lineWidth=2,f.lineCap="round";const oe=z*.8;f.beginPath(),f.arc(S,T,z,0,Math.PI*2),f.stroke(),f.beginPath(),f.moveTo(S,T-z-oe),f.lineTo(S,T+z+oe),f.stroke(),f.beginPath(),f.moveTo(S-z-oe,T),f.lineTo(S+z+oe,T),f.stroke()}else if(a==="component"){const oe=(pn||"top")==="top"?"componentTop":"componentBottom",ee=St.get(oe).color,V=p,Z=V/2;f.strokeStyle=ee,f.lineWidth=2,f.fillStyle="rgba(255,255,255,0.9)",f.beginPath(),f.rect(S-Z,T-Z,V,V),f.fill(),f.stroke();const G=Ui?Af(Ui):"?";f.fillStyle=ee,f.font=`bold ${Math.max(8,V*.35)}px sans-serif`,f.textAlign="center",f.textBaseline="middle",f.fillText(G,S,T)}const I=`url(${b.toDataURL()}) ${Math.round(S)} ${Math.round(T)}, crosshair`;ha(I)},[A,we,$,k,Oe,So,Ui,Pt,sl,ct,Dt,zt,en,tn,pn,Hn.toolInstanceId,Hn.color,Hn.size]),Pe.useEffect(()=>{co()},[co]),Pe.useEffect(()=>{co()},[wo.width,wo.height]),Pe.useEffect(()=>{vt.size===0&&A==="draw"&&we==="trace"&&k>=1&&(yt==="top"?Xe(k):_(k))},[k,A,we,yt,vt]),Pe.useEffect(()=>{Vt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=ci(p,ct);if(r.viaType!==x)return{...r,viaType:x}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=Al(p,ct);if(r.padType!==x)return{...r,padType:x}}else if(r.type==="testPoint"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=Jl(p,ct),v=x.includes("Power")?"power":x.includes("Ground")?"ground":x.includes("Signal")?"signal":"unknown";if(r.testPointType!==v)return{...r,testPointType:v}}return r}))},[Je,nt,ct,ci,Al,Jl]);const Xc=w.useCallback(()=>{const a=hn.current;if(!a)return;const r=a.toDataURL("image/png"),p=window.open("","_blank");if(!p){alert("Please allow popups to print the canvas.");return}p.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>PCB Drawing</title>
          <style>
            @media print {
              @page {
                margin: 0;
                size: auto;
              }
              body {
                margin: 0;
                padding: 0;
              }
            }
            body {
              margin: 0;
              padding: 20px;
              display: flex;
              justify-content: center;
              align-items: center;
              background: white;
            }
            img {
              max-width: 100%;
              height: auto;
              display: block;
            }
          </style>
        </head>
        <body>
          <img src="${r}" alt="PCB Drawing" onload="window.setTimeout(function() { window.print(); }, 250);" />
        </body>
      </html>
    `),p.document.close()},[]);Pe.useEffect(()=>{const a=p=>{p.key==="Shift"&&tr(!0)},r=p=>{p.key==="Shift"&&tr(!1)};return window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}},[]);const Gc=w.useCallback(a=>{if(a.size===0)return;const r=Array.from(a).map(p=>String(p));Vt(p=>p.map(x=>{if(x.type==="trace"){const v=x.points.filter(b=>b.id===void 0?!0:!a.has(b.id));return v.length<2?null:{...x,points:v}}return x}).filter(x=>x!==null)),sn(p=>p.map(x=>{const v=x.pinConnections||[];if(v.some(f=>f&&r.includes(f))){const f=v.map(S=>S&&r.includes(S)?"":S);return{...x,pinConnections:f}}return x})),At(p=>p.map(x=>{const v=x.pinConnections||[];if(v.some(f=>f&&r.includes(f))){const f=v.map(S=>S&&r.includes(S)?"":S);return{...x,pinConnections:f}}return x}))},[Vt,sn,At]),qc=w.useRef(new Set);Pe.useEffect(()=>{const a=new Set;for(const p of Ve)if((p.type==="via"||p.type==="pad")&&p.points.length>0){const x=p.points[0].id;x!==void 0&&a.add(x)}const r=new Set;for(const p of qc.current)a.has(p)||r.add(p);r.size>0&&Gc(r),qc.current=a},[Ve,Gc]),Pe.useEffect(()=>{Vt(a=>a.map(r=>{if(r.type==="via"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=ci(p,ct);if(r.viaType!==x)return{...r,viaType:x}}else if(r.type==="pad"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=Al(p,ct);if(r.padType!==x)return{...r,padType:x}}else if(r.type==="testPoint"&&r.points.length>0&&r.points[0].id!==void 0){const p=r.points[0].id,x=Jl(p,ct),v=x.includes("Power")?"power":x.includes("Ground")?"ground":x.includes("Signal")?"signal":"unknown";if(r.testPointType!==v)return{...r,testPointType:v}}return r}))},[Je,nt,ct,ci,Al,Jl]),Pe.useEffect(()=>{const a=r=>{rr.current&&(rr.current.contains(r.target)||Nc(null))};return document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[]),Pe.useEffect(()=>{const a=(r,p)=>{const x=r.current;if(!x)return;const v=x.getContext("2d");if(!v)return;const b=x.width,f=x.height;if(v.clearRect(0,0,b,f),v.fillStyle="#fff",v.fillRect(0,0,b,f),p?.bitmap){const S=p.bitmap,T=Math.min(b/S.width,f/S.height),z=Math.max(1,Math.floor(S.width*T)),I=Math.max(1,Math.floor(S.height*T)),Q=Math.floor((b-z)/2),oe=Math.floor((f-I)/2);v.drawImage(S,Q,oe,z,I)}v.strokeStyle="#ddd",v.lineWidth=1,v.strokeRect(.5,.5,b-1,f-1)};a(cr,y),a(dr,U)},[y,U]),Pe.useEffect(()=>{const a=[],r=[],p=[],x=[];for(const v of Ve)if(v.type==="via"&&v.points.length>=1){const b=v.points[0],f={id:v.id,pointId:b.id,x:b.x,y:b.y,size:v.size,color:v.color};a.push(f)}else if(v.type==="pad"&&v.points.length>=1){const b=v.points[0],f={id:v.id,pointId:b.id,x:b.x,y:b.y,size:v.size,color:v.color,layer:v.layer||"top"};r.push(f)}else if(v.type==="trace"&&v.points.length>=2)for(let b=0;b<v.points.length-1;b++){const f=v.points[b],S=v.points[b+1],T={id:v.id,startPointId:f.id,endPointId:S.id,x1:f.x,y1:f.y,x2:S.x,y2:S.y,size:v.size,color:v.color};v.layer==="top"?p.push(T):x.push(T)}dn(a),Vn(r),Ea(p),Dr(x)},[Ve]);const mr=w.useRef(Ve);mr.current=Ve;const la=w.useCallback(()=>{const r=new Date().toISOString(),p=rx();return{project:{version:1,fileType:"PCB_REVERSE_ENGINEERING_AUTOSAVE",savedAt:r,view:{currentView:Ce,viewScale:Oe,viewPan:wt,showBothLayers:On,selectedDrawingLayer:yt},images:{top:y?{name:y.name,width:y.width,height:y.height,filePath:y.filePath||y.name,dataUrl:y.dataUrl,x:y.x,y:y.y,scale:y.scale,rotation:y.rotation,flipX:y.flipX,flipY:y.flipY,skewX:y.skewX,skewY:y.skewY,keystoneV:y.keystoneV,keystoneH:y.keystoneH,brightness:y.brightness??100,contrast:y.contrast??100}:null,bottom:U?{name:U.name,width:U.width,height:U.height,filePath:U.filePath||U.name,dataUrl:U.dataUrl,x:U.x,y:U.y,scale:U.scale,rotation:U.rotation,flipX:U.flipX,flipY:U.flipY,skewX:U.skewX,skewY:U.skewY,keystoneV:U.keystoneV,keystoneH:U.keystoneH,brightness:U.brightness??100,contrast:U.contrast??100}:null},projectDirectoryName:js.current?js.current.name||null:Fn&&Fn.name||null,drawing:{drawingStrokes:mr.current.filter(v=>!(v.type==="trace"&&v.points.length<2)),vias:Vi,tracesTop:Bn,tracesBottom:qo,componentsTop:mt,componentsBottom:ot,grounds:nt,powers:Je},powerBuses:ct,groundBuses:Xn,pointIdCounter:Sh(),designatorCounters:jc(),autoAssignDesignators:Zl,useGlobalDesignatorCounters:rl,traceColors:{top:Dt.get("trace")?.layerSettings.get("top")?.color||m,bottom:Dt.get("trace")?.layerSettings.get("bottom")?.color||q},traceSizes:{top:Dt.get("trace")?.layerSettings.get("top")?.size||Ee,bottom:Dt.get("trace")?.layerSettings.get("bottom")?.size||re},padColors:{top:Dt.get("pad")?.layerSettings.get("top")?.color||P,bottom:Dt.get("pad")?.layerSettings.get("bottom")?.color||he},padSizes:{top:Dt.get("pad")?.layerSettings.get("top")?.size||C,bottom:Dt.get("pad")?.layerSettings.get("bottom")?.size||le},componentColors:{top:Dt.get("component")?.layerSettings.get("top")?.color||pi,bottom:Dt.get("component")?.layerSettings.get("bottom")?.color||Jn},componentSizes:{top:Dt.get("component")?.layerSettings.get("top")?.size||Ei,bottom:Dt.get("component")?.layerSettings.get("bottom")?.size||hi},traceToolLayer:zt,toolSettings:{trace:Dt.get("trace")?.settings||{color:"#ff0000",size:6},via:Dt.get("via")?.settings||{color:"#ff0000",size:18},pad:Dt.get("pad")?.settings||{color:"#ff0000",size:18},component:Dt.get("component")?.settings||{color:"#ff0000",size:18},ground:Dt.get("ground")?.settings||{color:"#000000",size:18},power:Dt.get("power")?.settings||{color:"#ff0000",size:18},erase:Dt.get("erase")?.settings||{color:"#f5a3b3",size:18}},locks:{areImagesLocked:ii,areViasLocked:li,arePadsLocked:Fi,areTracesLocked:ai,areComponentsLocked:Ci,areGroundNodesLocked:zi,arePowerNodesLocked:yn},visibility:{showViasLayer:Bi,showTopPadsLayer:qn,showBottomPadsLayer:al,showTopTracesLayer:Mi,showBottomTracesLayer:Yi,showTopComponents:Gi,showBottomComponents:Mn,showPowerLayer:mi,showGroundLayer:Dl,showConnectionsLayer:za},autoSave:{enabled:ki,interval:Sl,baseName:ba},projectInfo:{name:oi},projectNotes:cs,savedCenterLocation:Ai,toolInstances:St.getAll()},timestamp:p}},[Ce,Oe,wt,On,yt,y,U,Ve,Vi,Bn,qo,mt,ot,nt,Dt,ii,li,Fi,ai,Ci,zi,yn,ct,Xn,Sh,m,q,Ee,re,P,he,C,le,pi,Jn,Ei,hi,zt,ki,Sl,ba,oi,Bi,qn,al,Mi,Yi,Gi,Mn,mi,Dl,za,Zl,rl,cs,Ai]),Zc=w.useRef(la);Zc.current=la;const ws=w.useRef(wl);ws.current=wl;const Aa=w.useRef(ba);Aa.current=ba;const Uo=w.useRef(Ri);Uo.current=Ri;const Qc=w.useRef(es);Qc.current=es;const Zn=w.useRef([]);Zn.current=ku;const Na=w.useRef(-1);Na.current=Dd;const js=w.useRef(null),Sr=w.useRef(!1);Pe.useEffect(()=>{Sr.current||(js.current=Fn)},[Fn]);const Kc=w.useCallback(async()=>{console.log("Auto save: performAutoSave called");let a=js.current,r=Aa.current;if(console.log(`Auto save: projectDirHandle=${a?`set (${a.name})`:"missing"}, baseName=${r||"missing"}`),!a||!r){console.warn(`Auto save: Missing project directory handle (${!a}) or base name (${!r}). Please create a new project or open an existing project first.`),vi(!1),$t.current&&(clearInterval($t.current),$t.current=null);return}if(!Tl.current){console.log("Auto save: Skipping - no changes since last save");return}const p=mr.current,x=p.filter(I=>I.type==="trace"&&I.points.length<2);if(x.length>0){console.log(`Auto save: Cleaning up ${x.length} single-point trace(s) before save`),x.forEach(Q=>console.log(`  - Removing single-point trace ${Q.id}`));const I=p.filter(Q=>!(Q.type==="trace"&&Q.points.length<2));Vt(I),mr.current=I}console.log("Auto save: Starting save...");const{project:v,timestamp:b}=Zc.current(),S=`${Sc(r)}_${b}.json`,T=JSON.stringify(v,null,2),z=new Blob([T],{type:"application/json"});try{let I;try{I=await a.getDirectoryHandle("history",{create:!0})}catch(V){console.error("Failed to get/create history directory:",V);return}try{const V=[],Z=Qc.current;for await(const G of a.keys())try{if(G==="history"||G===S)continue;const ke=await(await a.getFileHandle(G)).getFile();if(!G.endsWith(".json"))continue;const Te=await ke.text();try{const se=JSON.parse(Te);if(se.version&&(se.fileType==="PCB_REVERSE_ENGINEERING_AUTOSAVE"||!se.fileType)){V.push(G);const _e=se.fileType?"auto-saved":"manually saved/opened";console.log(`Auto save: Found PCB project file in root: ${G} (${_e}${G===Z?" - this is the opened file":""})`)}}catch{continue}}catch{continue}for(const G of V)try{const Te=await(await(await a.getFileHandle(G)).getFile()).text(),_e=await(await I.getFileHandle(G,{create:!0})).createWritable();await _e.write(new Blob([Te],{type:"application/json"})),await _e.close(),await a.removeEntry(G),console.log(`Auto save: Moved ${G} from root to history/`)}catch(pe){console.warn(`Auto save: Failed to move ${G} to history:`,pe)}}catch(V){console.warn("Auto save: Error checking for old files in root:",V)}const oe=await(await a.getFileHandle(S,{create:!0})).createWritable();await oe.write(z),await oe.close(),console.log(`Auto save: Successfully saved ${S} to root directory`),Uo.current(S);const L=Zn.current,ee=[S,...L.filter(V=>V!==S)].sort((V,Z)=>Z.localeCompare(V));Js(ee),Zn.current=ee,Di(0),Na.current=0,Tl.current=!1}catch(I){console.error("Auto save failed:",I)}},[]);er.current=Kc;const lc=w.useCallback(async()=>{const{project:a}=la(),r=JSON.stringify(a,null,2),p=new Blob([r],{type:"application/json"});if(Fn&&oi)try{let z=null;try{z=await Fn.getDirectoryHandle("history",{create:!0})}catch(Z){console.error("Failed to get/create history directory:",Z),z=null}const I=oi.replace(/\.json$/i,""),Q=Sc(I),{timestamp:oe}=la(),L=`${Q}_${oe}.json`;if(z)try{const Z=[];for await(const G of Fn.keys())try{if(G==="history"||G===L)continue;const ke=await(await Fn.getFileHandle(G)).getFile();if(!G.endsWith(".json"))continue;const Te=await ke.text();try{JSON.parse(Te).version&&(Z.push(G),console.log(`Save: Found PCB project file in root: ${G}`))}catch{continue}}catch{continue}for(const G of Z)try{const Te=await(await(await Fn.getFileHandle(G)).getFile()).text(),_e=await(await z.getFileHandle(G,{create:!0})).createWritable();await _e.write(new Blob([Te],{type:"application/json"})),await _e.close(),await Fn.removeEntry(G),console.log(`Save: Moved ${G} from root to history/`)}catch(pe){console.warn(`Save: Failed to move ${G} to history:`,pe)}}catch(Z){console.warn("Save: Error checking for old files in root:",Z)}const V=await(await Fn.getFileHandle(L,{create:!0})).createWritable();await V.write(p),await V.close(),Ri(L),console.log(`Project saved: ${oi}/${L}`);return}catch(z){console.error("Failed to save to project directory:",z),va(null)}if(oi&&!Fn){const z=window;if(typeof z.showDirectoryPicker=="function")try{const I=await z.showDirectoryPicker();va(I);const Q=`${oi}.json`,L=await(await I.getFileHandle(Q,{create:!0})).createWritable();await L.write(p),await L.close(),Ri(Q),console.log(`Project saved: ${Q} in selected directory`);return}catch(I){I?.name!=="AbortError"&&console.error("Failed to get directory:",I)}}const x=z=>String(z).padStart(2,"0"),v=new Date,f=`pcb_project_${`${v.getFullYear()}_${x(v.getMonth()+1)}_${x(v.getDate())}_${x(v.getHours())}_${x(v.getMinutes())}_${x(v.getSeconds())}`}.json`,S=window;if(typeof S.showSaveFilePicker=="function")try{const z=await S.showSaveFilePicker({suggestedName:f,types:[{description:"PCB Project",accept:{"application/json":[".json"]}}]}),I=await z.createWritable();await I.write(p),await I.close();const Q=z.name;try{const ee=await z.getFile();Ri(ee.name)}catch{Ri(Q)}const L=Q.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");L&&(jl(L),localStorage.setItem("pcb_project_name",L));try{const ee=z.name.replace(/\.json$/i,""),Z=Sc(ee).replace(/[^a-zA-Z0-9_-]/g,"_");tl(Z),wl||console.log("Auto save: Directory handle not set. Will prompt on first auto save.")}catch(ee){console.warn("Could not set up auto save for new file:",ee)}return}catch(z){if(z?.name==="AbortError")return;console.warn("showSaveFilePicker failed, falling back to download",z)}const T=document.createElement("a");T.href=URL.createObjectURL(p),T.download=f,document.body.appendChild(T),T.click(),setTimeout(()=>{URL.revokeObjectURL(T.href),document.body.removeChild(T)},0)},[la]);Pe.useEffect(()=>{$t.current&&(clearInterval($t.current),$t.current=null);const a=Or.current;if(Or.current=ki,ki&&Sl){const r=Sl*60*1e3;wl&&ba?(console.log(`Auto save: Setting up interval for ${Sl} minute(s) (${r}ms)`),a||(Tl.current=!0,setTimeout(()=>{Kc()},100)),$t.current&&(clearInterval($t.current),$t.current=null),$t.current=window.setInterval(()=>{console.log("Auto save: Interval triggered, calling performAutoSave..."),console.log(`  - hasChangesSinceLastAutoSave: ${Tl.current}`),console.log(`  - dirHandle: ${ws.current?"set":"missing"}`),console.log(`  - baseName: ${Aa.current||"missing"}`),Kc()},r),console.log(`Auto save: Interval set up for ${r}ms (${Sl} minutes)`),console.log(`  - Directory handle: ${wl?"set":"missing"}`),console.log(`  - Base name: ${ba||"missing"}`)):(console.warn(`Auto save: Cannot set up interval - missing directory handle (${!wl}) or base name (${!ba}). Disabling auto save.`),vi(!1),$t.current&&(clearInterval($t.current),$t.current=null))}else ki||(Or.current=!1);return()=>{$t.current&&(clearInterval($t.current),$t.current=null)}},[ki,Sl,wl,ba]);const Ts=w.useRef(!1);Pe.useEffect(()=>{if(!ki){Ts.current=!1;return}if(Ts.current){Ts.current=!1,console.log("Auto save: Skipping change tracking on first run after enable (initial save handled separately)");return}Tl.current=!0,console.log("Auto save: Change detected, marking for save",{topImage:!!y,bottomImage:!!U,drawingStrokesCount:Ve.length,componentsTopCount:mt.length,componentsBottomCount:ot.length,powersCount:Je.length,groundsCount:nt.length,powerBusesCount:ct.length,projectNotesCount:cs.length,areImagesLocked:ii,areViasLocked:li,areTracesLocked:ai,areComponentsLocked:Ci,areGroundNodesLocked:zi,arePowerNodesLocked:yn})},[y,U,Ve,mt,ot,Je,nt,ct,cs,m,q,Ee,re,ii,li,ai,Ci,zi,yn,ki]),Pe.useEffect(()=>{ki?(Ts.current=!0,console.log("Auto save: Enabled, marking first run")):Ts.current=!1},[ki]),Pe.useEffect(()=>{ki||(Tl.current=!1)},[ki]);const Id=w.useCallback(()=>!!(y||U||Ve.length>0||mt.length>0||ot.length>0||Je.length>0||nt.length>0),[y,U,Ve,mt,ot,Je,nt]);Pe.useEffect(()=>{const a=localStorage.getItem("pcb_project_name");a&&jl(a)},[]);const Cs=w.useCallback(()=>{Jo({visible:!0,projectName:"",locationPath:"",locationHandle:null})},[]),Vd=w.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Jo(p=>({...p,locationHandle:r,locationPath:r.name||"Selected folder"})),localStorage.setItem("pcb_project_location_path",r.name||"")}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser like Chrome or Edge.")},[]),ac=w.useCallback(async()=>{const a=un.projectName.trim();if(!a){alert("Please enter a project name.");return}const r=a.replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project";if(!un.locationHandle){alert("Please select a location for the project.");return}const p=un.locationHandle;let x;try{x=await p.getDirectoryHandle(r,{create:!0})}catch(v){console.error("Failed to create project folder:",v),alert(`Failed to create project folder "${r}". See console for details.`);return}Jo({visible:!1,projectName:"",locationPath:"",locationHandle:null}),jl(r),va(x),localStorage.setItem("pcb_project_name",r),localStorage.setItem("pcb_project_location_path",p.name||""),u(null),X(null),Vt([]),sn([]),At([]),Gn([]),Wi([]),jt(new Set),ft(new Set),tt(new Set),bt(new Set),be("overlay"),Ii(1),Ln({x:0,y:0}),Tl.current=!1,Ri(""),vi(!1),ya(null),Ya(null),tl(""),$t.current&&(clearInterval($t.current),$t.current=null),Ss();try{const{project:v,timestamp:b}=la(),S=`${Sc(r)}_${b}.json`,T=JSON.stringify(v,null,2),z=new Blob([T],{type:"application/json"}),Q=await(await x.getFileHandle(S,{create:!0})).createWritable();await Q.write(z),await Q.close(),Ri(S),console.log(`New project created: ${r}/${S}`),Ll({visible:!0,source:"new",interval:5})}catch(v){console.error("Failed to save new project:",v),alert("Failed to save new project file. See console for details.")}},[Ss,la,un]),oc=w.useCallback(()=>{Jo({visible:!1,projectName:"",locationPath:"",locationHandle:null})},[]),Wd=w.useCallback(()=>{const a=oi?`${oi}.json`:"";Ks({visible:!0,filename:a,locationPath:"",locationHandle:null}),setTimeout(()=>{if(wa.current?.focus(),wa.current&&a){const r=a.replace(/\.json$/i,"");wa.current.setSelectionRange(0,r.length)}},100)},[oi]),Jc=w.useCallback(async()=>{const a=window;if(typeof a.showDirectoryPicker=="function")try{const r=await a.showDirectoryPicker();Ks(p=>({...p,locationHandle:r,locationPath:r.name||"Selected folder"}))}catch(r){r?.name!=="AbortError"&&(console.error("Failed to get directory:",r),alert("Failed to select location directory."))}else alert("Directory picker is not supported in this browser. Please use a modern browser that supports the File System Access API.")},[]),ed=w.useCallback(async()=>{const a=Qt.filename.trim();if(!a){alert("Please enter a file name.");return}const p=(a.endsWith(".json")?a:`${a}.json`).replace(/[^a-zA-Z0-9_.-]/g,"_");if(!Qt.locationHandle){alert("Please select a location for the file.");return}const x=Qt.locationHandle;try{const{project:v}=la(),b=JSON.stringify(v,null,2),f=new Blob([b],{type:"application/json"}),T=await(await x.getFileHandle(p,{create:!0})).createWritable();await T.write(f),await T.close(),Ri(p);const z=p.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_");z&&(jl(z),localStorage.setItem("pcb_project_name",z)),va(x),Ks({visible:!1,filename:"",locationPath:"",locationHandle:null}),Nc(null),console.log(`Project saved as: ${p} in selected directory`)}catch(v){console.error("Failed to save project:",v),alert(`Failed to save project file "${p}". See console for details.`)}},[Qt,la]),sc=w.useCallback(()=>{Ks({visible:!1,filename:"",locationPath:"",locationHandle:null})},[]),td=w.useCallback(async()=>{Ko({visible:!1}),await lc(),Cs(),uo()},[lc,Cs,uo]),nd=w.useCallback(()=>{Ko({visible:!1}),Cs(),uo()},[Cs,uo]),id=w.useCallback(()=>{Ko({visible:!1})},[]);Pe.useEffect(()=>{if(Pr.visible){setTimeout(()=>{sr.current?.focus()},0);const a=r=>{r.key==="Enter"?(r.preventDefault(),td()):r.key==="Escape"&&(r.preventDefault(),Ko({visible:!1}))};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}}},[Pr.visible,td]);const zs=w.useCallback(async a=>{try{if(a.toolInstances?St.initializeFromProject(a):St.initialize(),a.projectInfo)a.projectInfo.name&&(jl(a.projectInfo.name),localStorage.setItem("pcb_project_name",a.projectInfo.name));else{const b=localStorage.getItem("pcb_project_name");b&&jl(b)}if(a.view&&(a.view.currentView&&be(a.view.currentView),a.view.viewScale!=null&&Ii(a.view.viewScale),a.view.viewPan&&Ln(a.view.viewPan),a.view.showBothLayers!=null&&ei(a.view.showBothLayers),a.view.selectedDrawingLayer&&_n(a.view.selectedDrawingLayer)),a.savedCenterLocation?nr(a.savedCenterLocation):nr(null),a.projectNotes&&Array.isArray(a.projectNotes)?Hc(a.projectNotes):Hc([]),a.traceColors&&(a.traceColors.top&&(ue(a.traceColors.top),Ct("trace",a.traceColors.top,"top")),a.traceColors.bottom&&(Be(a.traceColors.bottom),Ct("trace",a.traceColors.bottom,"bottom"))),a.traceSizes){const b=a.traceSizes.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let f=a.traceSizes.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;f<6&&(f=6),Xe(b),_(f),Ge("trace",b,"top"),Ge("trace",f,"bottom")}else Xe(6),_(6);if(a.padColors&&(a.padColors.top&&(F(a.padColors.top),Ct("pad",a.padColors.top,"top")),a.padColors.bottom&&(W(a.padColors.bottom),Ct("pad",a.padColors.bottom,"bottom"))),a.padSizes){const b=a.padSizes.top!=null&&a.padSizes.top>0?a.padSizes.top:18,f=a.padSizes.bottom!=null&&a.padSizes.bottom>0?a.padSizes.bottom:18;H(b),me(f),Ge("pad",b,"top"),Ge("pad",f,"bottom")}if(a.componentColors&&(a.componentColors.top&&(Kn(a.componentColors.top),Ct("component",a.componentColors.top,"top")),a.componentColors.bottom&&(Ji(a.componentColors.bottom),Ct("component",a.componentColors.bottom,"bottom"))),a.componentSizes){const b=a.componentSizes.top!=null&&a.componentSizes.top>0?a.componentSizes.top:18,f=a.componentSizes.bottom!=null&&a.componentSizes.bottom>0?a.componentSizes.bottom:18;_l(b),yl(f),Ge("component",b,"top"),Ge("component",f,"bottom")}if(a.traceToolLayer&&(_a(a.traceToolLayer),A==="draw"&&we==="trace")){const b=a.traceToolLayer;D(b==="top"?a.traceColors?.top||m:a.traceColors?.bottom||q);const f=a.traceSizes?.top!=null&&a.traceSizes.top>0?a.traceSizes.top:6;let S=a.traceSizes?.bottom!=null&&a.traceSizes.bottom>0?a.traceSizes.bottom:6;S<6&&(S=6),R(b==="top"?f:S)}a.toolSettings&&An(b=>{const f=new Map(b);if(a.toolSettings.trace){const T=f.get("trace");if(T){const z={...T,settings:a.toolSettings.trace},I=new Map(T.layerSettings);a.traceSizes&&a.traceColors&&(I.set("top",{color:a.traceColors.top||T.layerSettings.get("top")?.color||"#AA4499",size:a.traceSizes.top||T.layerSettings.get("top")?.size||6}),I.set("bottom",{color:a.traceColors.bottom||T.layerSettings.get("bottom")?.color||"#F781BF",size:a.traceSizes.bottom||T.layerSettings.get("bottom")?.size||6})),f.set("trace",{...z,layerSettings:I})}}if(a.toolSettings.via){const T=f.get("via");T&&f.set("via",{...T,settings:a.toolSettings.via})}if(a.toolSettings.pad){const T=f.get("pad");if(T){const z={...T,settings:a.toolSettings.pad},I=new Map(T.layerSettings);a.padSizes&&a.padColors&&(I.set("top",{color:a.padColors.top||T.layerSettings.get("top")?.color||"#0072B2",size:a.padSizes.top||T.layerSettings.get("top")?.size||18}),I.set("bottom",{color:a.padColors.bottom||T.layerSettings.get("bottom")?.color||"#56B4E9",size:a.padSizes.bottom||T.layerSettings.get("bottom")?.size||18})),f.set("pad",{...z,layerSettings:I})}}if(a.toolSettings.component){const T=f.get("component");if(T){const z={...T,settings:a.toolSettings.component},I=new Map(T.layerSettings);a.componentSizes&&a.componentColors&&(I.set("top",{color:a.componentColors.top||T.layerSettings.get("top")?.color||"#6A3D9A",size:a.componentSizes.top||T.layerSettings.get("top")?.size||18}),I.set("bottom",{color:a.componentColors.bottom||T.layerSettings.get("bottom")?.color||"#9467BD",size:a.componentSizes.bottom||T.layerSettings.get("bottom")?.size||18})),f.set("component",{...z,layerSettings:I})}}if(a.toolSettings.ground){const T=f.get("ground");T&&f.set("ground",{...T,settings:a.toolSettings.ground})}if(a.toolSettings.power){const T=f.get("power");T&&f.set("power",{...T,settings:a.toolSettings.power})}if(a.toolSettings.erase){const T=f.get("erase");T&&f.set("erase",{...T,settings:a.toolSettings.erase})}const S=A==="draw"&&we==="trace"?f.get("trace"):A==="draw"&&we==="via"?f.get("via"):A==="draw"&&we==="pad"?f.get("pad"):A==="component"?f.get("component"):A==="power"?f.get("power"):A==="ground"?f.get("ground"):null;if(S)if(A==="draw"&&we==="trace"){const T=zt||"top",z=S.layerSettings.get(T);z?(D(z.color),R(z.size),T==="top"?(ue(z.color),Xe(z.size)):(Be(z.color),_(z.size))):(D(S.settings.color),R(S.settings.size))}else if(A==="draw"&&we==="pad"){const T=en||"top",z=S.layerSettings.get(T);z?(D(z.color),R(z.size),T==="top"?(F(z.color),H(z.size)):(W(z.color),me(z.size))):(D(S.settings.color),R(S.settings.size))}else if(A==="component"){const T=pn||"top",z=S.layerSettings.get(T);z?(D(z.color),R(z.size),T==="top"?(Kn(z.color),_l(z.size)):(Ji(z.color),yl(z.size))):(D(S.settings.color),R(S.settings.size))}else D(S.settings.color),R(S.settings.size);return f});const r=async(b,f)=>{if(!b)return null;let S=null,T="",z=b.filePath||b.name;if(z&&f)try{const Q=await(await f.getFileHandle(z)).getFile();S=await createImageBitmap(Q),T=URL.createObjectURL(Q),console.log(`Loaded image from file path: ${z}`)}catch(I){console.warn(`Failed to load image from file path ${z}, falling back to dataUrl:`,I)}if(!S&&b.dataUrl)try{const I=await(await fetch(b.dataUrl)).blob();S=await createImageBitmap(I),T=b.dataUrl,console.log("Loaded image from dataUrl (backward compatibility)")}catch(I){console.error("Failed to load image from dataUrl:",I)}return S?{url:T,name:b.name??"image",width:b.width??S.width,height:b.height??S.height,dataUrl:b.dataUrl,filePath:z,x:b.x??0,y:b.y??0,scale:b.scale??1,rotation:b.rotation??0,flipX:!!b.flipX,flipY:!!b.flipY,skewX:b.skewX??0,skewY:b.skewY??0,keystoneV:b.keystoneV??0,keystoneH:b.keystoneH??0,brightness:b.brightness??100,contrast:b.contrast??100,bitmap:S}:(console.warn("Could not load image bitmap"),null)},p=await r(a.images?.top,Fn),x=await r(a.images?.bottom,Fn);if(u(p),X(x),a.pointIdCounter&&typeof a.pointIdCounter=="number")vu(a.pointIdCounter);else{let b=0;if(a.drawing?.drawingStrokes){for(const S of a.drawing.drawingStrokes)if(S.points)for(const T of S.points)T.id&&typeof T.id=="number"&&T.id>b&&(b=T.id)}const f=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]];for(const S of f)if(S.pinConnections){for(const T of S.pinConnections)if(T){const z=parseInt(T.trim(),10);!isNaN(z)&&z>b&&(b=z)}}if(a.drawing?.powers)for(const S of a.drawing.powers)S.pointId&&typeof S.pointId=="number"&&S.pointId>b&&(b=S.pointId);if(a.drawing?.grounds)for(const S of a.drawing.grounds)S.pointId&&typeof S.pointId=="number"&&S.pointId>b&&(b=S.pointId);vu(b+1)}if(a.locks&&(typeof a.locks.areImagesLocked=="boolean"?Gs(a.locks.areImagesLocked):typeof a.locks.isImagesLocked=="boolean"&&Gs(a.locks.isImagesLocked),typeof a.locks.areViasLocked=="boolean"&&Br(a.locks.areViasLocked),typeof a.locks.arePadsLocked=="boolean"&&Ac(a.locks.arePadsLocked),typeof a.locks.areTracesLocked=="boolean"&&Mr(a.locks.areTracesLocked),typeof a.locks.areComponentsLocked=="boolean"&&Zo(a.locks.areComponentsLocked),typeof a.locks.areGroundNodesLocked=="boolean"?qs(a.locks.areGroundNodesLocked):typeof a.locks.isGroundLocked=="boolean"&&qs(a.locks.isGroundLocked),typeof a.locks.arePowerNodesLocked=="boolean"&&Zs(a.locks.arePowerNodesLocked)),a.visibility&&(typeof a.visibility.showViasLayer=="boolean"&&si(a.visibility.showViasLayer),typeof a.visibility.showTopPadsLayer=="boolean"&&ns(a.visibility.showTopPadsLayer),typeof a.visibility.showBottomPadsLayer=="boolean"&&is(a.visibility.showBottomPadsLayer),typeof a.visibility.showTopTracesLayer=="boolean"&&ll(a.visibility.showTopTracesLayer),typeof a.visibility.showBottomTracesLayer=="boolean"&&Co(a.visibility.showBottomTracesLayer),typeof a.visibility.showTopComponents=="boolean"&&Ta(a.visibility.showTopComponents),typeof a.visibility.showBottomComponents=="boolean"&&ri(a.visibility.showBottomComponents),typeof a.visibility.showPowerLayer=="boolean"&&qi(a.visibility.showPowerLayer),typeof a.visibility.showGroundLayer=="boolean"&&Ca(a.visibility.showGroundLayer),typeof a.visibility.showConnectionsLayer=="boolean"&&Ql(a.visibility.showConnectionsLayer)),a.autoSave?(typeof a.autoSave.enabled=="boolean"&&vi(a.autoSave.enabled),typeof a.autoSave.interval=="number"&&ya(a.autoSave.interval),typeof a.autoSave.baseName=="string"&&a.autoSave.baseName?(tl(a.autoSave.baseName),Aa.current=a.autoSave.baseName,a.autoSave.enabled&&!wl&&(console.log("Auto save: Directory handle not available after page reload (expected). Auto save disabled. Use File -> Auto Save -> Enable to re-enable."),vi(!1),ya(null))):a.autoSave.enabled&&(console.warn("Auto save was enabled in project file but base name is missing. Disabling auto save."),vi(!1),ya(null),tl(""),Aa.current="")):(vi(!1),ya(null),Ya(null),tl(""),ws.current=null,Aa.current="",$t.current&&(clearInterval($t.current),$t.current=null)),a.drawing?.drawingStrokes&&Array.isArray(a.drawing.drawingStrokes)){const b=a.drawing.drawingStrokes.map(f=>({...f,points:f.points.map(S=>({...S,...Ht(S)}))})).filter(f=>!(f.type==="trace"&&f.points.length<2));Vt(b)}else{const b=[],f=(z,I)=>{const Q=Ht({x:z.x,y:z.y});b.push({id:z.id||`${Date.now()}-via-${Math.random()}`,points:[{id:z.pointId||Oi(),x:Q.x,y:Q.y}],color:z.color,size:z.size,layer:I,type:"via"})},S=(z,I)=>{const Q=Ht({x:z.x1,y:z.y1}),oe=Ht({x:z.x2,y:z.y2});b.push({id:z.id||`${Date.now()}-trace-${Math.random()}`,points:[{id:z.startPointId||Oi(),x:Q.x,y:Q.y},{id:z.endPointId||Oi(),x:oe.x,y:oe.y}],color:z.color,size:z.size,layer:I,type:"trace"})};a.drawing?.vias?a.drawing.vias.forEach(z=>f(z,"top")):((a.drawing?.viasTop??[]).forEach(z=>f(z,"top")),(a.drawing?.viasBottom??[]).forEach(z=>f(z,"bottom"))),(a.drawing?.tracesTop??[]).forEach(z=>S(z,"top")),(a.drawing?.tracesBottom??[]).forEach(z=>S(z,"bottom"));const T=b.filter(z=>!(z.type==="trace"&&z.points.length<2));Vt(T)}if(a.drawing?.componentsTop){const b=a.drawing.componentsTop.map(f=>{const S=Ht({x:f.x,y:f.y});return{...f,x:S.x,y:S.y,layer:f.layer||"top",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});sn(b)}if(a.drawing?.componentsBottom){const b=a.drawing.componentsBottom.map(f=>{const S=Ht({x:f.x,y:f.y});return{...f,x:S.x,y:S.y,layer:f.layer||"bottom",pinConnections:f.pinConnections||new Array(f.pinCount||0).fill("")}});At(b)}if(a.designatorCounters&&typeof a.designatorCounters=="object"){const b=a.designatorCounters;mu(b)}else{const b=[...a.drawing?.componentsTop||[],...a.drawing?.componentsBottom||[]],f={};for(const T of b)if(T.designator&&T.designator.trim()){const z=Su(T.componentType),I=T.designator.match(new RegExp(`^${z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(\\d+)$`));if(I){const Q=parseInt(I[1],10);(!f[z]||Q>f[z])&&(f[z]=Q)}}const S=jc();for(const[T,z]of Object.entries(f))f[T]=Math.max(z,S[T]||0);mu(f)}if(typeof a.autoAssignDesignators=="boolean"&&(ur(a.autoAssignDesignators),localStorage.setItem("autoAssignDesignators",String(a.autoAssignDesignators))),typeof a.useGlobalDesignatorCounters=="boolean"?cl(a.useGlobalDesignatorCounters):cl(!1),ko.current={},a.drawing?.grounds){const f=a.drawing.grounds.map(S=>{const T=S.pointId||Oi(),z=Ht({x:S.x,y:S.y});return{...S,pointId:T,x:z.x,y:z.y}}).filter(S=>{const T=S.y>=0&&S.x>=0&&typeof S.x=="number"&&typeof S.y=="number"&&!isNaN(S.x)&&!isNaN(S.y)&&isFinite(S.x)&&isFinite(S.y);return T||console.warn(`Filtered out invalid ground symbol at (${S.x}, ${S.y}) - likely in border area or invalid coordinates`),T});Wi(f)}let v;if(a.powerBuses&&Array.isArray(a.powerBuses)&&a.powerBuses.length>0?(v=a.powerBuses,ni(v)):(v=[{id:"powerbus-1",name:"+3V3",voltage:"+3.3",color:"#ff0000"},{id:"powerbus-2",name:"+5V",voltage:"+5.0",color:"#ff0000"}],ni(v)),a.groundBuses&&Array.isArray(a.groundBuses)&&a.groundBuses.length>0){const b=a.groundBuses.map(f=>{const{value:S,...T}=f;return T});Fl(b)}else Fl([{id:"groundbus-circuit",name:"GND",color:"#000000"},{id:"groundbus-earth",name:"Earth Ground",color:"#333333"}]);if(a.drawing?.powers){const f=a.drawing.powers.map(S=>{const T=S.pointId||Oi(),z=Ht({x:S.x,y:S.y});return S.powerBusId?{...S,pointId:T,x:z.x,y:z.y,layer:S.layer||"top"}:{...S,pointId:T,x:z.x,y:z.y,powerBusId:v.length>0?v[0].id:"default-5v",layer:S.layer||"top"}}).filter(S=>{const T=S.y>=0&&S.x>=0&&typeof S.x=="number"&&typeof S.y=="number"&&!isNaN(S.x)&&!isNaN(S.y)&&isFinite(S.x)&&isFinite(S.y);return T||console.warn(`Filtered out invalid power node at (${S.x}, ${S.y}) - likely in border area or invalid coordinates`),T});Gn(f)}Tl.current=!1}catch(r){console.error("Failed to open project",r),alert("Failed to open project file. See console for details.")}},[A,we,Fn,u,X,vu,Gs,Br,Ac,Mr,Zo,qs,Zs,si,ns,is,ll,Co,Ta,ri,qi,Ca,Ql,vi,ya,Ya,tl,Vt,sn,At,Wi,ni,Fl,Gn,Oi,Ht,Su,mu,jc,ur,cl]),fo=w.useCallback(async()=>{},[es]),wr=w.useCallback(async a=>{const r=ws.current;if(!r){console.warn("Cannot load file: no directory handle");return}try{const x=await(await r.getFileHandle(a)).getFile();if(x.size===0){console.warn(`File ${a} is empty, skipping`);const z=Zn.current.filter(I=>I!==a);Js(z),Zn.current=z;return}const v=await x.text();if(!v||v.trim().length===0){console.warn(`File ${a} contains no data, skipping`);const z=Zn.current.filter(I=>I!==a);Js(z),Zn.current=z;return}let b;try{b=JSON.parse(v)}catch(T){console.error(`Failed to parse JSON from file ${a}:`,T);const I=Zn.current.filter(Q=>Q!==a);Js(I),Zn.current=I,await fo();return}Ss(),Ii(1),document.body&&(document.body.style.zoom="1"),document.documentElement&&(document.documentElement.style.zoom="1"),jt(new Set),ft(new Set),tt(new Set),bt(new Set),uo(),await zs(b),Ri(a);const S=Zn.current.indexOf(a);S>=0?(Di(S),Na.current=S):await fo(),Tl.current=!1}catch(p){console.error("Failed to load file from history:",p);const x=Zn.current;if(x.includes(a)){const v=x.filter(b=>b!==a);Js(v),Zn.current=v,await fo()}}},[zs,fo,uo]);w.useCallback(async()=>{const a=Na.current,r=Zn.current;if(a>=0&&a<r.length-1){const p=a+1,x=r[p];x&&await wr(x)}},[wr]),w.useCallback(async()=>{const a=Na.current,r=Zn.current;if(a<=0||a>=r.length||r.length===0){console.warn("Cannot navigate to newer file: index is",a,"history length is",r.length);return}if(a>0&&a<r.length&&r.length>0){const p=a-1;if(p>=0&&p<r.length){const x=r[p];x?await wr(x):(console.warn("No newer file found at index",p),await fo())}else console.warn("Cannot navigate to newer file: prevIndex",p,"is out of bounds")}},[wr,fo]),Pe.useEffect(()=>{Hl.current=Wt},[Wt]);const rc=Pe.useRef(we),ld=Pe.useRef(yt);Pe.useEffect(()=>{const a=we!==rc.current;if(A==="draw"&&rc.current==="trace"&&a){if(Hl.current.length>=2){const r={id:`${Date.now()}-trace-autofinalize`,points:Hl.current,color:$,size:k,layer:ld.current,type:"trace"};Vt(p=>[...p,r]),ld.current==="top"?xn(p=>[...p,r.id]):el(p=>[...p,r.id])}Pn([]),Yo(!1)}rc.current=we,ld.current=yt},[we,yt,A,$,k]);const $d=Pe.useMemo(()=>["#000000","#3C3C3C","#7F7F7F","#BFBFBF","#0072B2","#56B4E9","#00BFC4","#332288","#1F77B4","#A6CEE3","#17BECF","#6A3D9A","#009E73","#B3DE69","#E69F00","#F0E442","#2CA02C","#B2DF8A","#BCBD22","#FFED6F","#E15759","#D62728","#FB9A99","#CC79A7","#AA4499","#F781BF","#9467BD","#CAB2D6","#9C755F","#8C564B","#FF7F0E","#FFFFFF"],[]);Pe.useEffect(()=>{co()},[Ve]),Pe.useEffect(()=>{co()},[mt,ot,nt,Dl]);const Le=Dd>0,jr=w.useCallback(async()=>{const a=window;if(typeof a.showOpenFilePicker=="function")try{const[r]=await a.showOpenFilePicker({multiple:!1}),p=await r.getFile();if(!p.name.toLowerCase().endsWith(".json")){alert("Please select a .json project file.");return}Ri(p.name);const x=await p.text(),v=JSON.parse(x);Sr.current=!0;let b=null;try{if(typeof r.getParent=="function")b=await r.getParent();else{console.warn("getParent() not available. Prompting user for directory access...");const T=window;if(typeof T.showDirectoryPicker=="function")b=await T.showDirectoryPicker({startIn:"documents"});else throw new Error("Directory picker not available in this browser")}if(b)try{if((await(await b.getFileHandle(p.name)).getFile()).name!==p.name)throw new Error("Directory verification failed: file name mismatch")}catch(T){throw console.error("Directory verification failed:",T),console.error("The selected directory might not contain the opened file"),new Error("Directory verification failed - selected directory does not contain the opened file")}va(b),js.current=b}catch(T){console.error("Failed to get directory handle from file handle:",T),alert("Failed to get directory access. Auto-save will not work until you enable it manually via File -> Auto Save.")}finally{setTimeout(()=>{Sr.current=!1},1e3)}const f=v.autoSave?.enabled===!0;await zs(v);let S;if(v.projectInfo?.name?S=v.projectInfo.name:(S=p.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",jl(S),localStorage.setItem("pcb_project_name",S)),oi||(jl(S),localStorage.setItem("pcb_project_name",S)),f&&b){const T=S.replace(/\.json$/i,""),I=Sc(T).replace(/[^a-zA-Z0-9_-]/g,"_");Ya(b),tl(I),ws.current=b,Aa.current=I,$t.current&&(clearInterval($t.current),$t.current=null)}setTimeout(()=>{Ll({visible:!0,source:"open",interval:5})},100)}catch(r){if(r?.name==="AbortError")return;console.warn("showOpenFilePicker failed, falling back to input",r),Hr.current?.click()}else Hr.current?.click()},[zs,oi,Ri,jl,va,Ll,ki,Ya,tl]);return i.jsxs("div",{className:"app",children:[i.jsx("header",{className:"app-header",children:i.jsx("h1",{children:" PCB Reverse Engineering Tool (v2.3)"})}),i.jsx(px,{openMenu:zu,setOpenMenu:Nc,isReadOnlyMode:Le,currentProjectFilePath:es,onNewProject:Cs,onOpenProject:jr,onSaveProject:lc,onSaveAs:Wd,onPrint:Xc,hasUnsavedChanges:Id,setNewProjectDialog:Ko,setAutoSaveDialog:$a,topImage:y,bottomImage:U,selectedImageForTransform:Mt,setSelectedImageForTransform:Il,setCurrentTool:K,transformMode:Vl,setTransformMode:Is,updateImageTransform:bs,resetImageTransform:$c,isGrayscale:ye,setIsGrayscale:Me,isBlackAndWhiteEdges:J,setIsBlackAndWhiteEdges:Ae,isBlackAndWhiteInverted:He,setIsBlackAndWhiteInverted:ge,areImagesLocked:ii,setAreImagesLocked:Gs,onEnterBoardDimensions:()=>eo(!0),fileInputTopRef:Uc,fileInputBottomRef:Pc,openProjectRef:Hr,increaseSize:Nl,decreaseSize:vs,brushSize:k,drawingStrokes:Ve,selectedIds:vt,selectedComponentIds:Ye,selectedPowerIds:pt,selectedGroundIds:kt,componentsTop:mt,componentsBottom:ot,powers:Je,grounds:nt,powerNodeNames:Do,groundNodeNames:Od,setSetSizeDialog:Wa,areViasLocked:li,setAreViasLocked:Br,arePadsLocked:Fi,setArePadsLocked:Ac,areTestPointsLocked:Yl,setAreTestPointsLocked:Tu,areTracesLocked:ai,setAreTracesLocked:Mr,areComponentsLocked:Ci,setAreComponentsLocked:Zo,areGroundNodesLocked:zi,setAreGroundNodesLocked:qs,arePowerNodesLocked:yn,setArePowerNodesLocked:Zs,setSelectedIds:jt,setSelectedComponentIds:ft,setSelectedPowerIds:tt,setSelectedGroundIds:bt,selectAllVias:fs,selectAllTraces:pr,selectAllPads:qr,selectAllComponents:hr,selectDisconnectedComponents:Zr,selectAllPowerNodes:to,selectAllGroundNodes:Ec,selectPowerNodesByName:Ic,selectGroundNodesByName:no,setShowPowerBusManager:ls,setShowGroundBusManager:ss,setShowDesignatorManager:Rl,toolRegistry:Dt,updateToolSettings:$s,updateToolLayerSettings:xo,setBrushSize:R,setBrushColor:D,saveToolSettings:jh,saveToolLayerSettings:wc,colorPalette:$d,currentTool:A,drawingMode:we,traceToolLayer:zt,padToolLayer:en,testPointToolLayer:tn,componentToolLayer:pn,setTopTraceSize:Xe,setBottomTraceSize:_,setTopPadSize:H,setBottomPadSize:me,setTopTestPointSize:Jt,setBottomTestPointSize:Ua,setTopComponentSize:_l,setBottomComponentSize:yl,setComponentConnectionSize:gi,topTraceColor:m,bottomTraceColor:q,topPadColor:P,bottomPadColor:he,topTestPointColor:Ie,bottomTestPointColor:ut,topComponentColor:pi,bottomComponentColor:Jn,setTopTraceColor:ue,setBottomTraceColor:Be,setTopPadColor:F,setBottomPadColor:W,setTopTestPointColor:at,setBottomTestPointColor:Bt,setTopComponentColor:Kn,setBottomComponentColor:Ji,setComponentConnectionColor:zc,saveDefaultSize:Ge,saveDefaultColor:Ct,menuBarRef:rr,onOpenProjectNotes:Lc}),i.jsx("div",{style:{display:"block",padding:0,margin:0,width:"100vw",height:"calc(100vh - 70px)",boxSizing:"border-box",position:"relative"},children:i.jsxs("div",{ref:ma,style:{position:"relative",width:"100%",height:"100%",margin:0,padding:0,boxSizing:"border-box",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"16px",overflow:"hidden"},children:[i.jsxs("div",{style:{position:"absolute",top:6,left:6,bottom:6,width:46,display:"flex",flexDirection:"column",gap:8,padding:"6px 3px",background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:20},children:[i.jsxs("button",{onClick:()=>{Le||ms()},onMouseDown:a=>a.currentTarget.blur(),disabled:Le,title:"Select (S)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="select"?"2px solid #000":"1px solid #ddd",background:A==="select"?"#e6f0ff":"#fff",color:Le?"#999":"#222",outline:"none",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx(Gg,{size:14}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"S"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Le||(console.log("Via tool clicked"),Ol("via"),K("draw"))},disabled:Le,title:"Draw Vias (V)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="draw"&&we==="via"?"2px solid #000":"1px solid #ddd",background:A==="draw"&&we==="via"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const a=St.get("via").color;return i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"none",stroke:a,strokeWidth:"3"}),i.jsx("circle",{cx:"12",cy:"12",r:"4",fill:a})]})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"V"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:St.get("via").size})]})]}),i.jsxs("button",{ref:ht,onClick:()=>{Le||(console.log("Pad tool clicked"),Ol("pad"),K("draw"),ea(!0),_n(en||"top"),setTimeout(()=>ic(),0))},disabled:Le,title:"Draw Pads (P)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="draw"&&we==="pad"?"2px solid #000":"1px solid #ddd",background:A==="draw"&&we==="pad"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=(en||"top")==="top"?"padTop":"padBottom",p=St.get(r).color,x=14,v=(24-x)/2,b=(24-x)/2;return i.jsx("rect",{x:v,y:b,width:x,height:x,fill:p})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"P"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(A==="draw"&&we==="pad"&&Hn.toolInstanceId&&(Hn.toolInstanceId==="padTop"||Hn.toolInstanceId==="padBottom"))return Hn.size;const a=en==="top"?"padTop":"padBottom";return St.get(a).size})()})]})]}),i.jsxs("button",{ref:Yt,onClick:()=>{Le||(console.log("Test Point tool clicked"),Ol("testPoint"),K("draw"),Ao(!0),_n(tn||"top"),setTimeout(()=>Yc(),0))},disabled:Le,title:"Draw Test Points (Y)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="draw"&&we==="testPoint"?"2px solid #000":"1px solid #ddd",background:A==="draw"&&we==="testPoint"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:(()=>{const r=(tn||"top")==="top"?"testPointTop":"testPointBottom",p=St.get(r).color,x=14,v=12,b=12;return i.jsx("path",{d:`M ${v} ${b-x/2} L ${v+x/2} ${b} L ${v} ${b+x/2} L ${v-x/2} ${b} Z`,fill:p,stroke:"#000",strokeWidth:"1.5"})})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Y"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{if(A==="draw"&&we==="testPoint"&&Hn.toolInstanceId&&(Hn.toolInstanceId==="testPointTop"||Hn.toolInstanceId==="testPointBottom"))return Hn.size;const a=tn==="top"?"testPointTop":"testPointBottom";return St.get(a).size})()})]})]}),i.jsxs("button",{ref:dl,onClick:()=>{Le||(console.log("Trace tool clicked"),Ol("trace"),K("draw"),Da(!0),_n(zt||"top"),setTimeout(()=>vr(),0))},disabled:Le,title:"Draw Traces (T)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="draw"&&we==="trace"?"2px solid #000":"1px solid #ddd",background:A==="draw"&&we==="trace"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx(Zg,{size:14,color:(()=>{const r=(zt||"top")==="top"?"traceTop":"traceBottom";return St.get(r).color})()}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"T"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=zt==="top"?"traceTop":"traceBottom";return St.get(a).size})()})]})]}),i.jsxs("button",{ref:zn,onClick:()=>{Le||(console.log("Component tool clicked"),K("component"),Zi(!0),En(!1),Kr(null))},disabled:Le,title:"Draw Component (C)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="component"?"2px solid #000":"1px solid #ddd",background:A==="component"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[(()=>{const r=(pn||"top")==="top"?"componentTop":"componentBottom",p=St.get(r).color;return Ui?i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",fill:"rgba(255,255,255,0.9)",stroke:p,strokeWidth:"1.5"}),i.jsx("text",{x:"12",y:"14",textAnchor:"middle",fontSize:"7",fill:p,fontWeight:"bold",fontFamily:"monospace",children:Af(Ui)})]}):i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("rect",{x:"5",y:"3",width:"14",height:"7",fill:p,stroke:p,strokeWidth:"0.5"}),i.jsxs("g",{stroke:p,fill:"none",strokeWidth:"1.5",children:[i.jsx("rect",{x:"5",y:"10",width:"14",height:"4",rx:"1.2"}),i.jsx("path",{d:"M7 14 v4 M10 14 v4 M13 14 v4 M16 14 v4",stroke:p})]})]})})(),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"C"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:(()=>{const a=pn==="top"?"componentTop":"componentBottom";return St.get(a).size})()})]})]}),i.jsxs("button",{ref:gs,onClick:()=>{Le||(console.log("Power tool clicked"),K("power"))},disabled:Le,title:"Draw Power (B)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="power"?"2px solid #000":"1px solid #ddd",background:A==="power"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx("span",{style:{color:St.get("power").color,fontSize:"18px",fontWeight:"bold",lineHeight:1,flexShrink:0},children:"V"}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"B"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:St.get("power").size})]})]}),i.jsxs("button",{ref:ro,onClick:()=>{Le||(console.log("Ground tool clicked"),K("ground"))},disabled:Le,title:"Draw Ground (G)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="ground"?"2px solid #000":"1px solid #ddd",background:A==="ground"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 20","aria-hidden":"true",style:{overflow:"visible",flexShrink:0},children:i.jsxs("g",{stroke:St.get("ground").color,strokeWidth:"2",strokeLinecap:"round",children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10"}),i.jsx("line",{x1:"5",y1:"10",x2:"19",y2:"10"}),i.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13"}),i.jsx("line",{x1:"9.5",y1:"16",x2:"14.5",y2:"16"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"G"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:St.get("ground").size})]})]}),i.jsxs("button",{onClick:()=>{Le||K("center")},disabled:Le,title:"Set Home View (X)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="center"?"2px solid #000":"1px solid #ddd",background:A==="center"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"10",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"22",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"12",x2:"10",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("line",{x1:"14",y1:"12",x2:"22",y2:"12",stroke:"#111",strokeWidth:"3",strokeLinecap:"round"})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"X"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Le||K(a=>a==="pan"?"draw":"pan")},disabled:Le,title:"Move (H)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:6,padding:"4px 6px",borderRadius:6,border:A==="pan"?"2px solid #000":"1px solid #ddd",background:A==="pan"?"#e6f0ff":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{stroke:"#111",fill:"none",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M8 11v-4c0-.8.6-1.3 1.3-1.3S11 6.2 11 7v4"}),i.jsx("path",{d:"M11 11V6.5c0-.8.6-1.3 1.3-1.3S14 5.7 14 6.5V11"}),i.jsx("path",{d:"M14 11V7.2c0-.8.6-1.3 1.3-1.3.7 0 1.3.5 1.3 1.3V12c1 .6 1.6 1.5 1.6 2.7A4.3 4.3 0 0 1 14 19H9.2A4.2 4.2 0 0 1 5 14.8V11c0-.6.4-1 .9-1 .6 0 1 .4 1 1v2"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"H"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{tr(!1),K(a=>a==="magnify"?"draw":"magnify")},title:`${So?"Zoom Out":"Zoom In"} (Z)`,style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="magnify"?"2px solid #000":"1px solid #ddd",background:A==="magnify"?"#e6f0ff":"#fff",color:"#222",cursor:"pointer"},children:[i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:[i.jsx("circle",{cx:"10",cy:"10",r:"7.5",fill:"none",stroke:"#111",strokeWidth:"2"}),i.jsx("line",{x1:"15.5",y1:"15.5",x2:"21",y2:"21",stroke:"#111",strokeWidth:"2",strokeLinecap:"round"}),So?i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}):i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"6.5",y1:"10",x2:"13.5",y2:"10",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"}),i.jsx("line",{x1:"10",y1:"6.5",x2:"10",y2:"13.5",stroke:"#111",strokeWidth:"2.4",strokeLinecap:"round"})]})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"Z"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:"-"})]})]}),i.jsxs("button",{onClick:()=>{Le||K("erase")},disabled:Le,title:"Erase (E)",style:{width:"100%",height:32,display:"flex",alignItems:"center",gap:3,padding:"4px 3px",borderRadius:6,border:A==="erase"?"2px solid #000":"1px solid #ddd",background:A==="erase"?"#ffecec":"#fff",color:Le?"#999":"#222",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:[i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24","aria-hidden":"true",style:{flexShrink:0},children:i.jsxs("g",{transform:"rotate(-35 12 12)",children:[i.jsx("rect",{x:"6",y:"8",width:"12",height:"8",rx:"1.5",fill:"#f5a3b3",stroke:"#111",strokeWidth:"1.5"}),i.jsx("rect",{x:"6",y:"13",width:"12",height:"3",fill:"#f18ea4",stroke:"none"})]})}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1,minWidth:0},children:[i.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",lineHeight:1},children:"E"}),i.jsx("span",{style:{fontSize:"9px",lineHeight:1,opacity:.7},children:Dt.get("erase")?.settings.size??18})]})]}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:()=>{Le||_r(a=>!a)},disabled:Le,title:"Color Picker",style:{width:32,height:32,display:"grid",placeItems:"center",borderRadius:6,border:"1px solid #ddd",background:"#fff",cursor:Le?"not-allowed":"pointer",opacity:Le?.5:1},children:i.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 16 16","aria-hidden":"true",children:[i.jsx("rect",{x:"0",y:"0",width:"3.5",height:"3.5",fill:"#9E9E9E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"0",width:"3.5",height:"3.5",fill:"#0072B2",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"0",width:"3.5",height:"3.5",fill:"#56B4E9",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"0",width:"3.5",height:"3.5",fill:"#00BFC4",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"4",width:"3.5",height:"3.5",fill:"#6A3D9A",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"4",width:"3.5",height:"3.5",fill:"#2CA02C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"4",width:"3.5",height:"3.5",fill:"#7FC97F",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"4",width:"3.5",height:"3.5",fill:"#FF7F0E",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"8",width:"3.5",height:"3.5",fill:"#FFD700",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"8",width:"3.5",height:"3.5",fill:"#FF6B6B",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"8",width:"3.5",height:"3.5",fill:"#E74C3C",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"8",width:"3.5",height:"3.5",fill:"#FFB6C1",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"0",y:"12",width:"3.5",height:"3.5",fill:"#DDA0DD",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"4",y:"12",width:"3.5",height:"3.5",fill:"#8B4513",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"8",y:"12",width:"3.5",height:"3.5",fill:"#A0522D",stroke:"#ccc",strokeWidth:"0.3"}),i.jsx("rect",{x:"12",y:"12",width:"3.5",height:"3.5",fill:"#FF4500",stroke:"#ccc",strokeWidth:"0.3"})]})}),Mc&&i.jsx("div",{ref:Vr,style:{position:"absolute",left:42,top:0,padding:8,background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 8px 18px rgba(0,0,0,0.18)",zIndex:50},children:i.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(8, 22px)",gap:4},children:$d.map(a=>i.jsx("div",{onClick:()=>{D(a),_r(!1);try{let p=null;A==="draw"&&we==="via"?p="via":A==="draw"&&we==="pad"?p=(en||"top")==="bottom"?"padBottom":"padTop":A==="draw"&&we==="testPoint"?p=(tn||"top")==="bottom"?"testPointBottom":"testPointTop":A==="draw"&&we==="trace"?p=(zt||"top")==="bottom"?"traceBottom":"traceTop":A==="component"?p=(pn||"top")==="bottom"?"componentBottom":"componentTop":A==="power"?p="power":A==="ground"&&(p="ground"),p&&St.setColor(p,a)}catch(p){console.error("Error updating tool instance color:",p)}const r=Ha(Dt);if(r)if(A==="draw"&&we==="trace"){const p=zt||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};xo(r.id,p,b),wc(r.id),p==="top"?(ue(a),Ct("trace",a,"top")):(Be(a),Ct("trace",a,"bottom"))}else if(A==="draw"&&we==="pad"){const p=en||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};xo(r.id,p,b),wc(r.id),p==="top"?(F(a),Ct("pad",a,"top")):(W(a),Ct("pad",a,"bottom"))}else if(A==="draw"&&we==="testPoint"){const p=tn||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};xo(r.id,p,b),wc(r.id),p==="top"?(at(a),Ct("testPoint",a,"top")):(Bt(a),Ct("testPoint",a,"bottom"))}else if(A==="component"){const p=pn||"top",v=r.layerSettings.get(p)?.size||r.settings.size,b={color:a,size:v};xo(r.id,p,b),wc(r.id),p==="top"?(Kn(a),Ct("component",a,"top")):(Ji(a),Ct("component",a,"bottom"))}else{const p={...r.settings,color:a};$s(r.id,p),jh(r.id,a,r.settings.size),A==="draw"&&we==="via"&&Ct("via",a)}Ct("brush",a),vt.size>0&&Vt(p=>p.map(x=>vt.has(x.id)?(x.type==="via"?(Ct("via",a),An(v=>{const b=new Map(v),f=b.get("via");return f&&b.set("via",{...f,settings:{...f.settings,color:a}}),b})):x.type==="pad"?(Ct("pad",a),An(v=>{const b=new Map(v),f=b.get("pad");return f&&b.set("pad",{...f,settings:{...f.settings,color:a}}),b})):x.type==="trace"&&Ct("trace",a,x.layer),{...x,color:a}):x)),Ye.size>0&&(Ct("component",a),sn(p=>p.map(x=>Ye.has(x.id)?{...x,color:a}:x)),At(p=>p.map(x=>Ye.has(x.id)?{...x,color:a}:x))),pt.size>0&&Gn(p=>p.map(x=>pt.has(x.id)?{...x,color:a}:x)),kt.size>0&&Wi(p=>p.map(x=>kt.has(x.id)?{...x,color:a}:x))},title:a,style:{width:22,height:22,backgroundColor:a,border:a===$?"2px solid #333":"1px solid #ccc",cursor:"pointer"}},a))})})]})]}),A==="draw"&&we==="trace"&&Ra&&i.jsxs("div",{ref:lo,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:zt==="top",onChange:()=>{console.log("Trace tool Top clicked"),Wl.current="top",_a("top"),_n("top"),D(m),R(Ee),An(a=>{const r=new Map(a),p=r.get("trace");return p&&r.set("trace",{...p,settings:{color:m,size:Ee}}),r}),Da(!1),jo(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"traceToolLayer",checked:zt==="bottom",onChange:()=>{console.log("Trace tool Bottom clicked"),Wl.current="bottom",_a("bottom"),_n("bottom"),D(q),R(re),An(a=>{const r=new Map(a),p=r.get("trace");return p&&r.set("trace",{...p,settings:{color:q,size:re}}),r}),Da(!1),Cl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),A==="draw"&&we==="pad"&&ao&&i.jsxs("div",{ref:ta,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:en==="top",onChange:()=>{console.log("Pad tool Top clicked"),fa.current="top",kr("top"),_n("top");const a=St.get("padTop");D(a.color),R(a.size),An(r=>{const p=new Map(r),x=p.get("pad");return x&&p.set("pad",{...x,settings:{color:a.color,size:a.size}}),p}),ea(!1),jo(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"padToolLayer",checked:en==="bottom",onChange:()=>{console.log("Pad tool Bottom clicked"),fa.current="bottom",kr("bottom"),_n("bottom");const a=St.get("padBottom");D(a.color),R(a.size),An(r=>{const p=new Map(r),x=p.get("pad");return x&&p.set("pad",{...x,settings:{color:a.color,size:a.size}}),p}),ea(!1),Cl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),A==="draw"&&we==="testPoint"&&Qr&&i.jsxs("div",{ref:oo,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:tn==="top",onChange:()=>{console.log("Test Point tool Top clicked"),$l.current="top",go("top"),_n("top"),D(Ie),R(Ke),An(a=>{const r=new Map(a),p=r.get("testPoint");return p&&r.set("testPoint",{...p,settings:{color:Ie,size:Ke}}),r}),Ao(!1),jo(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"testPointToolLayer",checked:tn==="bottom",onChange:()=>{console.log("Test Point tool Bottom clicked"),$l.current="bottom",go("bottom"),_n("bottom"),D(ut),R(Hi),An(a=>{const r=new Map(a),p=r.get("testPoint");return p&&r.set("testPoint",{...p,settings:{color:ut,size:Hi}}),r}),Ao(!1),Cl(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),Wn&&A==="power"&&i.jsxs("div",{ref:gr,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Power Bus:"}),ct.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No power buses defined. Use Tools  Manage Power Buses to add one."}):[...ct].sort((a,r)=>{const p=b=>{const f=b.match(/([+-]?)(\d+\.?\d*)/);if(f){const S=f[1]||"+",T=parseFloat(f[2]);return{absValue:Math.abs(T),isNegative:S==="-",original:b}}return{absValue:1/0,isNegative:!1,original:b}},x=p(a.voltage),v=p(r.voltage);return x.absValue!==v.absValue?x.absValue-v.absValue:x.isNegative!==v.isNegative?x.isNegative?-1:1:0}).map(a=>i.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),zl(a.id),Lt(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:a.color,border:"1px solid #ccc"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name}),i.jsx("div",{style:{fontSize:"11px",color:"#666"},children:a.voltage})]})]})},a.id)),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Lt(!1),ls(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Power Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),Lt(!1),zl(null),K("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),$r&&A==="ground"&&i.jsxs("div",{ref:ps,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25,minWidth:"200px"},children:[i.jsx("div",{style:{marginBottom:"4px",fontWeight:600,fontSize:"12px",color:"#333"},children:"Select Ground Bus:"}),Xn.length===0?i.jsx("div",{style:{padding:"8px",color:"#666",fontSize:"12px"},children:"No ground buses defined. Use Tools  Manage Ground Buses to add one."}):[...Xn].sort((a,r)=>a.name.localeCompare(r.name)).map(a=>{const r=a.id==="groundbus-earth",p=sl===a.id;return i.jsx("button",{onClick:x=>{x.preventDefault(),x.stopPropagation(),rs(a.id),kl(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:p?"#e0e0e0":"#f5f5f5",border:p?"2px solid #000":"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[i.jsx("div",{style:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:r?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"4",y1:"10",x2:"16",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"5",y1:"12.5",x2:"15",y2:"12.5",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"6",y1:"15",x2:"14",y2:"15",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{display:"block"},children:[i.jsx("circle",{cx:"10",cy:"10",r:"6",fill:"none",stroke:"#000",strokeWidth:"2"}),i.jsx("line",{x1:"10",y1:"2",x2:"10",y2:"18",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"2",y1:"10",x2:"18",y2:"10",stroke:"#000",strokeWidth:"2",strokeLinecap:"round"})]})}),i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600,fontSize:"13px"},children:a.name})})]})},a.id)}),i.jsx("div",{style:{height:1,background:"#ddd",margin:"4px 0"}}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),kl(!1),ss(!0)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 6px",marginBottom:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#333",fontSize:"11px"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),kl(!1),rs(null),K("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"4px 6px",marginTop:"2px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#666",fontSize:"11px"},children:"Cancel"})]}),A==="component"&&di&&i.jsxs("div",{ref:na,style:{position:"absolute",padding:"4px 6px",background:"#fff",border:"2px solid #000",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:25},children:[i.jsxs("label",{className:"radio-label",style:{marginRight:6},children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:yt==="top",onClick:()=>{console.log("Component tool Top clicked"),wn.current="top",Oa("top"),_n("top"),D(pi),R(Ei),An(a=>{const r=new Map(a),p=r.get("component");return p&&r.set("component",{...p,settings:{color:pi,size:Ei}}),r}),Zi(!1),jo(!0),En(!0)}}),i.jsx("span",{children:"Top"})]}),i.jsxs("label",{className:"radio-label",children:[i.jsx("input",{type:"radio",name:"componentToolLayer",checked:yt==="bottom",onClick:()=>{console.log("Component tool Bottom clicked"),wn.current="bottom",Oa("bottom"),_n("bottom"),D(Jn),R(hi),An(a=>{const r=new Map(a),p=r.get("component");return p&&r.set("component",{...p,settings:{color:Jn,size:hi}}),r}),Zi(!1),Cl(!0),En(!0)}}),i.jsx("span",{children:"Bottom"})]})]}),A==="component"&&hs&&i.jsxs("div",{ref:Cn,style:{position:"absolute",top:44,left:52,padding:"8px",background:"#fff",border:"1px solid #ddd",borderRadius:6,boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:26,maxHeight:"500px",overflowY:"auto",minWidth:"250px",maxWidth:"350px"},children:[i.jsx("div",{style:{marginBottom:"8px",fontWeight:600,fontSize:"13px",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"Select Component Type:"}),Object.entries(ex).map(([a,r])=>{const p=so.has(a);return i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsxs("button",{onClick:x=>{x.preventDefault(),x.stopPropagation(),Qi(v=>{const b=new Set(v);return b.has(a)?b.delete(a):b.add(a),b})},style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"6px 8px",background:p?"#f0f0f0":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"12px",fontWeight:600,color:"#333"},children:[i.jsx("span",{style:{marginRight:"6px",fontSize:"10px"},children:p?"":""}),a]}),p&&i.jsx("div",{style:{marginLeft:"12px",marginTop:"2px",marginBottom:"4px"},children:Object.entries(r).map(([x,v])=>i.jsxs("div",{style:{marginBottom:"2px"},children:[i.jsxs("div",{style:{fontSize:"11px",fontWeight:500,color:"#666",padding:"2px 4px",marginBottom:"2px"},children:[x,":"]}),v.map(b=>{const f=kd[b];return f?i.jsxs("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),Kr(b),En(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"4px 8px 4px 16px",marginBottom:"2px",background:Ui===b?"#e6f0ff":"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",fontSize:"11px",color:"#333"},children:[f.prefix.join(", ")," - ",zd(b)]},b):null})]},x))})]},a)}),i.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),En(!1),K("select")},style:{display:"block",width:"100%",textAlign:"center",padding:"6px 10px",marginTop:"8px",background:"#f0f0f0",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",color:"#222"},children:"Cancel"})]}),i.jsxs("div",{style:{position:"absolute",top:6,left:60,bottom:6,width:168,padding:6,display:"flex",flexDirection:"column",gap:2,background:"rgba(250,250,255,0.95)",borderRadius:8,border:"1px solid #ddd",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",zIndex:3},children:[i.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#333",marginBottom:2},children:"Layers"}),i.jsxs("div",{onClick:()=>_n("top"),title:"Top layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Mt==="top"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Top Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:Gl,onChange:a=>jo(a.target.checked)})})]}),i.jsx("canvas",{ref:cr,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsxs("div",{onClick:()=>_n("bottom"),title:"Bottom layer",style:{cursor:"pointer",padding:2,borderRadius:4,border:Mt==="bottom"?"2px solid #0b5fff":"1px solid #ddd",background:"#fff"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:2},children:[i.jsx("div",{style:{fontSize:10,color:"#444",fontWeight:600},children:"Bottom Image"}),i.jsx("label",{className:"radio-label",style:{margin:0},children:i.jsx("input",{type:"checkbox",checked:To,onChange:a=>Cl(a.target.checked)})})]}),i.jsx("canvas",{ref:dr,width:60,height:40,style:{width:"60px",height:"40px"}})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Bi,onChange:a=>si(a.target.checked)}),i.jsx("span",{children:"Vias"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:qn,onChange:a=>ns(a.target.checked)}),i.jsx("span",{children:"Pads (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:ja,onChange:a=>Li(a.target.checked)}),i.jsx("span",{children:"Test Points (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Mi,onChange:a=>ll(a.target.checked)}),i.jsx("span",{children:"Traces (Top)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Gi,onChange:a=>Ta(a.target.checked)}),i.jsx("span",{children:"Components (Top)"})]}),i.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:al,onChange:a=>is(a.target.checked)}),i.jsx("span",{children:"Pads (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Xi,onChange:a=>zo(a.target.checked)}),i.jsx("span",{children:"Test Points (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Yi,onChange:a=>Co(a.target.checked)}),i.jsx("span",{children:"Traces (Bottom)"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Mn,onChange:a=>ri(a.target.checked)}),i.jsx("span",{children:"Components (Bottom)"})]}),i.jsx("div",{style:{height:1,background:"#000",margin:"4px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:mi,onChange:a=>qi(a.target.checked)}),i.jsx("span",{children:"Power"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Dl,onChange:a=>Ca(a.target.checked)}),i.jsx("span",{children:"Ground"})]}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:za,onChange:a=>Ql(a.target.checked)}),i.jsx("span",{children:"Connections"})]}),i.jsx("div",{style:{height:1,background:"#e9e9ef",margin:"2px 0"}}),i.jsxs("label",{className:"radio-label",style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("input",{type:"checkbox",checked:Bi&&qn&&al&&ja&&Xi&&Mi&&Yi&&Gi&&Mn&&mi&&Dl&&za,onChange:a=>{const r=a.target.checked;si(r),ns(r),is(r),Li(r),zo(r),ll(r),Co(r),Ta(r),ri(r),qi(r),Ca(r),Ql(r)}}),i.jsx("span",{style:{fontWeight:600,fontSize:11},children:"Select All Layers"})]}),i.jsxs("div",{style:{marginTop:6},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[i.jsxs("label",{style:{fontSize:10,color:"#333"},children:["Transparency: ",g,"%"]}),i.jsxs("label",{className:"radio-label",style:{margin:0},children:[i.jsx("input",{type:"checkbox",checked:de,onChange:a=>{const r=a.target.checked;r?(jo(!0),Cl(!0)):(E(50),K("select")),je(r)}}),i.jsx("span",{style:{marginLeft:6,fontSize:10},children:"Cycle"})]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:g,onChange:a=>E(Number(a.target.value)),onDoubleClick:()=>Ed("transparency"),className:"slider",style:{width:"100%",marginTop:3}})]})]}),i.jsx(hx,{visible:!y&&!U}),i.jsx("canvas",{ref:hn,width:wo.width,height:wo.height,tabIndex:0,onMouseDown:Hd,onMouseMove:Si,onMouseUp:kn,onMouseLeave:kn,onWheel:Ru,onDoubleClick:Wc,className:`pcb-canvas ${A==="transform"?"transform-cursor":A==="draw"?"draw-cursor":A==="erase"?"erase-cursor":"default-cursor"}`,style:{position:"absolute",left:"244px",top:"6px",...yi?{cursor:yi}:A==="pan"?{cursor:Sa?"grabbing":"grab"}:{},width:`${wo.width}px`,height:`${wo.height}px`,maxHeight:"none",aspectRatio:"auto",border:"none"}}),i.jsx(wx,{componentEditor:Ti,setComponentEditor:kc,componentsTop:mt,componentsBottom:ot,setComponentsTop:sn,setComponentsBottom:At,connectingPin:$n,setConnectingPin:vl,componentDialogPosition:ml,setComponentDialogPosition:ga,isDraggingDialog:Ar,setIsDraggingDialog:Ls,dialogDragOffset:Va,setDialogDragOffset:Rc,areComponentsLocked:Ci,setSelectedComponentIds:ft,setNotesDialogVisible:Ga}),lr&&ir&&(()=>{const a=lr.component,r=lr.layer;if(!a)return null;const p=a.componentType||"Component",x=a.componentType==="IntegratedCircuit"&&"icType"in a?a.icType:null,v=io(a);return i.jsxs("div",{style:{position:"fixed",left:`${lr.x+10}px`,top:`${lr.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:zd(p)}),i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["Layer: ",r==="top"?"Top":"Bottom"]}),x&&i.jsxs("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:["IC Type: ",x]}),v.length>0&&i.jsx("div",{style:{marginBottom:"4px"},children:v.map((b,f)=>i.jsx("div",{style:{color:"#e0e0e0",fontSize:"11px",marginBottom:"2px"},children:b},f))}),a.description&&i.jsx("div",{style:{marginBottom:"4px",color:"#e0e0e0",fontSize:"11px"},children:a.description}),a.notes&&i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.notes})]})})(),Ir&&ir&&(()=>{const a=Ir.stroke;return a.notes?i.jsxs("div",{style:{position:"fixed",left:`${Ir.x+10}px`,top:`${Ir.y+10}px`,background:"rgba(0, 0, 0, 0.85)",color:"#fff",padding:"8px 12px",borderRadius:4,fontSize:"12px",lineHeight:"1.4",zIndex:1e4,pointerEvents:"none",width:"max-content",maxWidth:"400px",minWidth:"150px",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",wordWrap:"break-word",overflowWrap:"break-word"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"4px"},children:"Test Point"}),i.jsx("div",{style:{marginTop:"4px",paddingTop:"4px",borderTop:"1px solid rgba(255,255,255,0.2)",fontSize:"11px",color:"#d0d0d0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.notes})]}):null})(),$i&&$i.visible&&(()=>{if(!Je.find(p=>p.id===$i.id))return null;const r=ct.find(p=>p.id===$i.powerBusId);return i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #0b5fff",borderRadius:4,padding:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)",zIndex:1e3,minWidth:"175px",maxWidth:"250px",maxHeight:"40vh",overflowY:"auto",pointerEvents:"auto"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[i.jsx("h3",{style:{margin:0,fontSize:"12px",color:"#333",fontWeight:600},children:"Power Properties"}),i.jsx("button",{onClick:()=>Xs(null),style:{background:"transparent",border:"none",fontSize:"14px",cursor:"pointer",color:"#666",padding:0,width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Power Bus:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:r?`${r.name} (${r.voltage})`:"Unknown"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:`power-layer-${$i.id}`,style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Layer:"}),i.jsxs("select",{id:`power-layer-${$i.id}`,name:`power-layer-${$i.id}`,value:$i.layer,onChange:p=>Xs({...$i,layer:p.target.value}),disabled:yn,style:{width:"100%",padding:"2px 3px",border:"1px solid #ddd",borderRadius:2,fontSize:"10px",opacity:yn?.6:1},children:[i.jsx("option",{value:"top",children:"Top"}),i.jsx("option",{value:"bottom",children:"Bottom"})]})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"X:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:$i.x.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx("label",{style:{display:"block",fontSize:"9px",fontWeight:600,color:"#333",marginBottom:"1px"},children:"Y:"}),i.jsx("div",{style:{padding:"2px 3px",background:"#f5f5f5",borderRadius:2,fontSize:"10px",color:"#666"},children:$i.y.toFixed(2)})]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"3px",marginTop:"6px"},children:[i.jsx("button",{onClick:()=>Xs(null),style:{padding:"2px 5px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:2,cursor:"pointer",fontSize:"10px",color:"#333"},children:"Cancel"}),i.jsx("button",{onClick:()=>{yn||(Gn(p=>p.map(x=>x.id===$i.id?{...x,layer:$i.layer}:x)),Xs(null))},disabled:yn,style:{padding:"2px 5px",background:yn?"#f5f5f5":"#0b5fff",color:yn?"#999":"#fff",border:"1px solid #ddd",borderRadius:2,cursor:yn?"not-allowed":"pointer",fontSize:"10px"},children:"Save"})]})]})})(),!y&&!U&&i.jsx("div",{className:"placeholder"})]})}),Ad&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Power Buses"}),i.jsx("button",{onClick:()=>ls(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:(()=>{const a=ct.filter(v=>v.id!==as),r=ct.find(v=>v.id===as),p=[...a].sort((v,b)=>{const f=z=>{const I=z.match(/([+-]?)(\d+\.?\d*)/);if(I){const Q=I[1]||"+",oe=parseFloat(I[2]);return{absValue:Math.abs(oe),isNegative:Q==="-",original:z}}return{absValue:1/0,isNegative:!1,original:z}},S=f(v.voltage),T=f(b.voltage);return S.absValue!==T.absValue?S.absValue-T.absValue:S.isNegative!==T.isNegative?S.isNegative?-1:1:0});return(r?[...p,r]:p).map(v=>{const b=ct.findIndex(T=>T.id===v.id),f=ct.some(T=>T.name===v.name&&T.id!==v.id),S=ct.some(T=>T.voltage===v.voltage&&T.id!==v.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:v.color,border:"1px solid #ccc",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"4px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:v.name,onChange:T=>{const z=[...ct];z[b]={...v,name:T.target.value},ni(z)},onFocus:()=>{os(v.id)},placeholder:"e.g., +3V3, -3V3",style:{flex:1,padding:"2px 4px",border:f?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Value"}),i.jsx("input",{type:"text",inputMode:"decimal",value:v.voltage,onChange:T=>{const z=T.target.value;if(z===""||/^[+-]?\d*\.?\d*$/.test(z)){const I=[...ct];I[b]={...v,voltage:z},ni(I)}},onBlur:T=>{const z=T.target.value.trim();if(z===""){as===v.id&&os(null);return}const I=parseFloat(z);if(!isNaN(I)){const Q=I>=0?"+":"-",oe=Math.abs(I),L=`${Q}${oe.toFixed(1).replace(/\.?0+$/,"")}`,ee=[...ct];ee[b]={...v,voltage:L},ni(ee),as===v.id&&os(null)}},onFocus:()=>{os(v.id)},placeholder:"e.g., +3.3, -3.3",style:{flex:1,padding:"2px 4px",border:S?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})]}),i.jsx("input",{type:"color",value:v.color,onChange:T=>{const z=[...ct];z[b]={...v,color:T.target.value},ni(z)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const T=Je.filter(z=>z.powerBusId===v.id);if(T.length>0){alert(`Cannot delete: ${T.length} power node(s) are using this bus. Remove or reassign them first.`);return}ni(z=>z.filter(I=>I.id!==v.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},v.id)})})()}),i.jsx("button",{onClick:()=>{const a={id:`powerbus-${Date.now()}-${Math.random()}`,name:"New Power Bus",voltage:"+0.0",color:"#ff0000"};ni(r=>[...r,a]),os(a.id)},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Power Bus"}),i.jsx("button",{onClick:()=>ls(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),ol&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"8px",zIndex:1e3,minWidth:"280px",maxWidth:"320px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Ground Buses"}),i.jsx("button",{onClick:()=>ss(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsx("div",{style:{marginBottom:"12px"},children:(()=>{const a=Xn.filter(v=>v.id!==ql),r=Xn.find(v=>v.id===ql),p=[...a].sort((v,b)=>v.name.localeCompare(b.name));return(r?[...p,r]:p).map(v=>{const b=Xn.findIndex(S=>S.id===v.id),f=Xn.some(S=>S.name===v.name&&S.id!==v.id);return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px",marginBottom:"4px",background:"#f9f9f9",borderRadius:4,border:"1px solid #e0e0e0"},children:[i.jsx("div",{style:{width:16,height:16,borderRadius:"50%",background:v.color,border:"1px solid #ccc",flexShrink:0}}),i.jsx("div",{style:{flex:1,minWidth:0},children:i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[i.jsx("div",{style:{fontSize:"10px",color:"#666",width:"40px",flexShrink:0},children:"Name"}),i.jsx("input",{type:"text",value:v.name,onChange:S=>{const T=[...Xn];T[b]={...v,name:S.target.value},Fl(T)},onFocus:()=>{Wr(v.id)},onBlur:()=>{ql===v.id&&Wr(null)},placeholder:"e.g., GND, Earth",style:{flex:1,padding:"2px 4px",border:f?"1px solid #ff0000":"1px solid #ccc",borderRadius:3,fontSize:"11px"}})]})}),i.jsx("input",{type:"color",value:v.color,onChange:S=>{const T=[...Xn];T[b]={...v,color:S.target.value},Fl(T)},style:{width:"28px",height:"28px",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",flexShrink:0}}),i.jsx("button",{onClick:()=>{const S=nt.filter(T=>T.groundBusId===v.id);if(S.length>0){alert(`Cannot delete: ${S.length} ground node(s) are using this bus. Remove or reassign them first.`);return}Fl(T=>T.filter(z=>z.id!==v.id))},style:{padding:"3px 6px",background:"#e0e0e0",color:"#333",border:"1px solid #ccc",borderRadius:3,cursor:"pointer",fontSize:"10px",flexShrink:0},children:"Delete"})]},v.id)})})()}),i.jsx("button",{onClick:()=>{const a={id:`groundbus-${Date.now()}-${Math.random()}`,name:"New Ground Bus",color:"#000000"};Fl(r=>[...r,a]),Wr(a.id)},style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px",marginBottom:"6px"},children:"+ Add Ground Bus"}),i.jsx("button",{onClick:()=>ss(!1),style:{width:"100%",padding:"4px 8px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"11px"},children:"Close"})]}),La&&i.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#fff",border:"1px solid #ddd",borderRadius:6,padding:"16px",zIndex:1e3,minWidth:"300px",maxWidth:"400px",boxShadow:"0 2px 6px rgba(0,0,0,0.15)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[i.jsx("h2",{style:{margin:0,fontSize:"14px",fontWeight:600,color:"#222"},children:"Manage Designators"}),i.jsx("button",{onClick:()=>Rl(!1),style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:0,width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),i.jsxs("div",{style:{marginBottom:"16px"},children:[i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333",marginBottom:"12px"},children:[i.jsx("input",{type:"checkbox",checked:Zl,onChange:a=>{const r=a.target.checked;ur(r),localStorage.setItem("autoAssignDesignators",String(r))},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Automatically assign designators"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4",marginBottom:"12px"},children:Zl?i.jsx("div",{children:"When enabled, new components automatically receive sequential designators (e.g., C1, C2, C3 for Capacitors; R1, R2, R3 for Resistors)."}):i.jsx("div",{children:"When disabled, you must manually assign designators to each component. The designator field will be empty when components are created."})}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#333"},children:[i.jsx("input",{type:"checkbox",checked:rl,onChange:a=>{const r=a.target.checked;cl(r)},style:{width:"16px",height:"16px",cursor:"pointer"}}),i.jsx("span",{children:"Use global designator counters"})]}),i.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#f5f5f5",borderRadius:4,fontSize:"11px",color:"#666",lineHeight:"1.4"},children:rl?i.jsx("div",{children:"When ON, designators continue from global counters across all projects. New components start with the next value from the global counter (e.g., if global counter is C10, new capacitor will be C11)."}):i.jsx("div",{children:"When OFF (default), designators start at 1 for each project. Each project maintains its own independent designator sequence (e.g., C1, C2, C3...)."})})]}),i.jsx("button",{onClick:()=>Rl(!1),style:{width:"100%",padding:"6px 12px",background:"#f0f0f0",color:"#333",border:"1px solid #ccc",borderRadius:4,cursor:"pointer",fontSize:"12px"},children:"Close"})]}),i.jsx("input",{ref:Uc,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&Vc(r,"top"),a.target.value=""}}),i.jsx("input",{ref:Pc,type:"file",accept:"image/*",style:{display:"none"},onChange:a=>{const r=a.target.files?.[0];r&&Vc(r,"bottom"),a.target.value=""}}),i.jsx("input",{ref:Hr,type:"file",accept:".json,application/json",style:{display:"none"},onChange:async a=>{const r=a.target.files?.[0];if(r)try{Ri(r.name);const p=await r.text(),x=JSON.parse(p);await zs(x);let v;x.projectInfo?.name?v=x.projectInfo.name:(v=r.name.replace(/\.json$/i,"").replace(/[^a-zA-Z0-9_-]/g,"_")||"pcb_project",jl(v),localStorage.setItem("pcb_project_name",v)),oi||(jl(v),localStorage.setItem("pcb_project_name",v)),setTimeout(()=>{Ll({visible:!0,source:"open",interval:5})},100)}catch(p){console.error("Failed to open project",p),alert("Failed to open project file. See console for details.")}a.target.value=""}}),i.jsx(xx,{visible:Fa.visible,selectedIds:vt,selectedComponentIds:Ye,selectedPowerIds:pt,selectedGroundIds:kt,drawingStrokes:Ve,componentsTop:mt,componentsBottom:ot,powers:Je,grounds:nt,powerBuses:ct,onClose:()=>{xa({visible:!1,text:""})},setComponentsTop:sn,setComponentsBottom:At,determineViaType:ci,determinePadType:Al,determineTestPointType:Jl,onFindComponent:_d,onOpenNotesDialog:()=>Ga(!0),position:nn,isDragging:Fr,onDragStart:a=>{nn&&(Bd({x:a.clientX-nn.x,y:a.clientY-nn.y}),Nd(!0),a.preventDefault())}}),i.jsx(yx,{visible:Tn,selectedIds:vt,selectedComponentIds:Ye,selectedPowerIds:pt,selectedGroundIds:kt,drawingStrokes:Ve,componentsTop:mt,componentsBottom:ot,powers:Je,grounds:nt,powerBuses:ct,onClose:()=>{Ga(!1)},setComponentsTop:sn,setComponentsBottom:At,setDrawingStrokes:Vt,setPowerSymbols:Gn,setGroundSymbols:Wi,determineViaType:ci,determinePadType:Al,determineTestPointType:Jl,position:Kl,isDragging:fr,onDragStart:a=>{Kl&&(Md({x:a.clientX-Kl.x,y:a.clientY-Kl.y}),Ro(!0),a.preventDefault())}}),i.jsx(bx,{visible:Lr,projectNotes:cs,setProjectNotes:Hc,onClose:()=>{Za(!1)},position:Qa,isDragging:Xr,onDragStart:a=>{Qa?(us({x:a.clientX-Qa.x,y:a.clientY-Qa.y}),Ja(!0),a.preventDefault()):(Ka({x:a.clientX-300,y:a.clientY-200}),us({x:300,y:200}),Ja(!0),a.preventDefault())}}),Pr.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10001},onClick:a=>{a.target===a.currentTarget&&id()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("p",{style:{margin:"0 0 24px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"You have unsaved changes. Do you want to save your project before creating a new one?"}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:id,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:nd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"No"}),i.jsx("button",{ref:sr,onClick:td,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},autoFocus:!0,children:"Yes"})]})]})}),un.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&oc()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"New Project"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Project Name:"}),i.jsx("input",{ref:il,type:"text",value:un.projectName,onChange:a=>{Jo(r=>({...r,projectName:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),ac()):a.key==="Escape"&&(a.preventDefault(),oc())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_pcb_project",autoFocus:!0}),un.projectName&&(()=>{const a=un.projectName.match(/[^a-zA-Z0-9_-]/g);if(a){const r=[...new Set(a)];return i.jsxs("div",{style:{marginBottom:"12px",padding:"6px 10px",background:"#3a1f1f",border:"1px solid #a44",borderRadius:4,fontSize:"12px",color:"#ffaaaa"},children:["Invalid characters: ",r.map(p=>`"${p}"`).join(", "),". Only letters, numbers, underscore (_), and hyphen (-) are allowed."]})}return null})(),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:un.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:un.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Vd,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),un.projectName&&un.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"Project will be created at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[un.locationPath,"/",un.projectName,"/project.json"]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:oc,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:ac,disabled:!un.projectName.trim()||!un.locationHandle,style:{padding:"8px 16px",background:!un.projectName.trim()||!un.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!un.projectName.trim()||!un.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!un.projectName.trim()||!un.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!un.projectName.trim()||!un.locationHandle?.6:1},children:"Create"})]})]})}),Qt.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10002},onClick:a=>{a.target===a.currentTarget&&sc()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Save As"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"File Name:"}),i.jsx("input",{ref:wa,type:"text",value:Qt.filename,onChange:a=>{Ks(r=>({...r,filename:a.target.value}))},onKeyDown:a=>{a.key==="Enter"?(a.preventDefault(),ed()):a.key==="Escape"&&(a.preventDefault(),sc())},style:{width:"100%",padding:"8px 12px",marginBottom:"8px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},placeholder:"e.g., my_project.json",autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Location:"}),i.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[i.jsx("input",{type:"text",value:Qt.locationPath||"Not selected",readOnly:!0,style:{flex:1,padding:"8px 12px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:Qt.locationPath?"#f2f2f2":"#888",fontSize:"14px",cursor:"not-allowed"},placeholder:"Select a location..."}),i.jsx("button",{onClick:Jc,style:{padding:"8px 16px",background:"#555",color:"#f2f2f2",border:"1px solid #666",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:"Browse..."})]}),Qt.filename&&Qt.locationPath&&i.jsxs("div",{style:{marginBottom:"20px",padding:"8px 12px",background:"#1a1a1f",border:"1px solid #333",borderRadius:6,fontSize:"12px",color:"#aaa",fontFamily:"monospace"},children:[i.jsx("div",{style:{marginBottom:"4px",color:"#888"},children:"File will be saved at:"}),i.jsxs("div",{style:{color:"#4CAF50"},children:[Qt.locationPath,"/",Qt.filename.endsWith(".json")?Qt.filename:`${Qt.filename}.json`]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:sc,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:ed,disabled:!Qt.filename.trim()||!Qt.locationHandle,style:{padding:"8px 16px",background:!Qt.filename.trim()||!Qt.locationHandle?"#555":"#4CAF50",color:"#fff",border:"1px solid "+(!Qt.filename.trim()||!Qt.locationHandle?"#666":"#45a049"),borderRadius:6,cursor:!Qt.filename.trim()||!Qt.locationHandle?"not-allowed":"pointer",fontSize:"14px",fontWeight:600,opacity:!Qt.filename.trim()||!Qt.locationHandle?.6:1},children:"Save"})]})]})}),i.jsx(gx,{visible:Bc.visible,title:Bc.title,message:Bc.message,onClose:()=>Qs({visible:!1,title:"",message:""})}),i.jsx(vx,{visible:Pd,dimensions:Gr,onSave:a=>{Ud(a),localStorage.setItem("boardDimensions",JSON.stringify(a))},onClose:()=>eo(!1)}),vo.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&Wa({visible:!1,size:6})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Set Size"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Size (pixels):"}),i.jsx("input",{ref:Ni,type:"number",min:"1",max:"99",value:vo.size,onChange:a=>{const r=parseInt(a.target.value)||1,p=Math.max(1,Math.min(99,r));Wa(x=>({...x,size:p}))},onKeyDown:a=>{if(a.key==="Enter"?ec():a.key==="Escape"&&Wa({visible:!1,size:6}),a.key.length===1&&/[0-9]/.test(a.key)){const r=vo.size.toString();r.length>=2&&Ni.current?.selectionStart===Ni.current?.selectionEnd&&Ni.current?.selectionStart===r.length&&a.preventDefault()}},onInput:a=>{const r=a.target,p=r.value;if(p.length>2){r.value=p.slice(0,2);const x=parseInt(r.value)||1;Wa(v=>({...v,size:Math.max(1,Math.min(99,x))}))}},style:{width:"100%",padding:"8px 12px",marginBottom:"16px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Or select from list:"}),i.jsxs("select",{value:[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].includes(vo.size)?vo.size:"",onChange:a=>{const r=parseInt(a.target.value);!isNaN(r)&&r>0&&Wa(p=>({...p,size:r}))},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},children:[i.jsx("option",{value:"",style:{background:"#1f1f24",color:"#f2f2f2"},children:"-- Select --"}),[2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32].map(a=>i.jsxs("option",{value:a,style:{background:"#1f1f24",color:"#f2f2f2"},children:[a," pixels"]},a))]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>Wa({visible:!1,size:6}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:ec,style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Ur.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10003},onClick:a=>{a.target===a.currentTarget&&$a({visible:!1,interval:5})},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"300px",maxWidth:"400px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Auto Save"}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:Ur.interval===null?"disable":(Ur.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")$a({visible:!0,interval:null});else{const p=parseFloat(r);!isNaN(p)&&p>0&&$a({visible:!0,interval:p})}},style:{width:"100%",padding:"8px 12px",marginBottom:"20px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"}),i.jsx("option",{value:"disable",style:{background:"#1f1f24",color:"#f2f2f2"},children:"Disable"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:()=>$a({visible:!1,interval:5}),style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Cancel"}),i.jsx("button",{onClick:()=>Fc(Ur.interval,!1),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Apply"})]})]})}),Qo.visible&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10004},onClick:a=>{a.target===a.currentTarget&&tc()},children:i.jsxs("div",{style:{backgroundColor:"#2b2b31",borderRadius:8,padding:"24px",minWidth:"400px",maxWidth:"500px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",border:"1px solid #1f1f24"},onClick:a=>a.stopPropagation(),children:[i.jsx("h2",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:600,color:"#f2f2f2"},children:"Enable Auto Save?"}),i.jsx("p",{style:{margin:"0 0 20px 0",fontSize:"14px",color:"#e0e0e0",lineHeight:"1.5"},children:"We recommend enabling Auto Save to automatically save your project at regular intervals. This helps protect your work from accidental loss."}),i.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#e0e0e0",fontWeight:500},children:"Select time interval:"}),i.jsxs("select",{value:Qo.interval===null?"disable":(Qo.interval||5).toString(),onChange:a=>{const r=a.target.value;if(r==="disable")Ll({...Qo,interval:null});else{const p=parseFloat(r);!isNaN(p)&&p>0&&Ll({...Qo,interval:p})}},style:{width:"100%",padding:"8px 12px",marginBottom:"24px",background:"#1f1f24",border:"1px solid #444",borderRadius:6,color:"#f2f2f2",fontSize:"14px"},autoFocus:!0,children:[i.jsx("option",{value:"1",style:{background:"#1f1f24",color:"#f2f2f2"},children:"1 minute"}),i.jsx("option",{value:"5",style:{background:"#1f1f24",color:"#f2f2f2"},children:"5 minutes"}),i.jsx("option",{value:"10",style:{background:"#1f1f24",color:"#f2f2f2"},children:"10 minutes"}),i.jsx("option",{value:"20",style:{background:"#1f1f24",color:"#f2f2f2"},children:"20 minutes"}),i.jsx("option",{value:"30",style:{background:"#1f1f24",color:"#f2f2f2"},children:"30 minutes"})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[i.jsx("button",{onClick:tc,style:{padding:"8px 16px",background:"#444",color:"#f2f2f2",border:"1px solid #555",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:500},children:"Skip"}),i.jsx("button",{onClick:()=>Fc(Qo.interval,!0),style:{padding:"8px 16px",background:"#4CAF50",color:"#fff",border:"1px solid #45a049",borderRadius:6,cursor:"pointer",fontSize:"14px",fontWeight:600},children:"Enable Auto Save"})]})]})})]})}Vg.createRoot(document.getElementById("root")).render(i.jsx(w.StrictMode,{children:i.jsx(Hx,{})}));
